<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: overmap_special Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classovermap__special.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classovermap__special-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">overmap_special Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac0fbdf042ba9add6476351a4b73ad57c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#ac0fbdf042ba9add6476351a4b73ad57c">get_terrain_at</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p) const</td></tr>
<tr class="memdesc:ac0fbdf042ba9add6476351a4b73ad57c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns terrain at the given point.  <a href="classovermap__special.html#ac0fbdf042ba9add6476351a4b73ad57c">More...</a><br /></td></tr>
<tr class="separator:ac0fbdf042ba9add6476351a4b73ad57c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6704ea98e39da0c6afe777bad4ecb918"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a6704ea98e39da0c6afe777bad4ecb918">requires_city</a> () const</td></tr>
<tr class="separator:a6704ea98e39da0c6afe777bad4ecb918"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1850aba02bfbfa00e6f9aa5258a5fb8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#ae1850aba02bfbfa00e6f9aa5258a5fb8">can_belong_to_city</a> (const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;p, const <a class="el" href="structcity.html">city</a> &amp;cit) const</td></tr>
<tr class="separator:ae1850aba02bfbfa00e6f9aa5258a5fb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83486754533fc6f2c00a2911c74565b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a83486754533fc6f2c00a2911c74565b0">load</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;src)</td></tr>
<tr class="separator:a83486754533fc6f2c00a2911c74565b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b8ba71ff75979448c28c73be39d8292"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a6b8ba71ff75979448c28c73be39d8292">finalize</a> ()</td></tr>
<tr class="separator:a6b8ba71ff75979448c28c73be39d8292"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954719e93bfe3809bcfa0e8ed4e1275f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a954719e93bfe3809bcfa0e8ed4e1275f">check</a> () const</td></tr>
<tr class="separator:a954719e93bfe3809bcfa0e8ed4e1275f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aae533ac4ea687db241db7619f6b318f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="omdata_8h.html#aa7964d871c74fa759b358081855b6e24">overmap_special_id</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#aae533ac4ea687db241db7619f6b318f9">id</a></td></tr>
<tr class="separator:aae533ac4ea687db241db7619f6b318f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabbbfdd7e92792fa9f5a910cc489edc3"><td class="memItemLeft" align="right" valign="top">std::list&lt; <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a></td></tr>
<tr class="separator:aabbbfdd7e92792fa9f5a910cc489edc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae327c6f94bdf3a60a55db9abedf11911"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structovermap__special__connection.html">overmap_special_connection</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#ae327c6f94bdf3a60a55db9abedf11911">connections</a></td></tr>
<tr class="separator:ae327c6f94bdf3a60a55db9abedf11911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49ecbf908d6545a3f7454a103048f8bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a49ecbf908d6545a3f7454a103048f8bc">city_size</a> { 0, INT_MAX }</td></tr>
<tr class="separator:a49ecbf908d6545a3f7454a103048f8bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39eb68a5ef8c9a220e27fe2a969c5d96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a39eb68a5ef8c9a220e27fe2a969c5d96">city_distance</a> { 0, INT_MAX }</td></tr>
<tr class="separator:a39eb68a5ef8c9a220e27fe2a969c5d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa58275c72ef065ff91c23268e18d9e22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#aa58275c72ef065ff91c23268e18d9e22">occurrences</a></td></tr>
<tr class="separator:aa58275c72ef065ff91c23268e18d9e22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7f2321e8e0d24350f7328e690deaa1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#abe7f2321e8e0d24350f7328e690deaa1">rotatable</a> = true</td></tr>
<tr class="separator:abe7f2321e8e0d24350f7328e690deaa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b2b24776768f1bf41d665f04d3033c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structovermap__special__spawns.html">overmap_special_spawns</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a9b2b24776768f1bf41d665f04d3033c3">spawns</a></td></tr>
<tr class="separator:a9b2b24776768f1bf41d665f04d3033c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a366bdd7f56c0b5b1feb53b65eadf6f49"><td class="memItemLeft" align="right" valign="top">std::set&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a366bdd7f56c0b5b1feb53b65eadf6f49">flags</a></td></tr>
<tr class="separator:a366bdd7f56c0b5b1feb53b65eadf6f49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92698f4f34054bbac00be338f3b5d126"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">was_loaded</a> = false</td></tr>
<tr class="separator:a92698f4f34054bbac00be338f3b5d126"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3f2650bddfe643cf175487d4b4e2d86d"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="type__id_8h.html#a193c6fac4d30a74533eda3e6bbf50929">overmap_location_id</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">default_locations</a></td></tr>
<tr class="separator:a3f2650bddfe643cf175487d4b4e2d86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00076">76</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="ae1850aba02bfbfa00e6f9aa5258a5fb8" name="ae1850aba02bfbfa00e6f9aa5258a5fb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1850aba02bfbfa00e6f9aa5258a5fb8">&#9670;&nbsp;</a></span>can_belong_to_city()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool overmap_special::can_belong_to_city </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a7158e1dfb1167d881e6ab128825e89a1">tripoint_om_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structcity.html">city</a> &amp;&#160;</td>
          <td class="paramname"><em>cit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>whether the special at specified tripoint can belong to the specified city. </dd></dl>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l00957">957</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>{</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classovermap__special.html#a6704ea98e39da0c6afe777bad4ecb918">requires_city</a>() ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    <span class="keywordflow">if</span>( !cit || !<a class="code hl_variable" href="classovermap__special.html#a49ecbf908d6545a3f7454a103048f8bc">city_size</a>.contains( cit.<a class="code hl_variable" href="structcity.html#ac1fd78a411cf6f43667077b7c907d8ef">size</a> ) ) {</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classovermap__special.html#a39eb68a5ef8c9a220e27fe2a969c5d96">city_distance</a>.contains( cit.<a class="code hl_function" href="structcity.html#a4ca5744f3bcef5d822a129364a34c5d0">get_distance_from</a>( p ) );</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>}</div>
<div class="ttc" id="aclassovermap__special_html_a39eb68a5ef8c9a220e27fe2a969c5d96"><div class="ttname"><a href="classovermap__special.html#a39eb68a5ef8c9a220e27fe2a969c5d96">overmap_special::city_distance</a></div><div class="ttdeci">numeric_interval&lt; int &gt; city_distance</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00091">overmap_special.h:91</a></div></div>
<div class="ttc" id="aclassovermap__special_html_a49ecbf908d6545a3f7454a103048f8bc"><div class="ttname"><a href="classovermap__special.html#a49ecbf908d6545a3f7454a103048f8bc">overmap_special::city_size</a></div><div class="ttdeci">numeric_interval&lt; int &gt; city_size</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00090">overmap_special.h:90</a></div></div>
<div class="ttc" id="aclassovermap__special_html_a6704ea98e39da0c6afe777bad4ecb918"><div class="ttname"><a href="classovermap__special.html#a6704ea98e39da0c6afe777bad4ecb918">overmap_special::requires_city</a></div><div class="ttdeci">bool requires_city() const</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00952">overmap.cpp:952</a></div></div>
<div class="ttc" id="astructcity_html_a4ca5744f3bcef5d822a129364a34c5d0"><div class="ttname"><a href="structcity.html#a4ca5744f3bcef5d822a129364a34c5d0">city::get_distance_from</a></div><div class="ttdeci">int get_distance_from(const tripoint_om_omt &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00229">overmap.cpp:229</a></div></div>
<div class="ttc" id="astructcity_html_ac1fd78a411cf6f43667077b7c907d8ef"><div class="ttname"><a href="structcity.html#ac1fd78a411cf6f43667077b7c907d8ef">city::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00058">overmap.h:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap__special_8h_source.html#l00091">city_distance</a>, <a class="el" href="overmap__special_8h_source.html#l00090">city_size</a>, <a class="el" href="overmap_8cpp_source.html#l00229">city::get_distance_from()</a>, <a class="el" href="overmap_8cpp_source.html#l00952">requires_city()</a>, and <a class="el" href="overmap_8h_source.html#l00058">city::size</a>.</p>

</div>
</div>
<a id="a954719e93bfe3809bcfa0e8ed4e1275f" name="a954719e93bfe3809bcfa0e8ed4e1275f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954719e93bfe3809bcfa0e8ed4e1275f">&#9670;&nbsp;</a></span>check()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void overmap_special::check </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l01056">1056</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>{</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    std::set&lt;oter_id&gt; invalid_terrains;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    std::set&lt;tripoint&gt; points;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span> </div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a> ) {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;oter = elem.terrain;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span> </div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        <span class="keywordflow">if</span>( !oter.is_valid() ) {</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            <span class="keywordflow">if</span>( invalid_terrains.count( oter.id() ) == 0 ) {</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                invalid_terrains.insert( oter.id() );</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, terrain \&quot;%s\&quot; is invalid.&quot;</span>,</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                          <span class="keywordtype">id</span>.c_str(), oter.c_str() );</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>            }</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        }</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span> </div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;pos = elem.p;</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        <span class="keywordflow">if</span>( points.count( pos ) &gt; 0 ) {</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, point [%d,%d,%d] is duplicated.&quot;</span>,</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>                      <span class="keywordtype">id</span>.c_str(), pos.x, pos.y, pos.z );</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            points.insert( pos );</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        }</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span> </div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>        <span class="keywordflow">if</span>( elem.locations.empty() ) {</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, no location is defined for point [%d,%d,%d] or the overall special.&quot;</span>,</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                      <span class="keywordtype">id</span>.c_str(), pos.x, pos.y, pos.z );</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        }</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span> </div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;l : elem.locations ) {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            <span class="keywordflow">if</span>( !l.is_valid() ) {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, point [%d,%d,%d], location \&quot;%s\&quot; is invalid.&quot;</span>,</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                          <span class="keywordtype">id</span>.c_str(), pos.x, pos.y, pos.z, l.c_str() );</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>    }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classovermap__special.html#ae327c6f94bdf3a60a55db9abedf11911">connections</a> ) {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;oter = <a class="code hl_function" href="classovermap__special.html#ac0fbdf042ba9add6476351a4b73ad57c">get_terrain_at</a>( elem.p );</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>        <span class="keywordflow">if</span>( !elem.terrain ) {</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, connection [%d,%d,%d] doesn&#39;t have a terrain.&quot;</span>,</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>                      <span class="keywordtype">id</span>.c_str(), elem.p.x, elem.p.y, elem.p.z );</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !elem.existing &amp;&amp; !elem.terrain-&gt;has_flag( <a class="code hl_enumvalue" href="omdata_8h.html#afaf721417ebfe396111f8f48b690ac4ba055af6e95c02cf9bd634846fd3943de6">line_drawing</a> ) ) {</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, connection [%d,%d,%d] \&quot;%s\&quot; isn&#39;t drawn with lines.&quot;</span>,</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>                      <span class="keywordtype">id</span>.c_str(), elem.p.x, elem.p.y, elem.p.z, elem.terrain.c_str() );</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( oter.terrain &amp;&amp; !oter.terrain-&gt;type_is( elem.terrain ) ) {</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, connection [%d,%d,%d] overwrites \&quot;%s\&quot;.&quot;</span>,</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                      <span class="keywordtype">id</span>.c_str(), elem.p.x, elem.p.y, elem.p.z, oter.terrain.c_str() );</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        }</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span> </div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>        <span class="keywordflow">if</span>( elem.from ) {</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>            <span class="comment">// The only supported directions are north/east/south/west</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            <span class="comment">// as those are the four directions that overmap connections</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            <span class="comment">// can be made in. If the direction we figured out wasn&#39;t</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <span class="comment">// one of those, warn the user/developer.</span></div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            <span class="keyword">const</span> <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> calculated_direction = <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( *elem.from, elem.p );</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>            <span class="keywordflow">switch</span>( calculated_direction ) {</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a>:</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a>:</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a>:</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a>:</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>                    <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;In overmap special \&quot;%s\&quot;, connection [%d,%d,%d] is not directly north, east, south or west of the defined \&quot;from\&quot; [%d,%d,%d].&quot;</span>,</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                              <span class="keywordtype">id</span>.c_str(), elem.p.x, elem.p.y, elem.p.z, elem.from-&gt;x, elem.from-&gt;y, elem.from-&gt;z );</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>            }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        }</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    }</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>}</div>
<div class="ttc" id="aclassovermap__special_html_aabbbfdd7e92792fa9f5a910cc489edc3"><div class="ttname"><a href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">overmap_special::terrains</a></div><div class="ttdeci">std::list&lt; overmap_special_terrain &gt; terrains</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00087">overmap_special.h:87</a></div></div>
<div class="ttc" id="aclassovermap__special_html_ac0fbdf042ba9add6476351a4b73ad57c"><div class="ttname"><a href="classovermap__special.html#ac0fbdf042ba9add6476351a4b73ad57c">overmap_special::get_terrain_at</a></div><div class="ttdeci">const overmap_special_terrain &amp; get_terrain_at(const tripoint &amp;p) const</div><div class="ttdoc">Returns terrain at the given point.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00939">overmap.cpp:939</a></div></div>
<div class="ttc" id="aclassovermap__special_html_ae327c6f94bdf3a60a55db9abedf11911"><div class="ttname"><a href="classovermap__special.html#ae327c6f94bdf3a60a55db9abedf11911">overmap_special::connections</a></div><div class="ttdeci">std::vector&lt; overmap_special_connection &gt; connections</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00088">overmap_special.h:88</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a00be0762df7b46da965e55caffac53db"><div class="ttname"><a href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00540">coordinates.h:540</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a></div><div class="ttdeci">@ NORTH</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a></div><div class="ttdeci">@ EAST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a></div><div class="ttdeci">@ WEST</div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a></div><div class="ttdeci">@ SOUTH</div></div>
<div class="ttc" id="aomdata_8h_html_afaf721417ebfe396111f8f48b690ac4ba055af6e95c02cf9bd634846fd3943de6"><div class="ttname"><a href="omdata_8h.html#afaf721417ebfe396111f8f48b690ac4ba055af6e95c02cf9bd634846fd3943de6">line_drawing</a></div><div class="ttdeci">@ line_drawing</div><div class="ttdef"><b>Definition:</b> <a href="omdata_8h_source.html#l00095">omdata.h:95</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap__special_8h_source.html#l00088">connections</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="coordinates_8h_source.html#l00540">direction_from()</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">EAST</a>, <a class="el" href="overmap_8cpp_source.html#l00939">get_terrain_at()</a>, <a class="el" href="omdata_8h_source.html#l00095">line_drawing</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">NORTH</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">SOUTH</a>, <a class="el" href="overmap__special_8h_source.html#l00087">terrains</a>, and <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">WEST</a>.</p>

</div>
</div>
<a id="a6b8ba71ff75979448c28c73be39d8292" name="a6b8ba71ff75979448c28c73be39d8292"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b8ba71ff75979448c28c73be39d8292">&#9670;&nbsp;</a></span>finalize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void overmap_special::finalize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l00998">998</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>{</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <span class="comment">// If the special has default locations, then add those to the locations</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    <span class="comment">// of each of the terrains IF the terrain has no locations already.</span></div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">default_locations</a>.empty() ) {</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;t : <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a> ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            <span class="keywordflow">if</span>( t.locations.empty() ) {</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                t.locations.insert( <a class="code hl_variable" href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">default_locations</a>.begin(), <a class="code hl_variable" href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">default_locations</a>.end() );</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>            }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>        }</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    }</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span> </div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : <a class="code hl_variable" href="classovermap__special.html#ae327c6f94bdf3a60a55db9abedf11911">connections</a> ) {</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;oter = <a class="code hl_function" href="classovermap__special.html#ac0fbdf042ba9add6476351a4b73ad57c">get_terrain_at</a>( elem.p );</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>        <span class="keywordflow">if</span>( !elem.terrain &amp;&amp; oter.terrain ) {</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            elem.terrain = oter.terrain-&gt;get_type_id();    <span class="comment">// Defaulted.</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>        }</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span> </div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        <span class="comment">// If the connection type hasn&#39;t been specified, we&#39;ll guess for them.</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="comment">// The guess isn&#39;t always right (hence guessing) in the case where</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        <span class="comment">// multiple connections types can be made on a single location type,</span></div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>        <span class="comment">// e.g. both roads and forest trails can be placed on &quot;forest&quot; locations.</span></div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        <span class="keywordflow">if</span>( elem.connection.is_null() ) {</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            elem.connection = <a class="code hl_function" href="namespaceovermap__connections.html#af90b58fed265f687f61ea7ebddd57ae1">overmap_connections::guess_for</a>( elem.terrain );</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        <span class="comment">// If the connection has a &quot;from&quot; hint specified, then figure out what the</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>        <span class="comment">// resulting direction from the hinted location to the connection point is,</span></div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        <span class="comment">// and use that as the intial direction to be passed off to the connection</span></div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <span class="comment">// building code.</span></div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>        <span class="keywordflow">if</span>( elem.from ) {</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="keyword">const</span> <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> calculated_direction = <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( *elem.from, elem.p );</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="keywordflow">switch</span>( calculated_direction ) {</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">direction::NORTH</a>:</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                    elem.initial_dir = <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca8d8d1437907bca79900ac5f0ea1f5c73">om_direction::type::north</a>;</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">direction::EAST</a>:</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>                    elem.initial_dir = <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca320381dbf7cd2f31c04baa6b36e1c682">om_direction::type::east</a>;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">direction::SOUTH</a>:</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>                    elem.initial_dir = <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca50fd76e33fe5b9617c5ca99008af8904">om_direction::type::south</a>;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">direction::WEST</a>:</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>                    elem.initial_dir = <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cada4f0053a5c13882268852ae2da2e466">om_direction::type::west</a>;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>                <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>                    <span class="comment">// The only supported directions are north/east/south/west</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>                    <span class="comment">// as those are the four directions that overmap connections</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                    <span class="comment">// can be made in. If the direction we figured out wasn&#39;t</span></div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                    <span class="comment">// one of those, just set this as invalid. We&#39;ll provide</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                    <span class="comment">// a warning to the user/developer in overmap_special::check().</span></div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>                    elem.initial_dir = <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::type::invalid</a>;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>            }</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>        }</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    }</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>}</div>
<div class="ttc" id="aclassovermap__special_html_a3f2650bddfe643cf175487d4b4e2d86d"><div class="ttname"><a href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">overmap_special::default_locations</a></div><div class="ttdeci">std::set&lt; overmap_location_id &gt; default_locations</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00105">overmap_special.h:105</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7ca320381dbf7cd2f31c04baa6b36e1c682"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca320381dbf7cd2f31c04baa6b36e1c682">om_direction::type::east</a></div><div class="ttdeci">@ east</div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7ca50fd76e33fe5b9617c5ca99008af8904"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca50fd76e33fe5b9617c5ca99008af8904">om_direction::type::south</a></div><div class="ttdeci">@ south</div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7ca8d8d1437907bca79900ac5f0ea1f5c73"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca8d8d1437907bca79900ac5f0ea1f5c73">om_direction::type::north</a></div><div class="ttdeci">@ north</div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7cada4f0053a5c13882268852ae2da2e466"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cada4f0053a5c13882268852ae2da2e466">om_direction::type::west</a></div><div class="ttdeci">@ west</div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::type::invalid</a></div><div class="ttdeci">@ invalid</div></div>
<div class="ttc" id="anamespaceovermap__connections_html_af90b58fed265f687f61ea7ebddd57ae1"><div class="ttname"><a href="namespaceovermap__connections.html#af90b58fed265f687f61ea7ebddd57ae1">overmap_connections::guess_for</a></div><div class="ttdeci">overmap_connection_id guess_for(const oter_type_id &amp;oter_id)</div><div class="ttdef"><b>Definition:</b> <a href="overmap__connection_8cpp_source.html#l00164">overmap_connection.cpp:164</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap__special_8h_source.html#l00088">connections</a>, <a class="el" href="overmap__special_8h_source.html#l00105">default_locations</a>, <a class="el" href="coordinates_8h_source.html#l00540">direction_from()</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a45ac78bf3d4882ac520f4e7fb08d55c5">EAST</a>, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca320381dbf7cd2f31c04baa6b36e1c682">om_direction::east</a>, <a class="el" href="overmap_8cpp_source.html#l00939">get_terrain_at()</a>, <a class="el" href="overmap__connection_8cpp_source.html#l00164">overmap_connections::guess_for()</a>, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::invalid</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a2bf8f791695c70efa9c14e6f1c326403">NORTH</a>, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca8d8d1437907bca79900ac5f0ea1f5c73">om_direction::north</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a96e44fa82e5a5263fb92337be422d3eb">SOUTH</a>, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7ca50fd76e33fe5b9617c5ca99008af8904">om_direction::south</a>, <a class="el" href="overmap__special_8h_source.html#l00087">terrains</a>, <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3a83c9f5692281bf59471b13dfddb3af91">WEST</a>, and <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cada4f0053a5c13882268852ae2da2e466">om_direction::west</a>.</p>

</div>
</div>
<a id="ac0fbdf042ba9add6476351a4b73ad57c" name="ac0fbdf042ba9add6476351a4b73ad57c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0fbdf042ba9add6476351a4b73ad57c">&#9670;&nbsp;</a></span>get_terrain_at()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp; overmap_special::get_terrain_at </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns terrain at the given point. </p>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l00939">939</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>{</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>    <span class="keyword">const</span> <span class="keyword">auto</span> iter = std::find_if( <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a>.begin(),</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>    <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a>.end(), [ &amp;p ]( <span class="keyword">const</span> <a class="code hl_struct" href="structovermap__special__terrain.html">overmap_special_terrain</a> &amp; elem ) {</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        return elem.p == p;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    } );</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    <span class="keywordflow">if</span>( iter == <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a>.end() ) {</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_struct" href="structovermap__special__terrain.html">overmap_special_terrain</a> null_terrain{};</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        <span class="keywordflow">return</span> null_terrain;</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    }</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keywordflow">return</span> *iter;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>}</div>
<div class="ttc" id="astructovermap__special__terrain_html"><div class="ttname"><a href="structovermap__special__terrain.html">overmap_special_terrain</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00048">overmap_special.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap__special_8h_source.html#l00087">terrains</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l01056">check()</a>, and <a class="el" href="overmap_8cpp_source.html#l00998">finalize()</a>.</p>

</div>
</div>
<a id="a83486754533fc6f2c00a2911c74565b0" name="a83486754533fc6f2c00a2911c74565b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83486754533fc6f2c00a2911c74565b0">&#9670;&nbsp;</a></span>load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void overmap_special::load </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l00968">968</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>{</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> strict = src == <span class="stringliteral">&quot;dda&quot;</span>;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="comment">// city_building is just an alias of overmap_special</span></div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="comment">// TODO: This comparison is a hack. Separate them properly.</span></div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_special = jo.<a class="code hl_function" href="classJsonObject.html#a96b6d1b9cf7bda4fc9cd177a99e0631c">get_string</a>( <span class="stringliteral">&quot;type&quot;</span>, <span class="stringliteral">&quot;&quot;</span> ) == <span class="stringliteral">&quot;overmap_special&quot;</span>;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span> </div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <a class="code hl_function" href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a>( jo, <a class="code hl_variable" href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">was_loaded</a>, <span class="stringliteral">&quot;overmaps&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#aabbbfdd7e92792fa9f5a910cc489edc3">terrains</a> );</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    <a class="code hl_function" href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a>( jo, <a class="code hl_variable" href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">was_loaded</a>, <span class="stringliteral">&quot;locations&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#a3f2650bddfe643cf175487d4b4e2d86d">default_locations</a> );</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span> </div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    <span class="keywordflow">if</span>( is_special ) {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        <a class="code hl_function" href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a>( jo, <a class="code hl_variable" href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">was_loaded</a>, <span class="stringliteral">&quot;occurrences&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#aa58275c72ef065ff91c23268e18d9e22">occurrences</a> );</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span> </div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        <a class="code hl_function" href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a>( jo, <a class="code hl_variable" href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">was_loaded</a>, <span class="stringliteral">&quot;connections&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#ae327c6f94bdf3a60a55db9abedf11911">connections</a> );</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        <a class="code hl_function" href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a>( jo, <span class="stringliteral">&quot;city_sizes&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#a49ecbf908d6545a3f7454a103048f8bc">city_size</a>, strict );</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        <a class="code hl_function" href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a>( jo, <span class="stringliteral">&quot;city_distance&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#a39eb68a5ef8c9a220e27fe2a969c5d96">city_distance</a>, strict );</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    }</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <a class="code hl_function" href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a>( jo, <span class="stringliteral">&quot;spawns&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#a9b2b24776768f1bf41d665f04d3033c3">spawns</a>, strict );</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span> </div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <a class="code hl_function" href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a>( jo, <span class="stringliteral">&quot;rotate&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#abe7f2321e8e0d24350f7328e690deaa1">rotatable</a>, strict );</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    <a class="code hl_function" href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a>( jo, <span class="stringliteral">&quot;flags&quot;</span>, <a class="code hl_variable" href="classovermap__special.html#a366bdd7f56c0b5b1feb53b65eadf6f49">flags</a>, strict );</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span> </div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="comment">// Another hack</span></div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    <span class="keywordflow">if</span>( !is_special ) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        <a class="code hl_variable" href="classovermap__special.html#a366bdd7f56c0b5b1feb53b65eadf6f49">flags</a>.insert( <span class="stringliteral">&quot;ELECTRIC_GRID&quot;</span> );</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    }</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>}</div>
<div class="ttc" id="aassign_8h_html_ac353926c625eb31f78ef7534277c5aaf"><div class="ttname"><a href="assign_8h.html#ac353926c625eb31f78ef7534277c5aaf">assign</a></div><div class="ttdeci">bool assign(const JsonObject &amp;jo, const std::string &amp;name, T &amp;val, bool strict=false, T lo=std::numeric_limits&lt; T &gt;::lowest(), T hi=std::numeric_limits&lt; T &gt;::max())</div><div class="ttdef"><b>Definition:</b> <a href="assign_8h_source.html#l00054">assign.h:54</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a96b6d1b9cf7bda4fc9cd177a99e0631c"><div class="ttname"><a href="classJsonObject.html#a96b6d1b9cf7bda4fc9cd177a99e0631c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00314">json.cpp:314</a></div></div>
<div class="ttc" id="aclassovermap__special_html_a366bdd7f56c0b5b1feb53b65eadf6f49"><div class="ttname"><a href="classovermap__special.html#a366bdd7f56c0b5b1feb53b65eadf6f49">overmap_special::flags</a></div><div class="ttdeci">std::set&lt; std::string &gt; flags</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00096">overmap_special.h:96</a></div></div>
<div class="ttc" id="aclassovermap__special_html_a92698f4f34054bbac00be338f3b5d126"><div class="ttname"><a href="classovermap__special.html#a92698f4f34054bbac00be338f3b5d126">overmap_special::was_loaded</a></div><div class="ttdeci">bool was_loaded</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00099">overmap_special.h:99</a></div></div>
<div class="ttc" id="aclassovermap__special_html_a9b2b24776768f1bf41d665f04d3033c3"><div class="ttname"><a href="classovermap__special.html#a9b2b24776768f1bf41d665f04d3033c3">overmap_special::spawns</a></div><div class="ttdeci">overmap_special_spawns spawns</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00095">overmap_special.h:95</a></div></div>
<div class="ttc" id="aclassovermap__special_html_aa58275c72ef065ff91c23268e18d9e22"><div class="ttname"><a href="classovermap__special.html#aa58275c72ef065ff91c23268e18d9e22">overmap_special::occurrences</a></div><div class="ttdeci">numeric_interval&lt; int &gt; occurrences</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00092">overmap_special.h:92</a></div></div>
<div class="ttc" id="aclassovermap__special_html_abe7f2321e8e0d24350f7328e690deaa1"><div class="ttname"><a href="classovermap__special.html#abe7f2321e8e0d24350f7328e690deaa1">overmap_special::rotatable</a></div><div class="ttdeci">bool rotatable</div><div class="ttdef"><b>Definition:</b> <a href="overmap__special_8h_source.html#l00094">overmap_special.h:94</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a0a177c754c5ba89ac6c543656b0652cc"><div class="ttname"><a href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a></div><div class="ttdeci">void mandatory(const JsonObject &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00586">generic_factory.h:586</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a6bc35b9738f0a0a68ccc6b4cfc7918f1"><div class="ttname"><a href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a></div><div class="ttdeci">void optional(const JsonObject &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00615">generic_factory.h:615</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="assign_8h_source.html#l00054">assign()</a>, <a class="el" href="overmap__special_8h_source.html#l00091">city_distance</a>, <a class="el" href="overmap__special_8h_source.html#l00090">city_size</a>, <a class="el" href="overmap__special_8h_source.html#l00088">connections</a>, <a class="el" href="overmap__special_8h_source.html#l00105">default_locations</a>, <a class="el" href="overmap__special_8h_source.html#l00096">flags</a>, <a class="el" href="json_8cpp_source.html#l00314">JsonObject::get_string()</a>, <a class="el" href="generic__factory_8h_source.html#l00586">mandatory()</a>, <a class="el" href="overmap__special_8h_source.html#l00092">occurrences</a>, <a class="el" href="generic__factory_8h_source.html#l00615">optional()</a>, <a class="el" href="overmap__special_8h_source.html#l00094">rotatable</a>, <a class="el" href="overmap__special_8h_source.html#l00095">spawns</a>, <a class="el" href="overmap__special_8h_source.html#l00087">terrains</a>, and <a class="el" href="overmap__special_8h_source.html#l00099">was_loaded</a>.</p>

</div>
</div>
<a id="a6704ea98e39da0c6afe777bad4ecb918" name="a6704ea98e39da0c6afe777bad4ecb918"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6704ea98e39da0c6afe777bad4ecb918">&#9670;&nbsp;</a></span>requires_city()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool overmap_special::requires_city </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>true if this special requires a city </dd></dl>

<p class="definition">Definition at line <a class="el" href="overmap_8cpp_source.html#l00952">952</a> of file <a class="el" href="overmap_8cpp_source.html">overmap.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>{</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classovermap__special.html#a49ecbf908d6545a3f7454a103048f8bc">city_size</a>.min &gt; 0 || <a class="code hl_variable" href="classovermap__special.html#a39eb68a5ef8c9a220e27fe2a969c5d96">city_distance</a>.max &lt; std::max( <a class="code hl_variable" href="game__constants_8h.html#a282f307f5d51bf229c829518b5ab9232">OMAPX</a>, <a class="code hl_variable" href="game__constants_8h.html#a19d4c597789235509b7ee6060543829e">OMAPY</a> );</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>}</div>
<div class="ttc" id="agame__constants_8h_html_a19d4c597789235509b7ee6060543829e"><div class="ttname"><a href="game__constants_8h.html#a19d4c597789235509b7ee6060543829e">OMAPY</a></div><div class="ttdeci">static constexpr int OMAPY</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00052">game_constants.h:52</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a282f307f5d51bf229c829518b5ab9232"><div class="ttname"><a href="game__constants_8h.html#a282f307f5d51bf229c829518b5ab9232">OMAPX</a></div><div class="ttdeci">static constexpr int OMAPX</div><div class="ttdoc">Size of the overmap.</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00051">game_constants.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="overmap__special_8h_source.html#l00091">city_distance</a>, <a class="el" href="overmap__special_8h_source.html#l00090">city_size</a>, <a class="el" href="game__constants_8h_source.html#l00051">OMAPX</a>, and <a class="el" href="game__constants_8h_source.html#l00052">OMAPY</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00957">can_belong_to_city()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a39eb68a5ef8c9a220e27fe2a969c5d96" name="a39eb68a5ef8c9a220e27fe2a969c5d96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39eb68a5ef8c9a220e27fe2a969c5d96">&#9670;&nbsp;</a></span>city_distance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt;int&gt; overmap_special::city_distance { 0, INT_MAX }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00091">91</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00957">can_belong_to_city()</a>, <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, and <a class="el" href="overmap_8cpp_source.html#l00952">requires_city()</a>.</p>

</div>
</div>
<a id="a49ecbf908d6545a3f7454a103048f8bc" name="a49ecbf908d6545a3f7454a103048f8bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49ecbf908d6545a3f7454a103048f8bc">&#9670;&nbsp;</a></span>city_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt;int&gt; overmap_special::city_size { 0, INT_MAX }</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00090">90</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00957">can_belong_to_city()</a>, <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, and <a class="el" href="overmap_8cpp_source.html#l00952">requires_city()</a>.</p>

</div>
</div>
<a id="ae327c6f94bdf3a60a55db9abedf11911" name="ae327c6f94bdf3a60a55db9abedf11911"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae327c6f94bdf3a60a55db9abedf11911">&#9670;&nbsp;</a></span>connections</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structovermap__special__connection.html">overmap_special_connection</a>&gt; overmap_special::connections</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00088">88</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l01056">check()</a>, <a class="el" href="overmap_8cpp_source.html#l00998">finalize()</a>, <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, <a class="el" href="overmap_8cpp_source.html#l04299">overmap::place_special()</a>, and <a class="el" href="overmap_8cpp_source.html#l04209">overmap::random_special_rotation()</a>.</p>

</div>
</div>
<a id="a3f2650bddfe643cf175487d4b4e2d86d" name="a3f2650bddfe643cf175487d4b4e2d86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f2650bddfe643cf175487d4b4e2d86d">&#9670;&nbsp;</a></span>default_locations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="type__id_8h.html#a193c6fac4d30a74533eda3e6bbf50929">overmap_location_id</a>&gt; overmap_special::default_locations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00105">105</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00998">finalize()</a>, and <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>.</p>

</div>
</div>
<a id="a366bdd7f56c0b5b1feb53b65eadf6f49" name="a366bdd7f56c0b5b1feb53b65eadf6f49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a366bdd7f56c0b5b1feb53b65eadf6f49">&#9670;&nbsp;</a></span>flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;std::string&gt; overmap_special::flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00096">96</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l04948">overmap_specials::create_building_from()</a>, <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, and <a class="el" href="overmap_8cpp_source.html#l04299">overmap::place_special()</a>.</p>

</div>
</div>
<a id="aae533ac4ea687db241db7619f6b318f9" name="aae533ac4ea687db241db7619f6b318f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae533ac4ea687db241db7619f6b318f9">&#9670;&nbsp;</a></span>id</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="omdata_8h.html#aa7964d871c74fa759b358081855b6e24">overmap_special_id</a> overmap_special::id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00086">86</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l04260">overmap::can_place_special()</a>, <a class="el" href="overmap_8cpp_source.html#l04948">overmap_specials::create_building_from()</a>, <a class="el" href="regional__settings_8cpp_source.html#l01015">city_settings::pick_house()</a>, <a class="el" href="regional__settings_8cpp_source.html#l01025">city_settings::pick_park()</a>, <a class="el" href="regional__settings_8cpp_source.html#l01020">city_settings::pick_shop()</a>, <a class="el" href="overmap_8cpp_source.html#l04299">overmap::place_special()</a>, <a class="el" href="overmap_8cpp_source.html#l04483">overmap::place_specials()</a>, and <a class="el" href="overmap__ui_8cpp_source.html#l01689">overmap_ui::place_ter_or_special()</a>.</p>

</div>
</div>
<a id="aa58275c72ef065ff91c23268e18d9e22" name="aa58275c72ef065ff91c23268e18d9e22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa58275c72ef065ff91c23268e18d9e22">&#9670;&nbsp;</a></span>occurrences</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structnumeric__interval.html">numeric_interval</a>&lt;int&gt; overmap_special::occurrences</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00092">92</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, and <a class="el" href="overmapbuffer_8cpp_source.html#l01586">overmapbuffer::place_special()</a>.</p>

</div>
</div>
<a id="abe7f2321e8e0d24350f7328e690deaa1" name="abe7f2321e8e0d24350f7328e690deaa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7f2321e8e0d24350f7328e690deaa1">&#9670;&nbsp;</a></span>rotatable</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool overmap_special::rotatable = true</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00094">94</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l01689">overmap_ui::place_ter_or_special()</a>, and <a class="el" href="overmap_8cpp_source.html#l04209">overmap::random_special_rotation()</a>.</p>

</div>
</div>
<a id="a9b2b24776768f1bf41d665f04d3033c3" name="a9b2b24776768f1bf41d665f04d3033c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b2b24776768f1bf41d665f04d3033c3">&#9670;&nbsp;</a></span>spawns</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structovermap__special__spawns.html">overmap_special_spawns</a> overmap_special::spawns</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00095">95</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, and <a class="el" href="overmap_8cpp_source.html#l04299">overmap::place_special()</a>.</p>

</div>
</div>
<a id="aabbbfdd7e92792fa9f5a910cc489edc3" name="aabbbfdd7e92792fa9f5a910cc489edc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabbbfdd7e92792fa9f5a910cc489edc3">&#9670;&nbsp;</a></span>terrains</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::list&lt;<a class="el" href="structovermap__special__terrain.html">overmap_special_terrain</a>&gt; overmap_special::terrains</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00087">87</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l04260">overmap::can_place_special()</a>, <a class="el" href="overmap_8cpp_source.html#l01056">check()</a>, <a class="el" href="overmap_8cpp_source.html#l04948">overmap_specials::create_building_from()</a>, <a class="el" href="overmap__ui_8cpp_source.html#l00778">overmap_ui::draw_ascii()</a>, <a class="el" href="overmap_8cpp_source.html#l00998">finalize()</a>, <a class="el" href="overmap_8cpp_source.html#l00939">get_terrain_at()</a>, <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>, <a class="el" href="overmap_8cpp_source.html#l04299">overmap::place_special()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01586">overmapbuffer::place_special()</a>, and <a class="el" href="overmap__ui_8cpp_source.html#l01689">overmap_ui::place_ter_or_special()</a>.</p>

</div>
</div>
<a id="a92698f4f34054bbac00be338f3b5d126" name="a92698f4f34054bbac00be338f3b5d126"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92698f4f34054bbac00be338f3b5d126">&#9670;&nbsp;</a></span>was_loaded</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool overmap_special::was_loaded = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="overmap__special_8h_source.html#l00099">99</a> of file <a class="el" href="overmap__special_8h_source.html">overmap_special.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00968">load()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="overmap__special_8h_source.html">overmap_special.h</a></li>
<li>src/<a class="el" href="overmap_8cpp_source.html">overmap.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classovermap__special.html">overmap_special</a></li>
    <li class="footer">Generated on Sat Jul 30 2022 11:33:20 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
