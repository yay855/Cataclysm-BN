<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/advanced_inv.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('advanced__inv_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">advanced_inv.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="advanced__inv_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="advanced__inv_8h.html">advanced_inv.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;initializer_list&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &lt;memory&gt;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;set&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="activity__actor_8h.html">activity_actor.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="auto__pickup_8h.html">auto_pickup.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="avatar_8h.html">avatar.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="cata__utility_8h.html">cata_utility.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="catacharset_8h.html">catacharset.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="colony_8h.html">colony.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="color_8h.html">color.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="debug_8h.html">debug.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="enums_8h.html">enums.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="examine__item__menu_8h.html">examine_item_menu.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="game__constants_8h.html">game_constants.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="ime_8h.html">ime.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="input_8h.html">input.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="inventory_8h.html">inventory.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#include &quot;<a class="code" href="item_8h.html">item.h</a>&quot;</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="preprocessor">#include &quot;<a class="code" href="item__category_8h.html">item_category.h</a>&quot;</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#include &quot;<a class="code" href="item__contents_8h.html">item_contents.h</a>&quot;</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="preprocessor">#include &quot;<a class="code" href="item__location_8h.html">item_location.h</a>&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="preprocessor">#include &quot;<a class="code" href="item__stack_8h.html">item_stack.h</a>&quot;</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="preprocessor">#include &quot;<a class="code" href="map_8h.html">map.h</a>&quot;</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="preprocessor">#include &quot;<a class="code" href="map__selector_8h.html">map_selector.h</a>&quot;</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="preprocessor">#include &quot;<a class="code" href="messages_8h.html">messages.h</a>&quot;</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span><span class="preprocessor">#include &quot;<a class="code" href="optional_8h.html">optional.h</a>&quot;</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="preprocessor">#include &quot;<a class="code" href="options_8h.html">options.h</a>&quot;</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="preprocessor">#include &quot;<a class="code" href="output_8h.html">output.h</a>&quot;</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="preprocessor">#include &quot;<a class="code" href="panels_8h.html">panels.h</a>&quot;</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="preprocessor">#include &quot;<a class="code" href="player_8h.html">player.h</a>&quot;</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="preprocessor">#include &quot;<a class="code" href="player__activity_8h.html">player_activity.h</a>&quot;</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="preprocessor">#include &quot;<a class="code" href="point_8h.html">point.h</a>&quot;</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span><span class="preprocessor">#include &quot;<a class="code" href="ret__val_8h.html">ret_val.h</a>&quot;</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="preprocessor">#include &quot;<a class="code" href="string__formatter_8h.html">string_formatter.h</a>&quot;</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span><span class="preprocessor">#include &quot;<a class="code" href="string__input__popup_8h.html">string_input_popup.h</a>&quot;</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span><span class="preprocessor">#include &quot;<a class="code" href="translations_8h.html">translations.h</a>&quot;</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="preprocessor">#include &quot;<a class="code" href="type__id_8h.html">type_id.h</a>&quot;</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span><span class="preprocessor">#include &quot;<a class="code" href="ui_8h.html">ui.h</a>&quot;</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="preprocessor">#include &quot;<a class="code" href="ui__manager_8h.html">ui_manager.h</a>&quot;</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span><span class="preprocessor">#include &quot;<a class="code" href="uistate_8h.html">uistate.h</a>&quot;</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="preprocessor">#include &quot;<a class="code" href="units_8h.html">units.h</a>&quot;</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span><span class="preprocessor">#include &quot;<a class="code" href="units__utility_8h.html">units_utility.h</a>&quot;</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="preprocessor">#include &quot;<a class="code" href="vehicle__selector_8h.html">vehicle_selector.h</a>&quot;</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="preprocessor">#if defined(__ANDROID__)</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="preprocessor">#   include &lt;SDL_keyboard.h&gt;</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">   64</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">activity_id</a> <a class="code hl_variable" href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">ACT_ADV_INVENTORY</a>( <span class="stringliteral">&quot;ACT_ADV_INVENTORY&quot;</span> );</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a4f7061d0eb9f1e0fd40f8543a9ea20a5">   65</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">activity_id</a> <a class="code hl_variable" href="advanced__inv_8cpp.html#a4f7061d0eb9f1e0fd40f8543a9ea20a5">ACT_WEAR</a>( <span class="stringliteral">&quot;ACT_WEAR&quot;</span> );</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aad53848ab2846f97f19789f86fe58e9c">   67</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="advanced__inv_8cpp.html#aad53848ab2846f97f19789f86fe58e9c">trait_DEBUG_STORAGE</a>( <span class="stringliteral">&quot;DEBUG_STORAGE&quot;</span> );</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a7ab81287b0b70f0bb56318bf67618fea">   69</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="advanced__inv_8cpp.html#a7ab81287b0b70f0bb56318bf67618fea">create_advanced_inv</a>()</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>{</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <a class="code hl_class" href="classadvanced__inventory.html">advanced_inventory</a> advinv;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    advinv.<a class="code hl_function" href="classadvanced__inventory.html#a3f1eaedb86e958387770e71ba02959f7">display</a>();</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>}</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81">   75</a></span><span class="keyword">enum</span> <a class="code hl_enumeration" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81">aim_exit</a> {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81ac402986eb0250f4c5807de5af70d1a36">   76</a></span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81ac402986eb0250f4c5807de5af70d1a36">exit_none</a> = 0,</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81a39c8e99d1c94aa8d99b30dd6d49c796f">   77</a></span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81a39c8e99d1c94aa8d99b30dd6d49c796f">exit_okay</a>,</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">   79</a></span>};</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span> </div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment">// *INDENT-OFF*</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a123ed91d66504a4fe000766fe7c11dc9">   82</a></span><a class="code hl_function" href="classadvanced__inventory.html#a123ed91d66504a4fe000766fe7c11dc9">advanced_inventory::advanced_inventory</a>()</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    : inCategoryMode( false )</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    , recalc( true )</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    , src( left )</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    , dest( <a class="code hl_enumvalue" href="namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">right</a> )</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    , filter_edit( false )</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>      <span class="comment">// panes don&#39;t need initialization, they are recalculated immediately</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    , <a class="code hl_enumvalue" href="pixel__minimap_8h.html#a5f62bf59e1051d11100e5fcc845aa612a192ba166b3957ab1020e9a72ea1b40ed">squares</a>( {</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        <span class="comment">//               pos in window</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 22, 2 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Inventory&quot;</span> ),          <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;IN&quot;</span> ),  <span class="stringliteral">&quot;I&quot;</span>, <span class="stringliteral">&quot;ITEMS_INVENTORY&quot;</span>, <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a>},</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 27, 3 ), <a class="code hl_variable" href="point_8h.html#acb82c7b237b74c17b506c0383e38b7aa">tripoint_south_west</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South West&quot;</span> ),         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;SW&quot;</span> ),  <span class="stringliteral">&quot;1&quot;</span>, <span class="stringliteral">&quot;ITEMS_SW&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a40d88a6328f744fd6d681c6640a2ffa2">AIM_WEST</a>},</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a52b14ded0abe632dc3019045a8609fc7">AIM_SOUTH</a>,     <a class="code hl_struct" href="structpoint.html">point</a>( 30, 3 ), <a class="code hl_variable" href="point_8h.html#ae0d4ab15dc375a3a436b745abaa6ed4b">tripoint_south</a>,      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South&quot;</span> ),              <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;S&quot;</span> ),   <span class="stringliteral">&quot;2&quot;</span>, <span class="stringliteral">&quot;ITEMS_S&quot;</span>,         <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a>},</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a37fc17ceb516deccf3480675eaa88bde">AIM_SOUTHEAST</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 33, 3 ), <a class="code hl_variable" href="point_8h.html#a5767887bb9dcb0ae61b2ab06979a1d1b">tripoint_south_east</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South East&quot;</span> ),         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;SE&quot;</span> ),  <span class="stringliteral">&quot;3&quot;</span>, <span class="stringliteral">&quot;ITEMS_SE&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a52b14ded0abe632dc3019045a8609fc7">AIM_SOUTH</a>},</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a40d88a6328f744fd6d681c6640a2ffa2">AIM_WEST</a>,      <a class="code hl_struct" href="structpoint.html">point</a>( 27, 2 ), <a class="code hl_variable" href="point_8h.html#abd7de5098b6f2a3e020cdc13cfc5c5ab">tripoint_west</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;West&quot;</span> ),               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;W&quot;</span> ),   <span class="stringliteral">&quot;4&quot;</span>, <span class="stringliteral">&quot;ITEMS_W&quot;</span>,         <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ab84bd7a0394c4e338d82be51601056f4">AIM_NORTHWEST</a>},</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a>,    <a class="code hl_struct" href="structpoint.html">point</a>( 30, 2 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Directly below you&quot;</span> ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;DN&quot;</span> ),  <span class="stringliteral">&quot;5&quot;</span>, <span class="stringliteral">&quot;ITEMS_CE&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a>},</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43aea5243b6bcc83cd05983fc2a53f882db">AIM_EAST</a>,      <a class="code hl_struct" href="structpoint.html">point</a>( 33, 2 ), <a class="code hl_variable" href="point_8h.html#ad388a59168c3ba4b7d9d921b052d1201">tripoint_east</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;East&quot;</span> ),               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;E&quot;</span> ),   <span class="stringliteral">&quot;6&quot;</span>, <span class="stringliteral">&quot;ITEMS_E&quot;</span>,         <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a37fc17ceb516deccf3480675eaa88bde">AIM_SOUTHEAST</a>},</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ab84bd7a0394c4e338d82be51601056f4">AIM_NORTHWEST</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 27, 1 ), <a class="code hl_variable" href="point_8h.html#a161d3b46a2531cb4eecd7d82391ecd0a">tripoint_north_west</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North West&quot;</span> ),         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;NW&quot;</span> ),  <span class="stringliteral">&quot;7&quot;</span>, <span class="stringliteral">&quot;ITEMS_NW&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a2fb1b219fc4b5b52c434dd59483f25dd">AIM_NORTH</a>},</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a2fb1b219fc4b5b52c434dd59483f25dd">AIM_NORTH</a>,     <a class="code hl_struct" href="structpoint.html">point</a>( 30, 1 ), <a class="code hl_variable" href="point_8h.html#a1167cb93baa23dd31f0297460b2255b9">tripoint_north</a>,      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North&quot;</span> ),              <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;N&quot;</span> ),   <span class="stringliteral">&quot;8&quot;</span>, <span class="stringliteral">&quot;ITEMS_N&quot;</span>,         <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a>},</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 33, 1 ), <a class="code hl_variable" href="point_8h.html#a0551ee1b2f69906cb1d616b4cf473da3">tripoint_north_east</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North East&quot;</span> ),         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;NE&quot;</span> ),  <span class="stringliteral">&quot;9&quot;</span>, <span class="stringliteral">&quot;ITEMS_NE&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43aea5243b6bcc83cd05983fc2a53f882db">AIM_EAST</a>},</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ac77e9f2afd5f71496534d4003e838684">AIM_ABOVE</a>,     <a class="code hl_struct" href="structpoint.html">point</a>( 36, 1 ), <a class="code hl_variable" href="point_8h.html#aff85224e35f4fc5c8ac34e20a1007c4c">tripoint_above</a>,      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Above&quot;</span>),               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;UP&quot;</span>),   <span class="stringliteral">&quot;&lt;&quot;</span>, <span class="stringliteral">&quot;ITEMS_UP&quot;</span>,        <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ac77e9f2afd5f71496534d4003e838684">AIM_ABOVE</a> },</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a68898e82551b0ae42f305d6ad5f062e9">AIM_BELOW</a>,     <a class="code hl_struct" href="structpoint.html">point</a>( 36, 2 ), <a class="code hl_variable" href="point_8h.html#a53f9f23b765219169daffe4c54ad5b8f">tripoint_below</a>,      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Below&quot;</span>),               <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;DN&quot;</span>),   <span class="stringliteral">&quot;&gt;&quot;</span>, <span class="stringliteral">&quot;ITEMS_DOWN&quot;</span>,      <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a68898e82551b0ae42f305d6ad5f062e9">AIM_BELOW</a> },</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a>,   <a class="code hl_struct" href="structpoint.html">point</a>( 22, 1 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Grabbed Vehicle&quot;</span> ),    <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;GR&quot;</span> ),  <span class="stringliteral">&quot;D&quot;</span>, <span class="stringliteral">&quot;ITEMS_DRAGGED_CONTAINER&quot;</span>, <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a>},</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a>,       <a class="code hl_struct" href="structpoint.html">point</a>( 19, 3 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Surrounding area&quot;</span> ),   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;AL&quot;</span> ),  <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;ITEMS_AROUND&quot;</span>,    <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a>},</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 19, 1 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Container&quot;</span> ),          <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;CN&quot;</span> ),  <span class="stringliteral">&quot;C&quot;</span>, <span class="stringliteral">&quot;ITEMS_CONTAINER&quot;</span>, <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a>},</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        { <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a>,      <a class="code hl_struct" href="structpoint.html">point</a>( 22, 3 ), <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a>,       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Worn Items&quot;</span> ),         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;WR&quot;</span> ),  <span class="stringliteral">&quot;W&quot;</span>, <span class="stringliteral">&quot;ITEMS_WORN&quot;</span>,      <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a>}</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    }</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>} )</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>{</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    save_state = &amp;<a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#aaa8e0be61e584b02f8c79957ea6db267">transfer_save</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>}</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span><span class="comment">// *INDENT-ON*</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#adc77e6461bfa9b5b745acd8e4371fa41">  115</a></span><a class="code hl_function" href="classadvanced__inventory.html#adc77e6461bfa9b5b745acd8e4371fa41">advanced_inventory::~advanced_inventory</a>()</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>{</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <a class="code hl_function" href="classadvanced__inventory.html#a7bda6ab396f9a1844a7825bbc36cad0a">save_settings</a>( <span class="keyword">false</span> );</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">exit_code</a> != <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a> ) {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">exit_code</a> = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81a39c8e99d1c94aa8d99b30dd6d49c796f">exit_okay</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <span class="comment">// Only refresh if we exited manually, otherwise we&#39;re going to be right back</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> ) {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.check_item_encumbrance_flag();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>}</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a7bda6ab396f9a1844a7825bbc36cad0a">  127</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a7bda6ab396f9a1844a7825bbc36cad0a">advanced_inventory::save_settings</a>( <span class="keywordtype">bool</span> only_panes )</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>{</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">if</span>( !only_panes ) {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad6483fd2391737fc25b2d8bc3beb5174">active_left</a> = ( <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> == <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a> );</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a3f6972b87e2c5d9738dbb8586c16447b">NUM_PANES</a>; ++i ) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[i].save_settings();</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    }</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>}</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a813463c770578ff022b7c60db06324e4">  137</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a813463c770578ff022b7c60db06324e4">advanced_inventory::load_settings</a>()</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <a class="code hl_enumeration" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81">aim_exit</a> aim_code = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81">aim_exit</a><span class="keyword">&gt;</span>( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">exit_code</a> );</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].load_settings( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a31fe7569d3cf6fa8fe91eabb1c8dcf3e">saved_area</a>, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>, aim_code == <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a> );</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].load_settings( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#afb375e0d4ca44d95ee4bfd0a6442258a">saved_area_right</a>, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>, aim_code == <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a> );</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">exit_code</a> = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81ac402986eb0250f4c5807de5af70d1a36">exit_none</a>;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>}</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">  145</a></span>std::string <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">advanced_inventory::get_sortname</a>( <a class="code hl_enumeration" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91">advanced_inv_sortby</a> sortby )</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>{</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordflow">switch</span>( sortby ) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a>:</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;none&quot;</span> );</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234">SORTBY_NAME</a>:</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;name&quot;</span> );</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6">SORTBY_WEIGHT</a>:</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;weight&quot;</span> );</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69">SORTBY_VOLUME</a>:</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;volume&quot;</span> );</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4">SORTBY_CHARGES</a>:</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;charges&quot;</span> );</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a>:</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;category&quot;</span> );</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907">SORTBY_DAMAGE</a>:</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;damage&quot;</span> );</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d">SORTBY_AMMO</a>:</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;ammo/charge type&quot;</span> );</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73">SORTBY_SPOILAGE</a>:</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;spoilage&quot;</span> );</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147">SORTBY_PRICE</a>:</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;barter value&quot;</span> );</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    }</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">return</span> <span class="stringliteral">&quot;!BUG!&quot;</span>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span> </div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a85c22e63c355f3ef14f4399d02acc51c">  172</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#a85c22e63c355f3ef14f4399d02acc51c">advanced_inventory::get_square</a>( <span class="keyword">const</span> std::string &amp;<a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> &amp;<a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> )</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>{</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;s : <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a> ) {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="keywordflow">if</span>( s.actionname == <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) {</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">screen_relative_location</a>( s.id );</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    }</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>}</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">  183</a></span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> <a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">advanced_inventory::screen_relative_location</a>( <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> area )</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>{</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a> &amp;&amp; <a class="code hl_variable" href="cached__options_8cpp.html#a406fb460d3cd96ac0e1cc3ccdef6340a">tile_iso</a> ) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[area].relative_location;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">return</span> area;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>}</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">  192</a></span><span class="keyword">inline</span> std::string <a class="code hl_function" href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">advanced_inventory::get_location_key</a>( <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> area )</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>{</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[area].minimapname;</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>}</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span> </div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a7aa370e38f80d5a1b99a8d0b5f48bfe3">  197</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a7aa370e38f80d5a1b99a8d0b5f48bfe3">advanced_inventory::init</a>()</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>{</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;<a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a> : <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a> ) {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.init();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    }</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].save_state = &amp;<a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a6aff6b07cac501b04863ae2a355c0313">pane</a>;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].save_state = &amp;<a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a97e2e344c1e3503d6e478430b44e0d80">pane_right</a>;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <a class="code hl_function" href="classadvanced__inventory.html#a813463c770578ff022b7c60db06324e4">load_settings</a>();</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>    <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> = ( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad6483fd2391737fc25b2d8bc3beb5174">active_left</a> ) ? <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a> : <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>    <a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a> = ( <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad6483fd2391737fc25b2d8bc3beb5174">active_left</a> ) ? <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a> : <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>}</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span> </div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a327d7645ec160505fd25d2d01f7e3065">  212</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a327d7645ec160505fd25d2d01f7e3065">advanced_inventory::print_items</a>( <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;pane, <span class="keywordtype">bool</span> active )</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>{</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;items = pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">items</a>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;window = pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a947be308f4ed2ea5d75e779df566f9ab">window</a>;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keyword">const</span> <span class="keyword">auto</span> index = pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a6212a9703170092d77e8e6eeb51cabf8">index</a>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_struct" href="structpage.html">page</a> = index / <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a>;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="keywordtype">bool</span> compact = <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> &lt;= 100;</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordtype">int</span> columns = <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( window );</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>    std::string spaces( columns - 4, <span class="charliteral">&#39; &#39;</span> );</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span> </div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> norm = <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span> </div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    <span class="comment">//print inventory&#39;s current and total weight + volume</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> || pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> weight_carried = <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weight_carried() );</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> weight_capacity = <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weight_capacity() );</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        std::string volume_carried = <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.volume_carried() );</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        std::string volume_capacity = <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.volume_capacity() );</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="comment">// align right, so calculate formatted head length</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        <span class="keyword">const</span> std::string formatted_head = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%.1f/%.1f %s  %s/%s %s&quot;</span>,</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                                           weight_carried, weight_capacity, <a class="code hl_function" href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a>(),</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>                                           volume_carried,</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>                                           volume_capacity,</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>                                           <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> hrightcol = columns - 1 - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( formatted_head );</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = weight_carried &gt; weight_capacity ? <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> : <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( hrightcol, 4 ), <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="stringliteral">&quot;%.1f&quot;</span>, weight_carried );</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( window, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <span class="stringliteral">&quot;/%.1f %s  &quot;</span>, weight_capacity, <a class="code hl_function" href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a>() );</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.volume_carried().value() &gt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.volume_capacity().value() ? <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> : <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( window, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, volume_carried );</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( window, <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <span class="stringliteral">&quot;/%s %s&quot;</span>, volume_capacity, <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>        <span class="comment">//print square&#39;s current and total weight + volume</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        std::string formatted_head;</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>        <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            formatted_head = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%3.1f %s  %s %s&quot;</span>,</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()].weight ),</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a>(),</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                                            <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()].volume ),</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> maxvolume = 0_ml;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>            <span class="keyword">auto</span> &amp;s = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()];</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>            <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a> &amp;&amp; s.get_container( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                maxvolume = s.get_container( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() )-&gt;get_container_capacity();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                maxvolume = s.veh-&gt;max_volume( s.vstor );</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                maxvolume = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#ae47264a5a225fbac1e19fccc8f6dcc55">max_volume</a>( s.pos );</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            formatted_head = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%3.1f %s  %s/%s %s&quot;</span>,</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( s.weight ),</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a>(),</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                                            <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( s.volume ),</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                                            <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( maxvolume ),</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                                            <a class="code hl_function" href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a>() );</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        }</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( columns - 1 - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( formatted_head ), 4 ), norm, formatted_head );</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">//print header row and determine max item name length</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="comment">// Last printable column</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> lastcol = columns - 2;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> name_startpos = compact ? 1 : 4;</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> src_startpos = lastcol - 18;</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> amt_startpos = lastcol - 15;</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> weight_startpos = lastcol - 10;</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> vol_startpos = lastcol - 4;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="comment">// Default name length</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keywordtype">int</span> max_name_length = amt_startpos - name_startpos - 1;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span> </div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <span class="comment">//~ Items list header (length type 1). Table fields length without spaces: amt - 4, weight - 5, vol - 4.</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> table_hdr_len1 = <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;amt weight vol&quot;</span> ) );</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="comment">//~ Items list header (length type 2). Table fields length without spaces: src - 2, amt - 4, weight - 5, vol - 4.</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> table_hdr_len2 = <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;src amt weight vol&quot;</span> ) );</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( compact ? 1 : 4, 5 ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Name (charges)&quot;</span> ) );</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> &amp;&amp; !compact ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( lastcol - table_hdr_len2 + 1, 5 ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>                   <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;src amt weight vol&quot;</span> ) );</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="comment">// 1 for space</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        max_name_length = src_startpos - name_startpos - 1;</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( lastcol - table_hdr_len1 + 1, 5 ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;amt weight vol&quot;</span> ) );</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span> </div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code hl_struct" href="structpage.html">page</a> * <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a>, x = 0 ; i &lt; static_cast&lt;int&gt;( items.size() ) &amp;&amp;</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>         x &lt; <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> ; i++, x++ ) {</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;sitem = items[i];</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="keywordflow">if</span>( sitem.is_category_header() ) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( ( columns - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( sitem.name ) - 6 ) / 2, 6 + x ), <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>, <span class="stringliteral">&quot;[%s]&quot;</span>,</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>                       sitem.name );</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        }</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>        <span class="keywordflow">if</span>( !sitem.is_item_entry() ) {</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="comment">// Empty entry at the bottom of a page.</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        }</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;it = *sitem.items.front();</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> selected = <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> &amp;&amp; index == i;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span> </div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> thiscolor = <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? it.color_in_inventory() : norm;</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> thiscolordark = <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> print_color;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span> </div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keywordflow">if</span>( selected ) {</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            thiscolor = <a class="code hl_variable" href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">inCategoryMode</a> &amp;&amp; pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa0f9fb2db958472a4cd7e17c41368323">sortby</a> == <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a> ? <a class="code hl_define" href="color_8h.html#af7bea175641eeb1fbec43dc22b5dd0ea">c_white_red</a> : <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> );</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            thiscolordark = <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( thiscolordark );</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            <span class="keywordflow">if</span>( compact ) {</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>                <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( 1, 6 + x ), thiscolor, <span class="stringliteral">&quot;  %s&quot;</span>, spaces );</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>                <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( 1, 6 + x ), thiscolor, <span class="stringliteral">&quot;&gt;&gt;%s&quot;</span>, spaces );</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            }</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        }</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span> </div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>        std::string item_name;</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>        std::string stolen_string;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>        <span class="keywordtype">bool</span> stolen = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        <span class="keywordflow">if</span>( !it.is_owned_by( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            stolen_string = <span class="stringliteral">&quot;&lt;color_light_red&gt;!&lt;/color&gt;&quot;</span>;</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            stolen = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>        }</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        <span class="keywordflow">if</span>( it.is_money() ) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="comment">//Count charges</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <span class="comment">// TODO: transition to the item_location system used for the normal inventory</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> charges_total = 0;</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_class" href="classitem.html">item</a> : sitem.items ) {</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>                charges_total += <a class="code hl_class" href="classitem.html">item</a>-&gt;<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            }</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            <span class="keywordflow">if</span>( stolen ) {</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                item_name = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, stolen_string, it.display_money( sitem.items.size(),</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>                                           charges_total ) );</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>                item_name = it.display_money( sitem.items.size(), charges_total );</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            }</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            <span class="keywordflow">if</span>( stolen ) {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                item_name = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, stolen_string, it.display_name() );</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                item_name = it.display_name();</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>            }</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        }</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">if</span>( get_option&lt;bool&gt;( <span class="stringliteral">&quot;ITEM_SYMBOLS&quot;</span> ) ) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            item_name = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%s %s&quot;</span>, it.symbol(), item_name );</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span> </div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="comment">//print item name</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( compact ? 1 : 4, 6 + x ), max_name_length, thiscolor, item_name );</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>        <span class="comment">//print src column</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>        <span class="comment">// TODO: specify this is coming from a vehicle!</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>        <span class="keywordflow">if</span>( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> &amp;&amp; !compact ) {</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( src_startpos, 6 + x ), thiscolor, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[sitem.area].shortname );</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>        }</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span> </div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="comment">//print &quot;amount&quot; column</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>        <span class="keywordtype">int</span> it_amt = sitem.stacks;</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>        <span class="keywordflow">if</span>( it_amt &gt; 1 ) {</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            print_color = thiscolor;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            <span class="keywordflow">if</span>( it_amt &gt; 9999 ) {</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                it_amt = 9999;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>                print_color = selected ? <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) : <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            }</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( amt_startpos, 6 + x ), print_color, <span class="stringliteral">&quot;%4d&quot;</span>, it_amt );</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="comment">//print weight column</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>        <span class="keywordtype">double</span> it_weight = <a class="code hl_function" href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a>( sitem.weight );</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        <span class="keywordtype">size_t</span> w_precision;</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>        print_color = it_weight &gt; 0 ? thiscolor : thiscolordark;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>        <span class="keywordflow">if</span>( it_weight &gt;= 1000.0 ) {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <span class="keywordflow">if</span>( it_weight &gt;= 10000.0 ) {</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>                print_color = selected ? <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) : <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                it_weight = 9999.0;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            w_precision = 0;</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( it_weight &gt;= 100.0 ) {</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            w_precision = 1;</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            w_precision = 2;</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        }</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( weight_startpos, 6 + x ), print_color, <span class="stringliteral">&quot;%5.*f&quot;</span>, w_precision, it_weight );</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="comment">//print volume column</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <span class="keywordtype">bool</span> it_vol_truncated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        <span class="keywordtype">double</span> it_vol_value = 0.0;</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>        std::string it_vol = <a class="code hl_function" href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a>( sitem.volume, 5, &amp;it_vol_truncated, &amp;it_vol_value );</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        <span class="keywordflow">if</span>( it_vol_truncated &amp;&amp; it_vol_value &gt; 0.0 ) {</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            print_color = selected ? <a class="code hl_function" href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a>( <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) : <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>            print_color = sitem.volume.value() &gt; 0 ? thiscolor : thiscolordark;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>        }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( vol_startpos, 6 + x ), print_color, it_vol );</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span> </div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> &amp;&amp; sitem.autopickup ) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, <a class="code hl_struct" href="structpoint.html">point</a>( 1, 6 + x ), <a class="code hl_function" href="color_8cpp.html#a5d2c29ee440b5997773bf3bbb3674c5b">magenta_background</a>( it.color_in_inventory() ),</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>                       compact ? it.tname().substr( 0, 1 ) : <span class="stringliteral">&quot;&gt;&quot;</span> );</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        }</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>    }</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>}</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="structadvanced__inv__sorter.html">  415</a></span><span class="keyword">struct </span><a class="code hl_struct" href="structadvanced__inv__sorter.html">advanced_inv_sorter</a> {</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno"><a class="line" href="structadvanced__inv__sorter.html#ad3524c2487d2cc478f5a6f7654ef56df">  416</a></span>    <a class="code hl_enumeration" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91">advanced_inv_sortby</a> <a class="code hl_variable" href="structadvanced__inv__sorter.html#ad3524c2487d2cc478f5a6f7654ef56df">sortby</a>;</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno"><a class="line" href="structadvanced__inv__sorter.html#ad8aefe127cf36e8ada91ed3641de1d2a">  417</a></span>    <a class="code hl_function" href="structadvanced__inv__sorter.html#ad8aefe127cf36e8ada91ed3641de1d2a">advanced_inv_sorter</a>( <a class="code hl_enumeration" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91">advanced_inv_sortby</a> sort ) {</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        <a class="code hl_variable" href="structadvanced__inv__sorter.html#ad3524c2487d2cc478f5a6f7654ef56df">sortby</a> = sort;</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    }</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno"><a class="line" href="structadvanced__inv__sorter.html#a57263c75f0e9ef37c21d698813d34fbc">  420</a></span>    <span class="keywordtype">bool</span> <a class="code hl_function" href="structadvanced__inv__sorter.html#a57263c75f0e9ef37c21d698813d34fbc">operator()</a>( <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> &amp;d1, <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> &amp;d2 ) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>        <span class="comment">// Note: the item pointer can only be null on sort by category, otherwise it is always valid.</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        <span class="keywordflow">switch</span>( <a class="code hl_variable" href="structadvanced__inv__sorter.html#ad3524c2487d2cc478f5a6f7654ef56df">sortby</a> ) {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a>:</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> &lt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a>;</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>                }</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234">SORTBY_NAME</a>:</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>                <span class="comment">// Fall through to code below the switch</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6">SORTBY_WEIGHT</a>:</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab5a820388c8869bc0dfee40a2d429d13">weight</a> != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab5a820388c8869bc0dfee40a2d429d13">weight</a> ) {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab5a820388c8869bc0dfee40a2d429d13">weight</a> &gt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab5a820388c8869bc0dfee40a2d429d13">weight</a>;</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>                }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69">SORTBY_VOLUME</a>:</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a39f7062dd390b070a2985bad6f7c0c1e">volume</a> != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a39f7062dd390b070a2985bad6f7c0c1e">volume</a> ) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a39f7062dd390b070a2985bad6f7c0c1e">volume</a> &gt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a39f7062dd390b070a2985bad6f7c0c1e">volume</a>;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                }</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4">SORTBY_CHARGES</a>:</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;charges != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;charges ) {</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;charges &gt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;charges;</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                }</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a>:</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                assert( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a> != <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                assert( d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a> != <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a> != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a> ) {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>                    <span class="keywordflow">return</span> *d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a> &lt; *d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">cat</a>;</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d1.<a class="code hl_function" href="classadvanced__inv__listitem.html#a5f73b12ee507c8549dff652fab9dded0">is_category_header</a>() ) {</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d2.<a class="code hl_function" href="classadvanced__inv__listitem.html#a5f73b12ee507c8549dff652fab9dded0">is_category_header</a>() ) {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>                }</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907">SORTBY_DAMAGE</a>:</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;damage() != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;damage() ) {</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;damage() &lt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;damage();</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>                }</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d">SORTBY_AMMO</a>: {</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                <span class="keyword">const</span> std::string a1 = d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;ammo_sort_name();</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>                <span class="keyword">const</span> std::string a2 = d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;ammo_sort_name();</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                <span class="comment">// There are many items with &quot;false&quot; ammo types (e.g.</span></div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>                <span class="comment">// scrap metal has &quot;components&quot;) that actually is not</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>                <span class="comment">// used as ammo, so we consider them as non-ammo.</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                <span class="keyword">const</span> <span class="keywordtype">bool</span> ammoish1 = !a1.empty() &amp;&amp; a1 != <span class="stringliteral">&quot;components&quot;</span> &amp;&amp; a1 != <span class="stringliteral">&quot;none&quot;</span> &amp;&amp; a1 != <span class="stringliteral">&quot;NULL&quot;</span>;</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                <span class="keyword">const</span> <span class="keywordtype">bool</span> ammoish2 = !a2.empty() &amp;&amp; a2 != <span class="stringliteral">&quot;components&quot;</span> &amp;&amp; a2 != <span class="stringliteral">&quot;none&quot;</span> &amp;&amp; a2 != <span class="stringliteral">&quot;NULL&quot;</span>;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <span class="keywordflow">if</span>( ammoish1 != ammoish2 ) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                    <span class="keywordflow">return</span> ammoish1;</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ammoish1 &amp;&amp; ammoish2 ) {</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                    <span class="keywordflow">if</span>( a1 == a2 ) {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                        <span class="comment">// For items with the same ammo type, we sort:</span></div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                        <span class="comment">// guns &gt; tools &gt; magazines &gt; ammunition</span></div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                        <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_gun() &amp;&amp; !d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_gun() ) {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>                        }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                        <span class="keywordflow">if</span>( !d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_gun() &amp;&amp; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_gun() ) {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                        }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                        <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_tool() &amp;&amp; !d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_tool() ) {</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>                        }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>                        <span class="keywordflow">if</span>( !d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_tool() &amp;&amp; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_tool() ) {</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>                        }</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>                        <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_magazine() &amp;&amp; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_ammo() ) {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>                        }</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>                        <span class="keywordflow">if</span>( d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_magazine() &amp;&amp; d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;is_ammo() ) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>                            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                        }</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                    }</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                    <span class="keywordflow">return</span> <a class="code hl_variable" href="translations_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a>( a1, a2 );</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>                }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            }</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73">SORTBY_SPOILAGE</a>:</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;spoilage_sort_order() != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;spoilage_sort_order() ) {</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;spoilage_sort_order() &lt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;spoilage_sort_order();</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                }</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147">SORTBY_PRICE</a>:</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;price( <span class="keyword">true</span> ) != d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;price( <span class="keyword">true</span> ) ) {</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                    <span class="keywordflow">return</span> d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;price( <span class="keyword">true</span> ) &gt; d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;price( <span class="keyword">true</span> );</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>                }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="comment">// secondary sort by name</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="keyword">const</span> std::string *n1;</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="keyword">const</span> std::string *n2;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <span class="keywordflow">if</span>( d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a52e87e8f79e05022bd12c63c9f90cecc">name_without_prefix</a> == d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a52e87e8f79e05022bd12c63c9f90cecc">name_without_prefix</a> ) {</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            <span class="comment">//if names without prefix equal, compare full name</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>            n1 = &amp;d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a687a97ead0036d13ab240ed4744a31ed">name</a>;</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>            n2 = &amp;d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a687a97ead0036d13ab240ed4744a31ed">name</a>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>            <span class="comment">//else compare name without prefix</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            n1 = &amp;d1.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a52e87e8f79e05022bd12c63c9f90cecc">name_without_prefix</a>;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            n2 = &amp;d2.<a class="code hl_variable" href="classadvanced__inv__listitem.html#a52e87e8f79e05022bd12c63c9f90cecc">name_without_prefix</a>;</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        }</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="translations_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a>( *n1, *n2 );</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>};</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ae283d462ae0e75225f59b3d7be8bbb38">  526</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="classadvanced__inventory.html#ae283d462ae0e75225f59b3d7be8bbb38">advanced_inventory::print_header</a>( <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;pane, <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> sel )</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>{</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    <span class="keyword">const</span> <a class="code hl_class" href="classcatacurses_1_1window.html">catacurses::window</a> &amp;window = pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a947be308f4ed2ea5d75e779df566f9ab">window</a>;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    <span class="keywordtype">int</span> area = pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>();</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    <span class="keywordtype">int</span> wwidth = <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( window );</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    <span class="keywordtype">int</span> ofs = wwidth - 25 - 2 - 14;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="keywordtype">int</span> min_x = wwidth;</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a415f1e40aef670ae393e793f3e97d1c1">NUM_AIM_LOCATIONS</a>; ++i ) {</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <span class="keywordtype">int</span> data_location = <a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">screen_relative_location</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( i ) );</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *bracket = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[data_location].can_store_in_vehicle() ? <span class="stringliteral">&quot;&lt;&gt;&quot;</span> : <span class="stringliteral">&quot;[]&quot;</span>;</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        <span class="keywordtype">bool</span> in_vehicle = pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() &amp;&amp; <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[data_location].id == area &amp;&amp; sel == area &amp;&amp;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                          area != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a>;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        <span class="keywordtype">bool</span> all_brackets = area == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> &amp;&amp; ( data_location &gt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a> &amp;&amp;</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                            data_location &lt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a> );</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> bcolor = <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> kcolor = <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>;</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[data_location].canputitems( pane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a176bc037c1775727cdb0ce5fe47d837b">get_cur_item_ptr</a>() ) ) {</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            bcolor = in_vehicle ? <a class="code hl_define" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> :</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                     area == data_location || all_brackets ? <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>            kcolor = area == data_location ? <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> : sel == data_location ? <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>        }</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span> </div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>        <span class="keyword">const</span> std::string key = <a class="code hl_function" href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">get_location_key</a>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( i ) );</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> p( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[i].hscreen + <a class="code hl_struct" href="structpoint.html">point</a>( ofs, 0 ) );</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( window, p, bcolor, <span class="stringliteral">&quot;%c&quot;</span>, bracket[0] );</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( window, kcolor, <span class="stringliteral">&quot;%s&quot;</span>, in_vehicle &amp;&amp; sel != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a> ? <span class="stringliteral">&quot;V&quot;</span> : key );</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( window, bcolor, <span class="stringliteral">&quot;%c&quot;</span>, bracket[1] );</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="keywordflow">if</span>( p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &lt; min_x ) {</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            min_x = p.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a>;</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        }</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="keywordflow">return</span> min_x;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>}</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span> </div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">  560</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">advanced_inventory::recalc_pane</a>( <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> p )</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>{</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="keyword">auto</span> &amp;pane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p];</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    pane.recalc = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    pane.items.clear();</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="comment">// Add items from the source location or in case of all 9 surrounding squares,</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="comment">// add items from several locations.</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="keywordflow">if</span>( pane.get_area() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        <span class="keyword">auto</span> &amp;alls = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[<a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a>];</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        <span class="keyword">auto</span> &amp;there = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[-p + 1];</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        <span class="keyword">auto</span> &amp;<a class="code hl_enumvalue" href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">other</a> = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[there.get_area()];</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        alls.volume = 0_ml;</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        alls.weight = 0_gram;</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;s : <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a> ) {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>            <span class="comment">// All the surrounding squares, nothing else</span></div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>            <span class="keywordflow">if</span>( s.id &lt; <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a> || s.id &gt; <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a> ) {</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>            }</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span> </div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>            <span class="comment">// To allow the user to transfer all items from all surrounding squares to</span></div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            <span class="comment">// a specific square, filter out items that are already on that square.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>            <span class="comment">// e.g. left pane AIM_ALL, right pane AIM_NORTH. The user holds the</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>            <span class="comment">// enter key down in the left square and moves all items to the other side.</span></div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> same = <a class="code hl_enumvalue" href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">other</a>.is_same( s );</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span> </div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>            <span class="comment">// Deal with squares with ground + vehicle storage</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            <span class="comment">// Also handle the case when the other tile covers vehicle</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            <span class="comment">// or the ground below the vehicle.</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            <span class="keywordflow">if</span>( s.can_store_in_vehicle() &amp;&amp; !( same &amp;&amp; there.in_vehicle() ) ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>                <span class="keywordtype">bool</span> do_vehicle = there.get_area() == s.id ? !there.in_vehicle() : <span class="keyword">true</span>;</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                pane.add_items_from_area( s, do_vehicle );</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                alls.volume += s.volume;</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                alls.weight += s.weight;</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            <span class="comment">// Add map items</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>            <span class="keywordflow">if</span>( !same || there.in_vehicle() ) {</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                pane.add_items_from_area( s );</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                alls.volume += s.volume;</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                alls.weight += s.weight;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>            }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>        }</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        pane.add_items_from_area( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[pane.get_area()] );</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <span class="comment">// Insert category headers (only expected when sorting by category)</span></div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <span class="keywordflow">if</span>( pane.sortby == <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a> ) {</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        std::set&lt;const item_category *&gt; categories;</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;it : pane.items ) {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>            categories.insert( it.cat );</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>        }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;cat : categories ) {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>            pane.items.push_back( <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a>( cat ) );</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>        }</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    }</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="comment">// Finally sort all items (category headers will now be moved to their proper position)</span></div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    std::stable_sort( pane.items.begin(), pane.items.end(), <a class="code hl_struct" href="structadvanced__inv__sorter.html">advanced_inv_sorter</a>( pane.sortby ) );</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="comment">// itemsPerPage is 0 during processing</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> &gt; 0 ) {</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>        pane.paginate( <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> );</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>}</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span> </div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aca2a67fe1a2582c1ffc2be3d7d6c3851">  623</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#aca2a67fe1a2582c1ffc2be3d7d6c3851">advanced_inventory::redraw_pane</a>( <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> p )</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>{</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <a class="code hl_class" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;ADVANCED_INVENTORY&quot;</span> );</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="comment">// don&#39;t update ui if processing demands</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() ) {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <span class="keyword">auto</span> &amp;pane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p];</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> || pane.recalc ) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        <a class="code hl_function" href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">recalc_pane</a>( p );</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    pane.fix_index();</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> = p == <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>;</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>    <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;<a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a> = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[pane.get_area()];</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <span class="keyword">auto</span> w = pane.window;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( w );</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <a class="code hl_function" href="classadvanced__inventory.html#a327d7645ec160505fd25d2d01f7e3065">print_items</a>( pane, <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> );</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keyword">auto</span> itm = pane.get_cur_item_ptr();</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <span class="comment">// 2 for left border + 1 for padding between name &amp; aim location selector</span></div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    <span class="keywordtype">int</span> width = <a class="code hl_function" href="classadvanced__inventory.html#ae283d462ae0e75225f59b3d7be8bbb38">print_header</a>( pane, itm != <span class="keyword">nullptr</span> ? itm-&gt;area : pane.get_area() ) - 2 - 1;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="comment">// only cardinals</span></div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="comment">// not where you stand, and pane is in vehicle</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="comment">// make sure the offsets are the same as the grab point</span></div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keywordtype">bool</span> same_as_dragged = ( <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.id &gt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a> &amp;&amp; <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.id &lt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a> ) &amp;&amp;</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                           <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.id != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a> &amp;&amp; <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p].in_vehicle() &amp;&amp;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                           <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.off == <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[<a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a>].off;</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;sq = same_as_dragged ? <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[<a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a>] : <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>;</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordtype">bool</span> car = <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.can_store_in_vehicle() &amp;&amp; <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p].in_vehicle() &amp;&amp; sq.<a class="code hl_variable" href="classadvanced__inv__area.html#a93a2722f51ef6c6b31d8f44e9e3098d9">id</a> != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 1 ), width, <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? <a class="code hl_define" href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a>  : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>,</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>                    car ? sq.<a class="code hl_variable" href="classadvanced__inv__area.html#a59eb14a91b0d9bee2dfb0ee52270cfe2">veh</a>-&gt;<a class="code hl_variable" href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">name</a> : sq.<a class="code hl_variable" href="classadvanced__inv__area.html#a0acc1388708e1e24c60fc57d02d13ed1">name</a> );</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 2 ), width, <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? <a class="code hl_define" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>, sq.<a class="code hl_variable" href="classadvanced__inv__area.html#a6e4259169ebf6eefc0d84c2be79525b6">desc</a>[car] );</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 3 ), width, <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>, <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.flags );</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> max_page = ( pane.items.size() + <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> - 1 ) / <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a>;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> &amp;&amp; max_page &gt; 1 ) {</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_struct" href="structpage.html">page</a> = pane.index / <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 4 ), <a class="code hl_define" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[&lt;] page %1$d of %2$d [&gt;]&quot;</span> ), <a class="code hl_struct" href="structpage.html">page</a> + 1, max_page );</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    }</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ) {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>        <a class="code hl_function" href="namespacecatacurses.html#a07c5180048f87110c547f58341b04812">wattron</a>( w, <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a> );</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    }</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="comment">// draw a darker border around the inactive pane</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <a class="code hl_function" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( w, <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ? <a class="code hl_define" href="output_8h.html#a966901ace2cf6cba3fc9cec310150860">BORDER_COLOR</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a> );</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 3, 0 ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt; [%s] Sort: %s &gt;&quot;</span> ), ctxt.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;SORT&quot;</span> ),</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>               <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( pane.sortby ) );</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>    <span class="keywordtype">int</span> max = <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.max_size;</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>    <span class="keywordflow">if</span>( max &gt; 0 ) {</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        <span class="keywordtype">int</span> itemcount = <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.get_item_count();</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="keywordtype">int</span> fmtw = 7 + ( itemcount &gt; 99 ? 3 : itemcount &gt; 9 ? 2 : 1 ) +</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>                   ( max &gt; 99 ? 3 : max &gt; 9 ? 2 : 1 );</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2 - fmtw, 0 ), <span class="stringliteral">&quot;&lt; %d/%d &gt;&quot;</span>, itemcount, max );</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span> </div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    std::string fprefix = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%s] Filter&quot;</span> ), ctxt.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;FILTER&quot;</span> ) );</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    std::string fsuffix = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%s] Reset&quot;</span> ), ctxt.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;RESET_FILTER&quot;</span> ) );</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> ) {</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        <span class="keywordflow">if</span>( !pane.filter.empty() ) {</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>            <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( w ) - 1 ), <span class="stringliteral">&quot;&lt; %s: %s &gt;&quot;</span>, fprefix, pane.filter );</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>            <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 2, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( w ) - 1 ), <span class="stringliteral">&quot;&lt; %s &gt;&quot;</span>, fprefix );</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>        }</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    }</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">active</a> ) {</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        <a class="code hl_function" href="namespacecatacurses.html#a03121643695b0c990aed0a0b0408e85f">wattroff</a>( w, <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a> );</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> &amp;&amp; !pane.filter.empty() ) {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( 6 + <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( fprefix ), <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( w ) - 1 ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>,</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                   pane.filter );</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( w, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( w ) - <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( fsuffix ) - 2, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( w ) - 1 ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot;%s&quot;</span>,</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                   fsuffix );</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    }</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( w );</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>}</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span> </div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span><span class="comment">// be explicit with the values</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cf">  703</a></span><span class="keyword">enum</span> <a class="code hl_enumeration" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cf">aim_entry</a> {</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">  704</a></span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>     = 0,</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52">  705</a></span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52">ENTRY_VEHICLE</a>   = 1,</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae30e2833bd08a593a96b959e25285aaf">  706</a></span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae30e2833bd08a593a96b959e25285aaf">ENTRY_MAP</a>       = 2,</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>    <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae75c8e281157ec6d73eff857f05c1fc7">ENTRY_RESET</a>     = 3</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno"><a class="line" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae75c8e281157ec6d73eff857f05c1fc7">  708</a></span>};</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">  710</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">advanced_inventory::move_all_items</a>( <span class="keywordtype">bool</span> nested_call )</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>{</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;spane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>];</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>    <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;dpane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>];</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span> </div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="comment">// AIM_ALL source area routine</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>    <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>        <span class="comment">// move all to `AIM_WORN&#39; doesn&#39;t make sense (see `MAX_WORN_PER_TYPE&#39;)</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You look at the items, then your clothes, and scratch your head&quot;</span> ) );</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        }</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>        <span class="comment">// if the source pane (AIM_ALL) is empty, then show a message and leave</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() &amp;&amp; spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">items</a>.empty() ) {</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There are no items to be moved!&quot;</span> ) );</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        }</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span> </div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;sarea = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()];</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;darea = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()];</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span> </div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <span class="comment">// Check first if the destination area still have enough room for moving all.</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() &amp;&amp; sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#ac341f2e9a873aa952c543b71f721c6c3">volume</a> &gt; darea.<a class="code hl_function" href="classadvanced__inv__area.html#a1167761883fcb0249190dee49696ad69">free_volume</a>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) &amp;&amp;</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>            !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There isn&#39;t enough room, do you really want to move all?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        }</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span> </div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        <span class="comment">// make sure that there are items to be moved</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <span class="keywordtype">bool</span> <a class="code hl_enumvalue" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <span class="comment">// copy the current pane, to be restored after the move is queued</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> <a class="code hl_function" href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">shadow</a> = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>];</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <span class="comment">// here we recursively call this function with each area in order to</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        <span class="comment">// put all items in the proper destination area, with minimal fuss</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        <span class="keywordtype">int</span> &amp;loc = <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a97c449c1408d227d4468ec8a8b38e8c7">aim_all_location</a>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        <span class="comment">// re-entry nonsense</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        <span class="keywordtype">int</span> &amp;entry = <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a418cf5aff6d7437cf1325e99113c6136">re_enter_move_all</a>;</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>        <span class="comment">// if we are just starting out, set entry to initial value</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        <span class="keywordflow">switch</span>( <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cf">aim_entry</a><span class="keyword">&gt;</span>( entry++ ) ) {</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>:</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>                ++entry;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>            <span class="comment">/* fallthrough */</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52">ENTRY_VEHICLE</a>:</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[loc].can_store_in_vehicle() ) {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>                    <span class="comment">// either do the inverse of the pane (if it is the one we are transferring to),</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>                    <span class="comment">// or just transfer the contents (if it is not the one we are transferring to)</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>                    spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[loc], dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == loc ? !dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() : <span class="keyword">true</span> );</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                    <span class="comment">// add items, calculate weights and volumes... the fun stuff</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                    <a class="code hl_function" href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">recalc_pane</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> );</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                    <span class="comment">// then move the items to the destination area</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                    <a class="code hl_function" href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">move_all_items</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                }</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae30e2833bd08a593a96b959e25285aaf">ENTRY_MAP</a>:</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[loc++], <span class="keyword">false</span> );</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>                <a class="code hl_function" href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">recalc_pane</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> );</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>                <a class="code hl_function" href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">move_all_items</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae75c8e281157ec6d73eff857f05c1fc7">ENTRY_RESET</a>:</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>                <span class="keywordflow">if</span>( loc &gt; <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ac41d6b893d6d5e556fce1069175e4d90">AIM_AROUND_END</a> ) {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>                    loc = <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43adbbbc32bcfeb16c749038d85f3841483">AIM_AROUND_BEGIN</a>;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>                    entry = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>                    <a class="code hl_enumvalue" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>                    entry = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52">ENTRY_VEHICLE</a>;</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>                }</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid `aim_entry&#39; [%d] reached!&quot;</span>, entry - 1 );</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>                entry = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>                loc = <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43adbbbc32bcfeb16c749038d85f3841483">AIM_AROUND_BEGIN</a>;</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        }</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="comment">// restore the pane to its former glory</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>] = <a class="code hl_function" href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">shadow</a>;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="comment">// make it auto loop back, if not already doing so</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        <span class="keywordflow">if</span>( !<a class="code hl_enumvalue" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">done</a> &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity ) {</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>            <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        }</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    }</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <span class="comment">// Check some preconditions to quickly leave the function.</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    <span class="keywordtype">size_t</span> liquid_items = 0;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> &amp;elem : spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">items</a> ) {</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> *elemit : elem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a> ) {</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>            <span class="keywordflow">if</span>( elemit-&gt;<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>                liquid_items++;</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            }</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <span class="keywordflow">if</span>( spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">items</a>.empty() || liquid_items == spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">items</a>.size() ) {</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    }</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <span class="keywordtype">bool</span> restore_area = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="keyword">auto</span> loc = dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>();</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <span class="comment">// ask where we want to store the item via the menu</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#a814330bc95db8c5962477d574f454ad3">query_destination</a>( loc ) ) {</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        }</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        restore_area = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    }</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()].canputitems() ) {</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t put items there!&quot;</span> ) );</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>    }</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;sarea = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()];</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;darea = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()];</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span> </div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="comment">// Make sure source and destination are different, otherwise items will disappear</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="comment">// Need to check actual position to account for dragged vehicles</span></div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a> &amp;&amp; sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#a61a6310e15de73ab32f29e3a4e004c19">pos</a> == darea.<a class="code hl_variable" href="classadvanced__inv__area.html#a61a6310e15de73ab32f29e3a4e004c19">pos</a> &amp;&amp;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() &amp;&amp; spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    }</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span> </div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    <span class="keywordflow">if</span>( nested_call || !get_option&lt;bool&gt;( <span class="stringliteral">&quot;CLOSE_ADV_INV&quot;</span> ) ) {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        <span class="comment">// Why is this here? It&#39;s because the activity backlog can act</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="comment">// like a stack instead of a single deferred activity in order to</span></div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="comment">// accomplish some UI shenanigans. The inventory menu activity is</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <span class="comment">// added, then an activity to drop is pushed on the stack, then</span></div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        <span class="comment">// the drop activity is repeatedly popped and pushed on the stack</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <span class="comment">// until all its items are processed. When the drop activity runs out,</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <span class="comment">// the inventory menu activity is there waiting and seamlessly returns</span></div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <span class="comment">// the player to the menu. If the activity is interrupted instead of</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        <span class="comment">// completing, both activities are canceled.</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        <span class="comment">// Thanks to kevingranade for the explanation.</span></div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span> </div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> || spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <a class="code hl_typedef" href="item__handling__util_8h.html#ab6eddf239a037205dfd747394734dbcd">drop_locations</a> dropped;</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        <span class="comment">// keep a list of favorites separated, only drop non-fav first if they exist</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>        <a class="code hl_typedef" href="item__handling__util_8h.html#ab6eddf239a037205dfd747394734dbcd">drop_locations</a> dropped_favorite;</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> index = 0; index &lt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.inv.size(); ++index ) {</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>                <span class="keyword">const</span> std::list&lt;item&gt; &amp;stack = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.inv.const_stack( index );</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>                <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it = stack.front();</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>                <a class="code hl_class" href="classitem__location.html">item_location</a> indexed_item( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, <span class="keyword">const_cast&lt;</span><a class="code hl_class" href="classitem.html">item</a> *<span class="keyword">&gt;</span>( &amp;it ) );</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span> </div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>                <span class="keywordflow">if</span>( !spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a92be3dc9eb1006a9b1b15e3bd65a49c5">is_filtered</a>( it ) ) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                    <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a>;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>() )                         {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                        <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                        <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = stack.size();</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                    }</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                    <span class="keywordflow">if</span>( it.<a class="code hl_variable" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> ) {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>                        dropped_favorite.emplace_back( indexed_item, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                        dropped.emplace_back( indexed_item, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                    }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                }</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>            }</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>            <span class="comment">// do this in reverse, to account for vector item removal messing with future indices</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            <span class="keyword">auto</span> iter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn.rbegin();</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> idx = 0; idx &lt; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn.size(); ++idx, ++iter ) {</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>                <a class="code hl_class" href="classitem.html">item</a> &amp;it = *iter;</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span> </div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>                <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.can_takeoff( it ).success() ) {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                }</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span> </div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>                <span class="keywordflow">if</span>( !spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a92be3dc9eb1006a9b1b15e3bd65a49c5">is_filtered</a>( it ) ) {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>                    <a class="code hl_class" href="classitem__location.html">item_location</a> loc( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, &amp;it );</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>                    <span class="keywordflow">if</span>( it.<a class="code hl_variable" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> ) {</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>                        dropped_favorite.emplace_back( loc, it.<a class="code hl_function" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() );</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>                        dropped.emplace_back( loc, it.<a class="code hl_function" href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">count</a>() );</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>                    }</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>                }</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>            }</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        }</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="keywordflow">if</span>( dropped.empty() ) {</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Really drop all your favorite items?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>            }</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>            dropped = dropped_favorite;</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        }</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.drop( dropped, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() + darea.<a class="code hl_variable" href="classadvanced__inv__area.html#a49b65955057c9eb3f32b71e41b880d0d">off</a> );</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>        <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            <span class="comment">// TODO: Start ACT_WEAR in this case</span></div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Wearing clothes using move all is not yet implemented&quot;</span> );</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>            <span class="comment">// Vehicle and map destinations are handled the same.</span></div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            <span class="comment">// Check first if the destination area still have enough room for moving all.</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() &amp;&amp; sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#ac341f2e9a873aa952c543b71f721c6c3">volume</a> &gt; darea.<a class="code hl_function" href="classadvanced__inv__area.html#a1167761883fcb0249190dee49696ad69">free_volume</a>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) &amp;&amp;</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                !<a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There isn&#39;t enough room, do you really want to move all?&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            }</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span> </div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>            <span class="comment">// Stash the destination</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> relative_destination = darea.<a class="code hl_variable" href="classadvanced__inv__area.html#a49b65955057c9eb3f32b71e41b880d0d">off</a>;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span> </div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>            <span class="comment">// Find target items and quantities thereof for the new activity</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>            std::vector&lt;item_location&gt; target_items;</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>            std::vector&lt;int&gt; quantities;</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span> </div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>            <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">item_stack::iterator</a> stack_begin, stack_end;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].in_vehicle() ) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>                <a class="code hl_class" href="classvehicle__stack.html">vehicle_stack</a> targets = sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#a59eb14a91b0d9bee2dfb0ee52270cfe2">veh</a>-&gt;<a class="code hl_function" href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">get_items</a>( sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#acb3ad903a445e8207bc34f47be502b30">vstor</a> );</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>                stack_begin = targets.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>                stack_end = targets.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>();</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>                <a class="code hl_class" href="classmap__stack.html">map_stack</a> targets = here.<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#a61a6310e15de73ab32f29e3a4e004c19">pos</a> );</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>                stack_begin = targets.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>();</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>                stack_end = targets.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>();</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>            }</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span> </div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            <span class="comment">// If moving to vehicle, silently filter buckets</span></div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>            <span class="comment">// Moving them would cause tons of annoying prompts or spills</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> filter_buckets = dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>();</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            <span class="keywordtype">bool</span> filtered_any_bucket = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>            <span class="comment">// Push item_locations and item counts for all items at placement</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="keywordflow">for</span>( <a class="code hl_class" href="classcata_1_1colony_1_1colony__iterator.html">item_stack::iterator</a> it = stack_begin; it != stack_end; ++it ) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a92be3dc9eb1006a9b1b15e3bd65a49c5">is_filtered</a>( *it ) ) {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                <span class="keywordflow">if</span>( filter_buckets &amp;&amp; it-&gt;is_bucket_nonempty() ) {</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                    filtered_any_bucket = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                }</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                    target_items.emplace_back( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#a59eb14a91b0d9bee2dfb0ee52270cfe2">veh</a>, sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#acb3ad903a445e8207bc34f47be502b30">vstor</a> ), &amp;*it );</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                    target_items.emplace_back( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( sarea.<a class="code hl_variable" href="classadvanced__inv__area.html#a61a6310e15de73ab32f29e3a4e004c19">pos</a> ), &amp;*it );</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>                <span class="comment">// quantity of 0 means move all</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                quantities.push_back( 0 );</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>            }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <span class="keywordflow">if</span>( filtered_any_bucket ) {</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Skipping filled buckets to avoid spilling their contents.&quot;</span> ) );</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>            <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                std::vector&lt;pickup::pick_drop_selection&gt; targets = <a class="code hl_function" href="namespacepickup.html#a876f9437271da80f53cc2a748cd6e240">pickup::optimize_pickup</a>( target_items,</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>                        quantities );</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classpickup__activity__actor.html">pickup_activity_actor</a>(</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                        targets,</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                        <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].in_vehicle() ? <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a> : <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() )</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                                                       ) ) );</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classmove__items__activity__actor.html">move_items_activity_actor</a>(</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>                        target_items,</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                        quantities,</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>                        dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>(),</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>                        relative_destination</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>                                                       ) ) );</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>            }</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        }</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span> </div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    }</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>    <span class="comment">// if dest was AIM_ALL then we used query_destination and should undo that</span></div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="keywordflow">if</span>( restore_area ) {</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#af2c4b2f624bbf139fe14db30f4c4a619">restore_area</a>();</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    }</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>}</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span> </div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ae2448ee4634d1bb472405f0e99ed2243">  977</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#ae2448ee4634d1bb472405f0e99ed2243">advanced_inventory::show_sort_menu</a>( <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;pane )</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>{</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>    <a class="code hl_class" href="classuilist.html">uilist</a> <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>;</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.text = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Sort by&quot;</span> );</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a>,     <span class="keyword">true</span>, <span class="charliteral">&#39;u&#39;</span>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Unsorted (recently added first)&quot;</span> ) );</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234">SORTBY_NAME</a>,     <span class="keyword">true</span>, <span class="charliteral">&#39;n&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234">SORTBY_NAME</a> ) );</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6">SORTBY_WEIGHT</a>,   <span class="keyword">true</span>, <span class="charliteral">&#39;w&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6">SORTBY_WEIGHT</a> ) );</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69">SORTBY_VOLUME</a>,   <span class="keyword">true</span>, <span class="charliteral">&#39;v&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69">SORTBY_VOLUME</a> ) );</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4">SORTBY_CHARGES</a>,  <span class="keyword">true</span>, <span class="charliteral">&#39;x&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4">SORTBY_CHARGES</a> ) );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a>, <span class="keyword">true</span>, <span class="charliteral">&#39;c&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a> ) );</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907">SORTBY_DAMAGE</a>,   <span class="keyword">true</span>, <span class="charliteral">&#39;d&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907">SORTBY_DAMAGE</a> ) );</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d">SORTBY_AMMO</a>,     <span class="keyword">true</span>, <span class="charliteral">&#39;a&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d">SORTBY_AMMO</a> ) );</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73">SORTBY_SPOILAGE</a>,   <span class="keyword">true</span>, <span class="charliteral">&#39;s&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73">SORTBY_SPOILAGE</a> ) );</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.addentry( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147">SORTBY_PRICE</a>, <span class="keyword">true</span>, <span class="charliteral">&#39;b&#39;</span>, <a class="code hl_function" href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">get_sortname</a>( <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147">SORTBY_PRICE</a> ) );</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="comment">// Pre-select current sort.</span></div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.selected = pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa0f9fb2db958472a4cd7e17c41368323">sortby</a> - <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a>;</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>    <span class="comment">// Calculate key and window variables, generate window,</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    <span class="comment">// and loop until we get a valid answer.</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>    <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.query();</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.ret &lt; <a class="code hl_enumvalue" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a> ) {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    }</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    pane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa0f9fb2db958472a4cd7e17c41368323">sortby</a> = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91">advanced_inv_sortby</a><span class="keyword">&gt;</span>( <a class="code hl_variable" href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">sm</a>.ret );</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>}</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span> </div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a6ed56ac7f33ace4e7b9f5e56f754e353"> 1003</a></span><a class="code hl_class" href="classinput__context.html">input_context</a> <a class="code hl_function" href="classadvanced__inventory.html#a6ed56ac7f33ace4e7b9f5e56f754e353">advanced_inventory::register_ctxt</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>    <a class="code hl_class" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;ADVANCED_INVENTORY&quot;</span> );</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;UP&quot;</span> );</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;DOWN&quot;</span> );</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;LEFT&quot;</span> );</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;RIGHT&quot;</span> );</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;PAGE_DOWN&quot;</span> );</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;PAGE_UP&quot;</span> );</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_TAB&quot;</span> );</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_VEH&quot;</span> );</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;FILTER&quot;</span> );</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;RESET_FILTER&quot;</span> );</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;EXAMINE&quot;</span> );</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SORT&quot;</span> );</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_AUTO_PICKUP&quot;</span> );</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_FAVORITE&quot;</span> );</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOVE_SINGLE_ITEM&quot;</span> );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOVE_VARIABLE_ITEM&quot;</span> );</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOVE_ITEM_STACK&quot;</span> );</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOVE_ALL_ITEMS&quot;</span> );</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;CATEGORY_SELECTION&quot;</span> );</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_NW&quot;</span> );</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_N&quot;</span> );</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_NE&quot;</span> );</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_W&quot;</span> );</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_CE&quot;</span> );</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_E&quot;</span> );</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_SW&quot;</span> );</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_S&quot;</span> );</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_SE&quot;</span> );</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_UP&quot;</span> );</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_DOWN&quot;</span> );</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_INVENTORY&quot;</span> );</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_WORN&quot;</span> );</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_AROUND&quot;</span> );</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_DRAGGED_CONTAINER&quot;</span> );</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_CONTAINER&quot;</span> );</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;ITEMS_DEFAULT&quot;</span> );</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SAVE_DEFAULT&quot;</span> );</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <span class="keywordflow">return</span> ctxt;</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>}</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span> </div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a48ffe088a119bd2f60cb715ad33ce532"> 1050</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a48ffe088a119bd2f60cb715ad33ce532">advanced_inventory::redraw_sidebar</a>()</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>{</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    <a class="code hl_class" href="classinput__context.html">input_context</a> ctxt( <span class="stringliteral">&quot;ADVANCED_INVENTORY&quot;</span> );</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    ctxt.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() ) {</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a> );</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a> );</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>        <a class="code hl_function" href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">werase</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">mm_border</a> );</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>        <a class="code hl_function" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a> );</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>        <a class="code hl_function" href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">Messages::display_messages</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a>, 2, 1, <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> - 1, <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a> - 2 );</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>        <a class="code hl_function" href="classadvanced__inventory.html#a62ae50672223477fd09a06f0a8a75aab">draw_minimap</a>();</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <a class="code hl_function" href="output_8cpp.html#aa6093ccb0ebc7f7ee1f11edd5cc2711c">right_print</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a>, 0, +3, <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                         <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt; [&lt;color_yellow&gt;%s&lt;/color&gt;] keybindings &gt;&quot;</span> ),</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                         ctxt.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> ) ) );</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_watch() ) {</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>            <span class="keyword">const</span> std::string <a class="code hl_enumvalue" href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">time</a> = <a class="code hl_function" href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>            <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 0 ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <a class="code hl_enumvalue" href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">time</a> );</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>        }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a> );</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        <a class="code hl_function" href="classadvanced__inventory.html#ab2a5ea864736a63718496effc94c93fd">refresh_minimap</a>();</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    }</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>}</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aaceca3cfbe98197ab6286d6b3356ff75"> 1074</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#aaceca3cfbe98197ab6286d6b3356ff75">advanced_inventory::change_square</a>( <span class="keyword">const</span> <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> changeSquare,</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>                                        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;dpane, <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;spane )</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>{</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].get_area() == changeSquare || <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].get_area() == changeSquare ) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare].can_store_in_vehicle() &amp;&amp; changeSquare != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a> ) {</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>            <span class="comment">// only deal with spane, as you can&#39;t _directly_ change dpane</span></div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>            <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == changeSquare ) {</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare], !dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() );</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>                spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() ) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                <span class="comment">// swap the `in_vehicle` element of each pane if &quot;one in, one out&quot;</span></div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()], !spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() );</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()], !dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() );</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <a class="code hl_function" href="classadvanced__inventory.html#aff053d1eda71abdca82ba282a2df48ef">swap_panes</a>();</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        }</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        <span class="comment">// we need to check the original area if we can place items in vehicle storage</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare].canputitems( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a176bc037c1775727cdb0ce5fe47d837b">get_cur_item_ptr</a>() ) ) {</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        <span class="keywordtype">bool</span> in_vehicle_cargo = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <span class="keywordflow">if</span>( changeSquare == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a> ) {</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare].set_container( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a176bc037c1775727cdb0ce5fe47d837b">get_cur_item_ptr</a>() );</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a> ) {</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare].set_container( <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            <span class="comment">// auto select vehicle if items exist at said square, or both are empty</span></div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare].can_store_in_vehicle() &amp;&amp; spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() != changeSquare ) {</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>            <span class="keywordflow">if</span>( changeSquare == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a> ) {</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>                in_vehicle_cargo = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>                <span class="comment">// check item stacks in vehicle and map at said square</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>                <span class="keyword">auto</span> sq = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare];</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>                <span class="keyword">auto</span> <a class="code hl_class" href="classmap__stack.html">map_stack</a> = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a5130a127601b67e569eaef37a1a88610">i_at</a>( sq.pos );</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>                <span class="keyword">auto</span> veh_stack = sq.veh-&gt;get_items( sq.vstor );</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>                <span class="comment">// auto switch to vehicle storage if vehicle items are there, or neither are there</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>                <span class="keywordflow">if</span>( !veh_stack.empty() || <a class="code hl_class" href="classmap__stack.html">map_stack</a>.<a class="code hl_function" href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">empty</a>() ) {</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>                    in_vehicle_cargo = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>                }</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>        }</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[changeSquare], in_vehicle_cargo );</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>        spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a6212a9703170092d77e8e6eeb51cabf8">index</a> = 0;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>        spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>        <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>            dpane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        }</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t put items there!&quot;</span> ) );</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>}</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aebdf4e9393d79d4cf3f38de2d9eddf91"> 1125</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#aebdf4e9393d79d4cf3f38de2d9eddf91">advanced_inventory::start_activity</a>( <span class="keyword">const</span> <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> destarea, <span class="keyword">const</span> <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> srcarea,</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> *sitem, <span class="keywordtype">int</span> &amp;amount_to_move,</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> from_vehicle, <span class="keyword">const</span> <span class="keywordtype">bool</span> to_vehicle )<span class="keyword"> const</span></div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> by_charges = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;count_by_charges();</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span> </div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>    <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="advanced__inv_8cpp.html#a4f7061d0eb9f1e0fd40f8543a9ea20a5">ACT_WEAR</a> );</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> </div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>        <span class="keywordflow">if</span>( by_charges ) {</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            <span class="keywordflow">if</span>( from_vehicle ) {</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].veh, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].vstor ),</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>                                                    sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].pos ), sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            }</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( amount_to_move );</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            <span class="keywordflow">for</span>( std::list&lt;item *&gt;::iterator it = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.begin(); amount_to_move &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>                 it != sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.end(); ++it ) {</div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>                <span class="keywordflow">if</span>( from_vehicle ) {</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].veh, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].vstor ),</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>                                                        *it );</div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].pos ), *it );</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>                }</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( 0 );</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>                --amount_to_move;</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>            }</div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>        }</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>        <span class="comment">// Find target items and quantities thereof for the new activity</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        std::vector&lt;item_location&gt; target_items;</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>        std::vector&lt;int&gt; quantities;</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>        <span class="keywordflow">if</span>( by_charges ) {</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>            <span class="keywordflow">if</span>( from_vehicle ) {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>                target_items.emplace_back( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].veh, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].vstor ),</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>                                           sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                target_items.emplace_back( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].pos ), sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>            }</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>            quantities.push_back( amount_to_move );</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span>            <span class="keywordflow">for</span>( std::list&lt;item *&gt;::iterator it = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.begin(); amount_to_move &gt; 0 &amp;&amp;</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>                 it != sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.end(); ++it ) {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>                <span class="keywordflow">if</span>( from_vehicle ) {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>                    target_items.emplace_back( <a class="code hl_class" href="classvehicle__cursor.html">vehicle_cursor</a>( *<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].veh, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].vstor ),</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span>                                               *it );</div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>                    target_items.emplace_back( <a class="code hl_class" href="classmap__cursor.html">map_cursor</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].pos ), *it );</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>                }</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                quantities.push_back( 0 );</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                --amount_to_move;</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            }</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>        }</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span> </div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>        <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>            std::vector&lt;pickup::pick_drop_selection&gt; targets = <a class="code hl_function" href="namespacepickup.html#a876f9437271da80f53cc2a748cd6e240">pickup::optimize_pickup</a>( target_items,</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>                    quantities );</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classpickup__activity__actor.html">pickup_activity_actor</a>(</div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>                    targets,</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>                    from_vehicle ? <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a> : <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() )</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>                                                   ) ) );</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            <span class="comment">// Stash the destination</span></div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> relative_destination = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].off;</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span> </div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classplayer__activity.html">player_activity</a>( <a class="code hl_class" href="classmove__items__activity__actor.html">move_items_activity_actor</a>(</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>                    target_items,</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>                    quantities,</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>                    to_vehicle,</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>                    relative_destination</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>                                                   ) ) );</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>        }</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>    }</div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>}</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span> </div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a62ca16ce8205feb7114014befd7257d2"> 1203</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#a62ca16ce8205feb7114014befd7257d2">advanced_inventory::action_move_item</a>( <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> *sitem,</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;dpane, <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;spane,</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>        <span class="keyword">const</span> std::string &amp;<a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> )</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>{</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>    <span class="keywordflow">if</span>( sitem == <span class="keyword">nullptr</span> || !sitem-&gt;<a class="code hl_function" href="classadvanced__inv__listitem.html#a9429cf3bf6e7e037ea24beffa0429f89">is_item_entry</a>() ) {</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>    }</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>    <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> destarea = dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>();</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>    <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> srcarea = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a2d4e8868df3bf42a4f2e2f6beb2fe45b">area</a>;</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>    <span class="keywordtype">bool</span> restore_area = destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a>;</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#a814330bc95db8c5962477d574f454ad3">query_destination</a>( destarea ) ) {</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>    }</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>    <span class="comment">// Not necessarily equivalent to spane.in_vehicle() if using AIM_ALL</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>    <span class="keywordtype">bool</span> from_vehicle = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab6bce7c4fab92d47f3baecdee859f155">from_vehicle</a>;</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>    <span class="keywordtype">bool</span> to_vehicle = dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>();</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span> </div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>    <span class="comment">// AIM_ALL should disable same area check and handle it with proper filtering instead.</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>    <span class="comment">// This is a workaround around the lack of vehicle location info in</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>    <span class="comment">// either aim_location or advanced_inv_listitem.</span></div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[srcarea].is_same( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea] ) &amp;&amp;</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> &amp;&amp;</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Source area is the same as destination (%s).&quot;</span> ), <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> );</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>    }</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>    assert( !sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.empty() );</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="keywordtype">int</span> amount_to_move = 0;</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#a8fd8496fa06d19335a67bc1de3c7864a">query_charges</a>( destarea, *sitem, <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, amount_to_move ) ) {</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    <span class="comment">// This makes sure that all item references in the advanced_inventory_pane::items vector</span></div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>    <span class="comment">// are recalculated, even when they might not have changed, but they could (e.g. items</span></div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>    <span class="comment">// taken from inventory, but unable to put into the cargo trunk go back into the inventory,</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>    <span class="comment">// but are potentially at a different place).</span></div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    assert( amount_to_move &gt; 0 );</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a> ) {</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#a66ecf8de435189cb6670a8db3c354461">move_content</a>( *sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front(),</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>                           *<a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].get_container( to_vehicle ) ) ) {</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>        }</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( srcarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span> </div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>        <span class="comment">// make sure advanced inventory is reopened after activity completion.</span></div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>        <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span> </div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>        <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="advanced__inv_8cpp.html#a4f7061d0eb9f1e0fd40f8543a9ea20a5">ACT_WEAR</a> );</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span> </div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.targets.emplace_back( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.values.push_back( amount_to_move );</div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>            <a class="code hl_class" href="classitem.html">item</a> *itm = &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.i_at( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> );</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span> </div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            <a class="code hl_typedef" href="item__handling__util_8h.html#ab6eddf239a037205dfd747394734dbcd">drop_locations</a> to_move = { <a class="code hl_typedef" href="item__handling__util_8h.html#a8f6e34dc3a1ced0b9d56d2c2b016bbfc">drop_location</a>( <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, itm ), amount_to_move ) };</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classdrop__activity__actor.html">drop_activity_actor</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, to_move, !to_vehicle, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].off ) );</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>        }</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>        <span class="comment">// exit so that the activity can be carried out</span></div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>        <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span> </div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( srcarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span> </div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        <span class="comment">// make sure advanced inventory is reopened after activity completion.</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span> </div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        <span class="comment">// worn items are never stacked, so this should check out</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>        assert( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.size() == 1 );</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>        <a class="code hl_class" href="classitem.html">item</a> *itm = sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front();</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>        <a class="code hl_class" href="classret__val.html">ret_val&lt;bool&gt;</a> takeoff_rv = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.can_takeoff( *itm );</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>        <span class="keywordflow">if</span>( !takeoff_rv.<a class="code hl_function" href="classret__val.html#afe534a279647e88c4ab321d0c338d9d5">success</a>() ) {</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <span class="stringliteral">&quot;%s&quot;</span>, takeoff_rv.<a class="code hl_function" href="classret__val.html#a677622bcf3fc4937ece9375e9bfc6625">c_str</a>() );</div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.takeoff( *itm );</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>            <a class="code hl_typedef" href="item__handling__util_8h.html#ab6eddf239a037205dfd747394734dbcd">drop_locations</a> to_move = { <a class="code hl_typedef" href="item__handling__util_8h.html#a8f6e34dc3a1ced0b9d56d2c2b016bbfc">drop_location</a>( <a class="code hl_class" href="classitem__location.html">item_location</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, itm ), amount_to_move ) };</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_class" href="classdrop__activity__actor.html">drop_activity_actor</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, to_move, !to_vehicle, <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].off ) );</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        }</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <span class="comment">// exit so that the activity can be carried out</span></div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>        <span class="comment">// from map/vehicle: start ACT_PICKUP or ACT_MOVE_ITEMS as necessary</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>        <span class="comment">// Make sure advanced inventory is reopened after activity completion.</span></div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>        <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>        <a class="code hl_function" href="classadvanced__inventory.html#aebdf4e9393d79d4cf3f38de2d9eddf91">start_activity</a>( destarea, srcarea, sitem, amount_to_move, from_vehicle, to_vehicle );</div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span> </div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>        <span class="comment">// exit so that the activity can be carried out</span></div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span>        <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>    }</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span> </div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    <span class="comment">// if dest was AIM_ALL then we used query_destination and should undo that</span></div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    <span class="keywordflow">if</span>( restore_area ) {</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>        dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#af2c4b2f624bbf139fe14db30f4c4a619">restore_area</a>();</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    }</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a>;</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>}</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span> </div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a49c08409dd0ac9f82dcb8ddfb529efbf"> 1302</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a49c08409dd0ac9f82dcb8ddfb529efbf">advanced_inventory::action_examine</a>( <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> *sitem,</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;spane )</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>{</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>    <span class="keywordtype">int</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 0;</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>    <span class="keyword">const</span> <span class="keyword">auto</span> info_width = [<span class="keyword">this</span>]() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>    };</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>    <span class="keyword">const</span> <span class="keyword">auto</span> info_startx = [<span class="keyword">this</span>]() -&gt; <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a> + ( <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> == advanced_inventory::side::left ? <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2 : 0 );</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>    };</div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>    <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> || spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>        <span class="keywordtype">int</span> idx = spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ? sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> :</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>                  <a class="code hl_function" href="classCharacter.html#a551a7515cd7bf17ebae122cc816cf66f">player::worn_position_to_index</a>( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">idx</a> );</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>        <a class="code hl_class" href="classitem__location.html">item_location</a> loc( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u, &amp;<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.i_at( idx ) );</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>        <span class="comment">// Setup a &quot;return to AIM&quot; activity. If examining the item creates a new activity</span></div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>        <span class="comment">// (e.g. reading, reloading, activating), the new activity will be put on top of</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>        <span class="comment">// &quot;return to AIM&quot;. Once the new activity is finished, &quot;return to AIM&quot; comes back</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>        <span class="comment">// (automatically, see player activity handling) and it re-opens the AIM.</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>        <span class="comment">// If examining the item did not create a new activity, we have to remove</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>        <span class="comment">// &quot;return to AIM&quot;.</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>        <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>        assert( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_activity( <a class="code hl_variable" href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">ACT_ADV_INVENTORY</a> ) );</div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span> </div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>        <a class="code hl_function" href="namespaceexamine__item__menu.html#a0ef68cd5b60cc38b1d1655c81dea6b8c">examine_item_menu::run</a>( loc, info_startx, info_width,</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                                <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> == advanced_inventory::side::left ?</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>                                <a class="code hl_enumvalue" href="namespaceexamine__item__menu.html#a8b68cfe375a1712f8dd0cef484976020a811882fecd5c7618d7099ebbd39ea254">examine_item_menu::menu_pos_t::left</a> :</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>                                <a class="code hl_enumvalue" href="namespaceexamine__item__menu.html#a8b68cfe375a1712f8dd0cef484976020a7c4f29407893c334a6cb7a87bf045c0d">examine_item_menu::menu_pos_t::right</a> );</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_activity( <a class="code hl_variable" href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">ACT_ADV_INVENTORY</a> ) ) {</div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.cancel_activity();</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        }</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        <span class="comment">// Might have changed a stack (activated an item, repaired an item, etc.)</span></div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>        <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> ) {</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.inv.restack( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>        <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;it = *sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front();</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>        std::vector&lt;iteminfo&gt; vThisItem;</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>        std::vector&lt;iteminfo&gt; vDummy;</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>        it.<a class="code hl_function" href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">info</a>( <span class="keyword">true</span>, vThisItem );</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>        <a class="code hl_struct" href="structitem__info__data.html">item_info_data</a> data( it.<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>(), it.<a class="code hl_function" href="classitem.html#a70359b9e831ed97023891631058595b6">type_name</a>(), vThisItem, vDummy );</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        data.<a class="code hl_variable" href="structitem__info__data.html#ae21c7618dbb6387bdc604ad7cf552dc9">handle_scrolling</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span> </div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="output_8cpp.html#ae94727a9102271cfed214e5988c8f440">draw_item_info</a>( [&amp;]() -&gt; <a class="code hl_class" href="classcatacurses_1_1window.html">catacurses::window</a> {</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( 0, info_width(), <a class="code hl_struct" href="structpoint.html">point</a>( info_startx(), 0 ) );</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>        }, data ).get_first_input();</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span>    }</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == <a class="code hl_variable" href="input_8h.html#a3eb5e354329f66eddf45515dedadfc14">KEY_NPAGE</a> || <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == <a class="code hl_variable" href="input_8h.html#af3b3462a5f8df1b9fae4c8dec239bc76">KEY_DOWN</a> ) {</div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( +1 );</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == <a class="code hl_variable" href="input_8h.html#a6759cfc3c55dcda34effc92014d899e3">KEY_PPAGE</a> || <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> == <a class="code hl_variable" href="input_8h.html#af4f9cc98a80e8e792d91d13ef7036005">KEY_UP</a> ) {</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>        spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( -1 );</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>    }</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>}</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span> </div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a3f1eaedb86e958387770e71ba02959f7"> 1359</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a3f1eaedb86e958387770e71ba02959f7">advanced_inventory::display</a>()</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>{</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>    <a class="code hl_function" href="classadvanced__inventory.html#a7aa370e38f80d5a1b99a8d0b5f48bfe3">init</a>();</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span> </div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.inv.restack( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u );</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span> </div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>    <a class="code hl_class" href="classinput__context.html">input_context</a> ctxt{ <a class="code hl_function" href="classadvanced__inventory.html#a6ed56ac7f33ace4e7b9f5e56f754e353">register_ctxt</a>() };</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span> </div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>    <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>    <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span> </div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>    std::unique_ptr&lt;string_input_popup&gt; spopup;</div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>    std::unique_ptr&lt;ui_adaptor&gt; <a class="code hl_namespace" href="namespaceui.html">ui</a>;</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() ) {</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a> = std::make_unique&lt;ui_adaptor&gt;();</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a>-&gt;on_screen_resize( [&amp;]( <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>            <span class="keyword">constexpr</span> <span class="keywordtype">int</span> min_w_height = 10;</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> min_w_width = <a class="code hl_variable" href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a>;</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> max_w_width = get_option&lt;bool&gt;( <span class="stringliteral">&quot;AIM_WIDTH&quot;</span> ) ? <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> : std::max( 120,</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>                                    <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - 2 * ( <a class="code hl_function" href="classpanel__manager.html#a1196cd08699822653246ccafd856f72c">panel_manager::get_manager</a>().get_width_right() +</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>                                                  <a class="code hl_function" href="classpanel__manager.html#a1196cd08699822653246ccafd856f72c">panel_manager::get_manager</a>().get_width_left() ) );</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span> </div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a> = <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; min_w_height + <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a> ? min_w_height : <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> - <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a>;</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> = TERMX &lt; min_w_width ? min_w_width : TERMX &gt; max_w_width ? max_w_width :</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>                      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> );</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>            <span class="comment">//(TERMY&gt;w_height)?(TERMY-w_height)/2:0;</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"> 1386</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> = 0;</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a> = <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> &gt; <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> ? ( <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> ) / 2 : 0;</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span> </div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">head</a> = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a>, <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> - <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a>, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a>, <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> ) );</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">mm_border</a> = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae386d305fc3d0774cb143513f9c2cdff">minimap_height</a> + 2, <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a> + 2,</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>                                            <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a> + ( <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> - ( <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a> + 2 ) ), <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> ) );</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a> = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae386d305fc3d0774cb143513f9c2cdff">minimap_height</a>, <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a>,</div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>                                          <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a> + ( <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> - ( <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a> + 1 ) ), <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> + 1 ) );</div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>            <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].window = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a>, <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a>,</div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>                                 <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> + <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a> ) );</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>            <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].window = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a>, <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a> + <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2,</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>                                  <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> + <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a> ) );</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span> </div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>            <span class="comment">// 2 for the borders, 5 for the header stuff</span></div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> = <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a> - 2 - 5;</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span> </div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"> 1402</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> &amp;&amp; spopup ) {</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>                spopup-&gt;window( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].window, <a class="code hl_struct" href="structpoint.html">point</a>( 4, <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a> - 1 ), <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2 - 4 );</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>            }</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span> </div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>            <a class="code hl_namespace" href="namespaceui.html">ui</a>.position( <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">colstart</a>, <a class="code hl_variable" href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">headstart</a> ), <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a>, <a class="code hl_variable" href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">head_height</a> + <a class="code hl_variable" href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">w_height</a> ) );</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>        } );</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a>-&gt;mark_resize();</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a>-&gt;on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>            <a class="code hl_function" href="classadvanced__inventory.html#aca2a67fe1a2582c1ffc2be3d7d6c3851">redraw_pane</a>( advanced_inventory::side::left );</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>            <a class="code hl_function" href="classadvanced__inventory.html#aca2a67fe1a2582c1ffc2be3d7d6c3851">redraw_pane</a>( <a class="code hl_enumvalue" href="namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">advanced_inventory::side::right</a> );</div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>            <a class="code hl_function" href="classadvanced__inventory.html#a48ffe088a119bd2f60cb715ad33ce532">redraw_sidebar</a>();</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span> </div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> &amp;&amp; spopup ) {</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>                <a class="code hl_function" href="output_8cpp.html#a2b52716de2efb474f7eeaa1ee4e04105">draw_item_filter_rules</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].window, 1, 11, <a class="code hl_enumvalue" href="output_8h.html#aa3bbd067f432dba23cd7bdfe75d7c3b4ae75ab17a550f46adbbe891b819cf951d">item_filter_type::FILTER</a> );</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>                <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].window, <a class="code hl_struct" href="structpoint.html">point</a>( 2, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].window ) - 1 ), <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>, <span class="stringliteral">&quot;&lt; &quot;</span> );</div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>                <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].window, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">w_width</a> / 2 - 4, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].window ) - 1 ), <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>,</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>                           <span class="stringliteral">&quot; &gt;&quot;</span> );</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>                spopup-&gt;query_string( <span class="comment">/*loop=*/</span><span class="keyword">false</span>, <span class="comment">/*draw_only=*/</span><span class="keyword">true</span> );</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>            }</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>        } );</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>    }</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span> </div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>    <span class="keywordflow">while</span>( !<a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> ) {</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.moves &lt; 0 ) {</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>            <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">do_return_entry</a>();</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>        }</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span>        <a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a> = <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> == advanced_inventory::side::left ? <a class="code hl_enumvalue" href="namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">advanced_inventory::side::right</a> :</div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>               advanced_inventory::side::left;</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span> </div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>        <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>            <a class="code hl_function" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>        }</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span> </div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span>        <span class="comment">// source and destination pane</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;spane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>];</div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span>        <a class="code hl_class" href="classadvanced__inventory__pane.html">advanced_inventory_pane</a> &amp;dpane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>];</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        <span class="comment">// current item in source pane, might be null</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>        <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> *sitem = spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a176bc037c1775727cdb0ce5fe47d837b">get_cur_item_ptr</a>();</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>        <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> changeSquare = <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a415f1e40aef670ae393e793f3e97d1c1">NUM_AIM_LOCATIONS</a>;</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span> </div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        <span class="keyword">const</span> std::string <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() ? <span class="stringliteral">&quot;MOVE_ALL_ITEMS&quot;</span> : ctxt.handle_input();</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CATEGORY_SELECTION&quot;</span> ) {</div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>            <a class="code hl_variable" href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">inCategoryMode</a> = !<a class="code hl_variable" href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">inCategoryMode</a>;</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;ITEMS_DEFAULT&quot;</span> ) {</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>            <span class="keywordflow">for</span>( <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> cside : {</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>                     <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>, <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a></div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>                 } ) {</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span>                <span class="keyword">auto</span> &amp;pane = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[cside];</div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"> 1453</span>                <span class="keywordtype">int</span> i_location = cside == <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a> ? <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a31fe7569d3cf6fa8fe91eabb1c8dcf3e">saved_area</a> : <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#afb375e0d4ca44d95ee4bfd0a6442258a">saved_area_right</a>;</div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>                <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> location = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( i_location );</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>                <span class="keywordflow">if</span>( pane.get_area() != location || location == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>                    pane.recalc = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>                }</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>                pane.set_area( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[location] );</div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>            }</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SAVE_DEFAULT&quot;</span> ) {</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a31fe7569d3cf6fa8fe91eabb1c8dcf3e">saved_area</a> = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].get_area();</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#afb375e0d4ca44d95ee4bfd0a6442258a">saved_area_right</a> = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].get_area();</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Default layout was saved.&quot;</span> ) );</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classadvanced__inventory.html#a85c22e63c355f3ef14f4399d02acc51c">get_square</a>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, changeSquare ) ) {</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>            <a class="code hl_function" href="classadvanced__inventory.html#aaceca3cfbe98197ab6286d6b3356ff75">change_square</a>( changeSquare, dpane, spane );</div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_FAVORITE&quot;</span> ) {</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>            <span class="keywordflow">if</span>( sitem == <span class="keyword">nullptr</span> || !sitem-&gt;<a class="code hl_function" href="classadvanced__inv__listitem.html#a9429cf3bf6e7e037ea24beffa0429f89">is_item_entry</a>() ) {</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>            }</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> *<a class="code hl_class" href="classitem.html">item</a> : sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a> ) {</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>                <a class="code hl_class" href="classitem.html">item</a>-&gt;<a class="code hl_function" href="classitem.html#a9a1f33d04abe5ec73a31213be8d0c44e">set_favorite</a>( !<a class="code hl_class" href="classitem.html">item</a>-&gt;<a class="code hl_variable" href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">is_favorite</a> );</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>            }</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span>            <span class="comment">// In case we&#39;ve merged faved and unfaved items</span></div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_SINGLE_ITEM&quot;</span> ||</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>                   <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_VARIABLE_ITEM&quot;</span> ||</div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>                   <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_ITEM_STACK&quot;</span> ) {</div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <a class="code hl_function" href="classadvanced__inventory.html#a62ca16ce8205feb7114014befd7257d2">action_move_item</a>( sitem, dpane, spane, <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> );</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_ALL_ITEMS&quot;</span> ) {</div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <a class="code hl_function" href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">move_all_items</a>();</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SORT&quot;</span> ) {</div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classadvanced__inventory.html#ae2448ee4634d1bb472405f0e99ed2243">show_sort_menu</a>( spane ) ) {</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span>                <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span>            }</div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;FILTER&quot;</span> ) {</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span>            std::string filter = spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#adf44cdbe904fdadbeee158e3f773ce4f">filter</a>;</div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"> 1488</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>            <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>                spopup = std::make_unique&lt;string_input_popup&gt;();</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>                spopup-&gt;max_length( 256 ).text( filter );</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>                <a class="code hl_namespace" href="namespaceui.html">ui</a>-&gt;mark_resize();</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>            }</div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span> </div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>            <a class="code hl_class" href="classime__sentry.html">ime_sentry</a> sentry;</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span> </div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>            <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>                <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>                    <a class="code hl_function" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>                }</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>                std::string new_filter = spopup-&gt;query_string( <span class="keyword">false</span> );</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>                <span class="keywordflow">if</span>( spopup-&gt;canceled() ) {</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>                    <span class="comment">// restore original filter</span></div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>                    spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a477e9a726f662fb52211d144196432e2">set_filter</a>( filter );</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>                    spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a477e9a726f662fb52211d144196432e2">set_filter</a>( new_filter );</div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>                }</div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>            } <span class="keywordflow">while</span>( !spopup-&gt;canceled() &amp;&amp; !spopup-&gt;confirmed() );</div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>            <a class="code hl_variable" href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">filter_edit</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>            spopup = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;RESET_FILTER&quot;</span> ) {</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>            spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a477e9a726f662fb52211d144196432e2">set_filter</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_AUTO_PICKUP&quot;</span> ) {</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span>            <span class="keywordflow">if</span>( sitem == <span class="keyword">nullptr</span> || !sitem-&gt;<a class="code hl_function" href="classadvanced__inv__listitem.html#a9429cf3bf6e7e037ea24beffa0429f89">is_item_entry</a>() ) {</div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"> 1515</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>            }</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>            <span class="keywordflow">if</span>( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a26c467cfe32bbf5fbadd155696d06df0">autopickup</a> ) {</div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>                <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().<a class="code hl_function" href="classauto__pickup_1_1player__settings.html#a459277e128aa4ba3bc0efaf1ff01903a">remove_rule</a>( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span>                sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a26c467cfe32bbf5fbadd155696d06df0">autopickup</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span>                <a class="code hl_function" href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a>().<a class="code hl_function" href="classauto__pickup_1_1player__settings.html#ad762d2d9a39b0b7748258c5f90a3f8d9">add_rule</a>( sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front() );</div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"> 1522</span>                sitem-&gt;<a class="code hl_variable" href="classadvanced__inv__listitem.html#a26c467cfe32bbf5fbadd155696d06df0">autopickup</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>            }</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;EXAMINE&quot;</span> ) {</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>            <span class="keywordflow">if</span>( sitem == <span class="keyword">nullptr</span> || !sitem-&gt;<a class="code hl_function" href="classadvanced__inv__listitem.html#a9429cf3bf6e7e037ea24beffa0429f89">is_item_entry</a>() ) {</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>            }</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>            <a class="code hl_function" href="classadvanced__inventory.html#a49c08409dd0ac9f82dcb8ddfb529efbf">action_examine</a>( sitem, spane );</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">exit</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"> 1532</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PAGE_DOWN&quot;</span> ) {</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>            spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( +<a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> );</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PAGE_UP&quot;</span> ) {</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>            spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( -<a class="code hl_variable" href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">itemsPerPage</a> );</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;DOWN&quot;</span> ) {</div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"> 1537</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">inCategoryMode</a> ) {</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aae962e883acd344410444cdc096ee0e5">scroll_category</a>( +1 );</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( +1 );</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>            }</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;UP&quot;</span> ) {</div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"> 1543</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">inCategoryMode</a> ) {</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aae962e883acd344410444cdc096ee0e5">scroll_category</a>( -1 );</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>                spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">scroll_by</a>( -1 );</div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>            }</div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEFT&quot;</span> ) {</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> = <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>;</div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;RIGHT&quot;</span> ) {</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> = <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>;</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_TAB&quot;</span> ) {</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>            <a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a> = <a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_VEH&quot;</span> ) {</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()].can_store_in_vehicle() ) {</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>                <span class="comment">// swap the panes if going vehicle will show the same tile</span></div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>                <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() &amp;&amp; spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() != dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() ) {</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>                    <a class="code hl_function" href="classadvanced__inventory.html#aff053d1eda71abdca82ba282a2df48ef">swap_panes</a>();</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>                    <span class="comment">// disallow for dragged vehicles</span></div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a> ) {</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>                    <span class="comment">// Toggle between vehicle and ground</span></div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span>                    spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">set_area</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>()], !spane.<a class="code hl_function" href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">in_vehicle</a>() );</div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"> 1563</span>                    spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#a6212a9703170092d77e8e6eeb51cabf8">index</a> = 0;</div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"> 1564</span>                    spane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"> 1565</span>                    <span class="keywordflow">if</span>( dpane.<a class="code hl_function" href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">get_area</a>() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span>                        dpane.<a class="code hl_variable" href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"> 1567</span>                    }</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>                }</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;No vehicle storage space there!&quot;</span> ) );</div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>            }</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span>        }</div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span>    }</div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"> 1574</span>}</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span> </div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"><a class="line" href="classquery__destination__callback.html"> 1576</a></span><span class="keyword">class </span><a class="code hl_class" href="classquery__destination__callback.html">query_destination_callback</a> : <span class="keyword">public</span> <a class="code hl_class" href="classuilist__callback.html">uilist_callback</a></div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>{</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>    <span class="keyword">private</span>:</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"><a class="line" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1"> 1579</a></span>        <a class="code hl_class" href="classadvanced__inventory.html">advanced_inventory</a> &amp;<a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>        <span class="comment">// Render a fancy ASCII grid at the left of the menu.</span></div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classquery__destination__callback.html#a5754901a7eeb6ca30a4936949a0f64a3">draw_squares</a>( <span class="keyword">const</span> <a class="code hl_class" href="classuilist.html">uilist</a> *menu );</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span>    <span class="keyword">public</span>:</div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"><a class="line" href="classquery__destination__callback.html#a370e22680a80ec7841f47ca0e4a7826a"> 1583</a></span>        <a class="code hl_function" href="classquery__destination__callback.html#a370e22680a80ec7841f47ca0e4a7826a">query_destination_callback</a>( <a class="code hl_class" href="classadvanced__inventory.html">advanced_inventory</a> &amp;adv_inv ) : <a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>( adv_inv ) {}</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"><a class="line" href="classquery__destination__callback.html#ab74f4827fec770976eb877182d8c0141"> 1584</a></span>        <span class="keywordtype">void</span> <a class="code hl_function" href="classquery__destination__callback.html#ab74f4827fec770976eb877182d8c0141">refresh</a>( <a class="code hl_class" href="classuilist.html">uilist</a> *menu )<span class="keyword"> override </span>{</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>            <a class="code hl_function" href="classquery__destination__callback.html#a5754901a7eeb6ca30a4936949a0f64a3">draw_squares</a>( menu );</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>        }</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span>};</div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"> 1588</span> </div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"><a class="line" href="classquery__destination__callback.html#a5754901a7eeb6ca30a4936949a0f64a3"> 1589</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classquery__destination__callback.html#a5754901a7eeb6ca30a4936949a0f64a3">query_destination_callback::draw_squares</a>( <span class="keyword">const</span> <a class="code hl_class" href="classuilist.html">uilist</a> *menu )</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>{</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>    assert( menu-&gt;<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.size() &gt;= 9 );</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>    <span class="keywordtype">int</span> ofs = -25 - 4;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>    <span class="keywordtype">int</span> sel = 0;</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>    <span class="keywordflow">if</span>( menu-&gt;<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> &gt;= 0 &amp;&amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( menu-&gt;<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> ) &lt; menu-&gt;<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.size() ) {</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>        sel = <a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>.<a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">screen_relative_location</a>(</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>                  <span class="keyword">static_cast &lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( menu-&gt;<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> + 1 ) );</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span>    }</div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"> 1598</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 1; i &lt; 10; i++ ) {</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>        <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> loc = <a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>.<a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">screen_relative_location</a>( <span class="keyword">static_cast &lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( i ) );</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>        std::string <a class="code hl_function" href="classuilist__callback.html#a982e00fd3b4aa68d9dfddba50e77622a">key</a> = <a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>.<a class="code hl_function" href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">get_location_key</a>( loc );</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>        <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;<a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a> = <a class="code hl_variable" href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">_adv_inv</a>.<a class="code hl_function" href="classadvanced__inventory.html#a52b8a7ec907729745cfefed95a132c7b">get_one_square</a>( loc );</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>        <span class="keywordtype">bool</span> in_vehicle = <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.can_store_in_vehicle();</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *bracket = in_vehicle ? <span class="stringliteral">&quot;&lt;&gt;&quot;</span> : <span class="stringliteral">&quot;[]&quot;</span>;</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>        <span class="comment">// always show storage option for vehicle storage, if applicable</span></div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>        <span class="keywordtype">bool</span> canputitems = menu-&gt;<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>[i - 1].enabled &amp;&amp; <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.canputitems();</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> bcolor = canputitems ? sel == loc ? <a class="code hl_define" href="color_8h.html#a995c6d4982f304048812605b34fb31cb">h_white</a> : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> kcolor = canputitems ? sel == loc ? <a class="code hl_define" href="color_8h.html#a995c6d4982f304048812605b34fb31cb">h_white</a> : <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a> : <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> p( <a class="code hl_function" href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a>.hscreen + <a class="code hl_struct" href="structpoint.html">point</a>( ofs, 5 ) );</div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"> 1609</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( menu-&gt;<a class="code hl_variable" href="classuilist.html#a363d10490fb72bde7b2537fd06836802">window</a>, p, bcolor, <span class="stringliteral">&quot;%c&quot;</span>, bracket[0] );</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( menu-&gt;<a class="code hl_variable" href="classuilist.html#a363d10490fb72bde7b2537fd06836802">window</a>, kcolor, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code hl_function" href="classuilist__callback.html#a982e00fd3b4aa68d9dfddba50e77622a">key</a> );</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>        <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( menu-&gt;<a class="code hl_variable" href="classuilist.html#a363d10490fb72bde7b2537fd06836802">window</a>, bcolor, <span class="stringliteral">&quot;%c&quot;</span>, bracket[1] );</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>    }</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( menu-&gt;<a class="code hl_variable" href="classuilist.html#a363d10490fb72bde7b2537fd06836802">window</a> );</div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"> 1614</span>}</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span> </div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a814330bc95db8c5962477d574f454ad3"> 1616</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#a814330bc95db8c5962477d574f454ad3">advanced_inventory::query_destination</a>( <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> &amp;def )</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>{</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span>    <span class="keywordflow">if</span>( def != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"> 1619</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[def].canputitems() ) {</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>        }</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t put items there!&quot;</span> ) );</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>    }</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span> </div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>    <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>    menu.<a class="code hl_variable" href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">text</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select destination&quot;</span> );</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span>    <span class="comment">/* free space for the squares */</span></div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span>    menu.<a class="code hl_variable" href="classuilist.html#a9890cac1dc13adf140510719b160bde5">pad_left_setup</a> = 9;</div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span>    <a class="code hl_class" href="classquery__destination__callback.html">query_destination_callback</a> cb( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span>    menu.<a class="code hl_variable" href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">callback</a> = &amp;cb;</div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span> </div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span>    {</div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span>        std::vector &lt;aim_location&gt; ordered_locs;</div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span>        <span class="keyword">static_assert</span>( <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a> - <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a> == 8,</div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"> 1636</span>                       <span class="stringliteral">&quot;Expected 9 contiguous directions in the aim_location enum&quot;</span> );</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a>; i &lt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a>; i++ ) {</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>            ordered_locs.push_back( <a class="code hl_function" href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">screen_relative_location</a>( <span class="keyword">static_cast &lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( i ) ) );</div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>        }</div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;ordered_loc : ordered_locs ) {</div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>            <span class="keyword">auto</span> &amp;s = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[ordered_loc];</div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a> = s.get_item_count();</div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>            std::string <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a7afa939f8bd773f5f7e326990b07580c">prefix</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%2d/%d&quot;</span>, <a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>, <a class="code hl_variable" href="game__constants_8h.html#aee38c8a585c0020fc8ade031dab65393">MAX_ITEM_IN_SQUARE</a> );</div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a> &gt;= <a class="code hl_variable" href="game__constants_8h.html#aee38c8a585c0020fc8ade031dab65393">MAX_ITEM_IN_SQUARE</a> ) {</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>                <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a7afa939f8bd773f5f7e326990b07580c">prefix</a> += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (FULL)&quot;</span> );</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>            }</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>            menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( ordered_loc,</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>                           s.canputitems() &amp;&amp; s.id != <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].get_area(),</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>                           <a class="code hl_function" href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">get_location_key</a>( ordered_loc )[0],</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span>                           <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a7afa939f8bd773f5f7e326990b07580c">prefix</a> + <span class="stringliteral">&quot; &quot;</span> + s.name + <span class="stringliteral">&quot; &quot;</span> + ( s.veh != <span class="keyword">nullptr</span> ? s.veh-&gt;name : <span class="stringliteral">&quot;&quot;</span> ) );</div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>        }</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>    }</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    <span class="comment">// Selected keyed to uilist.entries, which starts at 0.</span></div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>    menu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a5b8734a9d1c2a5e441d4b8a4b0e55c1e">last_popup_dest</a> - <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a>;</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>    menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>    <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a> &amp;&amp; menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt;= <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a> ) {</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        assert( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>].canputitems() );</div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>        def = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a><span class="keyword">&gt;</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> );</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>        <span class="comment">// we have to set the destination pane so that move actions will target it</span></div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>        <span class="comment">// we can use restore_area later to undo this</span></div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>        <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].set_area( <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[def], <span class="keyword">true</span> );</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>        <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a5b8734a9d1c2a5e441d4b8a4b0e55c1e">last_popup_dest</a> = menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a>;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>    }</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>}</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span> </div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a66ecf8de435189cb6670a8db3c354461"> 1668</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#a66ecf8de435189cb6670a8db3c354461">advanced_inventory::move_content</a>( <a class="code hl_class" href="classitem.html">item</a> &amp;src_container, <a class="code hl_class" href="classitem.html">item</a> &amp;dest_container )</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>{</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>    <span class="keywordflow">if</span>( !src_container.<a class="code hl_function" href="classitem.html#a723753bab4cc789e3ec186846c9916a3">is_container</a>() ) {</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Source must be container.&quot;</span> ) );</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>    }</div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>    <span class="keywordflow">if</span>( src_container.<a class="code hl_function" href="classitem.html#a5996f63ca1797fc01482678b51a87680">is_container_empty</a>() ) {</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Source container is empty.&quot;</span> ) );</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>    }</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span> </div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>    <a class="code hl_class" href="classitem.html">item</a> &amp;src_contents = src_container.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>();</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span> </div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>    <span class="keywordflow">if</span>( !src_contents.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can unload only liquids into target container.&quot;</span> ) );</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>    }</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span> </div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>    std::string err;</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>    <span class="comment">// TODO: Allow buckets here, but require them to be on the ground or wielded</span></div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> amount = dest_container.<a class="code hl_function" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">get_remaining_capacity_for_liquid</a>( src_contents, <span class="keyword">false</span>, &amp;err );</div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>    <span class="keywordflow">if</span>( !err.empty() ) {</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( err );</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>    }</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>    <span class="keywordflow">if</span>( src_container.<a class="code hl_function" href="classitem.html#aabd0667301ad29a57bb257acfd7a4470">is_non_resealable_container</a>() ) {</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="keywordflow">if</span>( src_contents.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &gt; amount ) {</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t partially unload liquids from unsealable container.&quot;</span> ) );</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>        }</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>        src_container.<a class="code hl_function" href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">on_contents_changed</a>();</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>    }</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>    dest_container.<a class="code hl_function" href="classitem.html#a3466a1bff4903c7b2d3f570187b73b2a">fill_with</a>( src_contents, amount );</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span> </div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>    <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#a9a47d5cf0efecea53d34dfd6ff0f113f">adv_inv_container_content_type</a> = dest_container.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>().<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>();</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>    <span class="keywordflow">if</span>( src_contents.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt;= 0 ) {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>        src_container.<a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">clear_items</a>();</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>    }</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span> </div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>}</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span> </div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a8fd8496fa06d19335a67bc1de3c7864a"> 1710</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#a8fd8496fa06d19335a67bc1de3c7864a">advanced_inventory::query_charges</a>( <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> destarea, <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> &amp;sitem,</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>                                        <span class="keyword">const</span> std::string &amp;<a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, <span class="keywordtype">int</span> &amp;amount )</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>{</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>    <span class="comment">// should be a specific location instead</span></div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>    assert( destarea != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> );</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>    <span class="comment">// valid item is obviously required</span></div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>    assert( !sitem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.empty() );</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>    <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it = *sitem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front();</div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>    <a class="code hl_class" href="classadvanced__inv__area.html">advanced_inv_area</a> &amp;p = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea];</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> by_charges = it.<a class="code hl_function" href="classitem.html#a40963a016376016eb408bdb9dbb94388">count_by_charges</a>();</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>    <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> free_volume = p.<a class="code hl_function" href="classadvanced__inv__area.html#a1167761883fcb0249190dee49696ad69">free_volume</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].in_vehicle() );</div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>    <span class="comment">// default to move all, unless if being equipped</span></div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> input_amount = by_charges ? it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_SINGLE_ITEM&quot;</span> ? 1 : sitem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ae7cfe9308eb5694aa0bb946b6ffe39be">stacks</a>;</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>    <span class="comment">// there has to be something to begin with</span></div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>    assert( input_amount &gt; 0 );</div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>    amount = input_amount;</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span> </div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>    <span class="comment">// Includes moving from/to inventory and around on the map.</span></div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">made_of</a>( <a class="code hl_enumvalue" href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a> ) ) {</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>        <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You can&#39;t pick up a liquid.&quot;</span> ) );</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>    }</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span> </div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    <span class="comment">// Check volume, this should work the same for inventory, map and vehicles, but not for worn</span></div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> room_for = it.<a class="code hl_function" href="classitem.html#abc27dc693d588feea7812432929fb5a9">charges_per_volume</a>( free_volume );</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>    <span class="keywordflow">if</span>( amount &gt; room_for &amp;&amp; <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[destarea].<span class="keywordtype">id</span> != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>        <span class="keywordflow">if</span>( room_for &lt;= 0 ) {</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Destination area is full.  Remove some items first.&quot;</span> ) );</div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>        }</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>        amount = std::min( room_for, amount );</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>    }</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>    <span class="comment">// Map and vehicles have a maximal item count, check that. Inventory does not have this.</span></div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>    <span class="keywordflow">if</span>( destarea != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> &amp;&amp;</div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>        destarea != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> &amp;&amp;</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>        destarea != <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a> ) {</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> cntmax = p.<a class="code hl_variable" href="classadvanced__inv__area.html#a3b425a128862020d71e463ecb363855f">max_size</a> - p.<a class="code hl_function" href="classadvanced__inv__area.html#a6f8ade53a47f930f0a129923b6972578">get_item_count</a>();</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <span class="comment">// For items counted by charges, adding it adds 0 items if something there stacks with it.</span></div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span> adds0 = by_charges &amp;&amp; std::any_of( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].items.begin(), <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].items.end(),</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>        [&amp;it]( <span class="keyword">const</span> <a class="code hl_class" href="classadvanced__inv__listitem.html">advanced_inv_listitem</a> &amp; li ) {</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>            return li.is_item_entry() &amp;&amp; li.items.front()-&gt;stacks_with( it );</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>        } );</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>        <span class="keywordflow">if</span>( cntmax &lt;= 0 &amp;&amp; !adds0 ) {</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Destination area has too many items.  Remove some first.&quot;</span> ) );</div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>        }</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>        <span class="comment">// Items by charge count as a single item, regardless of the charges. As long as the</span></div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>        <span class="comment">// destination can hold another item, one can move all charges.</span></div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>        <span class="keywordflow">if</span>( !by_charges ) {</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>            amount = std::min( cntmax, amount );</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>        }</div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>    }</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <span class="comment">// Inventory has a weight capacity, map and vehicle don&#39;t have that</span></div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a>  || destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> unitweight = it.<a class="code hl_function" href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">weight</a>() / ( by_charges ? it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : 1 );</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::mass</a> max_weight = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="advanced__inv_8cpp.html#aad53848ab2846f97f19789f86fe58e9c">trait_DEBUG_STORAGE</a> ) ?</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>                                       <a class="code hl_variable" href="namespaceunits.html#ab3b1636cb969c682c3105813cfb43a40">units::mass_max</a> : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weight_capacity() * 4 - <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weight_carried();</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>        <span class="keywordflow">if</span>( unitweight &gt; 0_gram &amp;&amp; unitweight * amount &gt; max_weight ) {</div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> weightmax = max_weight / unitweight;</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>            <span class="keywordflow">if</span>( weightmax &lt;= 0 ) {</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>                <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;This is too heavy!&quot;</span> ) );</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>            }</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>            amount = std::min( weightmax, amount );</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        }</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>    }</div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>    <span class="comment">// handle how many of armor type we can equip (max of 2 per type)</span></div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>    <span class="keywordflow">if</span>( destarea == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ) {</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<span class="keywordtype">id</span> = sitem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">items</a>.front()-&gt;typeId();</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>        <span class="comment">// how many slots are available for the item?</span></div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> slots_available = <a class="code hl_variable" href="game__constants_8h.html#a7ca773657c862460eb9f4fb2daf33335">MAX_WORN_PER_TYPE</a> - <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.amount_worn( <span class="keywordtype">id</span> );</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>        <span class="comment">// base the amount to equip on amount of slots available</span></div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>        amount = std::min( slots_available, input_amount );</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>    }</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    <span class="comment">// Now we have the final amount. Query if requested or limited room left.</span></div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOVE_VARIABLE_ITEM&quot;</span> || amount &lt; input_amount ) {</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> = by_charges ? it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> : sitem.<a class="code hl_variable" href="classadvanced__inv__listitem.html#ae7cfe9308eb5694aa0bb946b6ffe39be">stacks</a>;</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *msg = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>        std::string popupmsg;</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>        <span class="keywordflow">if</span>( amount &gt;= input_amount ) {</div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>            msg = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;How many do you want to move?  [Have %d] (0 to cancel)&quot;</span> );</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>            popupmsg = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( msg, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>            msg = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Destination can only hold %d!  Move how many?  [Have %d] (0 to cancel)&quot;</span> );</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            popupmsg = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( msg, amount, <a class="code hl_function" href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">count</a> );</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>        }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>        <span class="comment">// At this point amount contains the maximal amount that the destination can hold.</span></div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> possible_max = std::min( input_amount, amount );</div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>        <span class="keywordflow">if</span>( amount &lt;= 0 ) {</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The destination is already full!&quot;</span> ) );</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>            amount = <a class="code hl_class" href="classstring__input__popup.html">string_input_popup</a>()</div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>                     .<a class="code hl_function" href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">title</a>( popupmsg )</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>                     .<a class="code hl_function" href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">width</a>( 20 )</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>                     .<a class="code hl_function" href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">only_digits</a>( <span class="keyword">true</span> )</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>                     .<a class="code hl_function" href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">query_int</a>();</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>        }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>        <span class="keywordflow">if</span>( amount &lt;= 0 ) {</div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>        }</div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>        <span class="keywordflow">if</span>( amount &gt; possible_max ) {</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>            amount = possible_max;</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>        }</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>    }</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>}</div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span> </div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ab2a5ea864736a63718496effc94c93fd"> 1817</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#ab2a5ea864736a63718496effc94c93fd">advanced_inventory::refresh_minimap</a>()</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>{</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>    <span class="comment">// don&#39;t update ui if processing demands</span></div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">is_processing</a>() ) {</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>    }</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>    <span class="comment">// redraw border around minimap</span></div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span>    <a class="code hl_function" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">mm_border</a> );</div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span>    <span class="comment">// minor addition to border for AIM_ALL, sorta hacky</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"> 1826</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">src</a>].get_area() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> || <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_variable" href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">dest</a>].get_area() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a> ) {</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>        <span class="comment">// NOLINTNEXTLINE(cata-use-named-point-constants)</span></div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">mm_border</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, 0 ), <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>, <a class="code hl_function" href="catacharset_8cpp.html#ad959840e392a0d3b79d93cfe64119ca9">utf8_truncate</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;All&quot;</span> ), <a class="code hl_variable" href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">minimap_width</a> ) );</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>    }</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>    <span class="comment">// refresh border, then minimap</span></div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( <a class="code hl_variable" href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">mm_border</a> );</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a> );</div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>}</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span> </div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a62ae50672223477fd09a06f0a8a75aab"> 1835</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a62ae50672223477fd09a06f0a8a75aab">advanced_inventory::draw_minimap</a>()</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>{</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span>    <span class="comment">// if player is in one of the below, invert the player cell</span></div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;aim_location, 3&gt; player_locations = {</div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span>        {<a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a>, <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a>, <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a>}</div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"> 1840</span>    };</div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"> 1841</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;side, NUM_PANES&gt; sides = {{<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>, <a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>}};</div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"> 1842</span>    <span class="comment">// get the center of the window</span></div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"> 1843</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> pc = {<a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a> ) / 2, <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a> ) / 2, 0};</div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span>    <span class="comment">// draw the 3x3 tiles centered around player</span></div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"> 1845</span>    <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a091e78df9647c7c8a468a33886a097c5">draw</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() );</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> s : sides ) {</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>        <span class="keywordtype">char</span> sym = <a class="code hl_function" href="classadvanced__inventory.html#ad387d818d71f4a4377f68874ff1df649">get_minimap_sym</a>( s );</div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>        <span class="keywordflow">if</span>( sym == <span class="charliteral">&#39;\0&#39;</span> ) {</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>        }</div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>        <span class="keyword">auto</span> sq = <a class="code hl_variable" href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">squares</a>[<a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[s].get_area()];</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>        <span class="keyword">auto</span> pt = pc + sq.off;</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>        <span class="comment">// invert the color if pointing to the player&#39;s position</span></div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>        <span class="keyword">auto</span> cl = sq.id == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a> || sq.id == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a> ?</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>                  <a class="code hl_function" href="color_8cpp.html#a4306eceb07389bb063f39894f4af0503">invert_color</a>( <a class="code hl_define" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a> ) : <a class="code hl_define" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a>.blink();</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>        <a class="code hl_function" href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a>( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a>, pt.xy(), cl, sym );</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>    }</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span> </div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>    <span class="comment">// Invert player&#39;s tile color if exactly one pane points to player&#39;s tile</span></div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>    <span class="keywordtype">bool</span> invert_left = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>    <span class="keywordtype">bool</span> invert_right = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    <span class="keyword">const</span> <span class="keyword">auto</span> is_selected = [ this ]( <span class="keyword">const</span> <a class="code hl_enumeration" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a> &amp; where, <span class="keywordtype">size_t</span> <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> ) {</div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>        <span class="keywordflow">return</span> where == this-&gt;<a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[ <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> ].get_area();</div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    };</div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;loc : player_locations ) {</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>        invert_left |= is_selected( loc, 0 );</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span>        invert_right |= is_selected( loc, 1 );</div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span>    }</div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span> </div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span>    <span class="keywordflow">if</span>( !invert_left || !invert_right ) {</div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.draw( <a class="code hl_variable" href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">minimap</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos(), invert_left || invert_right );</div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span>    }</div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span>}</div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"> 1874</span> </div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#ad387d818d71f4a4377f68874ff1df649"> 1875</a></span><span class="keywordtype">char</span> <a class="code hl_function" href="classadvanced__inventory.html#ad387d818d71f4a4377f68874ff1df649">advanced_inventory::get_minimap_sym</a>( <a class="code hl_enumeration" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">side</a> p )<span class="keyword"> const</span></div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;char, NUM_PANES&gt; c_side = {{<span class="charliteral">&#39;L&#39;</span>, <span class="charliteral">&#39;R&#39;</span>}};</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;char, NUM_PANES&gt; d_side = {{<span class="charliteral">&#39;^&#39;</span>, <span class="charliteral">&#39;v&#39;</span>}};</div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;char, NUM_AIM_LOCATIONS&gt; g_nome = {{</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>            <span class="charliteral">&#39;@&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;@&#39;</span>, <span class="charliteral">&#39;#&#39;</span>,</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span>            <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;#&#39;</span>, <span class="charliteral">&#39;D&#39;</span>, <span class="charliteral">&#39;^&#39;</span>, <span class="charliteral">&#39;C&#39;</span>, <span class="charliteral">&#39;@&#39;</span></div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"> 1882</span>        }</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>    };</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>    <span class="keywordtype">char</span> ch = g_nome[<a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p].get_area()];</div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>    <span class="keywordflow">switch</span>( ch ) {</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;@&#39;</span>:</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>            <span class="comment">// &#39;^&#39; or &#39;v&#39;</span></div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>            ch = d_side[<a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[-p + 1].get_area() == <a class="code hl_enumvalue" href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a>];</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>            <span class="comment">// &#39;L&#39; or &#39;R&#39;</span></div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>            ch = <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[p].in_vehicle() ? <span class="charliteral">&#39;V&#39;</span> : c_side[p];</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span>        <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>:</div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"> 1895</span>            <span class="comment">// do not show anything</span></div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>            ch ^= ch;</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>    }</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>    <span class="keywordflow">return</span> ch;</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span>}</div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span> </div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aff053d1eda71abdca82ba282a2df48ef"> 1902</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#aff053d1eda71abdca82ba282a2df48ef">advanced_inventory::swap_panes</a>()</div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>{</div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>    <span class="comment">// Switch left and right pane.</span></div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>    <a class="code hl_function" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>], <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>] );</div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>    <span class="comment">// Switch save states</span></div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>    <a class="code hl_function" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].<a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>, <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].<a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a> );</div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span>    <span class="comment">// Window pointer must be unchanged!</span></div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>    <a class="code hl_function" href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">std::swap</a>( <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">left</a>].window, <a class="code hl_variable" href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">panes</a>[<a class="code hl_enumvalue" href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">right</a>].window );</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>    <span class="comment">// Recalculation required for weight &amp; volume</span></div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span>    <a class="code hl_variable" href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">recalc</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>}</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span> </div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5"> 1914</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">advanced_inventory::do_return_entry</a>()</div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"> 1915</span>{</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>    <span class="comment">// only save pane settings</span></div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>    <a class="code hl_function" href="classadvanced__inventory.html#a7bda6ab396f9a1844a7825bbc36cad0a">save_settings</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">ACT_ADV_INVENTORY</a> );</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.activity.auto_resume = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>    <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">exit_code</a> = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a>;</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>}</div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span> </div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"><a class="line" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131"> 1923</a></span><span class="keywordtype">bool</span> <a class="code hl_function" href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">advanced_inventory::is_processing</a>()<span class="keyword"> const</span></div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span><span class="keyword"></span>{</div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">save_state</a>-&gt;<a class="code hl_variable" href="structadvanced__inv__save__state.html#a418cf5aff6d7437cf1325e99113c6136">re_enter_move_all</a> != <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>;</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>}</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span> </div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"><a class="line" href="activity__item__handling_8cpp.html#a206bcd1fb39777da2a861a5e8b56cc21"> 1928</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="advanced__inv_8cpp.html#a206bcd1fb39777da2a861a5e8b56cc21">cancel_aim_processing</a>()</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>{</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>    <a class="code hl_variable" href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a>.<a class="code hl_variable" href="classuistatedata.html#aaa8e0be61e584b02f8c79957ea6db267">transfer_save</a>.<a class="code hl_variable" href="structadvanced__inv__save__state.html#a418cf5aff6d7437cf1325e99113c6136">re_enter_move_all</a> = <a class="code hl_enumvalue" href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a>;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>}</div>
<div class="ttc" id="aactivity__actor_8h_html"><div class="ttname"><a href="activity__actor_8h.html">activity_actor.h</a></div></div>
<div class="ttc" id="aactivity__actor__definitions_8h_html"><div class="ttname"><a href="activity__actor__definitions_8h.html">activity_actor_definitions.h</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a206bcd1fb39777da2a861a5e8b56cc21"><div class="ttname"><a href="advanced__inv_8cpp.html#a206bcd1fb39777da2a861a5e8b56cc21">cancel_aim_processing</a></div><div class="ttdeci">void cancel_aim_processing()</div><div class="ttdoc">Cancels ongoing move all action.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01928">advanced_inv.cpp:1928</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a29b0a5be7aeb75df6ce1517a9b62aa81"><div class="ttname"><a href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81">aim_exit</a></div><div class="ttdeci">aim_exit</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00075">advanced_inv.cpp:75</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a29b0a5be7aeb75df6ce1517a9b62aa81a39c8e99d1c94aa8d99b30dd6d49c796f"><div class="ttname"><a href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81a39c8e99d1c94aa8d99b30dd6d49c796f">exit_okay</a></div><div class="ttdeci">@ exit_okay</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00077">advanced_inv.cpp:77</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d"><div class="ttname"><a href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81aa915bca607439fbf897cf6770fea0e2d">exit_re_entry</a></div><div class="ttdeci">@ exit_re_entry</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00079">advanced_inv.cpp:78</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a29b0a5be7aeb75df6ce1517a9b62aa81ac402986eb0250f4c5807de5af70d1a36"><div class="ttname"><a href="advanced__inv_8cpp.html#a29b0a5be7aeb75df6ce1517a9b62aa81ac402986eb0250f4c5807de5af70d1a36">exit_none</a></div><div class="ttdeci">@ exit_none</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00076">advanced_inv.cpp:76</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a4f7061d0eb9f1e0fd40f8543a9ea20a5"><div class="ttname"><a href="advanced__inv_8cpp.html#a4f7061d0eb9f1e0fd40f8543a9ea20a5">ACT_WEAR</a></div><div class="ttdeci">static const activity_id ACT_WEAR(&quot;ACT_WEAR&quot;)</div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_a7ab81287b0b70f0bb56318bf67618fea"><div class="ttname"><a href="advanced__inv_8cpp.html#a7ab81287b0b70f0bb56318bf67618fea">create_advanced_inv</a></div><div class="ttdeci">void create_advanced_inv()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00069">advanced_inv.cpp:69</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aa6878199b5bc4c370c3d63f7fb9821cf"><div class="ttname"><a href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cf">aim_entry</a></div><div class="ttdeci">aim_entry</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00703">advanced_inv.cpp:703</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00"><div class="ttname"><a href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfa14b4ad5cdb45534dc4976dfda92f5d00">ENTRY_START</a></div><div class="ttdeci">@ ENTRY_START</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00704">advanced_inv.cpp:704</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aa6878199b5bc4c370c3d63f7fb9821cfae30e2833bd08a593a96b959e25285aaf"><div class="ttname"><a href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae30e2833bd08a593a96b959e25285aaf">ENTRY_MAP</a></div><div class="ttdeci">@ ENTRY_MAP</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00706">advanced_inv.cpp:706</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aa6878199b5bc4c370c3d63f7fb9821cfae75c8e281157ec6d73eff857f05c1fc7"><div class="ttname"><a href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae75c8e281157ec6d73eff857f05c1fc7">ENTRY_RESET</a></div><div class="ttdeci">@ ENTRY_RESET</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00708">advanced_inv.cpp:707</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52"><div class="ttname"><a href="advanced__inv_8cpp.html#aa6878199b5bc4c370c3d63f7fb9821cfae8879c36cdff0d9a5b761b4be9b0ce52">ENTRY_VEHICLE</a></div><div class="ttdeci">@ ENTRY_VEHICLE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00705">advanced_inv.cpp:705</a></div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aad53848ab2846f97f19789f86fe58e9c"><div class="ttname"><a href="advanced__inv_8cpp.html#aad53848ab2846f97f19789f86fe58e9c">trait_DEBUG_STORAGE</a></div><div class="ttdeci">static const trait_id trait_DEBUG_STORAGE(&quot;DEBUG_STORAGE&quot;)</div></div>
<div class="ttc" id="aadvanced__inv_8cpp_html_aea8a4524fc166b67268583f1a94717b4"><div class="ttname"><a href="advanced__inv_8cpp.html#aea8a4524fc166b67268583f1a94717b4">ACT_ADV_INVENTORY</a></div><div class="ttdeci">static const activity_id ACT_ADV_INVENTORY(&quot;ACT_ADV_INVENTORY&quot;)</div></div>
<div class="ttc" id="aadvanced__inv_8h_html"><div class="ttname"><a href="advanced__inv_8h.html">advanced_inv.h</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43">aim_location</a></div><div class="ttdeci">aim_location</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00013">advanced_inv_area.h:13</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a0921ea462e44703ca0e4d10a6ff2360f">AIM_NORTHEAST</a></div><div class="ttdeci">@ AIM_NORTHEAST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00023">advanced_inv_area.h:23</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a2fb1b219fc4b5b52c434dd59483f25dd"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a2fb1b219fc4b5b52c434dd59483f25dd">AIM_NORTH</a></div><div class="ttdeci">@ AIM_NORTH</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00022">advanced_inv_area.h:22</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a37fc17ceb516deccf3480675eaa88bde"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a37fc17ceb516deccf3480675eaa88bde">AIM_SOUTHEAST</a></div><div class="ttdeci">@ AIM_SOUTHEAST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00017">advanced_inv_area.h:17</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a40d88a6328f744fd6d681c6640a2ffa2"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a40d88a6328f744fd6d681c6640a2ffa2">AIM_WEST</a></div><div class="ttdeci">@ AIM_WEST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00018">advanced_inv_area.h:18</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a415f1e40aef670ae393e793f3e97d1c1"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a415f1e40aef670ae393e793f3e97d1c1">NUM_AIM_LOCATIONS</a></div><div class="ttdeci">@ NUM_AIM_LOCATIONS</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00030">advanced_inv_area.h:30</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a518701de864bb38194c2fd61222f4b39">AIM_CONTAINER</a></div><div class="ttdeci">@ AIM_CONTAINER</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00028">advanced_inv_area.h:28</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a52b14ded0abe632dc3019045a8609fc7"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a52b14ded0abe632dc3019045a8609fc7">AIM_SOUTH</a></div><div class="ttdeci">@ AIM_SOUTH</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00016">advanced_inv_area.h:16</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a58f880c64617c458d462e0284051d251">AIM_CENTER</a></div><div class="ttdeci">@ AIM_CENTER</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00019">advanced_inv_area.h:19</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a68898e82551b0ae42f305d6ad5f062e9"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a68898e82551b0ae42f305d6ad5f062e9">AIM_BELOW</a></div><div class="ttdeci">@ AIM_BELOW</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00025">advanced_inv_area.h:25</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a8e8a18de2fb380d4c2f12478af607dea">AIM_INVENTORY</a></div><div class="ttdeci">@ AIM_INVENTORY</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00014">advanced_inv_area.h:14</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43a9146d369c98900c77cd0fd8ef3bd278d">AIM_WORN</a></div><div class="ttdeci">@ AIM_WORN</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00029">advanced_inv_area.h:29</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43ab84bd7a0394c4e338d82be51601056f4"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ab84bd7a0394c4e338d82be51601056f4">AIM_NORTHWEST</a></div><div class="ttdeci">@ AIM_NORTHWEST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00021">advanced_inv_area.h:21</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43ac41d6b893d6d5e556fce1069175e4d90"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ac41d6b893d6d5e556fce1069175e4d90">AIM_AROUND_END</a></div><div class="ttdeci">@ AIM_AROUND_END</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00034">advanced_inv_area.h:33</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43ac77e9f2afd5f71496534d4003e838684"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ac77e9f2afd5f71496534d4003e838684">AIM_ABOVE</a></div><div class="ttdeci">@ AIM_ABOVE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00024">advanced_inv_area.h:24</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43ad5bc3a263fe75254bb8839d680b67ff4">AIM_DRAGGED</a></div><div class="ttdeci">@ AIM_DRAGGED</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00026">advanced_inv_area.h:26</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43adbbbc32bcfeb16c749038d85f3841483"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43adbbbc32bcfeb16c749038d85f3841483">AIM_AROUND_BEGIN</a></div><div class="ttdeci">@ AIM_AROUND_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00032">advanced_inv_area.h:32</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43add8d6ad7a34a5244de81d842914088b3">AIM_SOUTHWEST</a></div><div class="ttdeci">@ AIM_SOUTHWEST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00015">advanced_inv_area.h:15</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43aea5243b6bcc83cd05983fc2a53f882db"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43aea5243b6bcc83cd05983fc2a53f882db">AIM_EAST</a></div><div class="ttdeci">@ AIM_EAST</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00020">advanced_inv_area.h:20</a></div></div>
<div class="ttc" id="aadvanced__inv__area_8h_html_a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0"><div class="ttname"><a href="advanced__inv__area_8h.html#a84ddaba7483390ac3569553508f55d43af72258ca9ea3def37bacb71367fb8ed0">AIM_ALL</a></div><div class="ttdeci">@ AIM_ALL</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00027">advanced_inv_area.h:27</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91">advanced_inv_sortby</a></div><div class="ttdeci">advanced_inv_sortby</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00021">advanced_inv_pane.h:21</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a120d753902041d769c1d09d509d6f147">SORTBY_PRICE</a></div><div class="ttdeci">@ SORTBY_PRICE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00032">advanced_inv_pane.h:31</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a1b2de7910ffc4736260219d1ff51d4b4">SORTBY_CHARGES</a></div><div class="ttdeci">@ SORTBY_CHARGES</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00026">advanced_inv_pane.h:26</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a661b2feec0bdf9e2ef6e7317fa77bbb6">SORTBY_WEIGHT</a></div><div class="ttdeci">@ SORTBY_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00024">advanced_inv_pane.h:24</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a74fda6343b91a707749067d5d003be69">SORTBY_VOLUME</a></div><div class="ttdeci">@ SORTBY_VOLUME</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00025">advanced_inv_pane.h:25</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91a9695e46ed8d77a2f7497cdff530e989d">SORTBY_NONE</a></div><div class="ttdeci">@ SORTBY_NONE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00022">advanced_inv_pane.h:22</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ab74a7001a876c5604c987bbe7d1ba907">SORTBY_DAMAGE</a></div><div class="ttdeci">@ SORTBY_DAMAGE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00028">advanced_inv_pane.h:28</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91ae59d2d0ff2c17941ba5bbc1557927f73">SORTBY_SPOILAGE</a></div><div class="ttdeci">@ SORTBY_SPOILAGE</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00030">advanced_inv_pane.h:30</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91aeb600d2e4896de8f1fde16a38479cc5d">SORTBY_AMMO</a></div><div class="ttdeci">@ SORTBY_AMMO</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00029">advanced_inv_pane.h:29</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91af64bb07a270c287f53aba668c37ee4d9">SORTBY_CATEGORY</a></div><div class="ttdeci">@ SORTBY_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00027">advanced_inv_pane.h:27</a></div></div>
<div class="ttc" id="aadvanced__inv__pane_8h_html_a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234"><div class="ttname"><a href="advanced__inv__pane_8h.html#a3b88f49cc75a1a09452c1b2a4c10fa91afc2b69609d56228d7e73be025efd3234">SORTBY_NAME</a></div><div class="ttdeci">@ SORTBY_NAME</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00023">advanced_inv_pane.h:23</a></div></div>
<div class="ttc" id="aauto__pickup_8cpp_html_a97eff598e0c42f1241a8a587007e64ff"><div class="ttname"><a href="auto__pickup_8cpp.html#a97eff598e0c42f1241a8a587007e64ff">get_auto_pickup</a></div><div class="ttdeci">auto_pickup::player_settings &amp; get_auto_pickup()</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00038">auto_pickup.cpp:38</a></div></div>
<div class="ttc" id="aauto__pickup_8h_html"><div class="ttname"><a href="auto__pickup_8h.html">auto_pickup.h</a></div></div>
<div class="ttc" id="aavatar_8h_html"><div class="ttname"><a href="avatar_8h.html">avatar.h</a></div></div>
<div class="ttc" id="acached__options_8cpp_html_a406fb460d3cd96ac0e1cc3ccdef6340a"><div class="ttname"><a href="cached__options_8cpp.html#a406fb460d3cd96ac0e1cc3ccdef6340a">tile_iso</a></div><div class="ttdeci">bool tile_iso</div><div class="ttdoc">Using isometric tileset.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00016">cached_options.cpp:16</a></div></div>
<div class="ttc" id="acached__options_8cpp_html_a9b72c9314ac0439a25820b3abf2229f3"><div class="ttname"><a href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a></div><div class="ttdeci">bool use_tiles</div><div class="ttdoc">Use tiles for display.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00006">cached_options.cpp:6</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a307340221160e8ffe2af4ddfe5e2a56e"><div class="ttname"><a href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a></div><div class="ttdeci">std::string to_string_time_of_day(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00400">calendar.cpp:400</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acata__utility_8h_html"><div class="ttname"><a href="cata__utility_8h.html">cata_utility.h</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_a7616a48a4b48437c60b6683439a8f3e2"><div class="ttname"><a href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a></div><div class="ttdeci">int utf8_width(const char *s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00142">catacharset.cpp:142</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_ad959840e392a0d3b79d93cfe64119ca9"><div class="ttname"><a href="catacharset_8cpp.html#ad959840e392a0d3b79d93cfe64119ca9">utf8_truncate</a></div><div class="ttdeci">std::string utf8_truncate(const std::string &amp;s, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00238">catacharset.cpp:238</a></div></div>
<div class="ttc" id="acatacharset_8h_html"><div class="ttname"><a href="catacharset_8h.html">catacharset.h</a></div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf"><div class="ttname"><a href="character_8h.html#a70a4eaaf64bcd7658f91bfb500492f5aa795f3202b17cb6bc3d4b771d8c6c9eaf">rechargeable_cbm::other</a></div><div class="ttdeci">@ other</div></div>
<div class="ttc" id="aclassCharacter_html_a551a7515cd7bf17ebae122cc816cf66f"><div class="ttname"><a href="classCharacter.html#a551a7515cd7bf17ebae122cc816cf66f">Character::worn_position_to_index</a></div><div class="ttdeci">static int worn_position_to_index(int position)</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01075">character.h:1075</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html"><div class="ttname"><a href="classadvanced__inv__area.html">advanced_inv_area</a></div><div class="ttdoc">Defines the source of item stacks.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00043">advanced_inv_area.h:44</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a0acc1388708e1e24c60fc57d02d13ed1"><div class="ttname"><a href="classadvanced__inv__area.html#a0acc1388708e1e24c60fc57d02d13ed1">advanced_inv_area::name</a></div><div class="ttdeci">const std::string name</div><div class="ttdoc">Long name, displayed, translated.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00055">advanced_inv_area.h:55</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a1167761883fcb0249190dee49696ad69"><div class="ttname"><a href="classadvanced__inv__area.html#a1167761883fcb0249190dee49696ad69">advanced_inv_area::free_volume</a></div><div class="ttdeci">units::volume free_volume(bool in_vehicle=false) const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8cpp_source.html#l00199">advanced_inv_area.cpp:199</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a3b425a128862020d71e463ecb363855f"><div class="ttname"><a href="classadvanced__inv__area.html#a3b425a128862020d71e463ecb363855f">advanced_inv_area::max_size</a></div><div class="ttdeci">int max_size</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00075">advanced_inv_area.h:75</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a49b65955057c9eb3f32b71e41b880d0d"><div class="ttname"><a href="classadvanced__inv__area.html#a49b65955057c9eb3f32b71e41b880d0d">advanced_inv_area::off</a></div><div class="ttdeci">tripoint off</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00053">advanced_inv_area.h:53</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a59eb14a91b0d9bee2dfb0ee52270cfe2"><div class="ttname"><a href="classadvanced__inv__area.html#a59eb14a91b0d9bee2dfb0ee52270cfe2">advanced_inv_area::veh</a></div><div class="ttdeci">vehicle * veh</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00065">advanced_inv_area.h:65</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a61a6310e15de73ab32f29e3a4e004c19"><div class="ttname"><a href="classadvanced__inv__area.html#a61a6310e15de73ab32f29e3a4e004c19">advanced_inv_area::pos</a></div><div class="ttdeci">tripoint pos</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00060">advanced_inv_area.h:60</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a6e4259169ebf6eefc0d84c2be79525b6"><div class="ttname"><a href="classadvanced__inv__area.html#a6e4259169ebf6eefc0d84c2be79525b6">advanced_inv_area::desc</a></div><div class="ttdeci">std::array&lt; std::string, 2 &gt; desc</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00068">advanced_inv_area.h:68</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a6f8ade53a47f930f0a129923b6972578"><div class="ttname"><a href="classadvanced__inv__area.html#a6f8ade53a47f930f0a129923b6972578">advanced_inv_area::get_item_count</a></div><div class="ttdeci">int get_item_count() const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8cpp_source.html#l00034">advanced_inv_area.cpp:34</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_a93a2722f51ef6c6b31d8f44e9e3098d9"><div class="ttname"><a href="classadvanced__inv__area.html#a93a2722f51ef6c6b31d8f44e9e3098d9">advanced_inv_area::id</a></div><div class="ttdeci">const aim_location id</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00049">advanced_inv_area.h:49</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_ac341f2e9a873aa952c543b71f721c6c3"><div class="ttname"><a href="classadvanced__inv__area.html#ac341f2e9a873aa952c543b71f721c6c3">advanced_inv_area::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00072">advanced_inv_area.h:72</a></div></div>
<div class="ttc" id="aclassadvanced__inv__area_html_acb3ad903a445e8207bc34f47be502b30"><div class="ttname"><a href="classadvanced__inv__area.html#acb3ad903a445e8207bc34f47be502b30">advanced_inv_area::vstor</a></div><div class="ttdeci">int vstor</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__area_8h_source.html#l00066">advanced_inv_area.h:66</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html"><div class="ttname"><a href="classadvanced__inv__listitem.html">advanced_inv_listitem</a></div><div class="ttdoc">Entry that is displayed in a adv.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00022">advanced_inv_listitem.h:23</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a14b5a7a6f2d3703deae4e0a20e5ade70"><div class="ttname"><a href="classadvanced__inv__listitem.html#a14b5a7a6f2d3703deae4e0a20e5ade70">advanced_inv_listitem::cat</a></div><div class="ttdeci">const item_category * cat</div><div class="ttdoc">The item category, or the category header.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00065">advanced_inv_listitem.h:65</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a26c467cfe32bbf5fbadd155696d06df0"><div class="ttname"><a href="classadvanced__inv__listitem.html#a26c467cfe32bbf5fbadd155696d06df0">advanced_inv_listitem::autopickup</a></div><div class="ttdeci">bool autopickup</div><div class="ttdoc">Whether auto pickup is enabled for this item (based on the name).</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00048">advanced_inv_listitem.h:48</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a2d4e8868df3bf42a4f2e2f6beb2fe45b"><div class="ttname"><a href="classadvanced__inv__listitem.html#a2d4e8868df3bf42a4f2e2f6beb2fe45b">advanced_inv_listitem::area</a></div><div class="ttdeci">aim_location area</div><div class="ttdoc">The location of the item, never AIM_ALL.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00032">advanced_inv_listitem.h:32</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a39f7062dd390b070a2985bad6f7c0c1e"><div class="ttname"><a href="classadvanced__inv__listitem.html#a39f7062dd390b070a2985bad6f7c0c1e">advanced_inv_listitem::volume</a></div><div class="ttdeci">units::volume volume</div><div class="ttdoc">The volume of all the items in this stack, used for sorting.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00057">advanced_inv_listitem.h:57</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a52e87e8f79e05022bd12c63c9f90cecc"><div class="ttname"><a href="classadvanced__inv__listitem.html#a52e87e8f79e05022bd12c63c9f90cecc">advanced_inv_listitem::name_without_prefix</a></div><div class="ttdeci">std::string name_without_prefix</div><div class="ttdoc">Name of the item (singular) without damage (or similar) prefix, used for sorting.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00044">advanced_inv_listitem.h:44</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a5f37492e13412b90ee2e34abe8e7c320"><div class="ttname"><a href="classadvanced__inv__listitem.html#a5f37492e13412b90ee2e34abe8e7c320">advanced_inv_listitem::idx</a></div><div class="ttdeci">int idx</div><div class="ttdoc">Index of the item in the itemstack.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00028">advanced_inv_listitem.h:28</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a5f73b12ee507c8549dff652fab9dded0"><div class="ttname"><a href="classadvanced__inv__listitem.html#a5f73b12ee507c8549dff652fab9dded0">advanced_inv_listitem::is_category_header</a></div><div class="ttdeci">bool is_category_header() const</div><div class="ttdoc">Whether this is a category header entry, which does not have a reference to an item,...</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8cpp_source.html#l00065">advanced_inv_listitem.cpp:65</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a687a97ead0036d13ab240ed4744a31ed"><div class="ttname"><a href="classadvanced__inv__listitem.html#a687a97ead0036d13ab240ed4744a31ed">advanced_inv_listitem::name</a></div><div class="ttdeci">std::string name</div><div class="ttdoc">The displayed name of the item/the category header.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00040">advanced_inv_listitem.h:40</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_a9429cf3bf6e7e037ea24beffa0429f89"><div class="ttname"><a href="classadvanced__inv__listitem.html#a9429cf3bf6e7e037ea24beffa0429f89">advanced_inv_listitem::is_item_entry</a></div><div class="ttdeci">bool is_item_entry() const</div><div class="ttdoc">Returns true if this is an item entry.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8cpp_source.html#l00070">advanced_inv_listitem.cpp:70</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_ab41577adb83b78d1f8ce1a895720208a"><div class="ttname"><a href="classadvanced__inv__listitem.html#ab41577adb83b78d1f8ce1a895720208a">advanced_inv_listitem::items</a></div><div class="ttdeci">std::list&lt; item * &gt; items</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00036">advanced_inv_listitem.h:36</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_ab5a820388c8869bc0dfee40a2d429d13"><div class="ttname"><a href="classadvanced__inv__listitem.html#ab5a820388c8869bc0dfee40a2d429d13">advanced_inv_listitem::weight</a></div><div class="ttdeci">units::mass weight</div><div class="ttdoc">The weight of all the items in this stack, used for sorting.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00061">advanced_inv_listitem.h:61</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_ab6bce7c4fab92d47f3baecdee859f155"><div class="ttname"><a href="classadvanced__inv__listitem.html#ab6bce7c4fab92d47f3baecdee859f155">advanced_inv_listitem::from_vehicle</a></div><div class="ttdeci">bool from_vehicle</div><div class="ttdoc">Is the item stored in a vehicle?</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00069">advanced_inv_listitem.h:69</a></div></div>
<div class="ttc" id="aclassadvanced__inv__listitem_html_ae7cfe9308eb5694aa0bb946b6ffe39be"><div class="ttname"><a href="classadvanced__inv__listitem.html#ae7cfe9308eb5694aa0bb946b6ffe39be">advanced_inv_listitem::stacks</a></div><div class="ttdeci">int stacks</div><div class="ttdoc">The stack count represented by this item, should be &gt;= 1, should be 1 for anything counted by charges...</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__listitem_8h_source.html#l00053">advanced_inv_listitem.h:53</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html"><div class="ttname"><a href="classadvanced__inventory__pane.html">advanced_inventory_pane</a></div><div class="ttdoc">Displayed pane, what is shown on the screen.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00037">advanced_inv_pane.h:38</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a176bc037c1775727cdb0ce5fe47d837b"><div class="ttname"><a href="classadvanced__inventory__pane.html#a176bc037c1775727cdb0ce5fe47d837b">advanced_inventory_pane::get_cur_item_ptr</a></div><div class="ttdeci">advanced_inv_listitem * get_cur_item_ptr()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8cpp_source.html#l00265">advanced_inv_pane.cpp:265</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a41476b314de69784bad29f4b1ab9f58f"><div class="ttname"><a href="classadvanced__inventory__pane.html#a41476b314de69784bad29f4b1ab9f58f">advanced_inventory_pane::items</a></div><div class="ttdeci">std::vector&lt; advanced_inv_listitem &gt; items</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00076">advanced_inv_pane.h:76</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a477e9a726f662fb52211d144196432e2"><div class="ttname"><a href="classadvanced__inventory__pane.html#a477e9a726f662fb52211d144196432e2">advanced_inventory_pane::set_filter</a></div><div class="ttdeci">void set_filter(const std::string &amp;new_filter)</div><div class="ttdoc">Set the filter string, disables filtering when the filter string is empty.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8cpp_source.html#l00273">advanced_inv_pane.cpp:273</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a6107a46d370a922184e9ee6124cd6307"><div class="ttname"><a href="classadvanced__inventory__pane.html#a6107a46d370a922184e9ee6124cd6307">advanced_inventory_pane::set_area</a></div><div class="ttdeci">void set_area(const advanced_inv_area &amp;square, bool in_vehicle_cargo=false)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00047">advanced_inv_pane.h:47</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a6212a9703170092d77e8e6eeb51cabf8"><div class="ttname"><a href="classadvanced__inventory__pane.html#a6212a9703170092d77e8e6eeb51cabf8">advanced_inventory_pane::index</a></div><div class="ttdeci">int index</div><div class="ttdoc">Index of the selected item (index of items),.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00073">advanced_inv_pane.h:73</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a92be3dc9eb1006a9b1b15e3bd65a49c5"><div class="ttname"><a href="classadvanced__inventory__pane.html#a92be3dc9eb1006a9b1b15e3bd65a49c5">advanced_inventory_pane::is_filtered</a></div><div class="ttdeci">bool is_filtered(const advanced_inv_listitem &amp;it) const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8cpp_source.html#l00058">advanced_inv_pane.cpp:58</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_a947be308f4ed2ea5d75e779df566f9ab"><div class="ttname"><a href="classadvanced__inventory__pane.html#a947be308f4ed2ea5d75e779df566f9ab">advanced_inventory_pane::window</a></div><div class="ttdeci">catacurses::window window</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00075">advanced_inv_pane.h:75</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_aa0f9fb2db958472a4cd7e17c41368323"><div class="ttname"><a href="classadvanced__inventory__pane.html#aa0f9fb2db958472a4cd7e17c41368323">advanced_inventory_pane::sortby</a></div><div class="ttdeci">advanced_inv_sortby sortby</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00074">advanced_inv_pane.h:74</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_aa868b0cd3fc4867b75a0d8137124459d"><div class="ttname"><a href="classadvanced__inventory__pane.html#aa868b0cd3fc4867b75a0d8137124459d">advanced_inventory_pane::recalc</a></div><div class="ttdeci">bool recalc</div><div class="ttdoc">Whether to recalculate the content of this pane.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00084">advanced_inv_pane.h:84</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_aabf2671969752a97eb8a4470bd6d5625"><div class="ttname"><a href="classadvanced__inventory__pane.html#aabf2671969752a97eb8a4470bd6d5625">advanced_inventory_pane::get_area</a></div><div class="ttdeci">aim_location get_area() const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00057">advanced_inv_pane.h:57</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_aae962e883acd344410444cdc096ee0e5"><div class="ttname"><a href="classadvanced__inventory__pane.html#aae962e883acd344410444cdc096ee0e5">advanced_inventory_pane::scroll_category</a></div><div class="ttdeci">void scroll_category(int offset)</div><div class="ttdoc">Scroll the index in category mode by given offset.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8cpp_source.html#l00230">advanced_inv_pane.cpp:230</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_ad9db3c7237891dd5185127702e4a3d96"><div class="ttname"><a href="classadvanced__inventory__pane.html#ad9db3c7237891dd5185127702e4a3d96">advanced_inventory_pane::in_vehicle</a></div><div class="ttdeci">bool in_vehicle() const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00063">advanced_inv_pane.h:63</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_ade8e1e1d5703345da960700c763900e6"><div class="ttname"><a href="classadvanced__inventory__pane.html#ade8e1e1d5703345da960700c763900e6">advanced_inventory_pane::scroll_by</a></div><div class="ttdeci">void scroll_by(int offset)</div><div class="ttdoc">Scroll index, by given offset,.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8cpp_source.html#l00219">advanced_inv_pane.cpp:219</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_adf44cdbe904fdadbeee158e3f773ce4f"><div class="ttname"><a href="classadvanced__inventory__pane.html#adf44cdbe904fdadbeee158e3f773ce4f">advanced_inventory_pane::filter</a></div><div class="ttdeci">std::string filter</div><div class="ttdoc">The current filter string.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00080">advanced_inv_pane.h:80</a></div></div>
<div class="ttc" id="aclassadvanced__inventory__pane_html_af2c4b2f624bbf139fe14db30f4c4a619"><div class="ttname"><a href="classadvanced__inventory__pane.html#af2c4b2f624bbf139fe14db30f4c4a619">advanced_inventory_pane::restore_area</a></div><div class="ttdeci">void restore_area()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv__pane_8h_source.html#l00053">advanced_inv_pane.h:53</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html"><div class="ttname"><a href="classadvanced__inventory.html">advanced_inventory</a></div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00027">advanced_inv.h:28</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a123ed91d66504a4fe000766fe7c11dc9"><div class="ttname"><a href="classadvanced__inventory.html#a123ed91d66504a4fe000766fe7c11dc9">advanced_inventory::advanced_inventory</a></div><div class="ttdeci">advanced_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00082">advanced_inv.cpp:82</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a2956857d1ee5d5fb32ad36b4be4186f9"><div class="ttname"><a href="classadvanced__inventory.html#a2956857d1ee5d5fb32ad36b4be4186f9">advanced_inventory::itemsPerPage</a></div><div class="ttdeci">int itemsPerPage</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00070">advanced_inv.h:70</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a2c4362a2d179f241a7d7097fd42d2d7f"><div class="ttname"><a href="classadvanced__inventory.html#a2c4362a2d179f241a7d7097fd42d2d7f">advanced_inventory::recalc</a></div><div class="ttdeci">bool recalc</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00077">advanced_inv.h:77</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a327d7645ec160505fd25d2d01f7e3065"><div class="ttname"><a href="classadvanced__inventory.html#a327d7645ec160505fd25d2d01f7e3065">advanced_inventory::print_items</a></div><div class="ttdeci">void print_items(const advanced_inventory_pane &amp;pane, bool active)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00212">advanced_inv.cpp:212</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a36fc13ffc4d1e4c93416f0f1b5432b68"><div class="ttname"><a href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68">advanced_inventory::side</a></div><div class="ttdeci">side</div><div class="ttdoc">Refers to the two panes, used as index into panes.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00049">advanced_inv.h:49</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd"><div class="ttname"><a href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a1ebd89b3520121d94cb190c51a82cddd">advanced_inventory::left</a></div><div class="ttdeci">@ left</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00050">advanced_inv.h:50</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a36fc13ffc4d1e4c93416f0f1b5432b68a3f6972b87e2c5d9738dbb8586c16447b"><div class="ttname"><a href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68a3f6972b87e2c5d9738dbb8586c16447b">advanced_inventory::NUM_PANES</a></div><div class="ttdeci">@ NUM_PANES</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00053">advanced_inv.h:52</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33"><div class="ttname"><a href="classadvanced__inventory.html#a36fc13ffc4d1e4c93416f0f1b5432b68adfd4f0edd90fca42bd829aa4aa5d2b33">advanced_inventory::right</a></div><div class="ttdeci">@ right</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00051">advanced_inv.h:51</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a391685edb03bc7df4736fe2943369e62"><div class="ttname"><a href="classadvanced__inventory.html#a391685edb03bc7df4736fe2943369e62">advanced_inventory::minimap_width</a></div><div class="ttdeci">const int minimap_width</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00062">advanced_inv.h:62</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a3f1eaedb86e958387770e71ba02959f7"><div class="ttname"><a href="classadvanced__inventory.html#a3f1eaedb86e958387770e71ba02959f7">advanced_inventory::display</a></div><div class="ttdeci">void display()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01359">advanced_inv.cpp:1359</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a414757fb3e840dcbd7ff24513b813bd0"><div class="ttname"><a href="classadvanced__inventory.html#a414757fb3e840dcbd7ff24513b813bd0">advanced_inventory::colstart</a></div><div class="ttdeci">int colstart</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00075">advanced_inv.h:75</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a416b92343f3e1fab9643a4903304d0a8"><div class="ttname"><a href="classadvanced__inventory.html#a416b92343f3e1fab9643a4903304d0a8">advanced_inventory::headstart</a></div><div class="ttdeci">int headstart</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00074">advanced_inv.h:74</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a44fa4f8d9e527cd26a0fba31ea47b9d6"><div class="ttname"><a href="classadvanced__inventory.html#a44fa4f8d9e527cd26a0fba31ea47b9d6">advanced_inventory::squares</a></div><div class="ttdeci">std::array&lt; advanced_inv_area, NUM_AIM_LOCATIONS &gt; squares</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00097">advanced_inv.h:97</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a475c466bbf36be7522405e9cc44f82ac"><div class="ttname"><a href="classadvanced__inventory.html#a475c466bbf36be7522405e9cc44f82ac">advanced_inventory::get_location_key</a></div><div class="ttdeci">std::string get_location_key(aim_location area)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00192">advanced_inv.cpp:192</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a48ffe088a119bd2f60cb715ad33ce532"><div class="ttname"><a href="classadvanced__inventory.html#a48ffe088a119bd2f60cb715ad33ce532">advanced_inventory::redraw_sidebar</a></div><div class="ttdeci">void redraw_sidebar()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01050">advanced_inv.cpp:1050</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a49c08409dd0ac9f82dcb8ddfb529efbf"><div class="ttname"><a href="classadvanced__inventory.html#a49c08409dd0ac9f82dcb8ddfb529efbf">advanced_inventory::action_examine</a></div><div class="ttdeci">void action_examine(advanced_inv_listitem *sitem, advanced_inventory_pane &amp;spane)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01302">advanced_inv.cpp:1302</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a4ad8bf9c59492370c2a1d671ed82e196"><div class="ttname"><a href="classadvanced__inventory.html#a4ad8bf9c59492370c2a1d671ed82e196">advanced_inventory::exit</a></div><div class="ttdeci">bool exit</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00101">advanced_inv.h:101</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a52b8a7ec907729745cfefed95a132c7b"><div class="ttname"><a href="classadvanced__inventory.html#a52b8a7ec907729745cfefed95a132c7b">advanced_inventory::get_one_square</a></div><div class="ttdeci">advanced_inv_area &amp; get_one_square(const aim_location &amp;loc)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00042">advanced_inv.h:42</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a6020fed7f6c4704ac0151a828bbcf321"><div class="ttname"><a href="classadvanced__inventory.html#a6020fed7f6c4704ac0151a828bbcf321">advanced_inventory::w_height</a></div><div class="ttdeci">int w_height</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00071">advanced_inv.h:71</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a62ae50672223477fd09a06f0a8a75aab"><div class="ttname"><a href="classadvanced__inventory.html#a62ae50672223477fd09a06f0a8a75aab">advanced_inventory::draw_minimap</a></div><div class="ttdeci">void draw_minimap()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01835">advanced_inv.cpp:1835</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a62ca16ce8205feb7114014befd7257d2"><div class="ttname"><a href="classadvanced__inventory.html#a62ca16ce8205feb7114014befd7257d2">advanced_inventory::action_move_item</a></div><div class="ttdeci">bool action_move_item(advanced_inv_listitem *sitem, advanced_inventory_pane &amp;dpane, const advanced_inventory_pane &amp;spane, const std::string &amp;action)</div><div class="ttdoc">returns whether the display loop exits or not</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01203">advanced_inv.cpp:1203</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a66ecf8de435189cb6670a8db3c354461"><div class="ttname"><a href="classadvanced__inventory.html#a66ecf8de435189cb6670a8db3c354461">advanced_inventory::move_content</a></div><div class="ttdeci">bool move_content(item &amp;src_container, item &amp;dest_container)</div><div class="ttdoc">Move content of source container into destination container (destination pane = AIM_CONTAINER)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01668">advanced_inv.cpp:1668</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a6ed56ac7f33ace4e7b9f5e56f754e353"><div class="ttname"><a href="classadvanced__inventory.html#a6ed56ac7f33ace4e7b9f5e56f754e353">advanced_inventory::register_ctxt</a></div><div class="ttdeci">input_context register_ctxt() const</div><div class="ttdoc">registers all the ctxt for display()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01003">advanced_inv.cpp:1003</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a77a5e14e66a1c3f82b8eeb1f7047f0f5"><div class="ttname"><a href="classadvanced__inventory.html#a77a5e14e66a1c3f82b8eeb1f7047f0f5">advanced_inventory::do_return_entry</a></div><div class="ttdeci">void do_return_entry()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01914">advanced_inv.cpp:1914</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a7aa370e38f80d5a1b99a8d0b5f48bfe3"><div class="ttname"><a href="classadvanced__inventory.html#a7aa370e38f80d5a1b99a8d0b5f48bfe3">advanced_inventory::init</a></div><div class="ttdeci">void init()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00197">advanced_inv.cpp:197</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a7bda6ab396f9a1844a7825bbc36cad0a"><div class="ttname"><a href="classadvanced__inventory.html#a7bda6ab396f9a1844a7825bbc36cad0a">advanced_inventory::save_settings</a></div><div class="ttdeci">void save_settings(bool only_panes)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00127">advanced_inv.cpp:127</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a7d7827f4e2a1be3dd9b6b2cc2579a405"><div class="ttname"><a href="classadvanced__inventory.html#a7d7827f4e2a1be3dd9b6b2cc2579a405">advanced_inventory::src</a></div><div class="ttdeci">side src</div><div class="ttdoc">Which panels is active (item moved from there).</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00081">advanced_inv.h:81</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a7ec5a92b6c3f8f9373936eacd7d44d56"><div class="ttname"><a href="classadvanced__inventory.html#a7ec5a92b6c3f8f9373936eacd7d44d56">advanced_inventory::screen_relative_location</a></div><div class="ttdeci">aim_location screen_relative_location(aim_location area)</div><div class="ttdoc">Converts from screen relative location to game-space relative location for control rotation in isomet...</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00183">advanced_inv.cpp:183</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a813463c770578ff022b7c60db06324e4"><div class="ttname"><a href="classadvanced__inventory.html#a813463c770578ff022b7c60db06324e4">advanced_inventory::load_settings</a></div><div class="ttdeci">void load_settings()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00137">advanced_inv.cpp:137</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a814330bc95db8c5962477d574f454ad3"><div class="ttname"><a href="classadvanced__inventory.html#a814330bc95db8c5962477d574f454ad3">advanced_inventory::query_destination</a></div><div class="ttdeci">bool query_destination(aim_location &amp;def)</div><div class="ttdoc">Checks whether one can put items into the supplied location.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01616">advanced_inv.cpp:1616</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a85c22e63c355f3ef14f4399d02acc51c"><div class="ttname"><a href="classadvanced__inventory.html#a85c22e63c355f3ef14f4399d02acc51c">advanced_inventory::get_square</a></div><div class="ttdeci">bool get_square(const std::string &amp;action, aim_location &amp;ret)</div><div class="ttdoc">Translate an action ident from the input context to an aim_location.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00172">advanced_inv.cpp:172</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a8fd8496fa06d19335a67bc1de3c7864a"><div class="ttname"><a href="classadvanced__inventory.html#a8fd8496fa06d19335a67bc1de3c7864a">advanced_inventory::query_charges</a></div><div class="ttdeci">bool query_charges(aim_location destarea, const advanced_inv_listitem &amp;sitem, const std::string &amp;action, int &amp;amount)</div><div class="ttdoc">Setup how many items/charges (if counted by charges) should be moved.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01710">advanced_inv.cpp:1710</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_a923f90a37fed0a25fed12989a2b43c7e"><div class="ttname"><a href="classadvanced__inventory.html#a923f90a37fed0a25fed12989a2b43c7e">advanced_inventory::mm_border</a></div><div class="ttdeci">catacurses::window mm_border</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00061">advanced_inv.h:61</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aa0ce472107cae6f207e959e91d5cd131"><div class="ttname"><a href="classadvanced__inventory.html#aa0ce472107cae6f207e959e91d5cd131">advanced_inventory::is_processing</a></div><div class="ttdeci">bool is_processing() const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01923">advanced_inv.cpp:1923</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aa6dab4ec53d54896b60c772483264bfa"><div class="ttname"><a href="classadvanced__inventory.html#aa6dab4ec53d54896b60c772483264bfa">advanced_inventory::recalc_pane</a></div><div class="ttdeci">void recalc_pane(side p)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00560">advanced_inv.cpp:560</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aaceca3cfbe98197ab6286d6b3356ff75"><div class="ttname"><a href="classadvanced__inventory.html#aaceca3cfbe98197ab6286d6b3356ff75">advanced_inventory::change_square</a></div><div class="ttdeci">void change_square(aim_location changeSquare, advanced_inventory_pane &amp;dpane, advanced_inventory_pane &amp;spane)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01074">advanced_inv.cpp:1074</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aad27f5d82ee36c1b3f777e122f933c26"><div class="ttname"><a href="classadvanced__inventory.html#aad27f5d82ee36c1b3f777e122f933c26">advanced_inventory::inCategoryMode</a></div><div class="ttdeci">bool inCategoryMode</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00068">advanced_inv.h:68</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ab2a5ea864736a63718496effc94c93fd"><div class="ttname"><a href="classadvanced__inventory.html#ab2a5ea864736a63718496effc94c93fd">advanced_inventory::refresh_minimap</a></div><div class="ttdeci">void refresh_minimap()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01817">advanced_inv.cpp:1817</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ac327f193560528b62a700bd5bee19730"><div class="ttname"><a href="classadvanced__inventory.html#ac327f193560528b62a700bd5bee19730">advanced_inventory::w_width</a></div><div class="ttdeci">int w_width</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00072">advanced_inv.h:72</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ac453879b421a4acd4de3a7d920becd7d"><div class="ttname"><a href="classadvanced__inventory.html#ac453879b421a4acd4de3a7d920becd7d">advanced_inventory::head_height</a></div><div class="ttdeci">static constexpr int head_height</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00054">advanced_inv.h:54</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ac6a1e9c3826feb05ce15f0a0caca1570"><div class="ttname"><a href="classadvanced__inventory.html#ac6a1e9c3826feb05ce15f0a0caca1570">advanced_inventory::move_all_items</a></div><div class="ttdeci">bool move_all_items(bool nested_call=false)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00710">advanced_inv.cpp:710</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ac8c3da3386c3dd19455b9a9f2d5b0f8f"><div class="ttname"><a href="classadvanced__inventory.html#ac8c3da3386c3dd19455b9a9f2d5b0f8f">advanced_inventory::save_state</a></div><div class="ttdeci">advanced_inv_save_state * save_state</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00103">advanced_inv.h:103</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aca2a67fe1a2582c1ffc2be3d7d6c3851"><div class="ttname"><a href="classadvanced__inventory.html#aca2a67fe1a2582c1ffc2be3d7d6c3851">advanced_inventory::redraw_pane</a></div><div class="ttdeci">void redraw_pane(side p)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00623">advanced_inv.cpp:623</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ad387d818d71f4a4377f68874ff1df649"><div class="ttname"><a href="classadvanced__inventory.html#ad387d818d71f4a4377f68874ff1df649">advanced_inventory::get_minimap_sym</a></div><div class="ttdeci">char get_minimap_sym(side p) const</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01875">advanced_inv.cpp:1875</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_adc77e6461bfa9b5b745acd8e4371fa41"><div class="ttname"><a href="classadvanced__inventory.html#adc77e6461bfa9b5b745acd8e4371fa41">advanced_inventory::~advanced_inventory</a></div><div class="ttdeci">~advanced_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00115">advanced_inv.cpp:115</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae0562b28ecb072e6ec1b639cdbf96b0e"><div class="ttname"><a href="classadvanced__inventory.html#ae0562b28ecb072e6ec1b639cdbf96b0e">advanced_inventory::filter_edit</a></div><div class="ttdeci">bool filter_edit</div><div class="ttdoc">True if (and only if) the filter of the active panel is currently being edited.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00090">advanced_inv.h:90</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae223fb96e573d2b8c453e65a0902d5ff"><div class="ttname"><a href="classadvanced__inventory.html#ae223fb96e573d2b8c453e65a0902d5ff">advanced_inventory::dest</a></div><div class="ttdeci">side dest</div><div class="ttdoc">Which panel is the destination (items want to go to there).</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00085">advanced_inv.h:85</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae2448ee4634d1bb472405f0e99ed2243"><div class="ttname"><a href="classadvanced__inventory.html#ae2448ee4634d1bb472405f0e99ed2243">advanced_inventory::show_sort_menu</a></div><div class="ttdeci">bool show_sort_menu(advanced_inventory_pane &amp;pane)</div><div class="ttdoc">Show the sort-by menu and change the sorting of this pane accordingly.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00977">advanced_inv.cpp:977</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae24d0b01699da125b499bd789234ad2e"><div class="ttname"><a href="classadvanced__inventory.html#ae24d0b01699da125b499bd789234ad2e">advanced_inventory::minimap</a></div><div class="ttdeci">catacurses::window minimap</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00060">advanced_inv.h:60</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae283d462ae0e75225f59b3d7be8bbb38"><div class="ttname"><a href="classadvanced__inventory.html#ae283d462ae0e75225f59b3d7be8bbb38">advanced_inventory::print_header</a></div><div class="ttdeci">int print_header(advanced_inventory_pane &amp;pane, aim_location sel)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00526">advanced_inv.cpp:526</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae386d305fc3d0774cb143513f9c2cdff"><div class="ttname"><a href="classadvanced__inventory.html#ae386d305fc3d0774cb143513f9c2cdff">advanced_inventory::minimap_height</a></div><div class="ttdeci">const int minimap_height</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00063">advanced_inv.h:63</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae56282ee21526f30de9f3f0cd460a8bd"><div class="ttname"><a href="classadvanced__inventory.html#ae56282ee21526f30de9f3f0cd460a8bd">advanced_inventory::get_sortname</a></div><div class="ttdeci">static std::string get_sortname(advanced_inv_sortby sortby)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00145">advanced_inv.cpp:145</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_ae7d0399fffd672f19a64b07a65301f19"><div class="ttname"><a href="classadvanced__inventory.html#ae7d0399fffd672f19a64b07a65301f19">advanced_inventory::head</a></div><div class="ttdeci">catacurses::window head</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00099">advanced_inv.h:99</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aebdf4e9393d79d4cf3f38de2d9eddf91"><div class="ttname"><a href="classadvanced__inventory.html#aebdf4e9393d79d4cf3f38de2d9eddf91">advanced_inventory::start_activity</a></div><div class="ttdeci">void start_activity(aim_location destarea, aim_location srcarea, advanced_inv_listitem *sitem, int &amp;amount_to_move, bool from_vehicle, bool to_vehicle) const</div><div class="ttdoc">a smaller chunk of display()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01125">advanced_inv.cpp:1125</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_afee9c31085bc87acd086c5a8b0029505"><div class="ttname"><a href="classadvanced__inventory.html#afee9c31085bc87acd086c5a8b0029505">advanced_inventory::panes</a></div><div class="ttdeci">std::array&lt; advanced_inventory_pane, NUM_PANES &gt; panes</div><div class="ttdoc">Two panels (left and right) showing the items, use a value of side as index.</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8h_source.html#l00095">advanced_inv.h:95</a></div></div>
<div class="ttc" id="aclassadvanced__inventory_html_aff053d1eda71abdca82ba282a2df48ef"><div class="ttname"><a href="classadvanced__inventory.html#aff053d1eda71abdca82ba282a2df48ef">advanced_inventory::swap_panes</a></div><div class="ttdeci">void swap_panes()</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01902">advanced_inv.cpp:1902</a></div></div>
<div class="ttc" id="aclassauto__pickup_1_1player__settings_html_a459277e128aa4ba3bc0efaf1ff01903a"><div class="ttname"><a href="classauto__pickup_1_1player__settings.html#a459277e128aa4ba3bc0efaf1ff01903a">auto_pickup::player_settings::remove_rule</a></div><div class="ttdeci">void remove_rule(const item *it)</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00552">auto_pickup.cpp:552</a></div></div>
<div class="ttc" id="aclassauto__pickup_1_1player__settings_html_ad762d2d9a39b0b7748258c5f90a3f8d9"><div class="ttname"><a href="classauto__pickup_1_1player__settings.html#ad762d2d9a39b0b7748258c5f90a3f8d9">auto_pickup::player_settings::add_rule</a></div><div class="ttdeci">void add_rule(const item *it)</div><div class="ttdef"><b>Definition:</b> <a href="auto__pickup_8cpp_source.html#l00540">auto_pickup.cpp:540</a></div></div>
<div class="ttc" id="aclasscata_1_1colony_1_1colony__iterator_html"><div class="ttname"><a href="classcata_1_1colony_1_1colony__iterator.html">cata::colony::colony_iterator&lt; false &gt;</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclasscatacurses_1_1window_html"><div class="ttname"><a href="classcatacurses_1_1window.html">catacurses::window</a></div><div class="ttdoc">A wrapper over a pointer to a curses window.</div><div class="ttdef"><b>Definition:</b> <a href="cursesdef_8h_source.html#l00054">cursesdef.h:55</a></div></div>
<div class="ttc" id="aclassdrop__activity__actor_html"><div class="ttname"><a href="classdrop__activity__actor.html">drop_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00270">activity_actor_definitions.h:271</a></div></div>
<div class="ttc" id="aclassime__sentry_html"><div class="ttname"><a href="classime__sentry.html">ime_sentry</a></div><div class="ttdoc">used before text input to change IME mode and auto-restore IME mode when leaving the scope</div><div class="ttdef"><b>Definition:</b> <a href="ime_8h_source.html#l00014">ime.h:15</a></div></div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00385">input.h:386</a></div></div>
<div class="ttc" id="aclassinput__context_html_abe76d2c284f2a277cbd2f367963fa9ab"><div class="ttname"><a href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">input_context::get_desc</a></div><div class="ttdeci">std::string get_desc(const std::string &amp;action_descriptor, unsigned int max_limit=0, const input_event_filter &amp;evt_filter=allow_all_keys) const</div><div class="ttdoc">Get a description text for the key/other input method associated with the given action.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00756">input.cpp:756</a></div></div>
<div class="ttc" id="aclassinput__context_html_ac66ac124d5c0ac5637b5806f124d428f"><div class="ttname"><a href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">input_context::register_action</a></div><div class="ttdeci">void register_action(const std::string &amp;action_descriptor)</div><div class="ttdoc">Register an action with this input context.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00676">input.cpp:676</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a0c7ab52c6270d1ff2a98c75e0ee5ba3b"><div class="ttname"><a href="classitem__contents.html#a0c7ab52c6270d1ff2a98c75e0ee5ba3b">item_contents::clear_items</a></div><div class="ttdeci">void clear_items()</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00074">item_contents.cpp:74</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a14299e40ca1440af11623c86e0b84072"><div class="ttname"><a href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">item_contents::front</a></div><div class="ttdeci">item &amp; front()</div><div class="ttdoc">this is an artifact of the previous code using front() everywhere for contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00190">item_contents.cpp:190</a></div></div>
<div class="ttc" id="aclassitem__location_html"><div class="ttname"><a href="classitem__location.html">item_location</a></div><div class="ttdoc">A lightweight handle to an item independent of it's location Unlike a raw pointer can be (de-)seriali...</div><div class="ttdef"><b>Definition:</b> <a href="item__location_8h_source.html#l00022">item_location.h:23</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_a83fd3bd296c75326b3709280804acef4"><div class="ttname"><a href="classitem__stack.html#a83fd3bd296c75326b3709280804acef4">item_stack::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00015">item_stack.cpp:15</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00178">item.h:179</a></div></div>
<div class="ttc" id="aclassitem_html_a016494fa25a7a403fe78fadbd90b267b"><div class="ttname"><a href="classitem.html#a016494fa25a7a403fe78fadbd90b267b">item::count</a></div><div class="ttdeci">int count() const</div><div class="ttdoc">If count_by_charges(), returns charges, otherwise 1.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05909">item.cpp:5909</a></div></div>
<div class="ttc" id="aclassitem_html_a05c24ca1052a7a8cb9fd314acdb49f40"><div class="ttname"><a href="classitem.html#a05c24ca1052a7a8cb9fd314acdb49f40">item::is_favorite</a></div><div class="ttdeci">bool is_favorite</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02250">item.h:2250</a></div></div>
<div class="ttc" id="aclassitem_html_a3157f01f1da6fe89bdbc87db2605afb9"><div class="ttname"><a href="classitem.html#a3157f01f1da6fe89bdbc87db2605afb9">item::weight</a></div><div class="ttdeci">units::mass weight(bool include_contents=true, bool integral=false) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04879">item.cpp:4879</a></div></div>
<div class="ttc" id="aclassitem_html_a3466a1bff4903c7b2d3f570187b73b2a"><div class="ttname"><a href="classitem.html#a3466a1bff4903c7b2d3f570187b73b2a">item::fill_with</a></div><div class="ttdeci">void fill_with(item &amp;liquid, int amount=INFINITE_CHARGES)</div><div class="ttdoc">Fill item with liquid up to its capacity.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08462">item.cpp:8462</a></div></div>
<div class="ttc" id="aclassitem_html_a40963a016376016eb408bdb9dbb94388"><div class="ttname"><a href="classitem.html#a40963a016376016eb408bdb9dbb94388">item::count_by_charges</a></div><div class="ttdeci">bool count_by_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05904">item.cpp:5904</a></div></div>
<div class="ttc" id="aclassitem_html_a4326944ae95f4d265c8ca1c76ed89a03"><div class="ttname"><a href="classitem.html#a4326944ae95f4d265c8ca1c76ed89a03">item::made_of</a></div><div class="ttdeci">const std::vector&lt; material_id &gt; &amp; made_of() const</div><div class="ttdoc">The ids of all the materials this is made of.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06312">item.cpp:6312</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02172">item.h:2172</a></div></div>
<div class="ttc" id="aclassitem_html_a5996f63ca1797fc01482678b51a87680"><div class="ttname"><a href="classitem.html#a5996f63ca1797fc01482678b51a87680">item::is_container_empty</a></div><div class="ttdeci">bool is_container_empty() const</div><div class="ttdoc">Whether this item has no contents at all.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06736">item.cpp:6736</a></div></div>
<div class="ttc" id="aclassitem_html_a60ce7c1072cdd4a6384d95598ba10231"><div class="ttname"><a href="classitem.html#a60ce7c1072cdd4a6384d95598ba10231">item::info</a></div><div class="ttdeci">std::string info(bool showtext=false) const</div><div class="ttdoc">Return all the information about the item and its type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01109">item.cpp:1109</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02210">item.h:2210</a></div></div>
<div class="ttc" id="aclassitem_html_a6d1575c31b1dc0df51cbe3a1dfbfef16"><div class="ttname"><a href="classitem.html#a6d1575c31b1dc0df51cbe3a1dfbfef16">item::on_contents_changed</a></div><div class="ttdeci">void on_contents_changed()</div><div class="ttdoc">Callback when contents of the item are affected in any way other than just processing.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04462">item.cpp:4462</a></div></div>
<div class="ttc" id="aclassitem_html_a70359b9e831ed97023891631058595b6"><div class="ttname"><a href="classitem.html#a70359b9e831ed97023891631058595b6">item::type_name</a></div><div class="ttdeci">std::string type_name(unsigned int quantity=1) const</div><div class="ttdoc">Name of the item type (not the item), with proper plural.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09758">item.cpp:9758</a></div></div>
<div class="ttc" id="aclassitem_html_a723753bab4cc789e3ec186846c9916a3"><div class="ttname"><a href="classitem.html#a723753bab4cc789e3ec186846c9916a3">item::is_container</a></div><div class="ttdeci">bool is_container() const</div><div class="ttdoc">Whether this is container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06618">item.cpp:6618</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04478">item.cpp:4478</a></div></div>
<div class="ttc" id="aclassitem_html_a9a1f33d04abe5ec73a31213be8d0c44e"><div class="ttname"><a href="classitem.html#a9a1f33d04abe5ec73a31213be8d0c44e">item::set_favorite</a></div><div class="ttdeci">void set_favorite(bool favorite)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09991">item.cpp:9991</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08252">item.cpp:8252</a></div></div>
<div class="ttc" id="aclassitem_html_aabd0667301ad29a57bb257acfd7a4470"><div class="ttname"><a href="classitem.html#aabd0667301ad29a57bb257acfd7a4470">item::is_non_resealable_container</a></div><div class="ttdeci">bool is_non_resealable_container() const</div><div class="ttdoc">Whether removing this item's contents will permanently alter it.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06628">item.cpp:6628</a></div></div>
<div class="ttc" id="aclassitem_html_aaff8311e14e6819e6b6c2e207037f292"><div class="ttname"><a href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">item::get_remaining_capacity_for_liquid</a></div><div class="ttdeci">int get_remaining_capacity_for_liquid(const item &amp;liquid, bool allow_bucket=false, std::string *err=nullptr) const</div><div class="ttdoc">How much more of this liquid (in charges) can be put in this container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08324">item.cpp:8324</a></div></div>
<div class="ttc" id="aclassitem_html_abc27dc693d588feea7812432929fb5a9"><div class="ttname"><a href="classitem.html#abc27dc693d588feea7812432929fb5a9">item::charges_per_volume</a></div><div class="ttdeci">int charges_per_volume(const units::volume &amp;vol) const</div><div class="ttdoc">Number of (charges of) this item that fit into the given volume.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00864">item.cpp:864</a></div></div>
<div class="ttc" id="aclassmap__cursor_html"><div class="ttname"><a href="classmap__cursor.html">map_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="map__selector_8h_source.html#l00010">map_selector.h:11</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00104">map.h:105</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00383">map.h:384</a></div></div>
<div class="ttc" id="aclassmap_html_a091e78df9647c7c8a468a33886a097c5"><div class="ttname"><a href="classmap.html#a091e78df9647c7c8a468a33886a097c5">map::draw</a></div><div class="ttdeci">void draw(const catacurses::window &amp;w, const tripoint &amp;center)</div><div class="ttdoc">Draw a visible part of the map into w.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05714">map.cpp:5714</a></div></div>
<div class="ttc" id="aclassmap_html_a5130a127601b67e569eaef37a1a88610"><div class="ttname"><a href="classmap.html#a5130a127601b67e569eaef37a1a88610">map::i_at</a></div><div class="ttdeci">map_stack i_at(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04090">map.cpp:4090</a></div></div>
<div class="ttc" id="aclassmap_html_ae47264a5a225fbac1e19fccc8f6dcc55"><div class="ttname"><a href="classmap.html#ae47264a5a225fbac1e19fccc8f6dcc55">map::max_volume</a></div><div class="ttdeci">units::volume max_volume(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l04218">map.cpp:4218</a></div></div>
<div class="ttc" id="aclassmove__items__activity__actor_html"><div class="ttname"><a href="classmove__items__activity__actor.html">move_items_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00346">activity_actor_definitions.h:347</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00348">color.h:349</a></div></div>
<div class="ttc" id="aclasspanel__manager_html_a1196cd08699822653246ccafd856f72c"><div class="ttname"><a href="classpanel__manager.html#a1196cd08699822653246ccafd856f72c">panel_manager::get_manager</a></div><div class="ttdeci">static panel_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="panels_8h_source.html#l00072">panels.h:72</a></div></div>
<div class="ttc" id="aclasspickup__activity__actor_html"><div class="ttname"><a href="classpickup__activity__actor.html">pickup_activity_actor</a></div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00411">activity_actor_definitions.h:412</a></div></div>
<div class="ttc" id="aclassplayer__activity_html"><div class="ttname"><a href="classplayer__activity.html">player_activity</a></div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00031">player_activity.h:32</a></div></div>
<div class="ttc" id="aclassquery__destination__callback_html"><div class="ttname"><a href="classquery__destination__callback.html">query_destination_callback</a></div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01576">advanced_inv.cpp:1577</a></div></div>
<div class="ttc" id="aclassquery__destination__callback_html_a370e22680a80ec7841f47ca0e4a7826a"><div class="ttname"><a href="classquery__destination__callback.html#a370e22680a80ec7841f47ca0e4a7826a">query_destination_callback::query_destination_callback</a></div><div class="ttdeci">query_destination_callback(advanced_inventory &amp;adv_inv)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01583">advanced_inv.cpp:1583</a></div></div>
<div class="ttc" id="aclassquery__destination__callback_html_a5754901a7eeb6ca30a4936949a0f64a3"><div class="ttname"><a href="classquery__destination__callback.html#a5754901a7eeb6ca30a4936949a0f64a3">query_destination_callback::draw_squares</a></div><div class="ttdeci">void draw_squares(const uilist *menu)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01589">advanced_inv.cpp:1589</a></div></div>
<div class="ttc" id="aclassquery__destination__callback_html_ab5d3ac2fda55ef1e48836156febd20d1"><div class="ttname"><a href="classquery__destination__callback.html#ab5d3ac2fda55ef1e48836156febd20d1">query_destination_callback::_adv_inv</a></div><div class="ttdeci">advanced_inventory &amp; _adv_inv</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01579">advanced_inv.cpp:1579</a></div></div>
<div class="ttc" id="aclassquery__destination__callback_html_ab74f4827fec770976eb877182d8c0141"><div class="ttname"><a href="classquery__destination__callback.html#ab74f4827fec770976eb877182d8c0141">query_destination_callback::refresh</a></div><div class="ttdeci">void refresh(uilist *menu) override</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l01584">advanced_inv.cpp:1584</a></div></div>
<div class="ttc" id="aclassret__val_html"><div class="ttname"><a href="classret__val.html">ret_val</a></div><div class="ttdoc">The class represents a composite return value of an arbitrary function (result).</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00020">ret_val.h:21</a></div></div>
<div class="ttc" id="aclassret__val_html_a677622bcf3fc4937ece9375e9bfc6625"><div class="ttname"><a href="classret__val.html#a677622bcf3fc4937ece9375e9bfc6625">ret_val::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00082">ret_val.h:82</a></div></div>
<div class="ttc" id="aclassret__val_html_afe534a279647e88c4ab321d0c338d9d5"><div class="ttname"><a href="classret__val.html#afe534a279647e88c4ab321d0c338d9d5">ret_val::success</a></div><div class="ttdeci">bool success() const</div><div class="ttdef"><b>Definition:</b> <a href="ret__val_8h_source.html#l00070">ret_val.h:70</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; activity_type &gt;</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html"><div class="ttname"><a href="classstring__input__popup.html">string_input_popup</a></div><div class="ttdoc">Shows a window querying the user for input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00047">string_input_popup.h:48</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_acc88b6636bee68b1ee4f4dffc533d611"><div class="ttname"><a href="classstring__input__popup.html#acc88b6636bee68b1ee4f4dffc533d611">string_input_popup::width</a></div><div class="ttdeci">string_input_popup &amp; width(int value)</div><div class="ttdoc">Width (in console cells) of the input field itself.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00143">string_input_popup.h:143</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_ad9511310a3e0d119d5587fbf0f877c07"><div class="ttname"><a href="classstring__input__popup.html#ad9511310a3e0d119d5587fbf0f877c07">string_input_popup::query_int</a></div><div class="ttdeci">int query_int(bool loop=true, bool draw_only=false)</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8cpp_source.html#l00281">string_input_popup.cpp:281</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_add686042aff41369ff1bfa8754223ca0"><div class="ttname"><a href="classstring__input__popup.html#add686042aff41369ff1bfa8754223ca0">string_input_popup::only_digits</a></div><div class="ttdeci">string_input_popup &amp; only_digits(bool value)</div><div class="ttdoc">If true, any non-digit input cancels the input.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00158">string_input_popup.h:158</a></div></div>
<div class="ttc" id="aclassstring__input__popup_html_aeced4fb3877cc8e24da36af12af2e519"><div class="ttname"><a href="classstring__input__popup.html#aeced4fb3877cc8e24da36af12af2e519">string_input_popup::title</a></div><div class="ttdeci">string_input_popup &amp; title(const std::string &amp;value)</div><div class="ttdoc">The title: short string before the actual input field.</div><div class="ttdef"><b>Definition:</b> <a href="string__input__popup_8h_source.html#l00105">string_input_popup.h:105</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00064">ui_manager.h:65</a></div></div>
<div class="ttc" id="aclassuilist__callback_html"><div class="ttname"><a href="classuilist__callback.html">uilist_callback</a></div><div class="ttdoc">uilist::query() handles most input events first, and then passes the event to the callback if it can'...</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00166">ui.h:167</a></div></div>
<div class="ttc" id="aclassuilist__callback_html_a982e00fd3b4aa68d9dfddba50e77622a"><div class="ttname"><a href="classuilist__callback.html#a982e00fd3b4aa68d9dfddba50e77622a">uilist_callback::key</a></div><div class="ttdeci">virtual bool key(const input_context &amp;, const input_event &amp;, int, uilist *)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00174">ui.h:174</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_a363d10490fb72bde7b2537fd06836802"><div class="ttname"><a href="classuilist.html#a363d10490fb72bde7b2537fd06836802">uilist::window</a></div><div class="ttdeci">catacurses::window window</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00377">ui.h:377</a></div></div>
<div class="ttc" id="aclassuilist_html_a9890cac1dc13adf140510719b160bde5"><div class="ttname"><a href="classuilist.html#a9890cac1dc13adf140510719b160bde5">uilist::pad_left_setup</a></div><div class="ttdeci">size_scalar pad_left_setup</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00344">ui.h:344</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00415">ui.h:415</a></div></div>
<div class="ttc" id="aclassuilist_html_ad4f5806d1d8ab3de3af8e3285faf47d6"><div class="ttname"><a href="classuilist.html#ad4f5806d1d8ab3de3af8e3285faf47d6">uilist::callback</a></div><div class="ttdeci">uilist_callback * callback</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00335">ui.h:335</a></div></div>
<div class="ttc" id="aclassuilist_html_af59dd3fdde04746dbc5cb52b355577ce"><div class="ttname"><a href="classuilist.html#af59dd3fdde04746dbc5cb52b355577ce">uilist::text</a></div><div class="ttdeci">std::string text</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00320">ui.h:320</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00323">ui.h:323</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00942">ui.cpp:942</a></div></div>
<div class="ttc" id="aclassuistatedata_html_a9a47d5cf0efecea53d34dfd6ff0f113f"><div class="ttname"><a href="classuistatedata.html#a9a47d5cf0efecea53d34dfd6ff0f113f">uistatedata::adv_inv_container_content_type</a></div><div class="ttdeci">itype_id adv_inv_container_content_type</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00098">uistate.h:98</a></div></div>
<div class="ttc" id="aclassuistatedata_html_aaa8e0be61e584b02f8c79957ea6db267"><div class="ttname"><a href="classuistatedata.html#aaa8e0be61e584b02f8c79957ea6db267">uistatedata::transfer_save</a></div><div class="ttdeci">advanced_inv_save_state transfer_save</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00101">uistate.h:101</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="aclassvehicle__cursor_html"><div class="ttname"><a href="classvehicle__cursor.html">vehicle_cursor</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__selector_8h_source.html#l00013">vehicle_selector.h:14</a></div></div>
<div class="ttc" id="aclassvehicle__stack_html"><div class="ttname"><a href="classvehicle__stack.html">vehicle_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00122">vehicle.h:123</a></div></div>
<div class="ttc" id="aclassvehicle_html_a441fa41f264fb7bc45df81d71244a0d1"><div class="ttname"><a href="classvehicle.html#a441fa41f264fb7bc45df81d71244a0d1">vehicle::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01849">vehicle.h:1849</a></div></div>
<div class="ttc" id="aclassvehicle_html_a983dd9db3cd64078b176a82289e0b260"><div class="ttname"><a href="classvehicle.html#a983dd9db3cd64078b176a82289e0b260">vehicle::get_items</a></div><div class="ttdeci">vehicle_stack get_items(int part) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l05468">vehicle.cpp:5468</a></div></div>
<div class="ttc" id="acolony_8h_html"><div class="ttname"><a href="colony_8h.html">colony.h</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a4306eceb07389bb063f39894f4af0503"><div class="ttname"><a href="color_8cpp.html#a4306eceb07389bb063f39894f4af0503">invert_color</a></div><div class="ttdeci">nc_color invert_color(const nc_color &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00503">color.cpp:503</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a5d2c29ee440b5997773bf3bbb3674c5b"><div class="ttname"><a href="color_8cpp.html#a5d2c29ee440b5997773bf3bbb3674c5b">magenta_background</a></div><div class="ttdeci">nc_color magenta_background(const nc_color &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00539">color.cpp:539</a></div></div>
<div class="ttc" id="acolor_8cpp_html_a99e42a5de98370aab8662d4423cf4a4d"><div class="ttname"><a href="color_8cpp.html#a99e42a5de98370aab8662d4423cf4a4d">hilite</a></div><div class="ttdeci">nc_color hilite(const nc_color &amp;c)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00509">color.cpp:509</a></div></div>
<div class="ttc" id="acolor_8h_html"><div class="ttname"><a href="color_8h.html">color.h</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00018">color.h:18</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acolor_8h_html_a1cb87e74156596960610fd0a9ace766d"><div class="ttname"><a href="color_8h.html#a1cb87e74156596960610fd0a9ace766d">c_green</a></div><div class="ttdeci">#define c_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00022">color.h:22</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="acolor_8h_html_a5738d18ff9e165cca088a623cb1883ae"><div class="ttname"><a href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a></div><div class="ttdeci">#define c_dark_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acolor_8h_html_a894265dad49331c44392826fc52b848f"><div class="ttname"><a href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a></div><div class="ttdeci">#define c_light_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00024">color.h:24</a></div></div>
<div class="ttc" id="acolor_8h_html_a995c6d4982f304048812605b34fb31cb"><div class="ttname"><a href="color_8h.html#a995c6d4982f304048812605b34fb31cb">h_white</a></div><div class="ttdeci">#define h_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00035">color.h:35</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
<div class="ttc" id="acolor_8h_html_af7bea175641eeb1fbec43dc22b5dd0ea"><div class="ttname"><a href="color_8h.html#af7bea175641eeb1fbec43dc22b5dd0ea">c_white_red</a></div><div class="ttdeci">#define c_white_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00070">color.h:70</a></div></div>
<div class="ttc" id="adebug_8h_html"><div class="ttname"><a href="debug_8h.html">debug.h</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00037">dialogue.h:36</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="aenums_8h_html"><div class="ttname"><a href="enums_8h.html">enums.h</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00265">enums.h:265</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40a7afa939f8bd773f5f7e326990b07580c"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40a7afa939f8bd773f5f7e326990b07580c">prefix</a></div><div class="ttdeci">@ prefix</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00079">enums.h:79</a></div></div>
<div class="ttc" id="aenums_8h_html_ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce"><div class="ttname"><a href="enums_8h.html#ade8f325e8cc8463cef8f944f3209d0e5aa87f9501ff2b390be1ea7d261b0d7cce">LIQUID</a></div><div class="ttdeci">@ LIQUID</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00175">enums.h:175</a></div></div>
<div class="ttc" id="aexamine__item__menu_8h_html"><div class="ttname"><a href="examine__item__menu_8h.html">examine_item_menu.h</a></div></div>
<div class="ttc" id="agame_8cpp_html_a764052f34a47c6dee072c67b842a222c"><div class="ttname"><a href="game_8cpp.html#a764052f34a47c6dee072c67b842a222c">uistate</a></div><div class="ttdeci">uistatedata uistate</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00283">game.cpp:283</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00280">game.cpp:280</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html"><div class="ttname"><a href="game__constants_8h.html">game_constants.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a7ca773657c862460eb9f4fb2daf33335"><div class="ttname"><a href="game__constants_8h.html#a7ca773657c862460eb9f4fb2daf33335">MAX_WORN_PER_TYPE</a></div><div class="ttdeci">static constexpr int MAX_WORN_PER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00028">game_constants.h:28</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aee38c8a585c0020fc8ade031dab65393"><div class="ttname"><a href="game__constants_8h.html#aee38c8a585c0020fc8ade031dab65393">MAX_ITEM_IN_SQUARE</a></div><div class="ttdeci">static constexpr int MAX_ITEM_IN_SQUARE</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00024">game_constants.h:24</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00838">ui.cpp:838</a></div></div>
<div class="ttc" id="aime_8h_html"><div class="ttname"><a href="ime_8h.html">ime.h</a></div></div>
<div class="ttc" id="ainput_8h_html"><div class="ttname"><a href="input_8h.html">input.h</a></div></div>
<div class="ttc" id="ainput_8h_html_a3eb5e354329f66eddf45515dedadfc14"><div class="ttname"><a href="input_8h.html#a3eb5e354329f66eddf45515dedadfc14">KEY_NPAGE</a></div><div class="ttdeci">static constexpr int KEY_NPAGE</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00065">input.h:65</a></div></div>
<div class="ttc" id="ainput_8h_html_a6759cfc3c55dcda34effc92014d899e3"><div class="ttname"><a href="input_8h.html#a6759cfc3c55dcda34effc92014d899e3">KEY_PPAGE</a></div><div class="ttdeci">static constexpr int KEY_PPAGE</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00066">input.h:66</a></div></div>
<div class="ttc" id="ainput_8h_html_af3b3462a5f8df1b9fae4c8dec239bc76"><div class="ttname"><a href="input_8h.html#af3b3462a5f8df1b9fae4c8dec239bc76">KEY_DOWN</a></div><div class="ttdeci">static constexpr int KEY_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00037">input.h:37</a></div></div>
<div class="ttc" id="ainput_8h_html_af4f9cc98a80e8e792d91d13ef7036005"><div class="ttname"><a href="input_8h.html#af4f9cc98a80e8e792d91d13ef7036005">KEY_UP</a></div><div class="ttdeci">static constexpr int KEY_UP</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00038">input.h:38</a></div></div>
<div class="ttc" id="ainventory_8h_html"><div class="ttname"><a href="inventory_8h.html">inventory.h</a></div></div>
<div class="ttc" id="aitem_8h_html"><div class="ttname"><a href="item_8h.html">item.h</a></div></div>
<div class="ttc" id="aitem__category_8h_html"><div class="ttname"><a href="item__category_8h.html">item_category.h</a></div></div>
<div class="ttc" id="aitem__contents_8h_html"><div class="ttname"><a href="item__contents_8h.html">item_contents.h</a></div></div>
<div class="ttc" id="aitem__handling__util_8h_html_a8f6e34dc3a1ced0b9d56d2c2b016bbfc"><div class="ttname"><a href="item__handling__util_8h.html#a8f6e34dc3a1ced0b9d56d2c2b016bbfc">drop_location</a></div><div class="ttdeci">iuse_location drop_location</div><div class="ttdef"><b>Definition:</b> <a href="item__handling__util_8h_source.html#l00025">item_handling_util.h:25</a></div></div>
<div class="ttc" id="aitem__handling__util_8h_html_ab6eddf239a037205dfd747394734dbcd"><div class="ttname"><a href="item__handling__util_8h.html#ab6eddf239a037205dfd747394734dbcd">drop_locations</a></div><div class="ttdeci">std::list&lt; drop_location &gt; drop_locations</div><div class="ttdef"><b>Definition:</b> <a href="item__handling__util_8h_source.html#l00026">item_handling_util.h:26</a></div></div>
<div class="ttc" id="aitem__location_8h_html"><div class="ttname"><a href="item__location_8h.html">item_location.h</a></div></div>
<div class="ttc" id="aitem__stack_8h_html"><div class="ttname"><a href="item__stack_8h.html">item_stack.h</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00146">map.cpp:146</a></div></div>
<div class="ttc" id="amap_8h_html"><div class="ttname"><a href="map_8h.html">map.h</a></div></div>
<div class="ttc" id="amap__selector_8h_html"><div class="ttname"><a href="map__selector_8h.html">map_selector.h</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_a21b4b872795b4d56cd2cf0570f74860e"><div class="ttname"><a href="mapgen_8cpp.html#a21b4b872795b4d56cd2cf0570f74860e">square</a></div><div class="ttdeci">void square(map *m, const ter_id &amp;type, const point &amp;p1, const point &amp;p2)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l06501">mapgen.cpp:6501</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="amessages_8h_html"><div class="ttname"><a href="messages_8h.html">messages.h</a></div></div>
<div class="ttc" id="amutation__ui_8cpp_html_a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79"><div class="ttname"><a href="mutation__ui_8cpp.html#a402f65070aa900e68cd18960d2685a76ac76a5e84e4bdee527e274ea30c680d79">mutation_tab_mode::active</a></div><div class="ttdeci">@ active</div></div>
<div class="ttc" id="anamespaceMessages_html_a68f4ec7df01cb2016b7215ea5aad0b77"><div class="ttname"><a href="namespaceMessages.html#a68f4ec7df01cb2016b7215ea5aad0b77">Messages::display_messages</a></div><div class="ttdeci">void display_messages()</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00801">messages.cpp:801</a></div></div>
<div class="ttc" id="anamespacealign_html_aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79"><div class="ttname"><a href="namespacealign.html#aff2772e23f6ac91520e57d4b3ac0c759a5bf95244357d6164916bfe6e0ccfbc79">align::right</a></div><div class="ttdeci">@ right</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l01356">fmtlib_format.h:1356</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacecata_html_a097b137e977a6b843c0dada2c8b19611"><div class="ttname"><a href="namespacecata.html#a097b137e977a6b843c0dada2c8b19611">cata::swap</a></div><div class="ttdeci">void swap(colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;a, colony&lt; element_type, element_allocator_type, element_skipfield_type &gt; &amp;b) COLONY_NOEXCEPT_SWAP(element_allocator_type)</div><div class="ttdoc">Swaps colony A's contents with that of colony B.</div><div class="ttdef"><b>Definition:</b> <a href="colony_8h_source.html#l03496">colony.h:3496</a></div></div>
<div class="ttc" id="anamespacecata_html_ad05314667ac5d05f984aeeef26b9a87f"><div class="ttname"><a href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></div><div class="ttdeci">static constexpr nullopt_t nullopt</div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00022">optional.h:22</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a03121643695b0c990aed0a0b0408e85f"><div class="ttname"><a href="namespacecatacurses.html#a03121643695b0c990aed0a0b0408e85f">catacurses::wattroff</a></div><div class="ttdeci">void wattroff(const window &amp;win, int attrs)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00088">ncurses_def.cpp:88</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a07c5180048f87110c547f58341b04812"><div class="ttname"><a href="namespacecatacurses.html#a07c5180048f87110c547f58341b04812">catacurses::wattron</a></div><div class="ttdeci">void wattron(const window &amp;win, const nc_color &amp;attrs)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00093">ncurses_def.cpp:93</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a576fd20080b8f49e27acf97af45b374b"><div class="ttname"><a href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, const point &amp;begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00034">ncurses_def.cpp:34</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00043">ncurses_def.cpp:43</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_abde9c157650e464f0a27441d81c84644"><div class="ttname"><a href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">catacurses::mvwprintw</a></div><div class="ttdeci">void mvwprintw(const window &amp;win, const point &amp;p, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00103">ncurses_def.cpp:103</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_ace2ce3990cb812fb83adf6e4ea1f9e8e"><div class="ttname"><a href="namespacecatacurses.html#ace2ce3990cb812fb83adf6e4ea1f9e8e">catacurses::werase</a></div><div class="ttdeci">void werase(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00053">ncurses_def.cpp:53</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_adc81ca40445dc062af12fb6d7a4793d0"><div class="ttname"><a href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">catacurses::getmaxy</a></div><div class="ttdeci">int getmaxy(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00063">ncurses_def.cpp:63</a></div></div>
<div class="ttc" id="anamespacecoords_html_a7457d0a4e8c8e6407a2c0ee89d275962"><div class="ttname"><a href="namespacecoords.html#a7457d0a4e8c8e6407a2c0ee89d275962">coords::sm</a></div><div class="ttdeci">constexpr scale sm</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00031">coordinates.h:31</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aeac7878d891005c72a71703f35dbb2be15">detail::digits::done</a></div><div class="ttdeci">@ done</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01628">fmtlib_format-inl.h:1628</a></div></div>
<div class="ttc" id="anamespacedetail_html_ab2f84fb3de26acdac3fc63a2dce5ea5e"><div class="ttname"><a href="namespacedetail.html#ab2f84fb3de26acdac3fc63a2dce5ea5e">detail::count</a></div><div class="ttdeci">constexpr size_t count()</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01073">fmtlib_core.h:1073</a></div></div>
<div class="ttc" id="anamespaceexamine__item__menu_html_a0ef68cd5b60cc38b1d1655c81dea6b8c"><div class="ttname"><a href="namespaceexamine__item__menu.html#a0ef68cd5b60cc38b1d1655c81dea6b8c">examine_item_menu::run</a></div><div class="ttdeci">bool run(item_location loc, const std::function&lt; int()&gt; &amp;func_pos_x, const std::function&lt; int()&gt; &amp;func_width, menu_pos_t menu_pos)</div><div class="ttdef"><b>Definition:</b> <a href="examine__item__menu_8cpp_source.html#l00029">examine_item_menu.cpp:29</a></div></div>
<div class="ttc" id="anamespaceexamine__item__menu_html_a8b68cfe375a1712f8dd0cef484976020a7c4f29407893c334a6cb7a87bf045c0d"><div class="ttname"><a href="namespaceexamine__item__menu.html#a8b68cfe375a1712f8dd0cef484976020a7c4f29407893c334a6cb7a87bf045c0d">examine_item_menu::menu_pos_t::right</a></div><div class="ttdeci">@ right</div></div>
<div class="ttc" id="anamespaceexamine__item__menu_html_a8b68cfe375a1712f8dd0cef484976020a811882fecd5c7618d7099ebbd39ea254"><div class="ttname"><a href="namespaceexamine__item__menu.html#a8b68cfe375a1712f8dd0cef484976020a811882fecd5c7618d7099ebbd39ea254">examine_item_menu::menu_pos_t::left</a></div><div class="ttdeci">@ left</div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04127">overmap.cpp:4127</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="om__direction_8h_source.html#l00027">om_direction.h:27</a></div></div>
<div class="ttc" id="anamespacepickup_html_a876f9437271da80f53cc2a748cd6e240"><div class="ttname"><a href="namespacepickup.html#a876f9437271da80f53cc2a748cd6e240">pickup::optimize_pickup</a></div><div class="ttdeci">std::vector&lt; pick_drop_selection &gt; optimize_pickup(const std::vector&lt; item_location &gt; &amp;targets, const std::vector&lt; int &gt; &amp;quantities)</div><div class="ttdoc">Finds possible parent-child relations in picked up items to save moves.</div><div class="ttdef"><b>Definition:</b> <a href="pickup_8cpp_source.html#l01305">pickup.cpp:1305</a></div></div>
<div class="ttc" id="anamespacetrapfunc_html_a80008798a29a293e768175bb1b6eec66"><div class="ttname"><a href="namespacetrapfunc.html#a80008798a29a293e768175bb1b6eec66">trapfunc::shadow</a></div><div class="ttdeci">bool shadow(const tripoint &amp;p, Creature *c, item *i)</div><div class="ttdef"><b>Definition:</b> <a href="trapfunc_8cpp_source.html#l01348">trapfunc.cpp:1348</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00389">ui_manager.cpp:389</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00016">overmap_ui.h:17</a></div></div>
<div class="ttc" id="anamespaceunits_html_ab3b1636cb969c682c3105813cfb43a40"><div class="ttname"><a href="namespaceunits.html#ab3b1636cb969c682c3105813cfb43a40">units::mass_max</a></div><div class="ttdeci">constexpr mass mass_max</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00027">units_mass.h:27</a></div></div>
<div class="ttc" id="aoptional_8h_html"><div class="ttname"><a href="optional_8h.html">optional.h</a></div></div>
<div class="ttc" id="aoptions_8h_html"><div class="ttname"><a href="options_8h.html">options.h</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00047">output.cpp:47</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1184e3eda011b110d09bf2dcf08228f5"><div class="ttname"><a href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a></div><div class="ttdeci">void mvwprintz(const catacurses::window &amp;w, const point &amp;p, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02035">output.cpp:2035</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00764">output.cpp:764</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a297635a05a44e1f896fb829a0474f586"><div class="ttname"><a href="output_8cpp.html#a297635a05a44e1f896fb829a0474f586">format_volume</a></div><div class="ttdeci">std::string format_volume(const units::volume &amp;volume)</div><div class="ttdoc">Convert, round up and format a volume.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l01974">output.cpp:1974</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a2b52716de2efb474f7eeaa1ee4e04105"><div class="ttname"><a href="output_8cpp.html#a2b52716de2efb474f7eeaa1ee4e04105">draw_item_filter_rules</a></div><div class="ttdeci">void draw_item_filter_rules(const catacurses::window &amp;win, int starty, int height, item_filter_type type)</div><div class="ttdoc">Write some tips (such as precede items with - to exclude them) onto the window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00810">output.cpp:810</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00048">output.cpp:48</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aa6093ccb0ebc7f7ee1f11edd5cc2711c"><div class="ttname"><a href="output_8cpp.html#aa6093ccb0ebc7f7ee1f11edd5cc2711c">right_print</a></div><div class="ttdeci">int right_print(const catacurses::window &amp;w, const int line, const int right_indent, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00461">output.cpp:461</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00214">output.cpp:214</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ae94727a9102271cfed214e5988c8f440"><div class="ttname"><a href="output_8cpp.html#ae94727a9102271cfed214e5988c8f440">draw_item_info</a></div><div class="ttdeci">input_event draw_item_info(const int iLeft, const int iWidth, const int iTop, const int iHeight, item_info_data &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00793">output.cpp:793</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aedec608a42edd33ec812f7769a9ed0c9"><div class="ttname"><a href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a></div><div class="ttdeci">void wprintz(const catacurses::window &amp;w, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02043">output.cpp:2043</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_af24921c70e875c1d0888315b9452b562"><div class="ttname"><a href="output_8cpp.html#af24921c70e875c1d0888315b9452b562">FULL_SCREEN_WIDTH</a></div><div class="ttdeci">int FULL_SCREEN_WIDTH</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00055">output.cpp:55</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afb5597c87a5847c7d64b878ab3a77d5b"><div class="ttname"><a href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a></div><div class="ttdeci">void mvwputch(const catacurses::window &amp;w, const point &amp;p, nc_color FG, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00477">output.cpp:477</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afea9968fcee47ebca0e45d27099d1c22"><div class="ttname"><a href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a></div><div class="ttdeci">void draw_border(const catacurses::window &amp;w, nc_color border_color, const std::string &amp;title, nc_color title_color)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00575">output.cpp:575</a></div></div>
<div class="ttc" id="aoutput_8h_html"><div class="ttname"><a href="output_8h.html">output.h</a></div></div>
<div class="ttc" id="aoutput_8h_html_a966901ace2cf6cba3fc9cec310150860"><div class="ttname"><a href="output_8h.html#a966901ace2cf6cba3fc9cec310150860">BORDER_COLOR</a></div><div class="ttdeci">#define BORDER_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00135">output.h:135</a></div></div>
<div class="ttc" id="aoutput_8h_html_aa3bbd067f432dba23cd7bdfe75d7c3b4ae75ab17a550f46adbbe891b819cf951d"><div class="ttname"><a href="output_8h.html#aa3bbd067f432dba23cd7bdfe75d7c3b4ae75ab17a550f46adbbe891b819cf951d">item_filter_type::FILTER</a></div><div class="ttdeci">@ FILTER</div></div>
<div class="ttc" id="apanels_8h_html"><div class="ttname"><a href="panels_8h.html">panels.h</a></div></div>
<div class="ttc" id="apixel__minimap_8h_html_a5f62bf59e1051d11100e5fcc845aa612a192ba166b3957ab1020e9a72ea1b40ed"><div class="ttname"><a href="pixel__minimap_8h.html#a5f62bf59e1051d11100e5fcc845aa612a192ba166b3957ab1020e9a72ea1b40ed">pixel_minimap_mode::squares</a></div><div class="ttdeci">@ squares</div></div>
<div class="ttc" id="aplayer_8h_html"><div class="ttname"><a href="player_8h.html">player.h</a></div></div>
<div class="ttc" id="aplayer__activity_8h_html"><div class="ttname"><a href="player__activity_8h.html">player_activity.h</a></div></div>
<div class="ttc" id="apoint_8h_html"><div class="ttname"><a href="point_8h.html">point.h</a></div></div>
<div class="ttc" id="apoint_8h_html_a0551ee1b2f69906cb1d616b4cf473da3"><div class="ttname"><a href="point_8h.html#a0551ee1b2f69906cb1d616b4cf473da3">tripoint_north_east</a></div><div class="ttdeci">static constexpr tripoint tripoint_north_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00286">point.h:286</a></div></div>
<div class="ttc" id="apoint_8h_html_a1167cb93baa23dd31f0297460b2255b9"><div class="ttname"><a href="point_8h.html#a1167cb93baa23dd31f0297460b2255b9">tripoint_north</a></div><div class="ttdeci">static constexpr tripoint tripoint_north</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00285">point.h:285</a></div></div>
<div class="ttc" id="apoint_8h_html_a161d3b46a2531cb4eecd7d82391ecd0a"><div class="ttname"><a href="point_8h.html#a161d3b46a2531cb4eecd7d82391ecd0a">tripoint_north_west</a></div><div class="ttdeci">static constexpr tripoint tripoint_north_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00292">point.h:292</a></div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">static constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00273">point.h:273</a></div></div>
<div class="ttc" id="apoint_8h_html_a53f9f23b765219169daffe4c54ad5b8f"><div class="ttname"><a href="point_8h.html#a53f9f23b765219169daffe4c54ad5b8f">tripoint_below</a></div><div class="ttdeci">static constexpr tripoint tripoint_below</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00295">point.h:295</a></div></div>
<div class="ttc" id="apoint_8h_html_a5767887bb9dcb0ae61b2ab06979a1d1b"><div class="ttname"><a href="point_8h.html#a5767887bb9dcb0ae61b2ab06979a1d1b">tripoint_south_east</a></div><div class="ttdeci">static constexpr tripoint tripoint_south_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00288">point.h:288</a></div></div>
<div class="ttc" id="apoint_8h_html_abd7de5098b6f2a3e020cdc13cfc5c5ab"><div class="ttname"><a href="point_8h.html#abd7de5098b6f2a3e020cdc13cfc5c5ab">tripoint_west</a></div><div class="ttdeci">static constexpr tripoint tripoint_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00291">point.h:291</a></div></div>
<div class="ttc" id="apoint_8h_html_acb82c7b237b74c17b506c0383e38b7aa"><div class="ttname"><a href="point_8h.html#acb82c7b237b74c17b506c0383e38b7aa">tripoint_south_west</a></div><div class="ttdeci">static constexpr tripoint tripoint_south_west</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00290">point.h:290</a></div></div>
<div class="ttc" id="apoint_8h_html_ad388a59168c3ba4b7d9d921b052d1201"><div class="ttname"><a href="point_8h.html#ad388a59168c3ba4b7d9d921b052d1201">tripoint_east</a></div><div class="ttdeci">static constexpr tripoint tripoint_east</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00287">point.h:287</a></div></div>
<div class="ttc" id="apoint_8h_html_ae0d4ab15dc375a3a436b745abaa6ed4b"><div class="ttname"><a href="point_8h.html#ae0d4ab15dc375a3a436b745abaa6ed4b">tripoint_south</a></div><div class="ttdeci">static constexpr tripoint tripoint_south</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00289">point.h:289</a></div></div>
<div class="ttc" id="apoint_8h_html_aff85224e35f4fc5c8ac34e20a1007c4c"><div class="ttname"><a href="point_8h.html#aff85224e35f4fc5c8ac34e20a1007c4c">tripoint_above</a></div><div class="ttdeci">static constexpr tripoint tripoint_above</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00294">point.h:294</a></div></div>
<div class="ttc" id="arelic_8h_html_a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b"><div class="ttname"><a href="relic_8h.html#a37cd9dd49ee6b62891ec331828640ddca07cc694b9b3fc636710fa08b6922c42b">relic_recharge_type::time</a></div><div class="ttdeci">@ time</div><div class="ttdoc">Recharges slowly with time.</div></div>
<div class="ttc" id="aret__val_8h_html"><div class="ttname"><a href="ret__val_8h.html">ret_val.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html"><div class="ttname"><a href="string__formatter_8h.html">string_formatter.h</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00431">string_formatter.h:431</a></div></div>
<div class="ttc" id="astring__input__popup_8h_html"><div class="ttname"><a href="string__input__popup_8h.html">string_input_popup.h</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a31fe7569d3cf6fa8fe91eabb1c8dcf3e"><div class="ttname"><a href="structadvanced__inv__save__state.html#a31fe7569d3cf6fa8fe91eabb1c8dcf3e">advanced_inv_save_state::saved_area</a></div><div class="ttdeci">int saved_area</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00045">uistate.h:45</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a418cf5aff6d7437cf1325e99113c6136"><div class="ttname"><a href="structadvanced__inv__save__state.html#a418cf5aff6d7437cf1325e99113c6136">advanced_inv_save_state::re_enter_move_all</a></div><div class="ttdeci">int re_enter_move_all</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00039">uistate.h:39</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a5b8734a9d1c2a5e441d4b8a4b0e55c1e"><div class="ttname"><a href="structadvanced__inv__save__state.html#a5b8734a9d1c2a5e441d4b8a4b0e55c1e">advanced_inv_save_state::last_popup_dest</a></div><div class="ttdeci">int last_popup_dest</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00043">uistate.h:43</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a6aff6b07cac501b04863ae2a355c0313"><div class="ttname"><a href="structadvanced__inv__save__state.html#a6aff6b07cac501b04863ae2a355c0313">advanced_inv_save_state::pane</a></div><div class="ttdeci">advanced_inv_pane_save_state pane</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00047">uistate.h:47</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a97c449c1408d227d4468ec8a8b38e8c7"><div class="ttname"><a href="structadvanced__inv__save__state.html#a97c449c1408d227d4468ec8a8b38e8c7">advanced_inv_save_state::aim_all_location</a></div><div class="ttdeci">int aim_all_location</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00040">uistate.h:40</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_a97e2e344c1e3503d6e478430b44e0d80"><div class="ttname"><a href="structadvanced__inv__save__state.html#a97e2e344c1e3503d6e478430b44e0d80">advanced_inv_save_state::pane_right</a></div><div class="ttdeci">advanced_inv_pane_save_state pane_right</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00048">uistate.h:48</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_ad5c84d29ba2fbab5690c174ab2936e25"><div class="ttname"><a href="structadvanced__inv__save__state.html#ad5c84d29ba2fbab5690c174ab2936e25">advanced_inv_save_state::exit_code</a></div><div class="ttdeci">int exit_code</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00038">uistate.h:38</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_ad6483fd2391737fc25b2d8bc3beb5174"><div class="ttname"><a href="structadvanced__inv__save__state.html#ad6483fd2391737fc25b2d8bc3beb5174">advanced_inv_save_state::active_left</a></div><div class="ttdeci">bool active_left</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00042">uistate.h:42</a></div></div>
<div class="ttc" id="astructadvanced__inv__save__state_html_afb375e0d4ca44d95ee4bfd0a6442258a"><div class="ttname"><a href="structadvanced__inv__save__state.html#afb375e0d4ca44d95ee4bfd0a6442258a">advanced_inv_save_state::saved_area_right</a></div><div class="ttdeci">int saved_area_right</div><div class="ttdef"><b>Definition:</b> <a href="uistate_8h_source.html#l00046">uistate.h:46</a></div></div>
<div class="ttc" id="astructadvanced__inv__sorter_html"><div class="ttname"><a href="structadvanced__inv__sorter.html">advanced_inv_sorter</a></div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00415">advanced_inv.cpp:415</a></div></div>
<div class="ttc" id="astructadvanced__inv__sorter_html_a57263c75f0e9ef37c21d698813d34fbc"><div class="ttname"><a href="structadvanced__inv__sorter.html#a57263c75f0e9ef37c21d698813d34fbc">advanced_inv_sorter::operator()</a></div><div class="ttdeci">bool operator()(const advanced_inv_listitem &amp;d1, const advanced_inv_listitem &amp;d2)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00420">advanced_inv.cpp:420</a></div></div>
<div class="ttc" id="astructadvanced__inv__sorter_html_ad3524c2487d2cc478f5a6f7654ef56df"><div class="ttname"><a href="structadvanced__inv__sorter.html#ad3524c2487d2cc478f5a6f7654ef56df">advanced_inv_sorter::sortby</a></div><div class="ttdeci">advanced_inv_sortby sortby</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00416">advanced_inv.cpp:416</a></div></div>
<div class="ttc" id="astructadvanced__inv__sorter_html_ad8aefe127cf36e8ada91ed3641de1d2a"><div class="ttname"><a href="structadvanced__inv__sorter.html#ad8aefe127cf36e8ada91ed3641de1d2a">advanced_inv_sorter::advanced_inv_sorter</a></div><div class="ttdeci">advanced_inv_sorter(advanced_inv_sortby sort)</div><div class="ttdef"><b>Definition:</b> <a href="advanced__inv_8cpp_source.html#l00417">advanced_inv.cpp:417</a></div></div>
<div class="ttc" id="astructitem__info__data_html"><div class="ttname"><a href="structitem__info__data.html">item_info_data</a></div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00526">output.h:526</a></div></div>
<div class="ttc" id="astructitem__info__data_html_ae21c7618dbb6387bdc604ad7cf552dc9"><div class="ttname"><a href="structitem__info__data.html#ae21c7618dbb6387bdc604ad7cf552dc9">item_info_data::handle_scrolling</a></div><div class="ttdeci">bool handle_scrolling</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00560">output.h:560</a></div></div>
<div class="ttc" id="astructpage_html"><div class="ttname"><a href="structpage.html">page</a></div><div class="ttdef"><b>Definition:</b> <a href="dialogue__win_8cpp_source.html#l00080">dialogue_win.cpp:80</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00038">point.h:38</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
<div class="ttc" id="atranslations_8h_html"><div class="ttname"><a href="translations_8h.html">translations.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa323a1324b9ad3f0c7dc65690aed09c6"><div class="ttname"><a href="translations_8h.html#aa323a1324b9ad3f0c7dc65690aed09c6">localized_compare</a></div><div class="ttdeci">constexpr localized_comparator localized_compare</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00342">translations.h:342</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="atype__id_8h_html"><div class="ttname"><a href="type__id_8h.html">type_id.h</a></div></div>
<div class="ttc" id="aui_8h_html"><div class="ttname"><a href="ui_8h.html">ui.h</a></div></div>
<div class="ttc" id="aui__manager_8h_html"><div class="ttname"><a href="ui__manager_8h.html">ui_manager.h</a></div></div>
<div class="ttc" id="auistate_8h_html"><div class="ttname"><a href="uistate_8h.html">uistate.h</a></div></div>
<div class="ttc" id="aunits_8h_html"><div class="ttname"><a href="units_8h.html">units.h</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a3556beacf095f6eb2944d7c9dbf235d3"><div class="ttname"><a href="units__utility_8cpp.html#a3556beacf095f6eb2944d7c9dbf235d3">weight_units</a></div><div class="ttdeci">const char * weight_units()</div><div class="ttdoc">Create a units label for a weight value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00032">units_utility.cpp:32</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a5c2697027e2386941cdc4f6adbe8faac"><div class="ttname"><a href="units__utility_8cpp.html#a5c2697027e2386941cdc4f6adbe8faac">volume_units_abbr</a></div><div class="ttdeci">const char * volume_units_abbr()</div><div class="ttdoc">Create an abbreviated units label for a volume value.</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00037">units_utility.cpp:37</a></div></div>
<div class="ttc" id="aunits__utility_8cpp_html_a6701113802c6412b3c5d3fa59149ca6c"><div class="ttname"><a href="units__utility_8cpp.html#a6701113802c6412b3c5d3fa59149ca6c">convert_weight</a></div><div class="ttdeci">double convert_weight(const units::mass &amp;weight)</div><div class="ttdoc">Convert weight in grams to units defined by user (kg or lbs)</div><div class="ttdef"><b>Definition:</b> <a href="units__utility_8cpp_source.html#l00085">units_utility.cpp:85</a></div></div>
<div class="ttc" id="aunits__utility_8h_html"><div class="ttname"><a href="units__utility_8h.html">units_utility.h</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avehicle__selector_8h_html"><div class="ttname"><a href="vehicle__selector_8h.html">vehicle_selector.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="advanced__inv_8cpp.html">advanced_inv.cpp</a></li>
    <li class="footer">Generated on Sun Jan 22 2023 21:15:07 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
