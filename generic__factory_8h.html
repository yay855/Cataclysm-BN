<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/generic_factory.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('generic__factory_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">generic_factory.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Helper for loading from JSON.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;algorithm&gt;</code><br />
<code>#include &lt;bitset&gt;</code><br />
<code>#include &lt;set&gt;</code><br />
<code>#include &lt;unordered_map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &quot;<a class="el" href="assign_8h_source.html">assign.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="catacharset_8h_source.html">catacharset.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cata__void_8h_source.html">cata_void.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="enum__bitset_8h_source.html">enum_bitset.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="generic__readers_8h_source.html">generic_readers.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="init_8h_source.html">init.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="int__id_8h_source.html">int_id.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="json_8h_source.html">json.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="mod__tracker_8h_source.html">mod_tracker.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="output_8h_source.html">output.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="string__id_8h_source.html">string_id.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="translations_8h_source.html">translations.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="units_8h_source.html">units.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="wcwidth_8h_source.html">wcwidth.h</a>&quot;</code><br />
</div>
<p><a href="generic__factory_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeneric__factory.html">generic_factory&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeneric__factory_1_1Version.html">generic_factory&lt; T &gt;::Version</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around <a class="el" href="classgeneric__factory.html#afc807b15c1016c7425d02caeaaa5cade">generic_factory::version</a>.  <a href="classgeneric__factory_1_1Version.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsupports__proportional.html">supports_proportional&lt; T, typename &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsupports__proportional_3_01T_00_01cata_1_1void__t_3_01decltype_07std_1_1declval_3_01T_01_65a900226014ad1185c6b766ea4e24245.html">supports_proportional&lt; T, cata::void_t&lt; decltype(std::declval&lt; T &amp; &gt;() *=std::declval&lt; float &gt;())&gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsupports__proportional_3_01bool_01_4.html">supports_proportional&lt; bool &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4f86324883d8b6c4a037e5897b3edce5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a4f86324883d8b6c4a037e5897b3edce5">CATA_SRC_GENERIC_FACTORY_H</a></td></tr>
<tr class="separator:a4f86324883d8b6c4a037e5897b3edce5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a079efdb0a054d93f3d027084fa963268"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a079efdb0a054d93f3d027084fa963268">one_char_symbol_reader</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;member_name, int &amp;sym, bool)</td></tr>
<tr class="memdesc:a079efdb0a054d93f3d027084fa963268"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a string and stores the first byte of it in <code>sym</code>.  <a href="generic__factory_8h.html#a079efdb0a054d93f3d027084fa963268">More...</a><br /></td></tr>
<tr class="separator:a079efdb0a054d93f3d027084fa963268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f1cd034d9829b6ba4dc68f3203bf25"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a87f1cd034d9829b6ba4dc68f3203bf25">unicode_codepoint_from_symbol_reader</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;member_name, uint32_t &amp;member, bool)</td></tr>
<tr class="memdesc:a87f1cd034d9829b6ba4dc68f3203bf25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a UTF-8 string (or int as legacy fallback) and stores Unicode codepoint of it in <code>symbol</code>.  <a href="generic__factory_8h.html#a87f1cd034d9829b6ba4dc68f3203bf25">More...</a><br /></td></tr>
<tr class="separator:a87f1cd034d9829b6ba4dc68f3203bf25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Implementation of &lt;tt&gt;mandatory&lt;/tt&gt; and &lt;tt&gt;optional&lt;/tt&gt;.</div></td></tr>
<tr class="memitem:a0a177c754c5ba89ac6c543656b0652cc"><td class="memTemplParams" colspan="2">template&lt;typename MemberType &gt; </td></tr>
<tr class="memitem:a0a177c754c5ba89ac6c543656b0652cc"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</td></tr>
<tr class="separator:a0a177c754c5ba89ac6c543656b0652cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1d949307e080da9b39fa7f1f19c24ff"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , typename ReaderType &gt; </td></tr>
<tr class="memitem:ac1d949307e080da9b39fa7f1f19c24ff"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#ac1d949307e080da9b39fa7f1f19c24ff">mandatory</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member, const ReaderType &amp;reader)</td></tr>
<tr class="separator:ac1d949307e080da9b39fa7f1f19c24ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc5c64f942c41307cd544bfafdff9db7"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , <a class="el" href="fmtlib__core_8h.html#a012819c9e8b5e04872a271f50f8b8196">std::enable_if_t</a>&lt; !<a class="el" href="structsupports__proportional.html">supports_proportional</a>&lt; MemberType &gt;::value &gt; *  = nullptr&gt; </td></tr>
<tr class="memitem:adc5c64f942c41307cd544bfafdff9db7"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#adc5c64f942c41307cd544bfafdff9db7">handle_proportional</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;name, MemberType &amp;)</td></tr>
<tr class="separator:adc5c64f942c41307cd544bfafdff9db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42fc59bc186ebde04ac04483b26e4e04"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , <a class="el" href="fmtlib__core_8h.html#a012819c9e8b5e04872a271f50f8b8196">std::enable_if_t</a>&lt; !<a class="el" href="structsupports__relative.html">supports_relative</a>&lt; MemberType &gt;::value &gt; *  = nullptr&gt; </td></tr>
<tr class="memitem:a42fc59bc186ebde04ac04483b26e4e04"><td class="memTemplItemLeft" align="right" valign="top">bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a42fc59bc186ebde04ac04483b26e4e04">handle_relative</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const std::string &amp;name, MemberType &amp;)</td></tr>
<tr class="separator:a42fc59bc186ebde04ac04483b26e4e04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bc35b9738f0a0a68ccc6b4cfc7918f1"><td class="memTemplParams" colspan="2">template&lt;typename MemberType &gt; </td></tr>
<tr class="memitem:a6bc35b9738f0a0a68ccc6b4cfc7918f1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</td></tr>
<tr class="separator:a6bc35b9738f0a0a68ccc6b4cfc7918f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7134b3183fd3a45eab29b234e11a1b37"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , typename DefaultType  = MemberType, typename  = typename std::enable_if&lt;std::is_constructible&lt;MemberType, const DefaultType &amp;&gt;::value&gt;::type&gt; </td></tr>
<tr class="memitem:a7134b3183fd3a45eab29b234e11a1b37"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a7134b3183fd3a45eab29b234e11a1b37">optional</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member, const DefaultType &amp;default_value)</td></tr>
<tr class="separator:a7134b3183fd3a45eab29b234e11a1b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5240fe2431f56b7be8913de991fc80"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , typename ReaderType , typename DefaultType  = MemberType, typename  = typename std::enable_if &lt;               !std::is_constructible&lt;MemberType, const ReaderType &amp;&gt;::value &gt;::type&gt; </td></tr>
<tr class="memitem:a9e5240fe2431f56b7be8913de991fc80"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a9e5240fe2431f56b7be8913de991fc80">optional</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member, const ReaderType &amp;reader)</td></tr>
<tr class="separator:a9e5240fe2431f56b7be8913de991fc80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1159dbaba81931271dbfe5b9c7f041b3"><td class="memTemplParams" colspan="2">template&lt;typename MemberType , typename ReaderType , typename DefaultType  = MemberType&gt; </td></tr>
<tr class="memitem:a1159dbaba81931271dbfe5b9c7f041b3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="generic__factory_8h.html#a1159dbaba81931271dbfe5b9c7f041b3">optional</a> (const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member, const ReaderType &amp;reader, const DefaultType &amp;default_value)</td></tr>
<tr class="separator:a1159dbaba81931271dbfe5b9c7f041b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Helper for loading from JSON. </p>
<p >Loading (inside a <code>T::load(JsonObject &amp;jo)</code> function) can be done with two functions (defined here):</p><ul>
<li><code>mandatory</code> loads required data and throws an error if the JSON data does not contain the required data.</li>
<li><code>optional</code> is for optional data, it has the same parameters and an additional default value that will be used if the JSON data does not contain the requested data. It may throw an error if the existing data is not valid (e.g. string instead of requested int).</li>
</ul>
<p >The functions are designed to work with the <code><a class="el" href="classgeneric__factory.html">generic_factory</a></code> and therefor support the <code>was_loaded</code> parameter (set be <code><a class="el" href="classgeneric__factory.html#a188c69a1ec8af93cb8ffa4b656165cec" title="Load an object of type T with the data from the given JSON object.">generic_factory::load</a></code>). If that parameter is <code>true</code>, it is assumed the object has already been loaded and missing JSON data is simply ignored (the default value is not applied and no error is thrown upon missing mandatory data).</p>
<p >The parameters are this:</p><ul>
<li><code><a class="el" href="classJsonObject.html">JsonObject</a> jo</code> the object to load from.</li>
<li><code>bool was_loaded</code> whether the object had already been loaded completely.</li>
<li><code>std::string member_name</code> the name of the JSON member to load from.</li>
<li><code>T &amp;member</code> a reference to the C++ object to store the loaded data.</li>
<li>(for <code>optional</code>) a default value of any type that can be assigned to <code>member</code>.</li>
</ul>
<p >Both functions use the native <code>read</code> functions of <code><a class="el" href="classJsonIn.html">JsonIn</a></code> (see there) to load the value.</p>
<p >Example: </p><div class="fragment"><div class="line"><span class="keyword">class </span>Dummy {</div>
<div class="line">    <span class="keywordtype">bool</span> was_loaded = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>;</div>
<div class="line">    std::string <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a>(<a class="code hl_class" href="classJsonObject.html">JsonObject</a> &amp;jo) {</div>
<div class="line">        <a class="code hl_function" href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a>(jo, was_loaded, <span class="stringliteral">&quot;a&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a>);</div>
<div class="line">        <a class="code hl_function" href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a>(jo, was_loaded, <span class="stringliteral">&quot;b&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>, <span class="stringliteral">&quot;default value of b&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00831">json.h:832</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a0a177c754c5ba89ac6c543656b0652cc"><div class="ttname"><a href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a></div><div class="ttdeci">void mandatory(const JsonObject &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00611">generic_factory.h:611</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_a6bc35b9738f0a0a68ccc6b4cfc7918f1"><div class="ttname"><a href="generic__factory_8h.html#a6bc35b9738f0a0a68ccc6b4cfc7918f1">optional</a></div><div class="ttdeci">void optional(const JsonObject &amp;jo, const bool was_loaded, const std::string &amp;name, MemberType &amp;member)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00791">generic_factory.h:791</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01030">magic.cpp:1030</a></div></div>
<div class="ttc" id="amagic_8cpp_html_aa93a189fb7bbbf87be54bcc7bd11bb6f"><div class="ttname"><a href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a></div><div class="ttdeci">constexpr double b</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01031">magic.cpp:1031</a></div></div>
<div class="ttc" id="anamespaceammo__effects_html_a266026a76ad1cf3377d0b7c6efc36dd7"><div class="ttname"><a href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">ammo_effects::load</a></div><div class="ttdeci">void load(const JsonObject &amp;jo, const std::string &amp;src)</div><div class="ttdef"><b>Definition:</b> <a href="ammo__effect_8cpp_source.html#l00147">ammo_effect.cpp:147</a></div></div>
</div><!-- fragment --><p >This only works if there is function with the matching type defined in <code><a class="el" href="classJsonIn.html">JsonIn</a></code>. For other types, or if the loaded value needs to be converted (e.g. to <code><a class="el" href="classnc__color.html">nc_color</a></code>), one can use the reader classes/functions. <code>mandatory</code> and <code>optional</code> have an overload that requires the same parameters and an additional reference to such a reader object.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>Dummy2 {</div>
<div class="line">    <span class="keywordtype">bool</span> was_loaded = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">int</span> <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>;</div>
<div class="line">    <a class="code hl_class" href="classnc__color.html">nc_color</a> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a>;</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code hl_function" href="namespaceammo__effects.html#a266026a76ad1cf3377d0b7c6efc36dd7">load</a>(<a class="code hl_class" href="classJsonObject.html">JsonObject</a> &amp;jo) {</div>
<div class="line">        <a class="code hl_function" href="generic__factory_8h.html#a0a177c754c5ba89ac6c543656b0652cc">mandatory</a>(jo, was_loaded, <span class="stringliteral">&quot;b&quot;</span>, <a class="code hl_variable" href="magic_8cpp.html#aa93a189fb7bbbf87be54bcc7bd11bb6f">b</a>); <span class="comment">// uses JsonIn::read(int&amp;)</span></div>
<div class="line">    }</div>
<div class="line">};</div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00348">color.h:349</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01032">magic.cpp:1032</a></div></div>
</div><!-- fragment --><p >Both versions of <code>optional</code> have yet another overload that does not require an explicit default value, a default initialized object of the member type will be used instead.</p>
<hr  />
<p >Readers must provide the following function: `bool operator()( const JsonObject &amp;jo, const std::string &amp;member_name, T &amp;member, bool was_loaded ) const</p>
<p >(This can be implemented as free function or as operator in a class.)</p>
<p >The parameters are the same as the for the <code>mandatory</code> function (see above). The <code>function shall return</code>true<code>if the loading was done, or</code>false` if the JSON data did not contain the requested member. If loading fails because of invalid data (but not missing data), it should throw. </p>

<p class="definition">Definition in file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4f86324883d8b6c4a037e5897b3edce5" name="a4f86324883d8b6c4a037e5897b3edce5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f86324883d8b6c4a037e5897b3edce5">&#9670;&nbsp;</a></span>CATA_SRC_GENERIC_FACTORY_H</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CATA_SRC_GENERIC_FACTORY_H</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00003">3</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc5c64f942c41307cd544bfafdff9db7" name="adc5c64f942c41307cd544bfafdff9db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc5c64f942c41307cd544bfafdff9db7">&#9670;&nbsp;</a></span>handle_proportional()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , <a class="el" href="fmtlib__core_8h.html#a012819c9e8b5e04872a271f50f8b8196">std::enable_if_t</a>&lt; !<a class="el" href="structsupports__proportional.html">supports_proportional</a>&lt; MemberType &gt;::value &gt; *  = nullptr&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool handle_proportional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00703">703</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>{</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>    <span class="keywordflow">if</span>( jo.<a class="code hl_function" href="classJsonObject.html#a49ff0ef5ec58e2cf47dcaa551eb2b472">has_object</a>( <span class="stringliteral">&quot;proportional&quot;</span> ) ) {</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        <a class="code hl_class" href="classJsonObject.html">JsonObject</a> proportional = jo.<a class="code hl_function" href="classJsonObject.html#a0cd609c1bb7527609e6025d54f427a5c">get_object</a>( <span class="stringliteral">&quot;proportional&quot;</span> );</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>        proportional.<a class="code hl_function" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        <span class="keywordflow">if</span>( proportional.<a class="code hl_function" href="classJsonObject.html#a887d230c6a42ef2a6cf72c0e040cd4e3">has_member</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>            <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Member %s of type %s does not support proportional&quot;</span>, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">typeid</span>( MemberType ).<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>() );</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    }</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>}</div>
<div class="ttc" id="aclassJsonObject_html_a0cd609c1bb7527609e6025d54f427a5c"><div class="ttname"><a href="classJsonObject.html#a0cd609c1bb7527609e6025d54f427a5c">JsonObject::get_object</a></div><div class="ttdeci">JsonObject get_object(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00361">json.cpp:361</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a49ff0ef5ec58e2cf47dcaa551eb2b472"><div class="ttname"><a href="classJsonObject.html#a49ff0ef5ec58e2cf47dcaa551eb2b472">JsonObject::has_object</a></div><div class="ttdeci">bool has_object(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00425">json.cpp:425</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a887d230c6a42ef2a6cf72c0e040cd4e3"><div class="ttname"><a href="classJsonObject.html#a887d230c6a42ef2a6cf72c0e040cd4e3">JsonObject::has_member</a></div><div class="ttdeci">bool has_member(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00181">json.cpp:181</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00150">json.cpp:150</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04127">overmap.cpp:4127</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l00150">JsonObject::allow_omitted_members()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="json_8cpp_source.html#l00361">JsonObject::get_object()</a>, <a class="el" href="json_8cpp_source.html#l00181">JsonObject::has_member()</a>, <a class="el" href="json_8cpp_source.html#l00425">JsonObject::has_object()</a>, and <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="generic__readers_8h_source.html#l00293">generic_typed_reader&lt; Derived &gt;::operator()()</a>, and <a class="el" href="generic__factory_8h_source.html#l00791">optional()</a>.</p>

</div>
</div>
<a id="a42fc59bc186ebde04ac04483b26e4e04" name="a42fc59bc186ebde04ac04483b26e4e04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42fc59bc186ebde04ac04483b26e4e04">&#9670;&nbsp;</a></span>handle_relative()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , <a class="el" href="fmtlib__core_8h.html#a012819c9e8b5e04872a271f50f8b8196">std::enable_if_t</a>&lt; !<a class="el" href="structsupports__relative.html">supports_relative</a>&lt; MemberType &gt;::value &gt; *  = nullptr&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool handle_relative </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00751">751</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>{</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <span class="keywordflow">if</span>( jo.<a class="code hl_function" href="classJsonObject.html#a49ff0ef5ec58e2cf47dcaa551eb2b472">has_object</a>( <span class="stringliteral">&quot;relative&quot;</span> ) ) {</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        <a class="code hl_class" href="classJsonObject.html">JsonObject</a> <a class="code hl_enumvalue" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a> = jo.<a class="code hl_function" href="classJsonObject.html#a0cd609c1bb7527609e6025d54f427a5c">get_object</a>( <span class="stringliteral">&quot;relative&quot;</span> );</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <a class="code hl_enumvalue" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.allow_omitted_members();</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <span class="keywordflow">if</span>( !<a class="code hl_enumvalue" href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">relative</a>.has_member( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        }</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Member %s of type %s does not support relative&quot;</span>, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <span class="keyword">typeid</span>( MemberType ).<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>() );</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>    }</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>}</div>
<div class="ttc" id="anamespacecoords_html_ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487"><div class="ttname"><a href="namespacecoords.html#ad99808a305ad40299e592d1266bed4a7a99c483e1d11b1a279a2a1a3960528487">coords::origin::relative</a></div><div class="ttdeci">@ relative</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="json_8cpp_source.html#l00361">JsonObject::get_object()</a>, <a class="el" href="json_8cpp_source.html#l00425">JsonObject::has_object()</a>, and <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="generic__factory_8h_source.html#l00791">optional()</a>.</p>

</div>
</div>
<a id="a0a177c754c5ba89ac6c543656b0652cc" name="a0a177c754c5ba89ac6c543656b0652cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a177c754c5ba89ac6c543656b0652cc">&#9670;&nbsp;</a></span>mandatory() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mandatory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00611">611</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>{</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) ) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <span class="keywordflow">if</span>( jo.<a class="code hl_function" href="classJsonObject.html#a887d230c6a42ef2a6cf72c0e040cd4e3">has_member</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>                jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( <span class="stringliteral">&quot;failed to read mandatory member \&quot;&quot;</span> + <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;\&quot;&quot;</span> );</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>                jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( <span class="stringliteral">&quot;missing mandatory member \&quot;&quot;</span> + <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;\&quot;&quot;</span> );</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>            }</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>        }</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    }</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>}</div>
<div class="ttc" id="aclassJsonObject_html_ae66d47f9cb4993dfaf79819ec2aff2f8"><div class="ttname"><a href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">JsonObject::read</a></div><div class="ttdeci">bool read(const std::string &amp;name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00944">json.h:944</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae7bcdb4ec8ab2c64e607b411cb98d00c"><div class="ttname"><a href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">JsonObject::throw_error</a></div><div class="ttdeci">void throw_error(std::string err) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00233">json.cpp:233</a></div></div>
<div class="ttc" id="anamespacemapgen__defer_html_a640e58e4d234e3f1e2ddbfff8fd665ce"><div class="ttname"><a href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">mapgen_defer::member</a></div><div class="ttdeci">std::string member</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l00410">mapgen.cpp:410</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l00181">JsonObject::has_member()</a>, <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>, <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>, and <a class="el" href="json_8cpp_source.html#l00233">JsonObject::throw_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="martialarts_8cpp_source.html#l00077">add_if_exists()</a>, <a class="el" href="text__snippets_8cpp_source.html#l00050">snippet_library::add_snippet_from_json()</a>, <a class="el" href="overmap_8cpp_source.html#l00470">overmap_spawns::deserialize()</a>, <a class="el" href="overmap_8cpp_source.html#l00476">overmap_static_spawns::deserialize()</a>, <a class="el" href="overmap_8cpp_source.html#l00429">overmap_special_terrain::deserialize()</a>, <a class="el" href="overmap_8cpp_source.html#l00436">overmap_special_connection::deserialize()</a>, <a class="el" href="achievement_8cpp_source.html#l00326">achievement::load()</a>, <a class="el" href="event__statistics_8cpp_source.html#l00979">event_statistic::load()</a>, <a class="el" href="event__statistics_8cpp_source.html#l01049">score::load()</a>, <a class="el" href="item__factory_8cpp_source.html#l01672">islot_ammo::load()</a>, <a class="el" href="magic_8cpp_source.html#l02021">fake_spell::load()</a>, <a class="el" href="overmap__connection_8cpp_source.html#l00050">overmap_connection::subtype::load()</a>, <a class="el" href="clzones_8cpp_source.html#l00179">zone_type::load()</a>, <a class="el" href="item__category_8cpp_source.html#l00045">item_category::load()</a>, <a class="el" href="magic_8cpp_source.html#l00209">spell_type::load()</a>, <a class="el" href="magic__ter__fur__transform_8cpp_source.html#l00085">ter_furn_transform::load()</a>, <a class="el" href="anatomy_8cpp_source.html#l00047">anatomy::load()</a>, <a class="el" href="bodypart_8cpp_source.html#l00220">body_part_type::load()</a>, <a class="el" href="clothing__mod_8cpp_source.html#l00067">clothing_mod::load()</a>, <a class="el" href="construction_8cpp_source.html#l01604">construction::load()</a>, <a class="el" href="construction__category_8cpp_source.html#l00021">construction_category::load()</a>, <a class="el" href="construction__group_8cpp_source.html#l00016">construction_group::load()</a>, <a class="el" href="construction__sequence_8cpp_source.html#l00022">construction_sequence::load()</a>, <a class="el" href="field__type_8cpp_source.html#l00140">field_type::load()</a>, <a class="el" href="gates_8cpp_source.html#l00084">anonymous_namespace{gates.cpp}::gate_data::load()</a>, <a class="el" href="map__extras_8cpp_source.html#l03124">map_extra::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01286">map_data_common_t::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00146">ma_technique::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00207">ma_buff::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00261">martialart::load()</a>, <a class="el" href="missiondef_8cpp_source.html#l00237">mission_type::load()</a>, <a class="el" href="morale__types_8cpp_source.html#l00125">morale_type_data::load()</a>, <a class="el" href="monstergenerator_8cpp_source.html#l00683">mtype::load()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00307">mutation_branch::load()</a>, <a class="el" href="npc__class_8cpp_source.html#l00234">npc_class::load()</a>, <a class="el" href="overmap__connection_8cpp_source.html#l00101">overmap_connection::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00993">overmap_special::load()</a>, <a class="el" href="profession_8cpp_source.html#l00144">profession::load()</a>, <a class="el" href="requirements_8cpp_source.html#l00087">quality::load()</a>, <a class="el" href="rotatable__symbols_8cpp_source.html#l00037">rotatable_symbols::load()</a>, <a class="el" href="scenario_8cpp_source.html#l00052">scenario::load()</a>, <a class="el" href="skill__boost_8cpp_source.html#l00035">skill_boost::load()</a>, <a class="el" href="start__location_8cpp_source.html#l00083">start_location::load()</a>, <a class="el" href="trap_8cpp_source.html#l00105">trap::load()</a>, <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01334">ter_t::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01525">furn_t::load()</a>, <a class="el" href="material_8cpp_source.html#l00058">material_type::load()</a>, <a class="el" href="bionics_8cpp_source.html#l00282">bionic_data::load()</a>, <a class="el" href="item__category_8cpp_source.html#l00033">zone_priority_data::load()</a>, <a class="el" href="fault_8cpp_source.html#l00034">fault::load_fault()</a>, and <a class="el" href="mattack__actors_8cpp_source.html#l00168">mon_spellcasting_actor::load_internal()</a>.</p>

</div>
</div>
<a id="ac1d949307e080da9b39fa7f1f19c24ff" name="ac1d949307e080da9b39fa7f1f19c24ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1d949307e080da9b39fa7f1f19c24ff">&#9670;&nbsp;</a></span>mandatory() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , typename ReaderType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mandatory </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ReaderType &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00625">625</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>{</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">if</span>( !reader( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a>, was_loaded ) ) {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>            <span class="keywordflow">if</span>( jo.<a class="code hl_function" href="classJsonObject.html#a887d230c6a42ef2a6cf72c0e040cd4e3">has_member</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) ) {</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( <span class="stringliteral">&quot;failed to read mandatory member \&quot;&quot;</span> + <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;\&quot;&quot;</span> );</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>                jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( <span class="stringliteral">&quot;missing mandatory member \&quot;&quot;</span> + <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> + <span class="stringliteral">&quot;\&quot;&quot;</span> );</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            }</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        }</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    }</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8cpp_source.html#l00181">JsonObject::has_member()</a>, <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>, and <a class="el" href="json_8cpp_source.html#l00233">JsonObject::throw_error()</a>.</p>

</div>
</div>
<a id="a079efdb0a054d93f3d027084fa963268" name="a079efdb0a054d93f3d027084fa963268"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a079efdb0a054d93f3d027084fa963268">&#9670;&nbsp;</a></span>one_char_symbol_reader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool one_char_symbol_reader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>member_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>sym</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a string and stores the first byte of it in <code>sym</code>. </p>
<p >Throws if the input contains more or less than one byte. </p>

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00851">851</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>{</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    std::string sym_as_string;</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( member_name, sym_as_string ) ) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>    }</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    <span class="keywordflow">if</span>( sym_as_string.size() != 1 ) {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( member_name + <span class="stringliteral">&quot; must be exactly one ASCII character&quot;</span>, member_name );</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    }</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    sym = sym_as_string.front();</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>, and <a class="el" href="json_8cpp_source.html#l00233">JsonObject::throw_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="trap_8cpp_source.html#l00105">trap::load()</a>.</p>

</div>
</div>
<a id="a6bc35b9738f0a0a68ccc6b4cfc7918f1" name="a6bc35b9738f0a0a68ccc6b4cfc7918f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bc35b9738f0a0a68ccc6b4cfc7918f1">&#9670;&nbsp;</a></span>optional() <span class="overload">[1/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void optional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00791">791</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>{</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) &amp;&amp; !<a class="code hl_function" href="generic__factory_8h.html#adc5c64f942c41307cd544bfafdff9db7">handle_proportional</a>( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) &amp;&amp;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        !<a class="code hl_function" href="generic__factory_8h.html#a42fc59bc186ebde04ac04483b26e4e04">handle_relative</a>( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) ) {</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>            <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> = MemberType();</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>}</div>
<div class="ttc" id="ageneric__factory_8h_html_a42fc59bc186ebde04ac04483b26e4e04"><div class="ttname"><a href="generic__factory_8h.html#a42fc59bc186ebde04ac04483b26e4e04">handle_relative</a></div><div class="ttdeci">bool handle_relative(const JsonObject &amp;jo, const std::string &amp;name, MemberType &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00751">generic_factory.h:751</a></div></div>
<div class="ttc" id="ageneric__factory_8h_html_adc5c64f942c41307cd544bfafdff9db7"><div class="ttname"><a href="generic__factory_8h.html#adc5c64f942c41307cd544bfafdff9db7">handle_proportional</a></div><div class="ttdeci">bool handle_proportional(const JsonObject &amp;jo, const std::string &amp;name, MemberType &amp;)</div><div class="ttdef"><b>Definition:</b> <a href="generic__factory_8h_source.html#l00703">generic_factory.h:703</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="generic__factory_8h_source.html#l00703">handle_proportional()</a>, <a class="el" href="generic__factory_8h_source.html#l00751">handle_relative()</a>, <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>, and <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmap_8cpp_source.html#l00429">overmap_special_terrain::deserialize()</a>, <a class="el" href="overmap_8cpp_source.html#l00436">overmap_special_connection::deserialize()</a>, <a class="el" href="achievement_8cpp_source.html#l00326">achievement::load()</a>, <a class="el" href="event__statistics_8cpp_source.html#l00592">event_transformation::load()</a>, <a class="el" href="event__statistics_8cpp_source.html#l00979">event_statistic::load()</a>, <a class="el" href="event__statistics_8cpp_source.html#l01049">score::load()</a>, <a class="el" href="item__factory_8cpp_source.html#l01672">islot_ammo::load()</a>, <a class="el" href="magic_8cpp_source.html#l02021">fake_spell::load()</a>, <a class="el" href="overmap__connection_8cpp_source.html#l00050">overmap_connection::subtype::load()</a>, <a class="el" href="clzones_8cpp_source.html#l00179">zone_type::load()</a>, <a class="el" href="item__category_8cpp_source.html#l00045">item_category::load()</a>, <a class="el" href="magic_8cpp_source.html#l00209">spell_type::load()</a>, <a class="el" href="magic__ter__fur__transform_8cpp_source.html#l00085">ter_furn_transform::load()</a>, <a class="el" href="ammo__effect_8cpp_source.html#l00065">ammo_effect::load()</a>, <a class="el" href="behavior_8cpp_source.html#l00102">behavior::node_t::load()</a>, <a class="el" href="bodypart_8cpp_source.html#l00220">body_part_type::load()</a>, <a class="el" href="clothing__mod_8cpp_source.html#l00067">clothing_mod::load()</a>, <a class="el" href="construction_8cpp_source.html#l01604">construction::load()</a>, <a class="el" href="construction__sequence_8cpp_source.html#l00022">construction_sequence::load()</a>, <a class="el" href="field__type_8cpp_source.html#l00140">field_type::load()</a>, <a class="el" href="flag_8cpp_source.html#l00077">json_flag::load()</a>, <a class="el" href="gates_8cpp_source.html#l00084">anonymous_namespace{gates.cpp}::gate_data::load()</a>, <a class="el" href="map__extras_8cpp_source.html#l03124">map_extra::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01286">map_data_common_t::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00131">ma_requirements::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00146">ma_technique::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00207">ma_buff::load()</a>, <a class="el" href="martialarts_8cpp_source.html#l00261">martialart::load()</a>, <a class="el" href="missiondef_8cpp_source.html#l00237">mission_type::load()</a>, <a class="el" href="monstergenerator_8cpp_source.html#l00944">species_type::load()</a>, <a class="el" href="morale__types_8cpp_source.html#l00125">morale_type_data::load()</a>, <a class="el" href="monstergenerator_8cpp_source.html#l00683">mtype::load()</a>, <a class="el" href="mutation__data_8cpp_source.html#l00307">mutation_branch::load()</a>, <a class="el" href="npc__class_8cpp_source.html#l00234">npc_class::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00375">overmap_land_use_code::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00644">oter_type_t::load()</a>, <a class="el" href="overmap__location_8cpp_source.html#l00047">overmap_location::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00993">overmap_special::load()</a>, <a class="el" href="profession_8cpp_source.html#l00144">profession::load()</a>, <a class="el" href="scenario_8cpp_source.html#l00052">scenario::load()</a>, <a class="el" href="start__location_8cpp_source.html#l00083">start_location::load()</a>, <a class="el" href="trap_8cpp_source.html#l00105">trap::load()</a>, <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01334">ter_t::load()</a>, <a class="el" href="mapdata_8cpp_source.html#l01525">furn_t::load()</a>, <a class="el" href="magic__enchantment_8cpp_source.html#l00229">enchantment::load()</a>, <a class="el" href="material_8cpp_source.html#l00058">material_type::load()</a>, <a class="el" href="item__category_8cpp_source.html#l00033">zone_priority_data::load()</a>, <a class="el" href="fault_8cpp_source.html#l00034">fault::load_fault()</a>, <a class="el" href="mattack__actors_8cpp_source.html#l00168">mon_spellcasting_actor::load_internal()</a>, and <a class="el" href="mattack__actors_8cpp_source.html#l00229">melee_actor::load_internal()</a>.</p>

</div>
</div>
<a id="a7134b3183fd3a45eab29b234e11a1b37" name="a7134b3183fd3a45eab29b234e11a1b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7134b3183fd3a45eab29b234e11a1b37">&#9670;&nbsp;</a></span>optional() <span class="overload">[2/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , typename DefaultType  = MemberType, typename  = typename std::enable_if&lt;std::is_constructible&lt;MemberType, const DefaultType &amp;&gt;::value&gt;::type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void optional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const DefaultType &amp;&#160;</td>
          <td class="paramname"><em>default_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00813">813</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>{</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) &amp;&amp; !<a class="code hl_function" href="generic__factory_8h.html#adc5c64f942c41307cd544bfafdff9db7">handle_proportional</a>( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) &amp;&amp;</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        !<a class="code hl_function" href="generic__factory_8h.html#a42fc59bc186ebde04ac04483b26e4e04">handle_relative</a>( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> ) ) {</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>            <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> = default_value;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        }</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="generic__factory_8h_source.html#l00703">handle_proportional()</a>, <a class="el" href="generic__factory_8h_source.html#l00751">handle_relative()</a>, <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>, and <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>.</p>

</div>
</div>
<a id="a9e5240fe2431f56b7be8913de991fc80" name="a9e5240fe2431f56b7be8913de991fc80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e5240fe2431f56b7be8913de991fc80">&#9670;&nbsp;</a></span>optional() <span class="overload">[3/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , typename ReaderType , typename DefaultType  = MemberType, typename  = typename std::enable_if &lt;               !std::is_constructible&lt;MemberType, const ReaderType &amp;&gt;::value &gt;::type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void optional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ReaderType &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00826">826</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>{</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordflow">if</span>( !reader( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a>, was_loaded ) ) {</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> = MemberType();</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        }</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>    }</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, and <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>.</p>

</div>
</div>
<a id="a1159dbaba81931271dbfe5b9c7f041b3" name="a1159dbaba81931271dbfe5b9c7f041b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1159dbaba81931271dbfe5b9c7f041b3">&#9670;&nbsp;</a></span>optional() <span class="overload">[4/4]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename MemberType , typename ReaderType , typename DefaultType  = MemberType&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void optional </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>was_loaded</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MemberType &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const ReaderType &amp;&#160;</td>
          <td class="paramname"><em>reader</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const DefaultType &amp;&#160;</td>
          <td class="paramname"><em>default_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00836">836</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>{</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    <span class="keywordflow">if</span>( !reader( jo, <a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a>, <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a>, was_loaded ) ) {</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="keywordflow">if</span>( !was_loaded ) {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>            <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> = default_value;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        }</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    }</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, and <a class="el" href="overmap_8cpp_source.html#l04127">om_direction::name()</a>.</p>

</div>
</div>
<a id="a87f1cd034d9829b6ba4dc68f3203bf25" name="a87f1cd034d9829b6ba4dc68f3203bf25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87f1cd034d9829b6ba4dc68f3203bf25">&#9670;&nbsp;</a></span>unicode_codepoint_from_symbol_reader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool unicode_codepoint_from_symbol_reader </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classJsonObject.html">JsonObject</a> &amp;&#160;</td>
          <td class="paramname"><em>jo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>member_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t &amp;&#160;</td>
          <td class="paramname"><em>member</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads a UTF-8 string (or int as legacy fallback) and stores Unicode codepoint of it in <code>symbol</code>. </p>
<p >Throws if the inputs width is more than one console cell wide. </p>

<p class="definition">Definition at line <a class="el" href="generic__factory_8h_source.html#l00869">869</a> of file <a class="el" href="generic__factory_8h_source.html">generic_factory.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>{</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>    <span class="keywordtype">int</span> sym_as_int;</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>    std::string sym_as_string;</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( member_name, sym_as_string, <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        <span class="comment">// Legacy fallback to integer `sym`.</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( member_name, sym_as_int ) ) {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>            sym_as_string = <a class="code hl_function" href="output_8h.html#a88f95c122a3664b44ea4df1f645d35ea">string_from_int</a>( sym_as_int );</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        }</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    }</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    uint32_t sym_as_codepoint = <a class="code hl_function" href="catacharset_8cpp.html#a2227e8c0afd74ed174cbb4daf8e46ab2">UTF8_getch</a>( sym_as_string );</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="wcwidth_8cpp.html#aead942898baf7a1b82cd23e582f62a16">mk_wcwidth</a>( sym_as_codepoint ) != 1 ) {</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        jo.<a class="code hl_function" href="classJsonObject.html#ae7bcdb4ec8ab2c64e607b411cb98d00c">throw_error</a>( member_name + <span class="stringliteral">&quot; must be exactly one console cell wide&quot;</span>, member_name );</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    }</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>    <a class="code hl_variable" href="namespacemapgen__defer.html#a640e58e4d234e3f1e2ddbfff8fd665ce">member</a> = sym_as_codepoint;</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>}</div>
<div class="ttc" id="acatacharset_8cpp_html_a2227e8c0afd74ed174cbb4daf8e46ab2"><div class="ttname"><a href="catacharset_8cpp.html#a2227e8c0afd74ed174cbb4daf8e46ab2">UTF8_getch</a></div><div class="ttdeci">uint32_t UTF8_getch(const char **src, int *srclen)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00018">catacharset.cpp:18</a></div></div>
<div class="ttc" id="aoutput_8h_html_a88f95c122a3664b44ea4df1f645d35ea"><div class="ttname"><a href="output_8h.html#a88f95c122a3664b44ea4df1f645d35ea">string_from_int</a></div><div class="ttdeci">std::string string_from_int(const catacurses::chtype ch)</div><div class="ttdef"><b>Definition:</b> <a href="output_8h_source.html#l00088">output.h:88</a></div></div>
<div class="ttc" id="awcwidth_8cpp_html_aead942898baf7a1b82cd23e582f62a16"><div class="ttname"><a href="wcwidth_8cpp.html#aead942898baf7a1b82cd23e582f62a16">mk_wcwidth</a></div><div class="ttdeci">int mk_wcwidth(uint32_t ucs)</div><div class="ttdef"><b>Definition:</b> <a href="wcwidth_8cpp_source.html#l00094">wcwidth.cpp:94</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="mapgen_8cpp_source.html#l00410">mapgen_defer::member</a>, <a class="el" href="wcwidth_8cpp_source.html#l00094">mk_wcwidth()</a>, <a class="el" href="json_8h_source.html#l00944">JsonObject::read()</a>, <a class="el" href="output_8h_source.html#l00088">string_from_int()</a>, <a class="el" href="json_8cpp_source.html#l00233">JsonObject::throw_error()</a>, and <a class="el" href="catacharset_8cpp_source.html#l00018">UTF8_getch()</a>.</p>

<p class="reference">Referenced by <a class="el" href="field__type_8cpp_source.html#l00140">field_type::load()</a>, <a class="el" href="map__extras_8cpp_source.html#l03124">map_extra::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00375">overmap_land_use_code::load()</a>, <a class="el" href="overmap_8cpp_source.html#l00644">oter_type_t::load()</a>, and <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="generic__factory_8h.html">generic_factory.h</a></li>
    <li class="footer">Generated on Sat Dec 17 2022 13:00:36 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
