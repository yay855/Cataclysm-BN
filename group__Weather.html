<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: &quot;Weather and its implications.&quot;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__Weather.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">"Weather and its implications."</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceweather"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceweather.html">weather</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structforecast__period.html">forecast_period</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa7b33196bf530c8b26654a0adf355165"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classweather__manager.html">weather_manager</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a> ()</td></tr>
<tr class="separator:gaa7b33196bf530c8b26654a0adf355165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga29f289ab496b2f58d297384490905e92"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a> ()</td></tr>
<tr class="separator:ga29f289ab496b2f58d297384490905e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53fe559b9e45368d58ff93949e1bf2ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga53fe559b9e45368d58ff93949e1bf2ee">glare</a> (const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;w)</td></tr>
<tr class="memdesc:ga53fe559b9e45368d58ff93949e1bf2ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Glare.  <a href="group__Weather.html#ga53fe559b9e45368d58ff93949e1bf2ee">More...</a><br /></td></tr>
<tr class="separator:ga53fe559b9e45368d58ff93949e1bf2ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadf065e79a6c231ceff618552f791c1b1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">incident_sunlight</a> (const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;wtype, const <a class="el" href="classtime__point.html">time_point</a> &amp;t)</td></tr>
<tr class="memdesc:gadf065e79a6c231ceff618552f791c1b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Amount of sunlight incident at the ground, taking weather and time of day into account.  <a href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">More...</a><br /></td></tr>
<tr class="separator:gadf065e79a6c231ceff618552f791c1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf3acded4b7e0bd9cf031a593ad158112"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaf3acded4b7e0bd9cf031a593ad158112">proc_weather_sum</a> (const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> wtype, <a class="el" href="structweather__sum.html">weather_sum</a> &amp;data, const <a class="el" href="classtime__point.html">time_point</a> &amp;t, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;tick_size)</td></tr>
<tr class="separator:gaf3acded4b7e0bd9cf031a593ad158112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga275631a4069758bffeb8d4fad0cb5919"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga275631a4069758bffeb8d4fad0cb5919">current_weather</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;location, const <a class="el" href="classtime__point.html">time_point</a> &amp;t)</td></tr>
<tr class="separator:ga275631a4069758bffeb8d4fad0cb5919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc90b85ac1849784280f581a1fb7ade8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structweather__sum.html">weather_sum</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;start, const <a class="el" href="classtime__point.html">time_point</a> &amp;end, const <a class="el" href="structtripoint.html">tripoint</a> &amp;location)</td></tr>
<tr class="separator:gacc90b85ac1849784280f581a1fb7ade8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72ff9ae411841335eef733532909a505"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga72ff9ae411841335eef733532909a505">retroactively_fill_from_funnel</a> (<a class="el" href="classitem.html">item</a> &amp;it, const <a class="el" href="structtrap.html">trap</a> &amp;tr, const <a class="el" href="classtime__point.html">time_point</a> &amp;start, const <a class="el" href="classtime__point.html">time_point</a> &amp;end, const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:ga72ff9ae411841335eef733532909a505"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine what a funnel has filled out of game, using funnelcontainer.bday as a starting point.  <a href="group__Weather.html#ga72ff9ae411841335eef733532909a505">More...</a><br /></td></tr>
<tr class="separator:ga72ff9ae411841335eef733532909a505"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e6b69c07a1700d9cbbb5e666762b72c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga5e6b69c07a1700d9cbbb5e666762b72c">funnel_charges_per_turn</a> (const double surface_area_mm2, const double rain_depth_mm_per_hour)</td></tr>
<tr class="separator:ga5e6b69c07a1700d9cbbb5e666762b72c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d4be90a054c4ace26407d9a61f11a59"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga0d4be90a054c4ace26407d9a61f11a59">fill_funnels</a> (int rain_depth_mm_per_hour, bool acid, const <a class="el" href="structtrap.html">trap</a> &amp;tr)</td></tr>
<tr class="memdesc:ga0d4be90a054c4ace26407d9a61f11a59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine for filling funnels from weather effects.  <a href="group__Weather.html#ga0d4be90a054c4ace26407d9a61f11a59">More...</a><br /></td></tr>
<tr class="separator:ga0d4be90a054c4ace26407d9a61f11a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaee2ea0506e3eef92eb305bf1289204aa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaee2ea0506e3eef92eb305bf1289204aa">fill_water_collectors</a> (int mmPerHour, bool acid)</td></tr>
<tr class="memdesc:gaee2ea0506e3eef92eb305bf1289204aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill funnels and makeshift funnels from weather effects.  <a href="group__Weather.html#gaee2ea0506e3eef92eb305bf1289204aa">More...</a><br /></td></tr>
<tr class="separator:gaee2ea0506e3eef92eb305bf1289204aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb84f11909a2789fefae8268e3cf92d0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gabb84f11909a2789fefae8268e3cf92d0">precip_mm_per_hour</a> (<a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0">precip_class</a> const p)</td></tr>
<tr class="separator:gabb84f11909a2789fefae8268e3cf92d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3fcb6802dadec5fef6581ffc25f19c9c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga3fcb6802dadec5fef6581ffc25f19c9c">handle_weather_effects</a> (const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;w)</td></tr>
<tr class="separator:ga3fcb6802dadec5fef6581ffc25f19c9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90010e7f5354e53651b541dcfe9c9e9a"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga90010e7f5354e53651b541dcfe9c9e9a">to_string</a> (const <a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a> &amp;d)</td></tr>
<tr class="separator:ga90010e7f5354e53651b541dcfe9c9e9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0eb7c656a09bbd24a6d761982e23c80e"><td class="memItemLeft" align="right" valign="top">static std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga0eb7c656a09bbd24a6d761982e23c80e">print_time_just_hour</a> (const <a class="el" href="classtime__point.html">time_point</a> &amp;p)</td></tr>
<tr class="separator:ga0eb7c656a09bbd24a6d761982e23c80e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab4893f4bb0b6f5044689488bf2ce20c3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gab4893f4bb0b6f5044689488bf2ce20c3">weather_forecast</a> (const <a class="el" href="coordinates_8h.html#ae09653d22add0b34ddfe45845d585c4b">point_abs_sm</a> &amp;abs_sm_pos)</td></tr>
<tr class="memdesc:gab4893f4bb0b6f5044689488bf2ce20c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate textual weather forecast for the specified radio tower.  <a href="group__Weather.html#gab4893f4bb0b6f5044689488bf2ce20c3">More...</a><br /></td></tr>
<tr class="separator:gab4893f4bb0b6f5044689488bf2ce20c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84aca1e63585a67a2ccf3ffd9f01b7b4"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a> (double fahrenheit, int decimals)</td></tr>
<tr class="memdesc:ga84aca1e63585a67a2ccf3ffd9f01b7b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print temperature (and convert to Celsius if Celsius display is enabled.)  <a href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">More...</a><br /></td></tr>
<tr class="separator:ga84aca1e63585a67a2ccf3ffd9f01b7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05edac4f7c2a15412fb12fc89c961d42"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga05edac4f7c2a15412fb12fc89c961d42">print_temperature</a> (<a class="el" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">units::temperature</a> temperature, int decimals)</td></tr>
<tr class="separator:ga05edac4f7c2a15412fb12fc89c961d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaebdc6d79e870b8cc932aa71a7da1c7f1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaebdc6d79e870b8cc932aa71a7da1c7f1">print_humidity</a> (double humidity, int decimals)</td></tr>
<tr class="memdesc:gaebdc6d79e870b8cc932aa71a7da1c7f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print relative humidity (no conversions.)  <a href="group__Weather.html#gaebdc6d79e870b8cc932aa71a7da1c7f1">More...</a><br /></td></tr>
<tr class="separator:gaebdc6d79e870b8cc932aa71a7da1c7f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa234adc23b8eaf838b0109bf51e38c0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaaa234adc23b8eaf838b0109bf51e38c0">print_pressure</a> (double pressure, int decimals)</td></tr>
<tr class="memdesc:gaaa234adc23b8eaf838b0109bf51e38c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print pressure (no conversions.)  <a href="group__Weather.html#gaaa234adc23b8eaf838b0109bf51e38c0">More...</a><br /></td></tr>
<tr class="separator:gaaa234adc23b8eaf838b0109bf51e38c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91c723a1c8fb88a019fd9155f7fd7c5d"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga91c723a1c8fb88a019fd9155f7fd7c5d">local_windchill_lowtemp</a> (double temperature_f, double, double wind_mph)</td></tr>
<tr class="separator:ga91c723a1c8fb88a019fd9155f7fd7c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67ab3b6b44de8758bb82f296ec36368a"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga67ab3b6b44de8758bb82f296ec36368a">local_windchill_hightemp</a> (double temperature_f, double humidity, double wind_mph)</td></tr>
<tr class="separator:ga67ab3b6b44de8758bb82f296ec36368a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf98633acdf9d77e758eab4af90a6a30c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaf98633acdf9d77e758eab4af90a6a30c">get_local_windchill</a> (double temperature_f, double humidity, double wind_mph)</td></tr>
<tr class="separator:gaf98633acdf9d77e758eab4af90a6a30c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55efca6f58209265ac7223b4c03290d0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classnc__color.html">nc_color</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga55efca6f58209265ac7223b4c03290d0">get_wind_color</a> (double windpower)</td></tr>
<tr class="separator:ga55efca6f58209265ac7223b4c03290d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46edb1dc77a5ccdb14caad851bc78a9b"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga46edb1dc77a5ccdb14caad851bc78a9b">get_shortdirstring</a> (int angle)</td></tr>
<tr class="separator:ga46edb1dc77a5ccdb14caad851bc78a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga91e01ef6a71f6495015d3a14131952f2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga91e01ef6a71f6495015d3a14131952f2">get_dirstring</a> (int angle)</td></tr>
<tr class="separator:ga91e01ef6a71f6495015d3a14131952f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac4eaea116f04d4ab4f4624759d4df423"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gac4eaea116f04d4ab4f4624759d4df423">get_wind_arrow</a> (int dirangle)</td></tr>
<tr class="separator:gac4eaea116f04d4ab4f4624759d4df423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b6c37e7f8086254c46acb9572ea97d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga3b6c37e7f8086254c46acb9572ea97d1">get_local_humidity</a> (double humidity, const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;weather, bool sheltered)</td></tr>
<tr class="separator:ga3b6c37e7f8086254c46acb9572ea97d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23304505d04b612b77e4df5e9b64a1dd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a> (double windpower, const <a class="el" href="type__id_8h.html#a08d4e395b54ad28c93af412ee36e00a1">oter_id</a> &amp;omter, const <a class="el" href="structtripoint.html">tripoint</a> &amp;location, const int &amp;winddirection, bool sheltered)</td></tr>
<tr class="separator:ga23304505d04b612b77e4df5e9b64a1dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaba2eacc697effccea9cd905bddfa9fa6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaba2eacc697effccea9cd905bddfa9fa6">is_wind_blocker</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;location)</td></tr>
<tr class="separator:gaba2eacc697effccea9cd905bddfa9fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa3cd7d1232c28c6ccb1e136737ba2c11"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaa3cd7d1232c28c6ccb1e136737ba2c11">get_wind_desc</a> (double windpower)</td></tr>
<tr class="separator:gaa3cd7d1232c28c6ccb1e136737ba2c11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c6d9d3162d0a5b171b55975bf400a83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structrl__vec2d.html">rl_vec2d</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga1c6d9d3162d0a5b171b55975bf400a83">convert_wind_to_coord</a> (const int angle)</td></tr>
<tr class="separator:ga1c6d9d3162d0a5b171b55975bf400a83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb21721b572a715148778ab71405819a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gadb21721b572a715148778ab71405819a">warm_enough_to_plant</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;pos)</td></tr>
<tr class="memdesc:gadb21721b572a715148778ab71405819a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is it warm enough to plant seeds?  <a href="group__Weather.html#gadb21721b572a715148778ab71405819a">More...</a><br /></td></tr>
<tr class="separator:gadb21721b572a715148778ab71405819a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga045ef712a0243543e4d618673cf0f676"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga045ef712a0243543e4d618673cf0f676">warm_enough_to_plant</a> (const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;pos)</td></tr>
<tr class="separator:ga045ef712a0243543e4d618673cf0f676"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga65f6fab727709c98cc9959f01ecac53b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga65f6fab727709c98cc9959f01ecac53b">weather_effect::wet_player</a> (int amount)</td></tr>
<tr class="memdesc:ga65f6fab727709c98cc9959f01ecac53b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main routine for wet effects caused by weather.  <a href="group__Weather.html#ga65f6fab727709c98cc9959f01ecac53b">More...</a><br /></td></tr>
<tr class="separator:ga65f6fab727709c98cc9959f01ecac53b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4dbb145f0b2ee7032f0cc2c044660171"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga4dbb145f0b2ee7032f0cc2c044660171">weather_effect::thunder</a> (int intensity)</td></tr>
<tr class="memdesc:ga4dbb145f0b2ee7032f0cc2c044660171"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thunder.  <a href="group__Weather.html#ga4dbb145f0b2ee7032f0cc2c044660171">More...</a><br /></td></tr>
<tr class="separator:ga4dbb145f0b2ee7032f0cc2c044660171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb4f1f70746ab4ba20a266e7c7ecdd75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gabb4f1f70746ab4ba20a266e7c7ecdd75">weather_effect::lightning</a> (int intensity)</td></tr>
<tr class="memdesc:gabb4f1f70746ab4ba20a266e7c7ecdd75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lightning.  <a href="group__Weather.html#gabb4f1f70746ab4ba20a266e7c7ecdd75">More...</a><br /></td></tr>
<tr class="separator:gabb4f1f70746ab4ba20a266e7c7ecdd75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac7b098483cb868b6791b20fc730ca2b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gac7b098483cb868b6791b20fc730ca2b8">weather_effect::light_acid</a> (int intensity)</td></tr>
<tr class="memdesc:gac7b098483cb868b6791b20fc730ca2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acid drizzle.  <a href="group__Weather.html#gac7b098483cb868b6791b20fc730ca2b8">More...</a><br /></td></tr>
<tr class="separator:gac7b098483cb868b6791b20fc730ca2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7045548713f3df52a10ae1ed88409c99"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga7045548713f3df52a10ae1ed88409c99">weather_effect::acid</a> (int intensity)</td></tr>
<tr class="memdesc:ga7045548713f3df52a10ae1ed88409c99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Acid rain.  <a href="group__Weather.html#ga7045548713f3df52a10ae1ed88409c99">More...</a><br /></td></tr>
<tr class="separator:ga7045548713f3df52a10ae1ed88409c99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67a9f7471f0ad8b9812e213ac1c78c8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga67a9f7471f0ad8b9812e213ac1c78c8f">weather_manager::weather_manager</a> ()</td></tr>
<tr class="separator:ga67a9f7471f0ad8b9812e213ac1c78c8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08bb6f845f2ee9c1efff1d0122da1edb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga08bb6f845f2ee9c1efff1d0122da1edb">weather_manager::~weather_manager</a> ()</td></tr>
<tr class="separator:ga08bb6f845f2ee9c1efff1d0122da1edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga090dd5274c7af40d32814a41f2e16fe0"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="classweather__generator.html">weather_generator</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">weather_manager::get_cur_weather_gen</a> () const</td></tr>
<tr class="separator:ga090dd5274c7af40d32814a41f2e16fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dbed22a00ed1bfb19f18ce60a8dd200"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga2dbed22a00ed1bfb19f18ce60a8dd200">weather_manager::update_weather</a> ()</td></tr>
<tr class="separator:ga2dbed22a00ed1bfb19f18ce60a8dd200"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafe8217c10598c36542d98d470b918b32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gafe8217c10598c36542d98d470b918b32">weather_manager::set_nextweather</a> (<a class="el" href="classtime__point.html">time_point</a> t)</td></tr>
<tr class="separator:gafe8217c10598c36542d98d470b918b32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga956008349f0006ba8d76360e8b2d5283"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">weather_manager::get_temperature</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;location) const</td></tr>
<tr class="separator:ga956008349f0006ba8d76360e8b2d5283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3a87174f8d5ac7f4c8153f2001df4737"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga3a87174f8d5ac7f4c8153f2001df4737">weather_manager::get_temperature</a> (const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;location)</td></tr>
<tr class="separator:ga3a87174f8d5ac7f4c8153f2001df4737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ddaa9d8c10baad01cc0ef885a3e65f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga9ddaa9d8c10baad01cc0ef885a3e65f4">weather_manager::get_water_temperature</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;location) const</td></tr>
<tr class="separator:ga9ddaa9d8c10baad01cc0ef885a3e65f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69b5df9d3fed1ca56809d382047cbd0e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga69b5df9d3fed1ca56809d382047cbd0e">weather_manager::clear_temp_cache</a> ()</td></tr>
<tr class="separator:ga69b5df9d3fed1ca56809d382047cbd0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab36b70cc7755703a4307e998c5ffc28b"><td class="memItemLeft" align="right" valign="top">constexpr int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gab36b70cc7755703a4307e998c5ffc28b">NUM_FORECAST_PERIODS</a> = 6</td></tr>
<tr class="separator:gab36b70cc7755703a4307e998c5ffc28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Containers</h2></td></tr>
<tr><td class="ititle" colspan="2"><p ><a class="anchor" id="amgrp5382aaf8b3d2fdeb6717f9805b0dd511"></a>Containers come in two flavors:</p>
<ul>
<li>suitable for liquids (is_watertight_container),</li>
<li>and the remaining one (they are for currently only for flavor). </li>
</ul>
</td></tr>
<tr class="memitem:ga62f8d8c16409bbd233295c4a19ac59df"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#ga62f8d8c16409bbd233295c4a19ac59df">item::add_rain_to_container</a> (bool acid, int <a class="el" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>=1)</td></tr>
<tr class="memdesc:ga62f8d8c16409bbd233295c4a19ac59df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add charge(s) of rain to given container, possibly contaminating it.  <a href="group__Weather.html#ga62f8d8c16409bbd233295c4a19ac59df">More...</a><br /></td></tr>
<tr class="separator:ga62f8d8c16409bbd233295c4a19ac59df"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader">Funnels</h2></td></tr>
<tr><td class="ititle" colspan="2"><p ><a class="anchor" id="amgrpf8d8e9b2f605b638e6c6b8c631d23c64"></a>Traps can act as funnels, for this they need a <a class="el" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">trap::funnel_radius_mm</a> &gt; 0.</p>
<p >Funnels are usual not hidden at all (<a class="el" href="structtrap.html#a0913f4b2535ae7fe8b5550b974b31a18">trap::visibility</a> == 0), are <a class="el" href="structtrap.html#a10039a239822fb13066d9e61c82f5bf5">trap::benign</a> and can be picked up easily (<a class="el" href="structtrap.html#abbf38effe374d03f39b3647a27e3c3a7">trap::difficulty</a> == 0). The funnel filling is handled in <a class="el" href="weather_8cpp.html">weather.cpp</a>. is_funnel is used the check whether the funnel specific code should be run for this trap. </p>
</td></tr>
<tr class="memitem:gaf799ace26686fd97c953f49ecd94acbb"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">trap::funnel_turns_per_charge</a> (double rain_depth_mm_per_hour) const</td></tr>
<tr class="separator:gaf799ace26686fd97c953f49ecd94acbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7045548713f3df52a10ae1ed88409c99" name="ga7045548713f3df52a10ae1ed88409c99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7045548713f3df52a10ae1ed88409c99">&#9670;&nbsp;</a></span>acid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_effect::acid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intensity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acid rain. </p>
<p >Causes major pain. Damages non acid-proof mobs. Very wet (acid). </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00488">488</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>{</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( <a class="code hl_function" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( intensity ) ) &amp;&amp; <a class="code hl_function" href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a>() ) {</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weapon.has_flag( <span class="stringliteral">&quot;RAIN_PROTECT&quot;</span> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your umbrella protects you from the acid rain.&quot;</span> ) );</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn_with_flag( <span class="stringliteral">&quot;RAINPROOF&quot;</span> ) &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) {</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your clothing protects you from the acid rain.&quot;</span> ) );</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>                <span class="keywordtype">bool</span> has_helmet = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing_power_armor( &amp;has_helmet ) &amp;&amp; ( has_helmet || !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) ) ) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your power armor protects you from the acid rain.&quot;</span> ) );</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid rain burns!&quot;</span> ) );</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 2 ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_pain() &lt; 100 ) ) {</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_pain( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 5 ) );</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>                    }</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                }</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            }</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        }</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    }</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>}</div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a24e810d76ce97cfab15fbe68a32a00ca"><div class="ttname"><a href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a></div><div class="ttdeci">static constexpr time_duration from_seconds(const T t)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00208">calendar.h:208</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00281">game.cpp:281</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga29f289ab496b2f58d297384490905e92"><div class="ttname"><a href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a></div><div class="ttdeci">static bool is_player_outside()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00069">weather.cpp:69</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00490">calendar.cpp:490</a></div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="calendar_8h_source.html#l00208">time_duration::from_seconds()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l00069">is_player_outside()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, and <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
<a id="ga62f8d8c16409bbd233295c4a19ac59df" name="ga62f8d8c16409bbd233295c4a19ac59df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62f8d8c16409bbd233295c4a19ac59df">&#9670;&nbsp;</a></span>add_rain_to_container()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void item::add_rain_to_container </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>acid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>charges</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add charge(s) of rain to given container, possibly contaminating it. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00211">211</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>{</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt;= 0 ) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    }</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <a class="code hl_class" href="classitem.html">item</a> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>( <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> ? <a class="code hl_variable" href="weather_8cpp.html#a87da1edb27c5578f91667c65d3c4b3fd">itype_water_acid</a> : <a class="code hl_variable" href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> capa = <a class="code hl_function" href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">get_remaining_capacity_for_liquid</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">empty</a>() ) {</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="comment">// This is easy. Just add 1 charge of the rain liquid to the container.</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> ) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>            <span class="comment">// Funnels aren&#39;t always clean enough for water. // TODO: disinfectant squeegie-&gt;funnel</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.poison = <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) ? 1 : 0;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        }</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.charges = std::min( <a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, capa );</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>        <a class="code hl_function" href="classitem.html#a3841e9e250af73e45b14d5bb3cc7a043">put_in</a>( <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>        <span class="comment">// The container already has a liquid.</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;liq = <a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>();</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <span class="keywordtype">int</span> orig = liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <span class="keywordtype">int</span> added = std::min( <a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>, capa );</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="keywordflow">if</span>( capa &gt; 0 ) {</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> += added;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>        }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="keywordflow">if</span>( liq.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.typeId() || liq.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="weather_8cpp.html#a78370fa21e3dd590d667418a903977f6">itype_water_acid_weak</a> ) {</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="comment">// The container already contains this liquid or weakly acidic water.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>            <span class="comment">// Don&#39;t do anything special -- we already added liquid.</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <span class="comment">// The rain is different from what&#39;s in the container.</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            <span class="comment">// Turn the container&#39;s liquid into weak acid with a probability</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            <span class="comment">// based on its current volume.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="comment">// If it&#39;s raining acid and this container started with 7</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            <span class="comment">// charges of water, the liquid will now be 1/8th acid or,</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            <span class="comment">// equivalently, 1/4th weak acid (the rest being water). A</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <span class="comment">// stochastic approach gives the liquid a 1 in 4 (or 2 in</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <span class="comment">// liquid.charges) chance of becoming weak acid.</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> transmute = <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 2 * added, liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            <span class="keywordflow">if</span>( transmute ) {</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                <a class="code hl_variable" href="classitem.html#a4afe851abb42cbff0857065860f96e0e">contents</a>.<a class="code hl_function" href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">front</a>() = <a class="code hl_function" href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item</a>( <a class="code hl_variable" href="weather_8cpp.html#a78370fa21e3dd590d667418a903977f6">itype_water_acid_weak</a>, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> );</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( liq.<a class="code hl_function" href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">typeId</a>() == <a class="code hl_variable" href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a> ) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                <span class="comment">// The container has water, and the acid rain didn&#39;t turn it</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                <span class="comment">// into weak acid. Poison the water instead, assuming 1</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                <span class="comment">// charge of acid would act like a charge of water with poison 5.</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                <span class="keywordtype">int</span> total_poison = liq.<a class="code hl_variable" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> * orig + 5 * added;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>                liq.<a class="code hl_variable" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> = total_poison / liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                <span class="keywordtype">int</span> leftover_poison = total_poison - liq.<a class="code hl_variable" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a> * liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                <span class="keywordflow">if</span>( leftover_poison &gt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, liq.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> ) ) {</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                    liq.<a class="code hl_variable" href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">poison</a>++;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>                }</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            }</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        }</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="aclassitem__contents_html_a14299e40ca1440af11623c86e0b84072"><div class="ttname"><a href="classitem__contents.html#a14299e40ca1440af11623c86e0b84072">item_contents::front</a></div><div class="ttdeci">item &amp; front()</div><div class="ttdoc">this is an artifact of the previous code using front() everywhere for contents.</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00190">item_contents.cpp:190</a></div></div>
<div class="ttc" id="aclassitem__contents_html_ad5b1250d9699aa489bbfcf3e5689581b"><div class="ttname"><a href="classitem__contents.html#ad5b1250d9699aa489bbfcf3e5689581b">item_contents::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdef"><b>Definition:</b> <a href="item__contents_8cpp_source.html#l00016">item_contents.cpp:16</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00210">item.h:211</a></div></div>
<div class="ttc" id="aclassitem_html_a344fbf6e3db0d59e0c8ac75cd42ee144"><div class="ttname"><a href="classitem.html#a344fbf6e3db0d59e0c8ac75cd42ee144">item::item</a></div><div class="ttdeci">item()</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00365">item.cpp:365</a></div></div>
<div class="ttc" id="aclassitem_html_a3841e9e250af73e45b14d5bb3cc7a043"><div class="ttname"><a href="classitem.html#a3841e9e250af73e45b14d5bb3cc7a043">item::put_in</a></div><div class="ttdeci">void put_in(const item &amp;payload)</div><div class="ttdoc">Puts the given item into this one, no checks are performed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00995">item.cpp:995</a></div></div>
<div class="ttc" id="aclassitem_html_a4afe851abb42cbff0857065860f96e0e"><div class="ttname"><a href="classitem.html#a4afe851abb42cbff0857065860f96e0e">item::contents</a></div><div class="ttdeci">item_contents contents</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02158">item.h:2158</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02196">item.h:2196</a></div></div>
<div class="ttc" id="aclassitem_html_a9f276bdd47b29bc1649dce5c64cbe433"><div class="ttname"><a href="classitem.html#a9f276bdd47b29bc1649dce5c64cbe433">item::poison</a></div><div class="ttdeci">int poison</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02201">item.h:2201</a></div></div>
<div class="ttc" id="aclassitem_html_aa79dad64e1ef6347219be2f8666e2752"><div class="ttname"><a href="classitem.html#aa79dad64e1ef6347219be2f8666e2752">item::typeId</a></div><div class="ttdeci">const itype_id &amp; typeId() const</div><div class="ttdoc">return the unique identifier of the items underlying type</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08353">item.cpp:8353</a></div></div>
<div class="ttc" id="aclassitem_html_aaff8311e14e6819e6b6c2e207037f292"><div class="ttname"><a href="classitem.html#aaff8311e14e6819e6b6c2e207037f292">item::get_remaining_capacity_for_liquid</a></div><div class="ttdeci">int get_remaining_capacity_for_liquid(const item &amp;liquid, bool allow_bucket=false, std::string *err=nullptr) const</div><div class="ttdoc">How much more of this liquid (in charges) can be put in this container.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08425">item.cpp:8425</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacemattack_html_acdda0be7e7c8dabb76e9bd130547a3fa"><div class="ttname"><a href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">mattack::acid</a></div><div class="ttdeci">bool acid(monster *z)</div><div class="ttdef"><b>Definition:</b> <a href="monattack_8cpp_source.html#l00587">monattack.cpp:587</a></div></div>
<div class="ttc" id="aweather_8cpp_html_a78370fa21e3dd590d667418a903977f6"><div class="ttname"><a href="weather_8cpp.html#a78370fa21e3dd590d667418a903977f6">itype_water_acid_weak</a></div><div class="ttdeci">static const itype_id itype_water_acid_weak(&quot;water_acid_weak&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_a87da1edb27c5578f91667c65d3c4b3fd"><div class="ttname"><a href="weather_8cpp.html#a87da1edb27c5578f91667c65d3c4b3fd">itype_water_acid</a></div><div class="ttdeci">static const itype_id itype_water_acid(&quot;water_acid&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_abfd8b1d23930a50d7f122f0d39538649"><div class="ttname"><a href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a></div><div class="ttdeci">static const itype_id itype_water(&quot;water&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l00587">mattack::acid()</a>, <a class="el" href="item_8h_source.html#l02196">item::charges</a>, <a class="el" href="item_8h_source.html#l02158">item::contents</a>, <a class="el" href="item__contents_8cpp_source.html#l00016">item_contents::empty()</a>, <a class="el" href="item__contents_8cpp_source.html#l00190">item_contents::front()</a>, <a class="el" href="item_8cpp_source.html#l08425">item::get_remaining_capacity_for_liquid()</a>, <a class="el" href="item_8cpp_source.html#l00365">item::item()</a>, <a class="el" href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="weather_8cpp.html#a87da1edb27c5578f91667c65d3c4b3fd">itype_water_acid</a>, <a class="el" href="weather_8cpp.html#a78370fa21e3dd590d667418a903977f6">itype_water_acid_weak</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="item_8h_source.html#l02201">item::poison</a>, <a class="el" href="item_8cpp_source.html#l00995">item::put_in()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="item_8cpp_source.html#l08353">item::typeId()</a>, and <a class="el" href="calendar_8cpp_source.html#l00521">x_in_y()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00184">retroactively_fill_from_funnel()</a>.</p>

</div>
</div>
<a id="ga69b5df9d3fed1ca56809d382047cbd0e" name="ga69b5df9d3fed1ca56809d382047cbd0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga69b5df9d3fed1ca56809d382047cbd0e">&#9670;&nbsp;</a></span>clear_temp_cache()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_manager::clear_temp_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01145">1145</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>{</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    <a class="code hl_variable" href="classweather__manager.html#a1d0649c891e7066e0bee55a0259764b3">temperature_cache</a>.clear();</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>}</div>
<div class="ttc" id="aclassweather__manager_html_a1d0649c891e7066e0bee55a0259764b3"><div class="ttname"><a href="classweather__manager.html#a1d0649c891e7066e0bee55a0259764b3">weather_manager::temperature_cache</a></div><div class="ttdeci">std::unordered_map&lt; tripoint, int &gt; temperature_cache</div><div class="ttdoc">temperature cache, cleared every turn, sparse map of map tripoints to temperatures in Fahrenheit</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00208">weather.h:208</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8h_source.html#l00208">weather_manager::temperature_cache</a>.</p>

</div>
</div>
<a id="ga1c6d9d3162d0a5b171b55975bf400a83" name="ga1c6d9d3162d0a5b171b55975bf400a83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1c6d9d3162d0a5b171b55975bf400a83">&#9670;&nbsp;</a></span>convert_wind_to_coord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structrl__vec2d.html">rl_vec2d</a> convert_wind_to_coord </td>
          <td>(</td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01005">1005</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>{</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::pair&lt;int, rl_vec2d&gt;, 9&gt; outputs = {{</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>            { 330, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 0, -1 ) },</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            { 301, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( -1, -1 ) },</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            { 240, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( -1, 0 ) },</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>            { 211, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( -1, 1 ) },</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            { 150, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 0, 1 ) },</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            { 121, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 1, 1 ) },</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            { 60, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 1, 0 ) },</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            { 31, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 1, -1 ) },</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>            { 0, <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 0, -1 ) }</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        }</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>    };</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;int, rl_vec2d&gt; &amp;val : outputs ) {</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>        <span class="keywordflow">if</span>( <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> &gt;= val.first ) {</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            <span class="keywordflow">return</span> val.second;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>        }</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>    }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a>( 0, 0 );</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>}</div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00017">units_angle.h:17</a></div></div>
<div class="ttc" id="astructrl__vec2d_html"><div class="ttname"><a href="structrl__vec2d.html">rl_vec2d</a></div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00010">point_float.h:10</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00938">get_local_windpower()</a>.</p>

</div>
</div>
<a id="ga275631a4069758bffeb8d4fad0cb5919" name="ga275631a4069758bffeb8d4fad0cb5919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga275631a4069758bffeb8d4fad0cb5919">&#9670;&nbsp;</a></span>current_weather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp; current_weather </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00143">143</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>{</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    <span class="keyword">const</span> <span class="keyword">auto</span> wgen = <a class="code hl_namespace" href="namespaceweather.html">weather</a>.get_cur_weather_gen();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.weather_override ) {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="keywordflow">return</span> <a class="code hl_namespace" href="namespaceweather.html">weather</a>.weather_override;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    }</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    <span class="keywordflow">return</span> wgen.get_weather_conditions( location, t, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed() );</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>}</div>
<div class="ttc" id="aclassweather__manager_html"><div class="ttname"><a href="classweather__manager.html">weather_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00177">weather.h:178</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaa7b33196bf530c8b26654a0adf355165"><div class="ttname"><a href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00064">weather.cpp:64</a></div></div>
<div class="ttc" id="anamespaceweather_html"><div class="ttname"><a href="namespaceweather.html">weather</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01150">weather.cpp:1151</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00281">g</a>, and <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l01153">Character::burn_fuel()</a>, <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04696">vehicle::total_solar_epower_w()</a>.</p>

</div>
</div>
<a id="ga0d4be90a054c4ace26407d9a61f11a59" name="ga0d4be90a054c4ace26407d9a61f11a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d4be90a054c4ace26407d9a61f11a59">&#9670;&nbsp;</a></span>fill_funnels()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fill_funnels </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rain_depth_mm_per_hour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>acid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtrap.html">trap</a> &amp;&#160;</td>
          <td class="paramname"><em>tr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main routine for filling funnels from weather effects. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00319">319</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>{</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> turns_per_charge = tr.<a class="code hl_function" href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">funnel_turns_per_charge</a>( rain_depth_mm_per_hour );</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    <span class="comment">// Give each funnel on the map a chance to collect the rain.</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keyword">const</span> std::vector&lt;tripoint&gt; &amp;funnel_locs = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.trap_locations( tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> );</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;loc : funnel_locs ) {</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>        <a class="code hl_class" href="classunits_1_1quantity.html">units::volume</a> maxcontains = 0_ml;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( turns_per_charge ) ) {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            <span class="comment">// FIXME:</span></div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            <span class="comment">//add_msg(&quot;%d mm/h %d tps %.4f: fill&quot;,int(calendar::turn),rain_depth_mm_per_hour,turns_per_charge);</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>            <span class="comment">// This funnel has collected some rain! Put the rain in the largest</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>            <span class="comment">// container here which is either empty or contains some mixture of</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            <span class="comment">// impure water and acid.</span></div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>            <a class="code hl_class" href="classmap__stack.html">map_stack</a> items = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.i_at( loc );</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            <span class="keyword">auto</span> container = items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>();</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            <span class="keywordflow">for</span>( <span class="keyword">auto</span> candidate_container = items.<a class="code hl_function" href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">begin</a>(); candidate_container != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>();</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>                 ++candidate_container ) {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>                <span class="keywordflow">if</span>( candidate_container-&gt;is_funnel_container( maxcontains ) ) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>                    container = candidate_container;</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>                }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            <span class="keywordflow">if</span>( container != items.<a class="code hl_function" href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">end</a>() ) {</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                container-&gt;add_rain_to_container( <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>, 1 );</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>                container-&gt;set_age( 0_turns );</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>            }</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>        }</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>    }</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>}</div>
<div class="ttc" id="aclassitem__stack_html_a588d49cd17fbf3c64227906758940769"><div class="ttname"><a href="classitem__stack.html#a588d49cd17fbf3c64227906758940769">item_stack::begin</a></div><div class="ttdeci">iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00028">item_stack.cpp:28</a></div></div>
<div class="ttc" id="aclassitem__stack_html_ad04a969155cc139c54a6a3b4a3395454"><div class="ttname"><a href="classitem__stack.html#ad04a969155cc139c54a6a3b4a3395454">item_stack::end</a></div><div class="ttdeci">iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="item__stack_8cpp_source.html#l00033">item_stack.cpp:33</a></div></div>
<div class="ttc" id="aclassmap__stack_html"><div class="ttname"><a href="classmap__stack.html">map_stack</a></div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00104">map.h:105</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaf799ace26686fd97c953f49ecd94acbb"><div class="ttname"><a href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">trap::funnel_turns_per_charge</a></div><div class="ttdeci">double funnel_turns_per_charge(double rain_depth_mm_per_hour) const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00294">weather.cpp:294</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00088">trap.h:88</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00133">point.h:133</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l00587">mattack::acid()</a>, <a class="el" href="item__stack_8cpp_source.html#l00028">item_stack::begin()</a>, <a class="el" href="item__stack_8cpp_source.html#l00033">item_stack::end()</a>, <a class="el" href="weather_8cpp_source.html#l00294">trap::funnel_turns_per_charge()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="trap_8h_source.html#l00088">trap::loadid</a>, and <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00353">fill_water_collectors()</a>.</p>

</div>
</div>
<a id="gaee2ea0506e3eef92eb305bf1289204aa" name="gaee2ea0506e3eef92eb305bf1289204aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaee2ea0506e3eef92eb305bf1289204aa">&#9670;&nbsp;</a></span>fill_water_collectors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void fill_water_collectors </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mmPerHour</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>acid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fill funnels and makeshift funnels from weather effects. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Weather.html#ga0d4be90a054c4ace26407d9a61f11a59" title="Main routine for filling funnels from weather effects.">fill_funnels</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00353">353</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>{</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;e : <a class="code hl_function" href="structtrap.html#afffbc9e94465251d8486a7a7ff31e76c">trap::get_funnels</a>() ) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <a class="code hl_function" href="group__Weather.html#ga0d4be90a054c4ace26407d9a61f11a59">fill_funnels</a>( mmPerHour, <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a>, *e );</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>    }</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga0d4be90a054c4ace26407d9a61f11a59"><div class="ttname"><a href="group__Weather.html#ga0d4be90a054c4ace26407d9a61f11a59">fill_funnels</a></div><div class="ttdeci">static void fill_funnels(int rain_depth_mm_per_hour, bool acid, const trap &amp;tr)</div><div class="ttdoc">Main routine for filling funnels from weather effects.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00319">weather.cpp:319</a></div></div>
<div class="ttc" id="astructtrap_html_afffbc9e94465251d8486a7a7ff31e76c"><div class="ttname"><a href="structtrap.html#afffbc9e94465251d8486a7a7ff31e76c">trap::get_funnels</a></div><div class="ttdeci">static const std::vector&lt; const trap * &gt; &amp; get_funnels()</div><div class="ttdoc">Returns all trap objects that are actually funnels (is_funnel returns true for all of them).</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00090">trap.cpp:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l00587">mattack::acid()</a>, <a class="el" href="weather_8cpp_source.html#l00319">fill_funnels()</a>, and <a class="el" href="trap_8cpp_source.html#l00090">trap::get_funnels()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00522">handle_weather_effects()</a>.</p>

</div>
</div>
<a id="ga5e6b69c07a1700d9cbbb5e666762b72c" name="ga5e6b69c07a1700d9cbbb5e666762b72c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5e6b69c07a1700d9cbbb5e666762b72c">&#9670;&nbsp;</a></span>funnel_charges_per_turn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double funnel_charges_per_turn </td>
          <td>(</td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>surface_area_mm2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const double&#160;</td>
          <td class="paramname"><em>rain_depth_mm_per_hour</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00267">267</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>{</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="comment">// 1mm rain on 1m^2 == 1 liter water == 1000ml</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="comment">// 1 liter == 4 volume</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    <span class="comment">// 1 volume == 250ml: containers</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    <span class="comment">// 1 volume == 200ml: water</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// How many charges of water can we collect in a turn (usually &lt;1.0)?</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">if</span>( rain_depth_mm_per_hour == 0.0 ) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    }</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>    <span class="comment">// Calculate once, because that part is expensive</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>    <span class="comment">// FIXME: make non-static</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>    <span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> water( <a class="code hl_variable" href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="code hl_variable" href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a> );</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>    <span class="comment">// 250ml</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">double</span> charge_ml = <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">to_gram</a>( water.weight() ) ) /</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>                                    water.charges;</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> vol_mm3_per_hour = surface_area_mm2 * rain_depth_mm_per_hour;</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> vol_mm3_per_turn = vol_mm3_per_hour / to_turns&lt;int&gt;( 1_hours );</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span> </div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> ml_to_mm3 = 1000;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> charges_per_turn = vol_mm3_per_turn / ( charge_ml * ml_to_mm3 );</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>    <span class="keywordflow">return</span> charges_per_turn;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>}</div>
<div class="ttc" id="anamespacecalendar_html_ab01178b933b4f1c62bd75b2edfdbaf79"><div class="ttname"><a href="namespacecalendar.html#ab01178b933b4f1c62bd75b2edfdbaf79">calendar::start_of_cataclysm</a></div><div class="ttdeci">const time_point &amp; start_of_cataclysm</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00033">calendar.cpp:33</a></div></div>
<div class="ttc" id="anamespaceunits_html_a8306911daadc1a4d7a7b46e9786f4a4c"><div class="ttname"><a href="namespaceunits.html#a8306911daadc1a4d7a7b46e9786f4a4c">units::to_gram</a></div><div class="ttdeci">constexpr value_type to_gram(const quantity&lt; value_type, mass_in_milligram_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__mass_8h_source.html#l00067">units_mass.h:67</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8h_source.html#l02196">item::charges</a>, <a class="el" href="weather_8cpp.html#abfd8b1d23930a50d7f122f0d39538649">itype_water</a>, <a class="el" href="calendar_8cpp_source.html#l00033">calendar::start_of_cataclysm</a>, <a class="el" href="units__mass_8h_source.html#l00067">units::to_gram()</a>, and <a class="el" href="item_8cpp_source.html#l04958">item::weight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00294">trap::funnel_turns_per_charge()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06851">vehicle::update_time()</a>.</p>

</div>
</div>
<a id="gaf799ace26686fd97c953f49ecd94acbb" name="gaf799ace26686fd97c953f49ecd94acbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf799ace26686fd97c953f49ecd94acbb">&#9670;&nbsp;</a></span>funnel_turns_per_charge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double trap::funnel_turns_per_charge </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>rain_depth_mm_per_hour</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00294">294</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>{</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>    <span class="comment">// 1mm rain on 1m^2 == 1 liter water == 1000ml</span></div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>    <span class="comment">// 1 liter == 4 volume</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="comment">// 1 volume == 250ml: containers</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>    <span class="comment">// 1 volume == 200ml: water</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>    <span class="comment">// How many turns should it take for us to collect 1 charge of rainwater?</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>    <span class="comment">// &quot;...&quot;</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>    <span class="keywordflow">if</span>( rain_depth_mm_per_hour == 0.0 ) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>    }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span> </div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> surface_area_mm2 = <a class="code hl_define" href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * ( <a class="code hl_variable" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">funnel_radius_mm</a> * <a class="code hl_variable" href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">funnel_radius_mm</a> );</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> charges_per_turn = <a class="code hl_function" href="group__Weather.html#ga5e6b69c07a1700d9cbbb5e666762b72c">funnel_charges_per_turn</a>( surface_area_mm2, rain_depth_mm_per_hour );</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    <span class="keywordflow">if</span>( charges_per_turn &gt; 0.0 ) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>        <span class="keywordflow">return</span> 1.0 / charges_per_turn;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga5e6b69c07a1700d9cbbb5e666762b72c"><div class="ttname"><a href="group__Weather.html#ga5e6b69c07a1700d9cbbb5e666762b72c">funnel_charges_per_turn</a></div><div class="ttdeci">double funnel_charges_per_turn(const double surface_area_mm2, const double rain_depth_mm_per_hour)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00267">weather.cpp:267</a></div></div>
<div class="ttc" id="amath__defines_8h_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="math__defines_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00021">math_defines.h:21</a></div></div>
<div class="ttc" id="astructtrap_html_a2cea2683be1199ec40d943540d3a78ff"><div class="ttname"><a href="structtrap.html#a2cea2683be1199ec40d943540d3a78ff">trap::funnel_radius_mm</a></div><div class="ttdeci">int funnel_radius_mm</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00113">trap.h:113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l00267">funnel_charges_per_turn()</a>, <a class="el" href="trap_8h_source.html#l00113">trap::funnel_radius_mm</a>, and <a class="el" href="math__defines_8h_source.html#l00021">M_PI</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00319">fill_funnels()</a>, and <a class="el" href="weather_8cpp_source.html#l00184">retroactively_fill_from_funnel()</a>.</p>

</div>
</div>
<a id="ga090dd5274c7af40d32814a41f2e16fe0" name="ga090dd5274c7af40d32814a41f2e16fe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga090dd5274c7af40d32814a41f2e16fe0">&#9670;&nbsp;</a></span>get_cur_weather_gen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="classweather__generator.html">weather_generator</a> &amp; weather_manager::get_cur_weather_gen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01049">1049</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>{</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>    <span class="keyword">const</span> <a class="code hl_class" href="classovermap.html">overmap</a> &amp;<a class="code hl_variable" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_cur_om();</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structregional__settings.html">regional_settings</a> &amp;settings = <a class="code hl_variable" href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">om</a>.get_settings();</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>    <span class="keywordflow">return</span> settings.<a class="code hl_variable" href="structregional__settings.html#aa3e13275f58002592356ff023c6797c4">weather</a>;</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>}</div>
<div class="ttc" id="aclassovermap_html"><div class="ttname"><a href="classovermap.html">overmap</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00178">overmap.h:179</a></div></div>
<div class="ttc" id="anamespacecoords_html_ab3261fe84f776b15113e1cec5fe3a560"><div class="ttname"><a href="namespacecoords.html#ab3261fe84f776b15113e1cec5fe3a560">coords::om</a></div><div class="ttdeci">constexpr scale om</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00034">coordinates.h:34</a></div></div>
<div class="ttc" id="astructregional__settings_html"><div class="ttname"><a href="structregional__settings.html">regional_settings</a></div><div class="ttdef"><b>Definition:</b> <a href="regional__settings_8h_source.html#l00220">regional_settings.h:220</a></div></div>
<div class="ttc" id="astructregional__settings_html_aa3e13275f58002592356ff023c6797c4"><div class="ttname"><a href="structregional__settings.html#aa3e13275f58002592356ff023c6797c4">regional_settings::weather</a></div><div class="ttdeci">weather_generator weather</div><div class="ttdef"><b>Definition:</b> <a href="regional__settings_8h_source.html#l00231">regional_settings.h:231</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="coordinates_8h_source.html#l00034">coords::om</a>, and <a class="el" href="regional__settings_8h_source.html#l00231">regional_settings::weather</a>.</p>

<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l01351">debug_menu::debug()</a>, <a class="el" href="weather_8cpp_source.html#l01129">weather_manager::get_temperature()</a>, <a class="el" href="suffer_8cpp_source.html#l01321">Character::suffer_from_artifacts()</a>, and <a class="el" href="weather_8cpp_source.html#l01056">weather_manager::update_weather()</a>.</p>

</div>
</div>
<a id="ga91e01ef6a71f6495015d3a14131952f2" name="ga91e01ef6a71f6495015d3a14131952f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91e01ef6a71f6495015d3a14131952f2">&#9670;&nbsp;</a></span>get_dirstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_dirstring </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00874">874</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>{</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    <span class="comment">// Convert angle to cardinal directions</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    std::string dirstring;</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="keywordtype">int</span> dirangle = <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a>;</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>    <span class="keywordflow">if</span>( dirangle &lt;= 23 || dirangle &gt; 338 ) {</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North&quot;</span> );</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 68 ) {</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North-East&quot;</span> );</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 113 ) {</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;East&quot;</span> );</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 158 ) {</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South-East&quot;</span> );</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 203 ) {</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South&quot;</span> );</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 248 ) {</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;South-West&quot;</span> );</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 293 ) {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;West&quot;</span> );</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;North-West&quot;</span> );</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>    }</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>    <span class="keywordflow">return</span> dirstring;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="ga3b6c37e7f8086254c46acb9572ea97d1" name="ga3b6c37e7f8086254c46acb9572ea97d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3b6c37e7f8086254c46acb9572ea97d1">&#9670;&nbsp;</a></span>get_local_humidity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_local_humidity </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>humidity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;&#160;</td>
          <td class="paramname"><em>weather</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sheltered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00924">924</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>{</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>    <span class="keywordtype">int</span> tmphumidity = humidity;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="keywordflow">if</span>( sheltered ) {</div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        <span class="comment">// Norm for a house?</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        tmphumidity = humidity * ( 100 - humidity ) / 100 + humidity;</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>-&gt;rains &amp;&amp;</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>               <a class="code hl_namespace" href="namespaceweather.html">weather</a>-&gt;precip &gt;= <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a> ) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        tmphumidity = 100;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>    }</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>    <span class="keywordflow">return</span> tmphumidity;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>}</div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a></div><div class="ttdeci">@ light</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">light</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, <a class="el" href="bionics_8cpp_source.html#l01523">Character::process_bionic()</a>, <a class="el" href="character_8cpp_source.html#l05179">Character::update_bodytemp()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="gaf98633acdf9d77e758eab4af90a6a30c" name="gaf98633acdf9d77e758eab4af90a6a30c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf98633acdf9d77e758eab4af90a6a30c">&#9670;&nbsp;</a></span>get_local_windchill()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_local_windchill </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temperature_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>humidity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>wind_mph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00797">797</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>{</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    <span class="comment">// The function must be continuous and strictly non-decreasing with temperature</span></div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> low_temp = 30.0;</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    <span class="keyword">constexpr</span> <span class="keywordtype">double</span> high_temp = 70.0;</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <span class="keywordflow">if</span>( temperature_f &gt;= high_temp ) {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="keywordflow">return</span> std::ceil( <a class="code hl_function" href="group__Weather.html#ga67ab3b6b44de8758bb82f296ec36368a">local_windchill_hightemp</a>( temperature_f, humidity, wind_mph ) );</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span> </div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    <span class="comment">// lerp-ing both functions results in a non-monotonous function</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>    <span class="keywordtype">double</span> windchill_f_hightemp = <a class="code hl_function" href="group__Weather.html#ga67ab3b6b44de8758bb82f296ec36368a">local_windchill_hightemp</a>( high_temp, humidity, wind_mph );</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keywordtype">double</span> windchill_f_lowtemp = std::min( windchill_f_hightemp, <a class="code hl_function" href="group__Weather.html#ga91c723a1c8fb88a019fd9155f7fd7c5d">local_windchill_lowtemp</a>( low_temp,</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>                                           humidity, wind_mph ) );</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span> </div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>    <span class="keywordtype">double</span> t = ( temperature_f - low_temp ) / ( high_temp - low_temp );</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    <span class="keywordflow">return</span> std::ceil( <a class="code hl_function" href="cata__utility_8h.html#ae9132dc8c0ea42f2d015053c30730de1">lerp</a>( std::min( windchill_f_lowtemp, windchill_f_hightemp ),</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>                            windchill_f_hightemp,</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>                            t ) );</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>}</div>
<div class="ttc" id="acata__utility_8h_html_ae9132dc8c0ea42f2d015053c30730de1"><div class="ttname"><a href="cata__utility_8h.html#ae9132dc8c0ea42f2d015053c30730de1">lerp</a></div><div class="ttdeci">constexpr T lerp(const T &amp;min, const T &amp;max, float t)</div><div class="ttdoc">Linear interpolation: returns first argument if t is 0, second if t is 1, otherwise proportional to t...</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00155">cata_utility.h:155</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga67ab3b6b44de8758bb82f296ec36368a"><div class="ttname"><a href="group__Weather.html#ga67ab3b6b44de8758bb82f296ec36368a">local_windchill_hightemp</a></div><div class="ttdeci">static double local_windchill_hightemp(double temperature_f, double humidity, double wind_mph)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00775">weather.cpp:775</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga91c723a1c8fb88a019fd9155f7fd7c5d"><div class="ttname"><a href="group__Weather.html#ga91c723a1c8fb88a019fd9155f7fd7c5d">local_windchill_lowtemp</a></div><div class="ttdeci">static double local_windchill_lowtemp(double temperature_f, double, double wind_mph)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00758">weather.cpp:758</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00155">lerp()</a>, <a class="el" href="weather_8cpp_source.html#l00775">local_windchill_hightemp()</a>, and <a class="el" href="weather_8cpp_source.html#l00758">local_windchill_lowtemp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, <a class="el" href="character_8cpp_source.html#l05179">Character::update_bodytemp()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="ga23304505d04b612b77e4df5e9b64a1dd" name="ga23304505d04b612b77e4df5e9b64a1dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga23304505d04b612b77e4df5e9b64a1dd">&#9670;&nbsp;</a></span>get_local_windpower()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double get_local_windpower </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>windpower</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a08d4e395b54ad28c93af412ee36e00a1">oter_id</a> &amp;&#160;</td>
          <td class="paramname"><em>omter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;&#160;</td>
          <td class="paramname"><em>winddirection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>sheltered</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >A player is sheltered if he is underground, in a car, or indoors.</p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00938">938</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>{<span class="comment"></span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span><span class="comment">    /**</span></div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span><span class="comment">    *  A player is sheltered if he is underground, in a car, or indoors.</span></div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span><span class="comment">    **/</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>    <span class="keywordflow">if</span>( sheltered ) {</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    }</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>    <a class="code hl_struct" href="structrl__vec2d.html">rl_vec2d</a> windvec = <a class="code hl_function" href="group__Weather.html#ga1c6d9d3162d0a5b171b55975bf400a83">convert_wind_to_coord</a>( winddirection );</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    <span class="keywordtype">int</span> tmpwind = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( windpower );</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> triblocker( location + <a class="code hl_struct" href="structpoint.html">point</a>( windvec.<a class="code hl_variable" href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">x</a>, windvec.<a class="code hl_variable" href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">y</a> ) );</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    <span class="comment">// Over map terrain may modify the effect of wind.</span></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="overmap_8cpp.html#aa1967e14c4ef0be6b81c5405dae79281">is_ot_match</a>( <span class="stringliteral">&quot;forest&quot;</span>, omter, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">ot_match_type::type</a> ) ||</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        <a class="code hl_function" href="overmap_8cpp.html#aa1967e14c4ef0be6b81c5405dae79281">is_ot_match</a>( <span class="stringliteral">&quot;forest_water&quot;</span>, omter, <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">ot_match_type::type</a> ) ) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>        tmpwind = tmpwind / 2;</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    }</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    <span class="keywordflow">if</span>( location.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &gt; 0 ) {</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        tmpwind = tmpwind + ( location.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> * std::min( 5, tmpwind ) );</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    }</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    <span class="comment">// An adjacent wall will block wind</span></div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="group__Weather.html#gaba2eacc697effccea9cd905bddfa9fa6">is_wind_blocker</a>( triblocker ) ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>        tmpwind = tmpwind / 10;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>( tmpwind );</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>}</div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga1c6d9d3162d0a5b171b55975bf400a83"><div class="ttname"><a href="group__Weather.html#ga1c6d9d3162d0a5b171b55975bf400a83">convert_wind_to_coord</a></div><div class="ttdeci">rl_vec2d convert_wind_to_coord(const int angle)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01005">weather.cpp:1005</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaba2eacc697effccea9cd905bddfa9fa6"><div class="ttname"><a href="group__Weather.html#gaba2eacc697effccea9cd905bddfa9fa6">is_wind_blocker</a></div><div class="ttdeci">bool is_wind_blocker(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00965">weather.cpp:965</a></div></div>
<div class="ttc" id="aovermap_8cpp_html_aa1967e14c4ef0be6b81c5405dae79281"><div class="ttname"><a href="overmap_8cpp.html#aa1967e14c4ef0be6b81c5405dae79281">is_ot_match</a></div><div class="ttdeci">bool is_ot_match(const std::string &amp;name, const oter_id &amp;oter, const ot_match_type match_type)</div><div class="ttdoc">Determine if the provided name is a match with the provided overmap terrain based on the specified ma...</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l00568">overmap.cpp:568</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_ab858570e73d0c1cf161f8c228e18cf56"><div class="ttname"><a href="structrl__vec2d.html#ab858570e73d0c1cf161f8c228e18cf56">rl_vec2d::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00013">point_float.h:13</a></div></div>
<div class="ttc" id="astructrl__vec2d_html_abdf36ab3ac90fa0979c7cebfd8ffdb58"><div class="ttname"><a href="structrl__vec2d.html#abdf36ab3ac90fa0979c7cebfd8ffdb58">rl_vec2d::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="point__float_8h_source.html#l00012">point_float.h:12</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00138">point.h:138</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l01005">convert_wind_to_coord()</a>, <a class="el" href="overmap_8cpp_source.html#l00568">is_ot_match()</a>, <a class="el" href="weather_8cpp_source.html#l00965">is_wind_blocker()</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="point__float_8h_source.html#l00012">rl_vec2d::x</a>, <a class="el" href="point__float_8h_source.html#l00013">rl_vec2d::y</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, <a class="el" href="bionics_8cpp_source.html#l01153">Character::burn_fuel()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="bionics_8cpp_source.html#l01311">Character::passive_power_gen()</a>, <a class="el" href="panels_8cpp_source.html#l01537">render_wind()</a>, <a class="el" href="map__field_8cpp_source.html#l00251">map::spread_gas()</a>, <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>, <a class="el" href="vehicle_8cpp_source.html#l04718">vehicle::total_wind_epower_w()</a>, <a class="el" href="character_8cpp_source.html#l05179">Character::update_bodytemp()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="ga46edb1dc77a5ccdb14caad851bc78a9b" name="ga46edb1dc77a5ccdb14caad851bc78a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46edb1dc77a5ccdb14caad851bc78a9b">&#9670;&nbsp;</a></span>get_shortdirstring()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_shortdirstring </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>angle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00850">850</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>{</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>    std::string dirstring;</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>    <span class="keywordtype">int</span> dirangle = <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a>;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>    <span class="keywordflow">if</span>( dirangle &lt;= 23 || dirangle &gt; 338 ) {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;N&quot;</span> );</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 68 ) {</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;NE&quot;</span> );</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 113 ) {</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;E&quot;</span> );</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 158 ) {</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;SE&quot;</span> );</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 203 ) {</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;S&quot;</span> );</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 248 ) {</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;SW&quot;</span> );</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 293 ) {</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;W&quot;</span> );</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        dirstring = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;NW&quot;</span> );</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    <span class="keywordflow">return</span> dirstring;</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>.</p>

</div>
</div>
<a id="ga956008349f0006ba8d76360e8b2d5283" name="ga956008349f0006ba8d76360e8b2d5283"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga956008349f0006ba8d76360e8b2d5283">&#9670;&nbsp;</a></span>get_temperature() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int weather_manager::get_temperature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01107">1107</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>{</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;cached = <a class="code hl_variable" href="classweather__manager.html#a1d0649c891e7066e0bee55a0259764b3">temperature_cache</a>.find( location );</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>    <span class="keywordflow">if</span>( cached != <a class="code hl_variable" href="classweather__manager.html#a1d0649c891e7066e0bee55a0259764b3">temperature_cache</a>.end() ) {</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>        <span class="keywordflow">return</span> cached-&gt;second;</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span> </div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>    <span class="comment">// local modifier</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="keywordtype">int</span> temp_mod = 0;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;new_game ) {</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>        temp_mod += <a class="code hl_function" href="game_8cpp.html#a2924321647561aca9977ca98b57874b5">get_heat_radiation</a>( location, <span class="keyword">false</span> );</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        temp_mod += <a class="code hl_function" href="game_8cpp.html#a58c14933d94a161c5ab89203559897ff">get_convection_temperature</a>( location );</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    }</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>    <span class="comment">//underground temperature = average New England temperature = 43F/6C rounded to int</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> temp = ( location.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> &lt; 0 ? <a class="code hl_variable" href="game__constants_8h.html#a93be8e1dbd093081622d8b52a75869c6">AVERAGE_ANNUAL_TEMPERATURE</a> : <a class="code hl_variable" href="classweather__manager.html#a7340d2e1861893258606e6910cf79137">temperature</a> ) +</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>                     ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;new_game ? 0 : <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.get_temperature( location ) + temp_mod );</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    <a class="code hl_variable" href="classweather__manager.html#a1d0649c891e7066e0bee55a0259764b3">temperature_cache</a>.emplace( std::make_pair( location, temp ) );</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    <span class="keywordflow">return</span> temp;</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>}</div>
<div class="ttc" id="aclassweather__manager_html_a7340d2e1861893258606e6910cf79137"><div class="ttname"><a href="classweather__manager.html#a7340d2e1861893258606e6910cf79137">weather_manager::temperature</a></div><div class="ttdeci">int temperature</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00188">weather.h:188</a></div></div>
<div class="ttc" id="agame_8cpp_html_a2924321647561aca9977ca98b57874b5"><div class="ttname"><a href="game_8cpp.html#a2924321647561aca9977ca98b57874b5">get_heat_radiation</a></div><div class="ttdeci">int get_heat_radiation(const tripoint &amp;location, bool direct)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01800">game.cpp:1800</a></div></div>
<div class="ttc" id="agame_8cpp_html_a58c14933d94a161c5ab89203559897ff"><div class="ttname"><a href="game_8cpp.html#a58c14933d94a161c5ab89203559897ff">get_convection_temperature</a></div><div class="ttdeci">int get_convection_temperature(const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l01844">game.cpp:1844</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a93be8e1dbd093081622d8b52a75869c6"><div class="ttname"><a href="game__constants_8h.html#a93be8e1dbd093081622d8b52a75869c6">AVERAGE_ANNUAL_TEMPERATURE</a></div><div class="ttdeci">static constexpr int AVERAGE_ANNUAL_TEMPERATURE</div><div class="ttdoc">Average annual temperature in F used for climate, weather and temperature calculation.</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00146">game_constants.h:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game__constants_8h_source.html#l00146">AVERAGE_ANNUAL_TEMPERATURE</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="game_8cpp_source.html#l01844">get_convection_temperature()</a>, <a class="el" href="game_8cpp_source.html#l01800">get_heat_radiation()</a>, <a class="el" href="weather_8h_source.html#l00188">weather_manager::temperature</a>, <a class="el" href="weather_8h_source.html#l00208">weather_manager::temperature_cache</a>, and <a class="el" href="point_8h_source.html#l00138">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="character_8cpp_source.html#l04882">Character::calc_needs_rates()</a>, <a class="el" href="character__display_8cpp_source.html#l00760">draw_speed_tab()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00934">vehicle::engine_cold_factor()</a>, <a class="el" href="character__turn_8cpp_source.html#l00094">Character::recalc_speed_bonus()</a>, <a class="el" href="suffer_8cpp_source.html#l00718">Character::suffer_in_sunlight()</a>, and <a class="el" href="weather_8cpp_source.html#l01027">warm_enough_to_plant()</a>.</p>

</div>
</div>
<a id="ga3a87174f8d5ac7f4c8153f2001df4737" name="ga3a87174f8d5ac7f4c8153f2001df4737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3a87174f8d5ac7f4c8153f2001df4737">&#9670;&nbsp;</a></span>get_temperature() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int weather_manager::get_temperature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01129">1129</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>{</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>    <span class="keywordflow">if</span>( location.<a class="code hl_function" href="classcoords_1_1coord__point.html#a2a7eadc4507dc5944b117ede64d77944">z</a>() &lt; 0 ) {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="game__constants_8h.html#a93be8e1dbd093081622d8b52a75869c6">AVERAGE_ANNUAL_TEMPERATURE</a>;</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> </div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> abs_ms = project_to&lt;coords::ms&gt;( location ).raw();</div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>    <a class="code hl_struct" href="structw__point.html">w_point</a> w = <a class="code hl_function" href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">get_cur_weather_gen</a>().<a class="code hl_function" href="classweather__generator.html#a6c0ba4e897f29b3a9e907ad5ed38396d">get_weather</a>( abs_ms, <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed() );</div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a>( w.<a class="code hl_variable" href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">temperature</a> );</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>}</div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a2a7eadc4507dc5944b117ede64d77944"><div class="ttname"><a href="classcoords_1_1coord__point.html#a2a7eadc4507dc5944b117ede64d77944">coords::coord_point::z</a></div><div class="ttdeci">constexpr auto &amp; z()</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00133">coordinates.h:133</a></div></div>
<div class="ttc" id="aclassweather__generator_html_a6c0ba4e897f29b3a9e907ad5ed38396d"><div class="ttname"><a href="classweather__generator.html#a6c0ba4e897f29b3a9e907ad5ed38396d">weather_generator::get_weather</a></div><div class="ttdeci">w_point get_weather(const tripoint &amp;, const time_point &amp;, unsigned seed) const</div><div class="ttdoc">TODO: Remove the regular tripoint overload, replace with *_abs_ms one.</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8cpp_source.html#l00117">weather_gen.cpp:117</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga090dd5274c7af40d32814a41f2e16fe0"><div class="ttname"><a href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">weather_manager::get_cur_weather_gen</a></div><div class="ttdeci">const weather_generator &amp; get_cur_weather_gen() const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01049">weather.cpp:1049</a></div></div>
<div class="ttc" id="anamespaceunits_html_a375816854bc926ebda4d9240e7d6cf64"><div class="ttname"><a href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_millidegree_celsius_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00124">units_temperature.h:124</a></div></div>
<div class="ttc" id="astructw__point_html"><div class="ttname"><a href="structw__point.html">w_point</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00015">weather_gen.h:15</a></div></div>
<div class="ttc" id="astructw__point_html_a3002b10d38744db5d25fa1011e28e09e"><div class="ttname"><a href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">w_point::temperature</a></div><div class="ttdeci">units::temperature temperature</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00016">weather_gen.h:16</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game__constants_8h_source.html#l00146">AVERAGE_ANNUAL_TEMPERATURE</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l01049">weather_manager::get_cur_weather_gen()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00117">weather_generator::get_weather()</a>, <a class="el" href="weather__gen_8h_source.html#l00016">w_point::temperature</a>, <a class="el" href="units__temperature_8h_source.html#l00124">units::to_fahrenheit()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="coordinates_8h_source.html#l00133">coords::coord_point&lt; Point, Origin, Scale &gt;::z()</a>.</p>

</div>
</div>
<a id="ga9ddaa9d8c10baad01cc0ef885a3e65f4" name="ga9ddaa9d8c10baad01cc0ef885a3e65f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ddaa9d8c10baad01cc0ef885a3e65f4">&#9670;&nbsp;</a></span>get_water_temperature()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int weather_manager::get_water_temperature </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01140">1140</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>{</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classweather__manager.html#a2e1b9e5fb95e8fb47618f2a48ee747f6">water_temperature</a>;</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>}</div>
<div class="ttc" id="aclassweather__manager_html_a2e1b9e5fb95e8fb47618f2a48ee747f6"><div class="ttname"><a href="classweather__manager.html#a2e1b9e5fb95e8fb47618f2a48ee747f6">weather_manager::water_temperature</a></div><div class="ttdeci">int water_temperature</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00190">weather.h:190</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8h_source.html#l00190">weather_manager::water_temperature</a>.</p>

</div>
</div>
<a id="gaa7b33196bf530c8b26654a0adf355165" name="gaa7b33196bf530c8b26654a0adf355165"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa7b33196bf530c8b26654a0adf355165">&#9670;&nbsp;</a></span>get_weather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classweather__manager.html">weather_manager</a> &amp; get_weather </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00064">64</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>{</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="keywordflow">return</span> *<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;weather_manager_ptr;</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, <a class="el" href="lightmap_8cpp_source.html#l00249">map::build_sunlight_cache()</a>, <a class="el" href="lightmap_8cpp_source.html#l00082">map::build_transparency_cache()</a>, <a class="el" href="bionics_8cpp_source.html#l01153">Character::burn_fuel()</a>, <a class="el" href="character_8cpp_source.html#l04882">Character::calc_needs_rates()</a>, <a class="el" href="character_8cpp_source.html#l10235">Character::can_hear()</a>, <a class="el" href="relic_8cpp_source.html#l00276">relic_funcs::check_recharge_reqs()</a>, <a class="el" href="weather_8cpp_source.html#l00143">current_weather()</a>, <a class="el" href="debug__menu_8cpp_source.html#l01351">debug_menu::debug()</a>, <a class="el" href="character__display_8cpp_source.html#l01063">character_display::disp_info()</a>, <a class="el" href="vehicle_8cpp_source.html#l03785">vehicle::do_environmental_effects()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01303">draw_loc_labels()</a>, <a class="el" href="character__display_8cpp_source.html#l00760">draw_speed_tab()</a>, <a class="el" href="panels_8cpp_source.html#l01924">draw_time_classic()</a>, <a class="el" href="panels_8cpp_source.html#l01846">draw_weather_classic()</a>, <a class="el" href="vehicle__use_8cpp_source.html#l00934">vehicle::engine_cold_factor()</a>, <a class="el" href="sounds_8cpp_source.html#l00279">get_signal_for_hordes()</a>, <a class="el" href="panels_8cpp_source.html#l00332">get_temp()</a>, <a class="el" href="player__hardcoded__effects_8cpp_source.html#l00472">Character::hardcoded_effects()</a>, <a class="el" href="gamemode__defense_8cpp_source.html#l00098">defense_game::init()</a>, <a class="el" href="gamemode__tutorial_8cpp_source.html#l00107">tutorial_game::init()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l01456">firestarter_actor::light_mod()</a>, <a class="el" href="weather_8cpp_source.html#l00445">weather_effect::lightning()</a>, <a class="el" href="vehicle_8cpp_source.html#l01150">vehicle::part_vpower_w()</a>, <a class="el" href="bionics_8cpp_source.html#l01311">Character::passive_power_gen()</a>, <a class="el" href="iuse_8cpp_source.html#l07101">photo_def_for_camera_point()</a>, <a class="el" href="item_8cpp_source.html#l09586">item::process()</a>, <a class="el" href="bionics_8cpp_source.html#l01523">Character::process_bionic()</a>, <a class="el" href="item_8cpp_source.html#l09262">item::process_extinguish()</a>, <a class="el" href="item_8cpp_source.html#l08946">item::process_rot()</a>, <a class="el" href="sounds_8cpp_source.html#l00386">sounds::process_sound_markers()</a>, <a class="el" href="sounds_8cpp_source.html#l00304">sounds::process_sounds()</a>, <a class="el" href="monster_8cpp_source.html#l02170">monster::process_turn()</a>, <a class="el" href="character__turn_8cpp_source.html#l00094">Character::recalc_speed_bonus()</a>, <a class="el" href="map_8cpp_source.html#l07132">map::remove_rotten_items()</a>, <a class="el" href="panels_8cpp_source.html#l01537">render_wind()</a>, <a class="el" href="map__field_8cpp_source.html#l00251">map::spread_gas()</a>, <a class="el" href="suffer_8cpp_source.html#l01321">Character::suffer_from_artifacts()</a>, <a class="el" href="suffer_8cpp_source.html#l00718">Character::suffer_in_sunlight()</a>, <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>, <a class="el" href="vehicle_8cpp_source.html#l04718">vehicle::total_wind_epower_w()</a>, <a class="el" href="character_8cpp_source.html#l05179">Character::update_bodytemp()</a>, <a class="el" href="iuse__actor_8cpp_source.html#l00214">iuse_transform::use()</a>, <a class="el" href="weather_8cpp_source.html#l01027">warm_enough_to_plant()</a>, <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="gac4eaea116f04d4ab4f4624759d4df423" name="gac4eaea116f04d4ab4f4624759d4df423"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac4eaea116f04d4ab4f4624759d4df423">&#9670;&nbsp;</a></span>get_wind_arrow()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_wind_arrow </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dirangle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00899">899</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>{</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    std::string wind_arrow;</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>    <span class="keywordflow">if</span>( dirangle &lt; 0 || dirangle &gt;= 360 ) {</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        wind_arrow.clear();</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 23 || dirangle &gt; 338 ) {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>        wind_arrow = <span class="stringliteral">&quot;\u21D3&quot;</span>;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 68 ) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        wind_arrow = <span class="stringliteral">&quot;\u21D9&quot;</span>;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 113 ) {</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        wind_arrow = <span class="stringliteral">&quot;\u21D0&quot;</span>;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 158 ) {</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        wind_arrow = <span class="stringliteral">&quot;\u21D6&quot;</span>;</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 203 ) {</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        wind_arrow = <span class="stringliteral">&quot;\u21D1&quot;</span>;</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 248 ) {</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        wind_arrow = <span class="stringliteral">&quot;\u21D7&quot;</span>;</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dirangle &lt;= 293 ) {</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        wind_arrow = <span class="stringliteral">&quot;\u21D2&quot;</span>;</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        wind_arrow = <span class="stringliteral">&quot;\u21D8&quot;</span>;</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>    <span class="keywordflow">return</span> wind_arrow;</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="debug__menu_8cpp_source.html#l01351">debug_menu::debug()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, and <a class="el" href="panels_8cpp_source.html#l01537">render_wind()</a>.</p>

</div>
</div>
<a id="ga55efca6f58209265ac7223b4c03290d0" name="ga55efca6f58209265ac7223b4c03290d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55efca6f58209265ac7223b4c03290d0">&#9670;&nbsp;</a></span>get_wind_color()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classnc__color.html">nc_color</a> get_wind_color </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>windpower</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00817">817</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>{</div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> windcolor;</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <span class="keywordflow">if</span>( windpower &lt; 1 ) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        windcolor = <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 3 ) {</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        windcolor = <a class="code hl_define" href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a>;</div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 7 ) {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        windcolor = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 12 ) {</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>        windcolor = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 18 ) {</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        windcolor = <a class="code hl_define" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a>;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 24 ) {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        windcolor = <a class="code hl_define" href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a>;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 31 ) {</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        windcolor = <a class="code hl_define" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 38 ) {</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        windcolor = <a class="code hl_define" href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a>;</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 46 ) {</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        windcolor = <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 54 ) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>        windcolor = <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 63 ) {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        windcolor = <a class="code hl_define" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a>;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt; 72 ) {</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        windcolor = <a class="code hl_define" href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a>;</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &gt; 72 ) {</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        windcolor = <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>    }</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>    <span class="keywordflow">return</span> windcolor;</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>}</div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00348">color.h:349</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00018">color.h:18</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="acolor_8h_html_a2740fd73e1b9184c904d95a580c5ea7b"><div class="ttname"><a href="color_8h.html#a2740fd73e1b9184c904d95a580c5ea7b">c_blue</a></div><div class="ttdeci">#define c_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00023">color.h:23</a></div></div>
<div class="ttc" id="acolor_8h_html_a5738d18ff9e165cca088a623cb1883ae"><div class="ttname"><a href="color_8h.html#a5738d18ff9e165cca088a623cb1883ae">c_dark_gray</a></div><div class="ttdeci">#define c_dark_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00020">color.h:20</a></div></div>
<div class="ttc" id="acolor_8h_html_a7b00fb82de0be83f6fc5f7965ea86623"><div class="ttname"><a href="color_8h.html#a7b00fb82de0be83f6fc5f7965ea86623">c_light_blue</a></div><div class="ttdeci">#define c_light_blue</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00029">color.h:29</a></div></div>
<div class="ttc" id="acolor_8h_html_a894265dad49331c44392826fc52b848f"><div class="ttname"><a href="color_8h.html#a894265dad49331c44392826fc52b848f">c_light_cyan</a></div><div class="ttdeci">#define c_light_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00030">color.h:30</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00024">color.h:24</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00023">c_blue</a>, <a class="el" href="color_8h_source.html#l00024">c_cyan</a>, <a class="el" href="color_8h_source.html#l00020">c_dark_gray</a>, <a class="el" href="color_8h_source.html#l00029">c_light_blue</a>, <a class="el" href="color_8h_source.html#l00030">c_light_cyan</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, and <a class="el" href="color_8h_source.html#l00018">c_white</a>.</p>

<p class="reference">Referenced by <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, and <a class="el" href="panels_8cpp_source.html#l01537">render_wind()</a>.</p>

</div>
</div>
<a id="gaa3cd7d1232c28c6ccb1e136737ba2c11" name="gaa3cd7d1232c28c6ccb1e136737ba2c11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa3cd7d1232c28c6ccb1e136737ba2c11">&#9670;&nbsp;</a></span>get_wind_desc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string get_wind_desc </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>windpower</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00971">971</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>{</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    std::string winddesc;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="keywordflow">if</span>( windpower &lt; 1 ) {</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Calm&quot;</span> );</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 3 ) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light Air&quot;</span> );</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 7 ) {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Light Breeze&quot;</span> );</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 12 ) {</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Gentle Breeze&quot;</span> );</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 18 ) {</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Moderate Breeze&quot;</span> );</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 24 ) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Fresh Breeze&quot;</span> );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 31 ) {</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Strong Breeze&quot;</span> );</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 38 ) {</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Moderate Gale&quot;</span> );</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 46 ) {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Gale&quot;</span> );</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 54 ) {</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Strong Gale&quot;</span> );</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 63 ) {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Whole Gale&quot;</span> );</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &lt;= 72 ) {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Violent Storm&quot;</span> );</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( windpower &gt; 72 ) {</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>        <span class="comment">// Anything above Whole Gale is very unlikely to happen and has no additional effects.</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        winddesc = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Hurricane&quot;</span> );</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>    }</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>    <span class="keywordflow">return</span> winddesc;</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>.</p>

<p class="reference">Referenced by <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00123">weather_generator::get_weather()</a>, and <a class="el" href="panels_8cpp_source.html#l01537">render_wind()</a>.</p>

</div>
</div>
<a id="ga53fe559b9e45368d58ff93949e1bf2ee" name="ga53fe559b9e45368d58ff93949e1bf2ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga53fe559b9e45368d58ff93949e1bf2ee">&#9670;&nbsp;</a></span>glare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void glare </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Glare. </p>
<p >Causes glare effect to player's eyes if they are not wearing applicable eye protection. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">intensity</td><td>Level of sun brighthess </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00075">75</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>{</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">//General prepequisites for glare</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a>() || !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_in_sunlight( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() ) || <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.in_sleep_state() ||</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn_with_flag( <a class="code hl_function" href="weather_8cpp.html#aa94108fad7ac28c25678804703bc5568">flag_SUN_GLASSES</a> ) ||</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_bionic( <a class="code hl_variable" href="weather_8cpp.html#ab38a96846200ba0c103a2bd690fe8d6d">bio_sunglasses</a> ) ||</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_blind() ) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> dur = 0_turns;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> *<a class="code hl_class" href="classeffect.html">effect</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <a class="code hl_enumeration" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a> = <a class="code hl_function" href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> );</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    <span class="keywordflow">if</span>( season == <a class="code hl_enumvalue" href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a> ) {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="comment">//Winter snow glare: for both clear &amp; sunny weather</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <a class="code hl_class" href="classeffect.html">effect</a> = &amp;<a class="code hl_variable" href="weather_8cpp.html#a358c302c0b0f27449670ecbee91e59da">effect_snow_glare</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        dur = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( *<a class="code hl_class" href="classeffect.html">effect</a> ) ? 1_turns : 2_turns;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( w-&gt;<a class="code hl_variable" href="structweather__type.html#af895bf8ea3e6f626e43c6a0aa7e66fca">sun_intensity</a> == <a class="code hl_enumvalue" href="weather__type_8h.html#a951701bd5446ac796b3a62dadcdb61f1a8d966b2253a917086c8604959e152243">sun_intensity_type::high</a> ) {</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="comment">//Sun glare: only for bright sunny weather</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <a class="code hl_class" href="classeffect.html">effect</a> = &amp;<a class="code hl_variable" href="weather_8cpp.html#a9ac9c2ddc2df14bf9add40da3c8cd5d9">effect_glare</a>;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        dur = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( *<a class="code hl_class" href="classeffect.html">effect</a> ) ? 1_turns : 2_turns;</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    }</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">//apply final glare effect</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keywordflow">if</span>( dur &gt; 0_turns &amp;&amp; <a class="code hl_class" href="classeffect.html">effect</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>        <span class="comment">//enhance/reduce by some traits</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_trait( <a class="code hl_variable" href="weather_8cpp.html#a12b7829686850d147418fab7d1cec22f">trait_CEPH_VISION</a> ) ) {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            dur = dur * 2;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>        }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.add_env_effect( *<a class="code hl_class" href="classeffect.html">effect</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, 2, dur );</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>}</div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a></div><div class="ttdeci">@ bp_eyes</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a81656706da6c7486137ad8578c0f523e"><div class="ttname"><a href="calendar_8cpp.html#a81656706da6c7486137ad8578c0f523e">season_of_year</a></div><div class="ttdeci">season_type season_of_year(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00547">calendar.cpp:547</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1b"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1b">season_type</a></div><div class="ttdeci">season_type</div><div class="ttdoc">Real world seasons.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00017">calendar.h:17</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873"><div class="ttname"><a href="calendar_8h.html#a5ac915753729cd68b608506d3c63ad1ba1d8c9db74467f6c2fdad36f154ca6873">WINTER</a></div><div class="ttdeci">@ WINTER</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00021">calendar.h:21</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">clipped_unit::season</a></div><div class="ttdeci">@ season</div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00160">effect.h:161</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; effect_type &gt;</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="astructweather__type_html_af895bf8ea3e6f626e43c6a0aa7e66fca"><div class="ttname"><a href="structweather__type.html#af895bf8ea3e6f626e43c6a0aa7e66fca">weather_type::sun_intensity</a></div><div class="ttdeci">sun_intensity_type sun_intensity</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00121">weather_type.h:121</a></div></div>
<div class="ttc" id="aweather_8cpp_html_a12b7829686850d147418fab7d1cec22f"><div class="ttname"><a href="weather_8cpp.html#a12b7829686850d147418fab7d1cec22f">trait_CEPH_VISION</a></div><div class="ttdeci">static const trait_id trait_CEPH_VISION(&quot;CEPH_VISION&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_a358c302c0b0f27449670ecbee91e59da"><div class="ttname"><a href="weather_8cpp.html#a358c302c0b0f27449670ecbee91e59da">effect_snow_glare</a></div><div class="ttdeci">static const efftype_id effect_snow_glare(&quot;snow_glare&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_a9ac9c2ddc2df14bf9add40da3c8cd5d9"><div class="ttname"><a href="weather_8cpp.html#a9ac9c2ddc2df14bf9add40da3c8cd5d9">effect_glare</a></div><div class="ttdeci">static const efftype_id effect_glare(&quot;glare&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_aa94108fad7ac28c25678804703bc5568"><div class="ttname"><a href="weather_8cpp.html#aa94108fad7ac28c25678804703bc5568">flag_SUN_GLASSES</a></div><div class="ttdeci">static const std::string flag_SUN_GLASSES(&quot;SUN_GLASSES&quot;)</div></div>
<div class="ttc" id="aweather_8cpp_html_ab38a96846200ba0c103a2bd690fe8d6d"><div class="ttname"><a href="weather_8cpp.html#ab38a96846200ba0c103a2bd690fe8d6d">bio_sunglasses</a></div><div class="ttdeci">static const bionic_id bio_sunglasses(&quot;bio_sunglasses&quot;)</div></div>
<div class="ttc" id="aweather__type_8h_html_a951701bd5446ac796b3a62dadcdb61f1a8d966b2253a917086c8604959e152243"><div class="ttname"><a href="weather__type_8h.html#a951701bd5446ac796b3a62dadcdb61f1a8d966b2253a917086c8604959e152243">sun_intensity_type::high</a></div><div class="ttdeci">@ high</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp.html#ab38a96846200ba0c103a2bd690fe8d6d">bio_sunglasses</a>, <a class="el" href="bodypart_8h_source.html#l00042">bp_eyes</a>, <a class="el" href="weather_8cpp.html#a9ac9c2ddc2df14bf9add40da3c8cd5d9">effect_glare</a>, <a class="el" href="weather_8cpp.html#a358c302c0b0f27449670ecbee91e59da">effect_snow_glare</a>, <a class="el" href="weather_8cpp.html#aa94108fad7ac28c25678804703bc5568">flag_SUN_GLASSES()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather__type_8h.html#a951701bd5446ac796b3a62dadcdb61f1a8d966b2253a917086c8604959e152243">high</a>, <a class="el" href="weather_8cpp_source.html#l00069">is_player_outside()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a3f1b0333a44fd5f611d3429887eba4a8">season</a>, <a class="el" href="calendar_8cpp_source.html#l00547">season_of_year()</a>, <a class="el" href="weather__type_8h_source.html#l00121">weather_type::sun_intensity</a>, <a class="el" href="weather_8cpp.html#a12b7829686850d147418fab7d1cec22f">trait_CEPH_VISION</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, and <a class="el" href="calendar_8h_source.html#l00021">WINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00522">handle_weather_effects()</a>.</p>

</div>
</div>
<a id="ga3fcb6802dadec5fef6581ffc25f19c9c" name="ga3fcb6802dadec5fef6581ffc25f19c9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3fcb6802dadec5fef6581ffc25f19c9c">&#9670;&nbsp;</a></span>handle_weather_effects()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void handle_weather_effects </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;&#160;</td>
          <td class="paramname"><em>w</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00522">522</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>{</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>    <span class="keywordflow">if</span>( w-&gt;<a class="code hl_variable" href="structweather__type.html#a417de895446fdee540d2a39484d7563c">rains</a> &amp;&amp; w-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> != <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a334c4a4c42fdb79d7ebc3e73b517e6f8">precip_class::none</a> ) {</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        <a class="code hl_function" href="group__Weather.html#gaee2ea0506e3eef92eb305bf1289204aa">fill_water_collectors</a>( <a class="code hl_function" href="group__Weather.html#gabb84f11909a2789fefae8268e3cf92d0">precip_mm_per_hour</a>( w-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> ),</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>                               w-&gt;<a class="code hl_variable" href="structweather__type.html#aaae01bd8265eee84e7ad2f5db6e42f34">acidic</a> );</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keywordtype">int</span> wetness = 0;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> decay_time = 60_turns;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        <span class="keywordflow">if</span>( w-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a> ) {</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>            wetness = 5;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            decay_time = 5_turns;</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( w-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a> ) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>            wetness = 30;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>            decay_time = 15_turns;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( w-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a> ) {</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>            decay_time = 45_turns;</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            wetness = 60;</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>        }</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.decay_fields_and_scent( decay_time );</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>        <a class="code hl_function" href="group__Weather.html#ga65f6fab727709c98cc9959f01ecac53b">weather_effect::wet_player</a>( wetness );</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    }</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <a class="code hl_function" href="group__Weather.html#ga53fe559b9e45368d58ff93949e1bf2ee">glare</a>( w );</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span> </div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_class" href="classeffect.html">effect</a> : w-&gt;<a class="code hl_variable" href="structweather__type.html#a54fbec40e14fd7f773d51fba58aa5c23">effects</a> ) {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>        <a class="code hl_class" href="classeffect.html">effect</a>.first( <a class="code hl_class" href="classeffect.html">effect</a>.second );</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    }</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga53fe559b9e45368d58ff93949e1bf2ee"><div class="ttname"><a href="group__Weather.html#ga53fe559b9e45368d58ff93949e1bf2ee">glare</a></div><div class="ttdeci">void glare(const weather_type_id &amp;w)</div><div class="ttdoc">Glare.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00075">weather.cpp:75</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga65f6fab727709c98cc9959f01ecac53b"><div class="ttname"><a href="group__Weather.html#ga65f6fab727709c98cc9959f01ecac53b">weather_effect::wet_player</a></div><div class="ttdeci">void wet_player(int amount)</div><div class="ttdoc">Main routine for wet effects caused by weather.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00372">weather.cpp:372</a></div></div>
<div class="ttc" id="agroup__Weather_html_gabb84f11909a2789fefae8268e3cf92d0"><div class="ttname"><a href="group__Weather.html#gabb84f11909a2789fefae8268e3cf92d0">precip_mm_per_hour</a></div><div class="ttdeci">double precip_mm_per_hour(precip_class const p)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00511">weather.cpp:511</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaee2ea0506e3eef92eb305bf1289204aa"><div class="ttname"><a href="group__Weather.html#gaee2ea0506e3eef92eb305bf1289204aa">fill_water_collectors</a></div><div class="ttdeci">static void fill_water_collectors(int mmPerHour, bool acid)</div><div class="ttdoc">Fill funnels and makeshift funnels from weather effects.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00353">weather.cpp:353</a></div></div>
<div class="ttc" id="astructweather__type_html_a417de895446fdee540d2a39484d7563c"><div class="ttname"><a href="structweather__type.html#a417de895446fdee540d2a39484d7563c">weather_type::rains</a></div><div class="ttdeci">bool rains</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00116">weather_type.h:116</a></div></div>
<div class="ttc" id="astructweather__type_html_a54fbec40e14fd7f773d51fba58aa5c23"><div class="ttname"><a href="structweather__type.html#a54fbec40e14fd7f773d51fba58aa5c23">weather_type::effects</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; weather_effect_fn, int &gt; &gt; effects</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00118">weather_type.h:118</a></div></div>
<div class="ttc" id="astructweather__type_html_a61499fdc29ba6cd5b99ebf0254945c81"><div class="ttname"><a href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">weather_type::precip</a></div><div class="ttdeci">precip_class precip</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00115">weather_type.h:115</a></div></div>
<div class="ttc" id="astructweather__type_html_aaae01bd8265eee84e7ad2f5db6e42f34"><div class="ttname"><a href="structweather__type.html#aaae01bd8265eee84e7ad2f5db6e42f34">weather_type::acidic</a></div><div class="ttdeci">bool acidic</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00117">weather_type.h:117</a></div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a334c4a4c42fdb79d7ebc3e73b517e6f8"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a334c4a4c42fdb79d7ebc3e73b517e6f8">precip_class::none</a></div><div class="ttdeci">@ none</div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a></div><div class="ttdeci">@ heavy</div></div>
<div class="ttc" id="aweather__type_8h_html_a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f"><div class="ttname"><a href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a></div><div class="ttdeci">@ very_light</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather__type_8h_source.html#l00117">weather_type::acidic</a>, <a class="el" href="weather__type_8h_source.html#l00118">weather_type::effects</a>, <a class="el" href="weather_8cpp_source.html#l00353">fill_water_collectors()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l00075">glare()</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">heavy</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">light</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a334c4a4c42fdb79d7ebc3e73b517e6f8">none</a>, <a class="el" href="weather__type_8h_source.html#l00115">weather_type::precip</a>, <a class="el" href="weather_8cpp_source.html#l00511">precip_mm_per_hour()</a>, <a class="el" href="weather__type_8h_source.html#l00116">weather_type::rains</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">very_light</a>, and <a class="el" href="weather_8cpp_source.html#l00372">weather_effect::wet_player()</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l01343">game::do_turn()</a>.</p>

</div>
</div>
<a id="gadf065e79a6c231ceff618552f791c1b1" name="gadf065e79a6c231ceff618552f791c1b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf065e79a6c231ceff618552f791c1b1">&#9670;&nbsp;</a></span>incident_sunlight()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int incident_sunlight </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a> &amp;&#160;</td>
          <td class="paramname"><em>wtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Amount of sunlight incident at the ground, taking weather and time of day into account. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00107">107</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>{</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="keywordflow">return</span> std::max&lt;float&gt;( 0.0f, <a class="code hl_function" href="calendar_8cpp.html#aaffe4a17e181d5522e294ab936f3f368">sunlight</a>( t, <span class="keyword">false</span> ) + wtype-&gt;<a class="code hl_variable" href="structweather__type.html#a17138c6161d77434f155a62cca95efd1">light_modifier</a> );</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_aaffe4a17e181d5522e294ab936f3f368"><div class="ttname"><a href="calendar_8cpp.html#aaffe4a17e181d5522e294ab936f3f368">sunlight</a></div><div class="ttdeci">float sunlight(const time_point &amp;p, const bool vision)</div><div class="ttdoc">Returns the current sunlight or moonlight level through the preceding functions.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00199">calendar.cpp:199</a></div></div>
<div class="ttc" id="astructweather__type_html_a17138c6161d77434f155a62cca95efd1"><div class="ttname"><a href="structweather__type.html#a17138c6161d77434f155a62cca95efd1">weather_type::light_modifier</a></div><div class="ttdeci">int light_modifier</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00112">weather_type.h:112</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather__type_8h_source.html#l00112">weather_type::light_modifier</a>, and <a class="el" href="calendar_8cpp_source.html#l00199">sunlight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l01153">Character::burn_fuel()</a>, <a class="el" href="weather_8cpp_source.html#l00112">proc_weather_sum()</a>, and <a class="el" href="vehicle_8cpp_source.html#l04696">vehicle::total_solar_epower_w()</a>.</p>

</div>
</div>
<a id="ga29f289ab496b2f58d297384490905e92" name="ga29f289ab496b2f58d297384490905e92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga29f289ab496b2f58d297384490905e92">&#9670;&nbsp;</a></span>is_player_outside()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool is_player_outside </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00069">69</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>{</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">is_outside</a>( <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>().posx(),</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>                                        <a class="code hl_function" href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a>().posy() ) ) &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() &gt;= 0;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>}</div>
<div class="ttc" id="acharacter_8cpp_html_a2fcb25d686f4a35fca374c6f71280311"><div class="ttname"><a href="character_8cpp.html#a2fcb25d686f4a35fca374c6f71280311">get_player_character</a></div><div class="ttdeci">Character &amp; get_player_character()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00393">character.cpp:393</a></div></div>
<div class="ttc" id="aclassmap_html_a3bc75c8b706a54c1575b4460b2f363b1"><div class="ttname"><a href="classmap.html#a3bc75c8b706a54c1575b4460b2f363b1">map::is_outside</a></div><div class="ttdeci">bool is_outside(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02601">map.cpp:2601</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00146">map.cpp:146</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="character_8cpp_source.html#l00393">get_player_character()</a>, and <a class="el" href="map_8cpp_source.html#l02601">map::is_outside()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00488">weather_effect::acid()</a>, <a class="el" href="weather_8cpp_source.html#l00075">glare()</a>, <a class="el" href="weather_8cpp_source.html#l00461">weather_effect::light_acid()</a>, and <a class="el" href="weather_8cpp_source.html#l00372">weather_effect::wet_player()</a>.</p>

</div>
</div>
<a id="gaba2eacc697effccea9cd905bddfa9fa6" name="gaba2eacc697effccea9cd905bddfa9fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaba2eacc697effccea9cd905bddfa9fa6">&#9670;&nbsp;</a></span>is_wind_blocker()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool is_wind_blocker </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00965">965</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>{</div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;m.has_flag( <span class="stringliteral">&quot;BLOCK_WIND&quot;</span>, location );</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="game_8cpp_source.html#l00281">g</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00938">get_local_windpower()</a>.</p>

</div>
</div>
<a id="gac7b098483cb868b6791b20fc730ca2b8" name="gac7b098483cb868b6791b20fc730ca2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac7b098483cb868b6791b20fc730ca2b8">&#9670;&nbsp;</a></span>light_acid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_effect::light_acid </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intensity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Acid drizzle. </p>
<p >Causes minor pain only. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00461">461</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>{</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( <a class="code hl_function" href="classtime__duration.html#a24e810d76ce97cfab15fbe68a32a00ca">time_duration::from_seconds</a>( intensity ) ) &amp;&amp; <a class="code hl_function" href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a>() ) {</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weapon.has_flag( <span class="stringliteral">&quot;RAIN_PROTECT&quot;</span> ) &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 3 ) ) {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s protects you from the acidic drizzle.&quot;</span> ), <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.weapon.tname() );</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.worn_with_flag( <span class="stringliteral">&quot;RAINPROOF&quot;</span> ) &amp;&amp; !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) {</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>                <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your clothing protects you from the acidic drizzle.&quot;</span> ) );</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <span class="keywordtype">bool</span> has_helmet = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_wearing_power_armor( &amp;has_helmet ) &amp;&amp; ( has_helmet || !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 4 ) ) ) {</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your power armor protects you from the acidic drizzle.&quot;</span> ) );</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The acid rain stings, but is mostly harmless for now&quot;</span> ) );</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 10 ) &amp;&amp; ( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.get_pain() &lt; 10 ) ) {</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mod_pain( 1 );</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                    }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>                }</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>            }</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        }</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>    }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>}</div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="calendar_8h_source.html#l00208">time_duration::from_seconds()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l00069">is_player_outside()</a>, <a class="el" href="enums_8h_source.html#l00264">m_warning</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, and <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
<a id="gabb4f1f70746ab4ba20a266e7c7ecdd75" name="gabb4f1f70746ab4ba20a266e7c7ecdd75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb4f1f70746ab4ba20a266e7c7ecdd75">&#9670;&nbsp;</a></span>lightning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_effect::lightning </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intensity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lightning. </p>
<p >Chance of lightning illumination for the current turn when aboveground. Thunder.</p>
<p >This used to manifest actual lightning on the map, causing fires and such, but since such effects only manifest properly near the player due to the "reality bubble", this was causing undesired metagame tactics such as players leaving their shelter for a more "expendable" area during lightning storms. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00445">445</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>{</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( intensity ) ) {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() &gt;= 0 ) {</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;A flash of lightning illuminates your surroundings!&quot;</span> ) );</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;thunder_near&quot;</span>, 100, <a class="code hl_function" href="rng_8cpp.html#a5dafa7cca21f61605e9da5e915f8931a">random_direction</a>() );</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>            <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_variable" href="classweather__manager.html#a2f3392f297f6df41358a1e3a7f21d4b4">lightning_active</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>        }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>        <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_variable" href="classweather__manager.html#a2f3392f297f6df41358a1e3a7f21d4b4">lightning_active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    }</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>}</div>
<div class="ttc" id="aclassweather__manager_html_a2f3392f297f6df41358a1e3a7f21d4b4"><div class="ttname"><a href="classweather__manager.html#a2f3392f297f6df41358a1e3a7f21d4b4">weather_manager::lightning_active</a></div><div class="ttdeci">bool lightning_active</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00191">weather.h:191</a></div></div>
<div class="ttc" id="anamespacesfx_html_a8fa2bb887ac81392fb686cc4079b5d5a"><div class="ttname"><a href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a></div><div class="ttdeci">void play_variant_sound(const std::string &amp;id, const std::string &amp;variant, int volume, units::angle angle, double pitch_min=-1.0, double pitch_max=-1.0)</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01597">sounds.cpp:1597</a></div></div>
<div class="ttc" id="arng_8cpp_html_a5dafa7cca21f61605e9da5e915f8931a"><div class="ttname"><a href="rng_8cpp.html#a5dafa7cca21f61605e9da5e915f8931a">random_direction</a></div><div class="ttdeci">units::angle random_direction()</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00037">rng.cpp:37</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="weather_8h_source.html#l00191">weather_manager::lightning_active</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="sounds_8cpp_source.html#l01597">sfx::play_variant_sound()</a>, and <a class="el" href="rng_8cpp_source.html#l00037">random_direction()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
<a id="ga67ab3b6b44de8758bb82f296ec36368a" name="ga67ab3b6b44de8758bb82f296ec36368a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67ab3b6b44de8758bb82f296ec36368a">&#9670;&nbsp;</a></span>local_windchill_hightemp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double local_windchill_hightemp </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temperature_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>humidity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>wind_mph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Model 2, warm wind chill</p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00775">775</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>{<span class="comment"></span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span><span class="comment">    /// Model 2, warm wind chill</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span><span class="comment"></span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    <span class="comment">// Source : http://en.wikipedia.org/wiki/Wind_chill#Australian_Apparent_Temperature</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>    <span class="comment">// Convert to meters per second.</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    <span class="keywordtype">double</span> wind_meters_per_sec = wind_mph * 0.44704;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <span class="keywordtype">double</span> temperature_c = <a class="code hl_function" href="namespaceunits.html#afa9852e3a9b191c2a281b722cb511619">units::fahrenheit_to_celsius</a>( temperature_f );</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span> </div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>    <span class="comment">// Cap the vapor pressure term to 50C of extra heat, as this term</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>    <span class="comment">// otherwise grows logistically to an asymptotic value of about 2e7</span></div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>    <span class="comment">// for large values of temperature. This is presumably due to the</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    <span class="comment">// model being designed for reasonable ambient temperature values,</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    <span class="comment">// rather than extremely high ones.</span></div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>    <span class="keywordtype">double</span> windchill_c = 0.33 * std::min&lt;float&gt;( 150.00, humidity / 100.00 * 6.105 *</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>                         std::exp( 17.27 * temperature_c / ( 237.70 + temperature_c ) ) )</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>                         - 0.70 * wind_meters_per_sec</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                         - 4.00;</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <span class="comment">// Convert to Fahrenheit, but omit the &#39;+ 32&#39; because we are only dealing with a piece of the felt air temperature equation.</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    <span class="keywordflow">return</span> windchill_c * 9 / 5;</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>}</div>
<div class="ttc" id="anamespaceunits_html_afa9852e3a9b191c2a281b722cb511619"><div class="ttname"><a href="namespaceunits.html#afa9852e3a9b191c2a281b722cb511619">units::fahrenheit_to_celsius</a></div><div class="ttdeci">constexpr double fahrenheit_to_celsius(double fahrenheit)</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00012">units_temperature.h:12</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="units__temperature_8h_source.html#l00012">units::fahrenheit_to_celsius()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00797">get_local_windchill()</a>.</p>

</div>
</div>
<a id="ga91c723a1c8fb88a019fd9155f7fd7c5d" name="ga91c723a1c8fb88a019fd9155f7fd7c5d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga91c723a1c8fb88a019fd9155f7fd7c5d">&#9670;&nbsp;</a></span>local_windchill_lowtemp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double local_windchill_lowtemp </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>temperature_f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>wind_mph</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >Model 1, cold wind chill (only valid for temps below 50F) Is also used as a standard in North America.</p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00758">758</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>{<span class="comment"></span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span><span class="comment">    /// Model 1, cold wind chill (only valid for temps below 50F)</span></div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span><span class="comment">    /// Is also used as a standard in North America.</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span><span class="comment"></span> </div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <span class="comment">// This model fails when wind is less than 3 mph</span></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <span class="keywordtype">double</span> wind_mph_lowcapped = std::max( 3.0, wind_mph );</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span> </div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    <span class="comment">// Temperature is removed at the end, because get_local_windchill is meant to calculate the difference.</span></div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="comment">// Source : http://en.wikipedia.org/wiki/Wind_chill#North_American_and_United_Kingdom_wind_chill_index</span></div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="keywordflow">return</span> 35.74</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>           + 0.6215 * temperature_f</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>           - 35.75 * std::pow( wind_mph_lowcapped, 0.16 )</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>           + 0.4275 * temperature_f * std::pow( wind_mph_lowcapped, 0.16 )</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>           - temperature_f;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00797">get_local_windchill()</a>.</p>

</div>
</div>
<a id="gabb84f11909a2789fefae8268e3cf92d0" name="gabb84f11909a2789fefae8268e3cf92d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabb84f11909a2789fefae8268e3cf92d0">&#9670;&nbsp;</a></span>precip_mm_per_hour()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double precip_mm_per_hour </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0">precip_class</a> const&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00511">511</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>{</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="keywordflow">return</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        p == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a> ? 0.5 :</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        p == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a> ? 1.5 :</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        p == <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a> ? 3   :</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        0;</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">heavy</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">light</a>, and <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">very_light</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00522">handle_weather_effects()</a>.</p>

</div>
</div>
<a id="gaebdc6d79e870b8cc932aa71a7da1c7f1" name="gaebdc6d79e870b8cc932aa71a7da1c7f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaebdc6d79e870b8cc932aa71a7da1c7f1">&#9670;&nbsp;</a></span>print_humidity()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string print_humidity </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>humidity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print relative humidity (no conversions.) </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00743">743</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>{</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <span class="keyword">const</span> std::string <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%.*f&quot;</span>, decimals, humidity );</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;humidity in percent&quot;</span>, <span class="stringliteral">&quot;%s%%&quot;</span> ), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>}</div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00431">string_formatter.h:431</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_af0c79b5c75a7cf2df78663485b03ed9a"><div class="ttname"><a href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a></div><div class="ttdeci">const char * pgettext(const char *context, const char *msgid)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00041">translations.cpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, and <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="gaaa234adc23b8eaf838b0109bf51e38c0" name="gaaa234adc23b8eaf838b0109bf51e38c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaaa234adc23b8eaf838b0109bf51e38c0">&#9670;&nbsp;</a></span>print_pressure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string print_pressure </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>pressure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print pressure (no conversions.) </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00752">752</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>{</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>    <span class="keyword">const</span> std::string <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%.*f&quot;</span>, decimals, pressure / 10 );</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;air pressure in kPa&quot;</span>, <span class="stringliteral">&quot;%s kPa&quot;</span> ), <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> );</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, and <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="ga84aca1e63585a67a2ccf3ffd9f01b7b4" name="ga84aca1e63585a67a2ccf3ffd9f01b7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84aca1e63585a67a2ccf3ffd9f01b7b4">&#9670;&nbsp;</a></span>print_temperature() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string print_temperature </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>fahrenheit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print temperature (and convert to Celsius if Celsius display is enabled.) </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00717">717</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>{</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a>( <a class="code hl_function" href="namespaceunits.html#ad595e601b3873fbd720be5536dbce49c">units::from_fahrenheit</a>( fahrenheit ), decimals );</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga84aca1e63585a67a2ccf3ffd9f01b7b4"><div class="ttname"><a href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a></div><div class="ttdeci">std::string print_temperature(double fahrenheit, int decimals)</div><div class="ttdoc">Print temperature (and convert to Celsius if Celsius display is enabled.)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00717">weather.cpp:717</a></div></div>
<div class="ttc" id="anamespaceunits_html_ad595e601b3873fbd720be5536dbce49c"><div class="ttname"><a href="namespaceunits.html#ad595e601b3873fbd720be5536dbce49c">units::from_fahrenheit</a></div><div class="ttdeci">constexpr quantity&lt; value_type, temperature_in_millidegree_celsius_tag &gt; from_fahrenheit(const value_type v)</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00097">units_temperature.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="units__temperature_8h_source.html#l00097">units::from_fahrenheit()</a>, and <a class="el" href="weather_8cpp_source.html#l00717">print_temperature()</a>.</p>

<p class="reference">Referenced by <a class="el" href="bionics_8cpp_source.html#l00532">Character::activate_bionic()</a>, <a class="el" href="panels_8cpp_source.html#l01497">draw_env_compact()</a>, <a class="el" href="panels_8cpp_source.html#l01924">draw_time_classic()</a>, <a class="el" href="panels_8cpp_source.html#l00332">get_temp()</a>, <a class="el" href="weather_8cpp_source.html#l00717">print_temperature()</a>, <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>, and <a class="el" href="iuse_8cpp_source.html#l09105">iuse::weather_tool()</a>.</p>

</div>
</div>
<a id="ga05edac4f7c2a15412fb12fc89c961d42" name="ga05edac4f7c2a15412fb12fc89c961d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05edac4f7c2a15412fb12fc89c961d42">&#9670;&nbsp;</a></span>print_temperature() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string print_temperature </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">units::temperature</a>&#160;</td>
          <td class="paramname"><em>temperature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>decimals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00722">722</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>{</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="keyword">const</span> <span class="keyword">auto</span> text = [&amp;]( <span class="keyword">const</span> <span class="keywordtype">double</span> value ) {</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;%.*f&quot;</span>, decimals, value );</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>    };</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span> </div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>    <span class="keywordflow">if</span>( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;USE_CELSIUS&quot;</span> ) == <span class="stringliteral">&quot;celsius&quot;</span> ) {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;temperature in Celsius&quot;</span>, <span class="stringliteral">&quot;%sC&quot;</span> ),</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>                              text( units::to_celsius&lt;double&gt;( <a class="code hl_typedef" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">temperature</a> ) ) );</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( get_option&lt;std::string&gt;( <span class="stringliteral">&quot;USE_CELSIUS&quot;</span> ) == <span class="stringliteral">&quot;kelvin&quot;</span> ) {</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;temperature in Kelvin&quot;</span>, <span class="stringliteral">&quot;%sK&quot;</span> ),</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>                              text( units::to_kelvins&lt;double&gt;( <a class="code hl_typedef" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">temperature</a> ) ) );</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;temperature in Fahrenheit&quot;</span>, <span class="stringliteral">&quot;%sF&quot;</span> ),</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                              text( units::to_fahrenheit&lt;double&gt;( <a class="code hl_typedef" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">temperature</a> ) ) );</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    }</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>}</div>
<div class="ttc" id="anamespaceunits_html_a458531725a9f70ed821e8067cfaf3a0d"><div class="ttname"><a href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">units::temperature</a></div><div class="ttdeci">quantity&lt; int, temperature_in_millidegree_celsius_tag &gt; temperature</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00061">units_temperature.h:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, and <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>.</p>

</div>
</div>
<a id="ga0eb7c656a09bbd24a6d761982e23c80e" name="ga0eb7c656a09bbd24a6d761982e23c80e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0eb7c656a09bbd24a6d761982e23c80e">&#9670;&nbsp;</a></span>print_time_just_hour()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string print_time_just_hour </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00563">563</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>{</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a> = to_hours&lt;int&gt;( <a class="code hl_function" href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a>( p ) );</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>    <span class="keywordtype">int</span> hour_param = <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a> % 12;</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>    <span class="keywordflow">if</span>( hour_param == 0 ) {</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        hour_param = 12;</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>    }</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( hour &lt; 12 ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%d AM&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%d PM&quot;</span> ), hour_param );</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>}</div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">clipped_unit::hour</a></div><div class="ttdeci">@ hour</div></div>
<div class="ttc" id="acalendar_8h_html_aa8a2c3326ae8829cef1439aa327897c4"><div class="ttname"><a href="calendar_8h.html#aa8a2c3326ae8829cef1439aa327897c4">time_past_midnight</a></div><div class="ttdeci">time_duration time_past_midnight(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00497">calendar.h:497</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a896c55cc5e46fab38ce9f51ebf7bfcd3">hour</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, and <a class="el" href="calendar_8h_source.html#l00497">time_past_midnight()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="gaf3acded4b7e0bd9cf031a593ad158112" name="gaf3acded4b7e0bd9cf031a593ad158112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf3acded4b7e0bd9cf031a593ad158112">&#9670;&nbsp;</a></span>proc_weather_sum()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void proc_weather_sum </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a79fd281fb076d9bba9d0606e3acd5a76">weather_type_id</a>&#160;</td>
          <td class="paramname"><em>wtype</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structweather__sum.html">weather_sum</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>tick_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00112">112</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>{</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordtype">int</span> amount = 0;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordflow">if</span>( wtype-&gt;<a class="code hl_variable" href="structweather__type.html#a417de895446fdee540d2a39484d7563c">rains</a> ) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <span class="keywordflow">switch</span>( wtype-&gt;<a class="code hl_variable" href="structweather__type.html#a61499fdc29ba6cd5b99ebf0254945c81">precip</a> ) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">precip_class::very_light</a>:</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                amount = 1 * to_turns&lt;int&gt;( tick_size );</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">precip_class::light</a>:</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                amount = 4 * to_turns&lt;int&gt;( tick_size );</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">precip_class::heavy</a>:</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                amount = 8 * to_turns&lt;int&gt;( tick_size );</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        }</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    }</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">if</span>( wtype-&gt;<a class="code hl_variable" href="structweather__type.html#aaae01bd8265eee84e7ad2f5db6e42f34">acidic</a> ) {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        data.<a class="code hl_variable" href="structweather__sum.html#a5a7d7c7e5f525a1169d1ab5c38185a56">acid_amount</a> += amount;</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        data.<a class="code hl_variable" href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">rain_amount</a> += amount;</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <span class="comment">// TODO: Change this sunlight &quot;sampling&quot; here into a proper interpolation</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> tick_sunlight = <a class="code hl_function" href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">incident_sunlight</a>( wtype, t );</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    data.<a class="code hl_variable" href="structweather__sum.html#a9b7b7f347b7e60c776708e9eb9d56f97">sunlight</a> += tick_sunlight * to_turns&lt;int&gt;( tick_size );</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>}</div>
<div class="ttc" id="agroup__Weather_html_gadf065e79a6c231ceff618552f791c1b1"><div class="ttname"><a href="group__Weather.html#gadf065e79a6c231ceff618552f791c1b1">incident_sunlight</a></div><div class="ttdeci">int incident_sunlight(const weather_type_id &amp;wtype, const time_point &amp;t)</div><div class="ttdoc">Amount of sunlight incident at the ground, taking weather and time of day into account.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00107">weather.cpp:107</a></div></div>
<div class="ttc" id="astructweather__sum_html_a5a7d7c7e5f525a1169d1ab5c38185a56"><div class="ttname"><a href="structweather__sum.html#a5a7d7c7e5f525a1169d1ab5c38185a56">weather_sum::acid_amount</a></div><div class="ttdeci">int acid_amount</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00088">weather.h:88</a></div></div>
<div class="ttc" id="astructweather__sum_html_a5f99b2c6f5871e572b5ee517e2e562bd"><div class="ttname"><a href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">weather_sum::rain_amount</a></div><div class="ttdeci">int rain_amount</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00087">weather.h:87</a></div></div>
<div class="ttc" id="astructweather__sum_html_a9b7b7f347b7e60c776708e9eb9d56f97"><div class="ttname"><a href="structweather__sum.html#a9b7b7f347b7e60c776708e9eb9d56f97">weather_sum::sunlight</a></div><div class="ttdeci">float sunlight</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00089">weather.h:89</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8h_source.html#l00088">weather_sum::acid_amount</a>, <a class="el" href="weather__type_8h_source.html#l00117">weather_type::acidic</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a7cfe64ea44dc3bbeb63b29ff3039a481">heavy</a>, <a class="el" href="weather_8cpp_source.html#l00107">incident_sunlight()</a>, <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a2ac43aa43bf473f9a9c09b4b608619d3">light</a>, <a class="el" href="weather__type_8h_source.html#l00115">weather_type::precip</a>, <a class="el" href="weather_8h_source.html#l00087">weather_sum::rain_amount</a>, <a class="el" href="weather__type_8h_source.html#l00116">weather_type::rains</a>, <a class="el" href="weather_8h_source.html#l00089">weather_sum::sunlight</a>, and <a class="el" href="weather__type_8h.html#a0b78777ab367c0db919aacd8bba938f0a88a3c9c96a37d4acfb7d67b760fb3b4f">very_light</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>.</p>

</div>
</div>
<a id="ga72ff9ae411841335eef733532909a505" name="ga72ff9ae411841335eef733532909a505"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72ff9ae411841335eef733532909a505">&#9670;&nbsp;</a></span>retroactively_fill_from_funnel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void retroactively_fill_from_funnel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtrap.html">trap</a> &amp;&#160;</td>
          <td class="paramname"><em>tr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine what a funnel has filled out of game, using funnelcontainer.bday as a starting point. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">it</td><td>The container item which is to be filled. </td></tr>
    <tr><td class="paramname">pos</td><td>The absolute position of the funnel (in the map square system, the one used by the <a class="el" href="classmap.html">map</a>, but absolute). </td></tr>
    <tr><td class="paramname">tr</td><td>The funnel (trap which acts as a funnel). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00184">184</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>{</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">if</span>( start &gt; end || !tr.<a class="code hl_function" href="structtrap.html#a1df9fdf246ce84494eb68dcd6e59cb5f">is_funnel</a>() ) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <span class="comment">// bday == last fill check</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    it.<a class="code hl_function" href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">set_birthday</a>( end );</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <a class="code hl_struct" href="structweather__sum.html">weather_sum</a> data = <a class="code hl_function" href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a>( start, end, pos );</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="comment">// Technically 0.0 division is OK, but it will be cleaner without it</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    <span class="keywordflow">if</span>( data.<a class="code hl_variable" href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">rain_amount</a> &gt; 0 ) {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> rain = <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( 1.0 / tr.<a class="code hl_function" href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">funnel_turns_per_charge</a>( data.<a class="code hl_variable" href="structweather__sum.html#a5f99b2c6f5871e572b5ee517e2e562bd">rain_amount</a> ) );</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        it.<a class="code hl_function" href="group__Weather.html#ga62f8d8c16409bbd233295c4a19ac59df">add_rain_to_container</a>( <span class="keyword">false</span>, rain );</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>        <span class="comment">// add_msg(m_debug, &quot;Retroactively adding %d water from turn %d to %d&quot;, rain, startturn, endturn);</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    }</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="keywordflow">if</span>( data.<a class="code hl_variable" href="structweather__sum.html#a5a7d7c7e5f525a1169d1ab5c38185a56">acid_amount</a> &gt; 0 ) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> = <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( 1.0 / tr.<a class="code hl_function" href="group__Weather.html#gaf799ace26686fd97c953f49ecd94acbb">funnel_turns_per_charge</a>( data.<a class="code hl_variable" href="structweather__sum.html#a5a7d7c7e5f525a1169d1ab5c38185a56">acid_amount</a> ) );</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        it.<a class="code hl_function" href="group__Weather.html#ga62f8d8c16409bbd233295c4a19ac59df">add_rain_to_container</a>( <span class="keyword">true</span>, <a class="code hl_function" href="namespacemattack.html#acdda0be7e7c8dabb76e9bd130547a3fa">acid</a> );</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>}</div>
<div class="ttc" id="aclassitem_html_a30120d067eb1fe9921fdf2de395b53b1"><div class="ttname"><a href="classitem.html#a30120d067eb1fe9921fdf2de395b53b1">item::set_birthday</a></div><div class="ttdeci">void set_birthday(const time_point &amp;bday)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l10026">item.cpp:10026</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga62f8d8c16409bbd233295c4a19ac59df"><div class="ttname"><a href="group__Weather.html#ga62f8d8c16409bbd233295c4a19ac59df">item::add_rain_to_container</a></div><div class="ttdeci">void add_rain_to_container(bool acid, int charges=1)</div><div class="ttdoc">Add charge(s) of rain to given container, possibly contaminating it.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00211">weather.cpp:211</a></div></div>
<div class="ttc" id="agroup__Weather_html_gacc90b85ac1849784280f581a1fb7ade8"><div class="ttname"><a href="group__Weather.html#gacc90b85ac1849784280f581a1fb7ade8">sum_conditions</a></div><div class="ttdeci">weather_sum sum_conditions(const time_point &amp;start, const time_point &amp;end, const tripoint &amp;location)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00153">weather.cpp:153</a></div></div>
<div class="ttc" id="arng_8cpp_html_acd19ae79e3590a99c9eaf0389318b686"><div class="ttname"><a href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a></div><div class="ttdeci">int roll_remainder(double value)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00096">rng.cpp:96</a></div></div>
<div class="ttc" id="astructtrap_html_a1df9fdf246ce84494eb68dcd6e59cb5f"><div class="ttname"><a href="structtrap.html#a1df9fdf246ce84494eb68dcd6e59cb5f">trap::is_funnel</a></div><div class="ttdeci">bool is_funnel() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00255">trap.cpp:255</a></div></div>
<div class="ttc" id="astructweather__sum_html"><div class="ttname"><a href="structweather__sum.html">weather_sum</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00086">weather.h:86</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="monattack_8cpp_source.html#l00587">mattack::acid()</a>, <a class="el" href="weather_8h_source.html#l00088">weather_sum::acid_amount</a>, <a class="el" href="weather_8cpp_source.html#l00211">item::add_rain_to_container()</a>, <a class="el" href="weather_8cpp_source.html#l00294">trap::funnel_turns_per_charge()</a>, <a class="el" href="trap_8cpp_source.html#l00255">trap::is_funnel()</a>, <a class="el" href="weather_8h_source.html#l00087">weather_sum::rain_amount</a>, <a class="el" href="rng_8cpp_source.html#l00096">roll_remainder()</a>, <a class="el" href="item_8cpp_source.html#l10026">item::set_birthday()</a>, and <a class="el" href="weather_8cpp_source.html#l00153">sum_conditions()</a>.</p>

<p class="reference">Referenced by <a class="el" href="map_8cpp_source.html#l07171">map::fill_funnels()</a>.</p>

</div>
</div>
<a id="gafe8217c10598c36542d98d470b918b32" name="gafe8217c10598c36542d98d470b918b32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafe8217c10598c36542d98d470b918b32">&#9670;&nbsp;</a></span>set_nextweather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_manager::set_nextweather </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classtime__point.html">time_point</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01101">1101</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>{</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>    <a class="code hl_variable" href="classweather__manager.html#ad3ea47132cda00f52a4c589ab1c671ad">nextweather</a> = t;</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    <a class="code hl_function" href="group__Weather.html#ga2dbed22a00ed1bfb19f18ce60a8dd200">update_weather</a>();</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>}</div>
<div class="ttc" id="aclassweather__manager_html_ad3ea47132cda00f52a4c589ab1c671ad"><div class="ttname"><a href="classweather__manager.html#ad3ea47132cda00f52a4c589ab1c671ad">weather_manager::nextweather</a></div><div class="ttdeci">time_point nextweather</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00205">weather.h:205</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga2dbed22a00ed1bfb19f18ce60a8dd200"><div class="ttname"><a href="group__Weather.html#ga2dbed22a00ed1bfb19f18ce60a8dd200">weather_manager::update_weather</a></div><div class="ttdeci">void update_weather()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01056">weather.cpp:1056</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8h_source.html#l00205">weather_manager::nextweather</a>, and <a class="el" href="weather_8cpp_source.html#l01056">weather_manager::update_weather()</a>.</p>

<p class="reference">Referenced by <a class="el" href="suffer_8cpp_source.html#l01321">Character::suffer_from_artifacts()</a>.</p>

</div>
</div>
<a id="gacc90b85ac1849784280f581a1fb7ade8" name="gacc90b85ac1849784280f581a1fb7ade8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc90b85ac1849784280f581a1fb7ade8">&#9670;&nbsp;</a></span>sum_conditions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structweather__sum.html">weather_sum</a> sum_conditions </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__point.html">time_point</a> &amp;&#160;</td>
          <td class="paramname"><em>end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00153">153</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>{</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <a class="code hl_class" href="classtime__duration.html">time_duration</a> tick_size = 0_turns;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>    <a class="code hl_struct" href="structweather__sum.html">weather_sum</a> data;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classtime__point.html">time_point</a> t = start; t &lt; end; t += tick_size ) {</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> diff = end - t;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <span class="keywordflow">if</span>( diff &lt; 10_turns ) {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            tick_size = 1_turns;</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( diff &gt; 7_days ) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            tick_size = 1_hours;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>            tick_size = 1_minutes;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        }</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        <a class="code hl_class" href="classstring__id.html">weather_type_id</a> wtype = <a class="code hl_function" href="group__Weather.html#ga275631a4069758bffeb8d4fad0cb5919">current_weather</a>( location, t );</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <a class="code hl_function" href="group__Weather.html#gaf3acded4b7e0bd9cf031a593ad158112">proc_weather_sum</a>( wtype, data, t, tick_size );</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        data.<a class="code hl_variable" href="structweather__sum.html#a670f5b133c2ecbfbc7a6eeaaccb12b0d">wind_amount</a> += <a class="code hl_function" href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.windspeed,</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>                            <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                            <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">ter</a>( <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a>( <a class="code hl_function" href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a>( location ) ) ),</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>                            location,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>                            <a class="code hl_namespace" href="namespaceweather.html">weather</a>.winddirection, <span class="keyword">false</span> ) * to_turns&lt;int&gt;( tick_size );</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    }</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    <span class="keywordflow">return</span> data;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>}</div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aa9fbf966291f6b82de9c540262324aba"><div class="ttname"><a href="classovermapbuffer.html#aa9fbf966291f6b82de9c540262324aba">overmapbuffer::ter</a></div><div class="ttdeci">const oter_id &amp; ter(const tripoint_abs_omt &amp;p)</div><div class="ttdoc">Returns the overmap terrain at the given OMT coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00651">overmapbuffer.cpp:651</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00430">calendar.h:431</a></div></div>
<div class="ttc" id="acoordinate__conversions_8cpp_html_ad1ca17bea3d4e8bbd38de078f5d504bf"><div class="ttname"><a href="coordinate__conversions_8cpp.html#ad1ca17bea3d4e8bbd38de078f5d504bf">ms_to_omt_copy</a></div><div class="ttdeci">point ms_to_omt_copy(point p)</div><div class="ttdef"><b>Definition:</b> <a href="coordinate__conversions_8cpp_source.html#l00162">coordinate_conversions.cpp:162</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga23304505d04b612b77e4df5e9b64a1dd"><div class="ttname"><a href="group__Weather.html#ga23304505d04b612b77e4df5e9b64a1dd">get_local_windpower</a></div><div class="ttdeci">double get_local_windpower(double windpower, const oter_id &amp;omter, const tripoint &amp;location, const int &amp;winddirection, bool sheltered)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00938">weather.cpp:938</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga275631a4069758bffeb8d4fad0cb5919"><div class="ttname"><a href="group__Weather.html#ga275631a4069758bffeb8d4fad0cb5919">current_weather</a></div><div class="ttdeci">const weather_type_id &amp; current_weather(const tripoint &amp;location, const time_point &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00143">weather.cpp:143</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaf3acded4b7e0bd9cf031a593ad158112"><div class="ttname"><a href="group__Weather.html#gaf3acded4b7e0bd9cf031a593ad158112">proc_weather_sum</a></div><div class="ttdeci">void proc_weather_sum(const weather_type_id wtype, weather_sum &amp;data, const time_point &amp;t, const time_duration &amp;tick_size)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00112">weather.cpp:112</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00048">overmapbuffer.cpp:46</a></div></div>
<div class="ttc" id="astructweather__sum_html_a670f5b133c2ecbfbc7a6eeaaccb12b0d"><div class="ttname"><a href="structweather__sum.html#a670f5b133c2ecbfbc7a6eeaaccb12b0d">weather_sum::wind_amount</a></div><div class="ttdeci">int wind_amount</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00090">weather.h:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l00143">current_weather()</a>, <a class="el" href="weather_8cpp_source.html#l00938">get_local_windpower()</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="coordinate__conversions_8cpp_source.html#l00162">ms_to_omt_copy()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00046">overmap_buffer</a>, <a class="el" href="weather_8cpp_source.html#l00112">proc_weather_sum()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00651">overmapbuffer::ter()</a>, and <a class="el" href="weather_8h_source.html#l00090">weather_sum::wind_amount</a>.</p>

<p class="reference">Referenced by <a class="el" href="game_8cpp_source.html#l11489">check_art_charge_req()</a>, <a class="el" href="iexamine_8cpp_source.html#l01912">iexamine::flower_poppy()</a>, <a class="el" href="weather_8cpp_source.html#l00184">retroactively_fill_from_funnel()</a>, <a class="el" href="active__tile__data_8cpp_source.html#l00113">solar_tile::update_internal()</a>, and <a class="el" href="vehicle_8cpp_source.html#l06851">vehicle::update_time()</a>.</p>

</div>
</div>
<a id="ga4dbb145f0b2ee7032f0cc2c044660171" name="ga4dbb145f0b2ee7032f0cc2c044660171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4dbb145f0b2ee7032f0cc2c044660171">&#9670;&nbsp;</a></span>thunder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_effect::thunder </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>intensity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thunder. </p>
<p >Flavor messages. Very wet. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00422">422</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>{</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_effect( <a class="code hl_variable" href="weather_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a> ) &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.is_deaf() &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( intensity ) ) {</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() &gt;= 0 ) {</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You hear a distant rumble of thunder.&quot;</span> ) );</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;thunder_far&quot;</span>, 80, <a class="code hl_function" href="rng_8cpp.html#a5dafa7cca21f61605e9da5e915f8931a">random_direction</a>() );</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( std::max( <a class="code hl_function" href="rng_8cpp.html#acd19ae79e3590a99c9eaf0389318b686">roll_remainder</a>( 2.0f * <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() /</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>                                     <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mutation_value( <span class="stringliteral">&quot;hearing_modifier&quot;</span> ) ), 1 ) ) ) {</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You hear a rumble of thunder from above.&quot;</span> ) );</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <a class="code hl_function" href="namespacesfx.html#a8fa2bb887ac81392fb686cc4079b5d5a">sfx::play_variant_sound</a>( <span class="stringliteral">&quot;environment&quot;</span>, <span class="stringliteral">&quot;thunder_far&quot;</span>,</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>                                     ( 80 * <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.mutation_value( <span class="stringliteral">&quot;hearing_modifier&quot;</span> ) ), <a class="code hl_function" href="rng_8cpp.html#a5dafa7cca21f61605e9da5e915f8931a">random_direction</a>() );</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        }</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>    }</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>}</div>
<div class="ttc" id="aweather_8cpp_html_ab16f8be4be2050986e76d2cb0cff7609"><div class="ttname"><a href="weather_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a></div><div class="ttdeci">static const efftype_id effect_sleep(&quot;sleep&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="weather_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="sounds_8cpp_source.html#l01597">sfx::play_variant_sound()</a>, <a class="el" href="rng_8cpp_source.html#l00037">random_direction()</a>, and <a class="el" href="rng_8cpp_source.html#l00096">roll_remainder()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
<a id="ga90010e7f5354e53651b541dcfe9c9e9a" name="ga90010e7f5354e53651b541dcfe9c9e9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga90010e7f5354e53651b541dcfe9c9e9a">&#9670;&nbsp;</a></span>to_string()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::string to_string </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1">weekdays</a> &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00549">549</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>{</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, 7&gt; weekday_names = {{</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Sunday&quot;</span> ), <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Monday&quot;</span> ),</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Tuesday&quot;</span> ), <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Wednesday&quot;</span> ),</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Thursday&quot;</span> ), <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Friday&quot;</span> ),</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            <a class="code hl_define" href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a>( <span class="stringliteral">&quot;Saturday&quot;</span> )</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        }</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    };</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keyword">static_assert</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a95fa12cb2100ce7081b71f7c44bc12a5">weekdays::SUNDAY</a> ) == 0,</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>                   <span class="stringliteral">&quot;weekday_names array is out of sync with weekdays enumeration values&quot;</span> );</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( weekday_names[ <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( d ) ] );</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>}</div>
<div class="ttc" id="acalendar_8h_html_aca1a965ea25b5c617810af73ed5345c1a95fa12cb2100ce7081b71f7c44bc12a5"><div class="ttname"><a href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a95fa12cb2100ce7081b71f7c44bc12a5">weekdays::SUNDAY</a></div><div class="ttdeci">@ SUNDAY</div></div>
<div class="ttc" id="atranslations_8h_html_a0b3ab525ec6b450b2487e7644255fa7c"><div class="ttname"><a href="translations_8h.html#a0b3ab525ec6b450b2487e7644255fa7c">translate_marker</a></div><div class="ttdeci">#define translate_marker(x)</div><div class="ttdoc">Marks a string literal to be extracted for translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00030">translations.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="calendar_8h.html#aca1a965ea25b5c617810af73ed5345c1a95fa12cb2100ce7081b71f7c44bc12a5">SUNDAY</a>, and <a class="el" href="translations_8h_source.html#l00030">translate_marker</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
<a id="ga2dbed22a00ed1bfb19f18ce60a8dd200" name="ga2dbed22a00ed1bfb19f18ce60a8dd200"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2dbed22a00ed1bfb19f18ce60a8dd200">&#9670;&nbsp;</a></span>update_weather()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_manager::update_weather </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01056">1056</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>{</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    <a class="code hl_struct" href="structw__point.html">w_point</a> &amp;w = <a class="code hl_variable" href="classweather__manager.html#a20b58912df8bc95a26a6ec888dc3a0c1">weather_precise</a>;</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    <a class="code hl_variable" href="classweather__manager.html#a410734bb787ca2653905ca7a1c704b88">winddirection</a> = <a class="code hl_variable" href="classweather__manager.html#a4a79346fba27c98905cff470522847b2">wind_direction_override</a> ? *<a class="code hl_variable" href="classweather__manager.html#a4a79346fba27c98905cff470522847b2">wind_direction_override</a> : w.<a class="code hl_variable" href="structw__point.html#a5da6bc53130c6b2c47dad86032575e53">winddirection</a>;</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    <a class="code hl_variable" href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">windspeed</a> = <a class="code hl_variable" href="classweather__manager.html#a546872ab4b9b5f2832ec19bc39f886d9">windspeed_override</a> ? *<a class="code hl_variable" href="classweather__manager.html#a546872ab4b9b5f2832ec19bc39f886d9">windspeed_override</a> : w.<a class="code hl_variable" href="structw__point.html#a4af89c0235da5a6b4e9e1b86f2485d6f">windpower</a>;</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a> || <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> &gt;= <a class="code hl_variable" href="classweather__manager.html#ad3ea47132cda00f52a4c589ab1c671ad">nextweather</a> ) {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>        <span class="keyword">const</span> <a class="code hl_class" href="classweather__generator.html">weather_generator</a> &amp;weather_gen = <a class="code hl_function" href="group__Weather.html#ga090dd5274c7af40d32814a41f2e16fe0">get_cur_weather_gen</a>();</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>        w = weather_gen.<a class="code hl_function" href="classweather__generator.html#a6c0ba4e897f29b3a9e907ad5ed38396d">get_weather</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.global_square_location(), <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed() );</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        <a class="code hl_class" href="classstring__id.html">weather_type_id</a> old_weather = <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a>;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>        <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a> = <a class="code hl_variable" href="classweather__manager.html#a7900f28733571347e2e3ba0266a314dc">weather_override</a> ? <a class="code hl_variable" href="classweather__manager.html#a7900f28733571347e2e3ba0266a314dc">weather_override</a> : weather_gen.<a class="code hl_function" href="classweather__generator.html#a8bb595162b04237688d2d4d8b396da51">get_weather_conditions</a>( w );</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_artifact_with( <a class="code hl_enumvalue" href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621acb1b7db79f3e5809a4633b31c4d3a866">AEP_BAD_WEATHER</a> ) ) {</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>            <a class="code hl_variable" href="classweather__manager.html#a7900f28733571347e2e3ba0266a314dc">weather_override</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">weather_type_id::NULL_ID</a>();</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>        }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>        <a class="code hl_function" href="namespacesfx.html#ad629c27a8115e3df15c6c48da42475e7">sfx::do_ambient</a>();</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>        <a class="code hl_variable" href="classweather__manager.html#a7340d2e1861893258606e6910cf79137">temperature</a> = <a class="code hl_function" href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a>( w.<a class="code hl_variable" href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">temperature</a> );</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <a class="code hl_variable" href="classweather__manager.html#a2f3392f297f6df41358a1e3a7f21d4b4">lightning_active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>        <span class="comment">// Check weather every few turns, instead of every turn.</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>        <span class="comment">// TODO: predict when the weather changes and use that time.</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        <a class="code hl_variable" href="classweather__manager.html#ad3ea47132cda00f52a4c589ab1c671ad">nextweather</a> = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> + 5_minutes;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a> != old_weather &amp;&amp; <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a>-&gt;<a class="code hl_variable" href="structweather__type.html#a336e5eb5dbc911a37e4d7b0dd7bfc415">dangerous</a> &amp;&amp;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_levz() &gt;= 0 &amp;&amp; <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().is_outside( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.pos() )</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_activity( <a class="code hl_variable" href="weather_8cpp.html#af4918481d7b60c64f99e201682fedca5">ACT_WAIT_WEATHER</a> ) ) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;cancel_activity_or_ignore_query( <a class="code hl_enumvalue" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96a3c0c979d6d0861863ccf753d0d8bc545">distraction_type::weather_change</a>,</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>                                                <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The weather changed to %s!&quot;</span> ), <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a>-&gt;<a class="code hl_variable" href="structweather__type.html#a45c3434d18578e7839383583de59cdcd">name</a> ) );</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>        }</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span> </div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a> != old_weather &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.has_activity( <a class="code hl_variable" href="weather_8cpp.html#af4918481d7b60c64f99e201682fedca5">ACT_WAIT_WEATHER</a> ) ) {</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.assign_activity( <a class="code hl_variable" href="weather_8cpp.html#af4918481d7b60c64f99e201682fedca5">ACT_WAIT_WEATHER</a>, 0, 0 );</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        }</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span> </div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a>-&gt;<a class="code hl_variable" href="structweather__type.html#a0d7fdb3127be2664a6039a9b8a881fe1">sight_penalty</a> !=</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            old_weather-&gt;<a class="code hl_variable" href="structweather__type.html#a0d7fdb3127be2664a6039a9b8a881fe1">sight_penalty</a> ) {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>; i &lt;= <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a>; i++ ) {</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>                <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">set_transparency_cache_dirty</a>( i );</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>            <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">set_seen_cache_dirty</a>( <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> );</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span> </div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        <a class="code hl_variable" href="classweather__manager.html#a2e1b9e5fb95e8fb47618f2a48ee747f6">water_temperature</a> = <a class="code hl_function" href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a>(</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                                weather_gen.<a class="code hl_function" href="classweather__generator.html#a520032dea85224ce2c8067427779500e">get_water_temperature</a>(</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                                    <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_ms</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.global_square_location() ),</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                                    <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <a class="code hl_variable" href="namespacecalendar.html#a56436e146aa8bdd67857ec0886d89ffe">calendar::config</a>, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed() ) );</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>    }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>}</div>
<div class="ttc" id="aclassmap_html_a0ecdaa7f32bcc5dbcb162ae76ad863c9"><div class="ttname"><a href="classmap.html#a0ecdaa7f32bcc5dbcb162ae76ad863c9">map::set_transparency_cache_dirty</a></div><div class="ttdeci">void set_transparency_cache_dirty(const int zlev)</div><div class="ttdoc">Sets a dirty flag on the a given cache.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00199">map.cpp:199</a></div></div>
<div class="ttc" id="aclassmap_html_abfe32fc67ef91fe15105c31b5ef884ab"><div class="ttname"><a href="classmap.html#abfe32fc67ef91fe15105c31b5ef884ab">map::set_seen_cache_dirty</a></div><div class="ttdeci">void set_seen_cache_dirty(const tripoint change_location)</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00206">map.cpp:206</a></div></div>
<div class="ttc" id="aclassstring__id_html_ae29dd8ed38d2b5eb443a65ad46f10b2d"><div class="ttname"><a href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; weather_type &gt;::NULL_ID</a></div><div class="ttdeci">static const string_id&lt; weather_type &gt; &amp; NULL_ID()</div><div class="ttdoc">Returns a null id whose string_id&lt;T&gt;::is_null() must always return true.</div></div>
<div class="ttc" id="aclassweather__generator_html"><div class="ttname"><a href="classweather__generator.html">weather_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00030">weather_gen.h:31</a></div></div>
<div class="ttc" id="aclassweather__generator_html_a520032dea85224ce2c8067427779500e"><div class="ttname"><a href="classweather__generator.html#a520032dea85224ce2c8067427779500e">weather_generator::get_water_temperature</a></div><div class="ttdeci">units::temperature get_water_temperature(const tripoint_abs_ms &amp;, const time_point &amp;, const calendar_config &amp;calendar_config, unsigned) const</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8cpp_source.html#l00287">weather_gen.cpp:287</a></div></div>
<div class="ttc" id="aclassweather__generator_html_a8bb595162b04237688d2d4d8b396da51"><div class="ttname"><a href="classweather__generator.html#a8bb595162b04237688d2d4d8b396da51">weather_generator::get_weather_conditions</a></div><div class="ttdeci">const weather_type_id &amp; get_weather_conditions(const tripoint &amp;, const time_point &amp;, unsigned seed) const</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8cpp_source.html#l00205">weather_gen.cpp:205</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a20b58912df8bc95a26a6ec888dc3a0c1"><div class="ttname"><a href="classweather__manager.html#a20b58912df8bc95a26a6ec888dc3a0c1">weather_manager::weather_precise</a></div><div class="ttdeci">w_point weather_precise</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00229">weather.h:229</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a410734bb787ca2653905ca7a1c704b88"><div class="ttname"><a href="classweather__manager.html#a410734bb787ca2653905ca7a1c704b88">weather_manager::winddirection</a></div><div class="ttdeci">int winddirection</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00194">weather.h:194</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a4a79346fba27c98905cff470522847b2"><div class="ttname"><a href="classweather__manager.html#a4a79346fba27c98905cff470522847b2">weather_manager::wind_direction_override</a></div><div class="ttdeci">cata::optional&lt; int &gt; wind_direction_override</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00197">weather.h:197</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a546872ab4b9b5f2832ec19bc39f886d9"><div class="ttname"><a href="classweather__manager.html#a546872ab4b9b5f2832ec19bc39f886d9">weather_manager::windspeed_override</a></div><div class="ttdeci">cata::optional&lt; int &gt; windspeed_override</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00198">weather.h:198</a></div></div>
<div class="ttc" id="aclassweather__manager_html_a7900f28733571347e2e3ba0266a314dc"><div class="ttname"><a href="classweather__manager.html#a7900f28733571347e2e3ba0266a314dc">weather_manager::weather_override</a></div><div class="ttdeci">weather_type_id weather_override</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00199">weather.h:199</a></div></div>
<div class="ttc" id="aclassweather__manager_html_ae21ca8b6895d5b684f224a35590e54a5"><div class="ttname"><a href="classweather__manager.html#ae21ca8b6895d5b684f224a35590e54a5">weather_manager::windspeed</a></div><div class="ttdeci">int windspeed</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00195">weather.h:195</a></div></div>
<div class="ttc" id="aclassweather__manager_html_ae3a0fada13f5c0e5d8fbe1a33b0fbc33"><div class="ttname"><a href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_manager::weather_id</a></div><div class="ttdeci">weather_type_id weather_id</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00193">weather.h:193</a></div></div>
<div class="ttc" id="aenums_8h_html_a18cc141c508bf4f277abaf39fc9c3d96a3c0c979d6d0861863ccf753d0d8bc545"><div class="ttname"><a href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96a3c0c979d6d0861863ccf753d0d8bc545">distraction_type::weather_change</a></div><div class="ttdeci">@ weather_change</div></div>
<div class="ttc" id="aenums_8h_html_abbe6432d5446acdbb3c80999ba5a4621acb1b7db79f3e5809a4633b31c4d3a866"><div class="ttname"><a href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621acb1b7db79f3e5809a4633b31c4d3a866">AEP_BAD_WEATHER</a></div><div class="ttdeci">@ AEP_BAD_WEATHER</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00140">enums.h:140</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3984a9476d1edc78e4e7b886a08d4d4b"><div class="ttname"><a href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a></div><div class="ttdeci">static constexpr int OVERMAP_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00062">game_constants.h:62</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">static constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00060">game_constants.h:60</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a56436e146aa8bdd67857ec0886d89ffe"><div class="ttname"><a href="namespacecalendar.html#a56436e146aa8bdd67857ec0886d89ffe">calendar::config</a></div><div class="ttdeci">calendar_config config</div></div>
<div class="ttc" id="anamespacesfx_html_ad629c27a8115e3df15c6c48da42475e7"><div class="ttname"><a href="namespacesfx.html#ad629c27a8115e3df15c6c48da42475e7">sfx::do_ambient</a></div><div class="ttdeci">void do_ambient()</div><div class="ttdef"><b>Definition:</b> <a href="sounds_8cpp_source.html#l01614">sounds.cpp:1614</a></div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">static constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00259">point.h:259</a></div></div>
<div class="ttc" id="astructw__point_html_a4af89c0235da5a6b4e9e1b86f2485d6f"><div class="ttname"><a href="structw__point.html#a4af89c0235da5a6b4e9e1b86f2485d6f">w_point::windpower</a></div><div class="ttdeci">double windpower</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00019">weather_gen.h:19</a></div></div>
<div class="ttc" id="astructw__point_html_a5da6bc53130c6b2c47dad86032575e53"><div class="ttname"><a href="structw__point.html#a5da6bc53130c6b2c47dad86032575e53">w_point::winddirection</a></div><div class="ttdeci">int winddirection</div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00021">weather_gen.h:21</a></div></div>
<div class="ttc" id="astructweather__type_html_a0d7fdb3127be2664a6039a9b8a881fe1"><div class="ttname"><a href="structweather__type.html#a0d7fdb3127be2664a6039a9b8a881fe1">weather_type::sight_penalty</a></div><div class="ttdeci">float sight_penalty</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00111">weather_type.h:111</a></div></div>
<div class="ttc" id="astructweather__type_html_a336e5eb5dbc911a37e4d7b0dd7bfc415"><div class="ttname"><a href="structweather__type.html#a336e5eb5dbc911a37e4d7b0dd7bfc415">weather_type::dangerous</a></div><div class="ttdeci">bool dangerous</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00114">weather_type.h:114</a></div></div>
<div class="ttc" id="astructweather__type_html_a45c3434d18578e7839383583de59cdcd"><div class="ttname"><a href="structweather__type.html#a45c3434d18578e7839383583de59cdcd">weather_type::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="weather__type_8h_source.html#l00106">weather_type.h:106</a></div></div>
<div class="ttc" id="aweather_8cpp_html_af4918481d7b60c64f99e201682fedca5"><div class="ttname"><a href="weather_8cpp.html#af4918481d7b60c64f99e201682fedca5">ACT_WAIT_WEATHER</a></div><div class="ttdeci">static const activity_id ACT_WAIT_WEATHER(&quot;ACT_WAIT_WEATHER&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="weather_8cpp.html#af4918481d7b60c64f99e201682fedca5">ACT_WAIT_WEATHER</a>, <a class="el" href="enums_8h_source.html#l00140">AEP_BAD_WEATHER</a>, <a class="el" href="namespacecalendar.html#a56436e146aa8bdd67857ec0886d89ffe">calendar::config</a>, <a class="el" href="weather__type_8h_source.html#l00114">weather_type::dangerous</a>, <a class="el" href="sounds_8cpp_source.html#l01614">sfx::do_ambient()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l01049">weather_manager::get_cur_weather_gen()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00287">weather_generator::get_water_temperature()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00117">weather_generator::get_weather()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00205">weather_generator::get_weather_conditions()</a>, <a class="el" href="weather_8h_source.html#l00191">weather_manager::lightning_active</a>, <a class="el" href="weather__type_8h_source.html#l00106">weather_type::name</a>, <a class="el" href="weather_8h_source.html#l00205">weather_manager::nextweather</a>, <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; weather_type &gt;::NULL_ID()</a>, <a class="el" href="game__constants_8h_source.html#l00060">OVERMAP_DEPTH</a>, <a class="el" href="game__constants_8h_source.html#l00062">OVERMAP_HEIGHT</a>, <a class="el" href="map_8cpp_source.html#l00206">map::set_seen_cache_dirty()</a>, <a class="el" href="map_8cpp_source.html#l00199">map::set_transparency_cache_dirty()</a>, <a class="el" href="weather__type_8h_source.html#l00111">weather_type::sight_penalty</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="weather_8h_source.html#l00188">weather_manager::temperature</a>, <a class="el" href="weather__gen_8h_source.html#l00016">w_point::temperature</a>, <a class="el" href="units__temperature_8h_source.html#l00124">units::to_fahrenheit()</a>, <a class="el" href="point_8h_source.html#l00259">tripoint_zero</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="weather_8h_source.html#l00190">weather_manager::water_temperature</a>, <a class="el" href="enums_8h.html#a18cc141c508bf4f277abaf39fc9c3d96a3c0c979d6d0861863ccf753d0d8bc545">weather_change</a>, <a class="el" href="weather_8h_source.html#l00193">weather_manager::weather_id</a>, <a class="el" href="weather_8h_source.html#l00199">weather_manager::weather_override</a>, <a class="el" href="weather_8h_source.html#l00229">weather_manager::weather_precise</a>, <a class="el" href="weather_8h_source.html#l00197">weather_manager::wind_direction_override</a>, <a class="el" href="weather_8h_source.html#l00194">weather_manager::winddirection</a>, <a class="el" href="weather__gen_8h_source.html#l00021">w_point::winddirection</a>, <a class="el" href="weather__gen_8h_source.html#l00019">w_point::windpower</a>, <a class="el" href="weather_8h_source.html#l00195">weather_manager::windspeed</a>, and <a class="el" href="weather_8h_source.html#l00198">weather_manager::windspeed_override</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l01101">weather_manager::set_nextweather()</a>, and <a class="el" href="game_8cpp_source.html#l00554">game::start_game()</a>.</p>

</div>
</div>
<a id="gadb21721b572a715148778ab71405819a" name="gadb21721b572a715148778ab71405819a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb21721b572a715148778ab71405819a">&#9670;&nbsp;</a></span>warm_enough_to_plant() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool warm_enough_to_plant </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is it warm enough to plant seeds? </p>
<p >The first overload is in map-square coords, the second for larger scale queries. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01027">1027</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>{</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>    <span class="comment">// semi-appropriate temperature for most plants</span></div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_function" href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">get_temperature</a>( pos ) &gt;= 50;</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>}</div>
<div class="ttc" id="agroup__Weather_html_ga956008349f0006ba8d76360e8b2d5283"><div class="ttname"><a href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">weather_manager::get_temperature</a></div><div class="ttdeci">int get_temperature(const tripoint &amp;location) const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01107">weather.cpp:1107</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l01107">weather_manager::get_temperature()</a>, and <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>.</p>

<p class="reference">Referenced by <a class="el" href="activity__item__handling_8cpp_source.html#l01290">can_do_activity_there()</a>, <a class="el" href="vehicle__part_8cpp_source.html#l00550">vehicle::can_enable()</a>, <a class="el" href="iexamine_8cpp_source.html#l02299">iexamine::dirtmound()</a>, <a class="el" href="mission__companion_8cpp_source.html#l00992">talk_function::field_plant()</a>, <a class="el" href="faction__camp_8cpp_source.html#l00692">basecamp::get_available_missions_by_dir()</a>, and <a class="el" href="vehicle_8cpp_source.html#l05215">vehicle::idle()</a>.</p>

</div>
</div>
<a id="ga045ef712a0243543e4d618673cf0f676" name="ga045ef712a0243543e4d618673cf0f676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga045ef712a0243543e4d618673cf0f676">&#9670;&nbsp;</a></span>warm_enough_to_plant() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool warm_enough_to_plant </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01033">1033</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>{</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_function" href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">get_temperature</a>( pos ) &gt;= 50;</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="weather_8cpp_source.html#l01107">weather_manager::get_temperature()</a>, and <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>.</p>

</div>
</div>
<a id="gab4893f4bb0b6f5044689488bf2ce20c3" name="gab4893f4bb0b6f5044689488bf2ce20c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab4893f4bb0b6f5044689488bf2ce20c3">&#9670;&nbsp;</a></span>weather_forecast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string weather_forecast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#ae09653d22add0b34ddfe45845d585c4b">point_abs_sm</a> &amp;&#160;</td>
          <td class="paramname"><em>abs_sm_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate textual weather forecast for the specified radio tower. </p>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00611">611</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>{</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>    std::string weather_report;</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="comment">// Local conditions</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="keyword">const</span> <span class="keyword">auto</span> cref = <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">closest_city</a>( <a class="code hl_typedef" href="coordinates_8h.html#ae72b84003f239e5e878a036da3758331">tripoint_abs_sm</a>( abs_sm_pos, 0 ) );</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>    <span class="keyword">const</span> std::string city_name = cref ? cref.<a class="code hl_variable" href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city</a>-&gt;<a class="code hl_variable" href="structcity.html#afadfa28cfb7910655e01932913a3d928">name</a> : std::string( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;middle of nowhere&quot;</span> ) );</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>    <span class="comment">// Current time</span></div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    <span class="keyword">const</span> <a class="code hl_class" href="classweather__manager.html">weather_manager</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>();</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    weather_report += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>                          <span class="comment">//~ %1$s: time of day, %2$s: hour of day, %3$s: city name, %4$s: weather name, %5$s: temperature value</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                          <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;The current time is %1$s Eastern Standard Time.  At %2$s in %3$s, it was %4$s.  The temperature was %5$s. &quot;</span> ),</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                          <a class="code hl_function" href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ), <a class="code hl_function" href="group__Weather.html#ga0eb7c656a09bbd24a6d761982e23c80e">print_time_just_hour</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ),</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                          city_name,</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                          <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().weather_id-&gt;name, <a class="code hl_function" href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a>( <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_typedef" href="namespaceunits.html#a458531725a9f70ed821e8067cfaf3a0d">temperature</a> )</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                      );</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="comment">//weather_report += &quot;, the dewpoint ???, and the relative humidity ???.  &quot;;</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="comment">//weather_report += &quot;The wind was &lt;direction&gt; at ? mi/km an hour.  &quot;;</span></div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    <span class="comment">//weather_report += &quot;The pressure was ??? in/mm and steady/rising/falling.&quot;;</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="comment">// TODO: wind direction and speed</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span> </div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="comment">// Regional conditions (simulated by choosing a random range containing the current conditions).</span></div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="comment">// Adjusted for weather volatility based on how many weather changes are coming up.</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <span class="comment">//weather_report += &quot;Across &lt;region&gt;, skies ranged from &lt;cloudiest&gt; to &lt;clearest&gt;.  &quot;;</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="comment">// TODO: Add fake reports for nearby cities</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="comment">// TODO: fix point types</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> abs_ms_pos = <a class="code hl_struct" href="structtripoint.html">tripoint</a>( project_to&lt;coords::ms&gt;( abs_sm_pos ).raw(), 0 );</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span> </div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> now_hour = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> - <a class="code hl_function" href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a>( minute_of_hour&lt;int&gt;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                                ( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a> ) );</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="keywordtype">bool</span> now_is_day = <a class="code hl_function" href="calendar_8cpp.html#a1f243cd9207ab39fad97d6b638b76757">is_day</a>( now_hour );</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordtype">int</span> last_idx = -1;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>    <span class="keywordtype">bool</span> last_is_day = now_is_day;</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>    <a class="code hl_class" href="classtime__point.html">time_point</a> last_hour = now_hour;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span> </div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    std::array&lt;forecast_period, NUM_FORECAST_PERIODS&gt; periods = { {} };</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span> </div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;wgen = <a class="code hl_namespace" href="namespaceweather.html">weather</a>.get_cur_weather_gen();</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>        last_hour += 1_hours;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>        <span class="comment">// Some types of weather may happen only during the night or during the day,</span></div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>        <span class="comment">// so skip dusk and dawn just to be safe.</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">is_dusk</a>( last_hour ) || <a class="code hl_function" href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">is_dawn</a>( last_hour ) ) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>        }</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        <span class="keywordtype">bool</span> new_is_day = <a class="code hl_function" href="calendar_8cpp.html#a1f243cd9207ab39fad97d6b638b76757">is_day</a>( last_hour );</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="keywordflow">if</span>( new_is_day != last_is_day ) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>            last_is_day = new_is_day;</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            last_idx += 1;</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            <span class="keywordflow">if</span>( last_idx &gt;= <a class="code hl_variable" href="group__Weather.html#gab36b70cc7755703a4307e998c5ffc28b">NUM_FORECAST_PERIODS</a> ) {</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>            }</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>            periods[last_idx].is_day = last_is_day;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>            periods[last_idx].week_day = <a class="code hl_function" href="calendar_8cpp.html#ac4913a41335973f0a82358272fe601eb">day_of_week</a>( last_hour );</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        }</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>        <span class="keywordflow">if</span>( last_idx &lt; 0 ) {</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>        }</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span> </div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        <a class="code hl_struct" href="structforecast__period.html">forecast_period</a> &amp;period = periods[last_idx];</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <a class="code hl_struct" href="structw__point.html">w_point</a> w = wgen.get_weather( abs_ms_pos, last_hour, <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;get_seed() );</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">weather_type_id</a> &amp;new_type = wgen.get_weather_conditions( w );</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>        <span class="keywordtype">int</span> new_priority = wgen.forecast_priority( new_type );</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <span class="keywordflow">if</span>( !period.<a class="code hl_variable" href="structforecast__period.html#a311a1d8357724d4522a03dffbeda3944">type</a> || new_priority &gt; period.<a class="code hl_variable" href="structforecast__period.html#a458c9cf523e63da8d2dc3c5bb11a8419">type_priority</a> ) {</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            period.<a class="code hl_variable" href="structforecast__period.html#a458c9cf523e63da8d2dc3c5bb11a8419">type_priority</a> = new_priority;</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>            period.<a class="code hl_variable" href="structforecast__period.html#a311a1d8357724d4522a03dffbeda3944">type</a> = &amp;new_type.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>();</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>        }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>        period.<a class="code hl_variable" href="structforecast__period.html#a0622b2a69ef1fe83e20f2eedec2a2872">temp_high</a> = std::max( period.<a class="code hl_variable" href="structforecast__period.html#a0622b2a69ef1fe83e20f2eedec2a2872">temp_high</a>, w.<a class="code hl_variable" href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">temperature</a> );</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        period.<a class="code hl_variable" href="structforecast__period.html#a5dae07c2ebbfa7a97ff8d785b7e59d46">temp_low</a> = std::min( period.<a class="code hl_variable" href="structforecast__period.html#a5dae07c2ebbfa7a97ff8d785b7e59d46">temp_low</a>, w.<a class="code hl_variable" href="structw__point.html#a3002b10d38744db5d25fa1011e28e09e">temperature</a> );</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    }</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="group__Weather.html#gab36b70cc7755703a4307e998c5ffc28b">NUM_FORECAST_PERIODS</a>; i++ ) {</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structforecast__period.html">forecast_period</a> &amp;period = periods[i];</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        std::string <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>;</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="keywordflow">if</span>( i == 0 ) {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            <span class="keywordflow">if</span>( period.<a class="code hl_variable" href="structforecast__period.html#aaaf771b21e42d26a8661ee28cc468ac4">is_day</a> ) {</div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>                <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Today&quot;</span> );</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>                <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Tonight&quot;</span> );</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            <span class="keywordflow">if</span>( period.<a class="code hl_variable" href="structforecast__period.html#aaaf771b21e42d26a8661ee28cc468ac4">is_day</a> ) {</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>                <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = <a class="code hl_function" href="group__Weather.html#ga90010e7f5354e53651b541dcfe9c9e9a">to_string</a>( period.<a class="code hl_variable" href="structforecast__period.html#a7708c0d080288fd20d39803b6b887bab">week_day</a> );</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>                <span class="comment">//~ %s is day of week (e.g. Friday Night)</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>                <a class="code hl_enumvalue" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;Forecast&quot;</span>, <span class="stringliteral">&quot;%s Night&quot;</span> ), <a class="code hl_function" href="group__Weather.html#ga90010e7f5354e53651b541dcfe9c9e9a">to_string</a>( period.<a class="code hl_variable" href="structforecast__period.html#a7708c0d080288fd20d39803b6b887bab">week_day</a> ) );</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            }</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>        }</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        weather_report += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>                              <span class="comment">//~ %1 is day or night of week (e.g. &quot;Monday&quot;, or &quot;Friday Night&quot;),</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>                              <span class="comment">//~ %2 is weather type, %3 and %4 are temperatures.</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>                              <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%1$s %2$s. Highs of %3$s. Lows of %4$s. &quot;</span> ),</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>                              day, period.<a class="code hl_variable" href="structforecast__period.html#a311a1d8357724d4522a03dffbeda3944">type</a>-&gt;<a class="code hl_variable" href="structweather__type.html#a45c3434d18578e7839383583de59cdcd">name</a>,</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>                              <a class="code hl_function" href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a>( period.<a class="code hl_variable" href="structforecast__period.html#a0622b2a69ef1fe83e20f2eedec2a2872">temp_high</a> ),</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>                              <a class="code hl_function" href="group__Weather.html#ga84aca1e63585a67a2ccf3ffd9f01b7b4">print_temperature</a>( period.<a class="code hl_variable" href="structforecast__period.html#a5dae07c2ebbfa7a97ff8d785b7e59d46">temp_low</a> )</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                          );</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>    }</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span> </div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>    <span class="keywordflow">return</span> weather_report;</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_a1d0328da4c2fb146307396324bb85fa1"><div class="ttname"><a href="calendar_8cpp.html#a1d0328da4c2fb146307396324bb85fa1">is_dawn</a></div><div class="ttdeci">bool is_dawn(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently dawn - between sunrise and twilight_duration after sunrise.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00163">calendar.cpp:163</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a1f243cd9207ab39fad97d6b638b76757"><div class="ttname"><a href="calendar_8cpp.html#a1f243cd9207ab39fad97d6b638b76757">is_day</a></div><div class="ttdeci">bool is_day(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently day time - after dawn and before dusk.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00146">calendar.cpp:146</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a307340221160e8ffe2af4ddfe5e2a56e"><div class="ttname"><a href="calendar_8cpp.html#a307340221160e8ffe2af4ddfe5e2a56e">to_string_time_of_day</a></div><div class="ttdeci">std::string to_string_time_of_day(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00400">calendar.cpp:400</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ac200b295554f05d816686a1488c685db"><div class="ttname"><a href="calendar_8cpp.html#ac200b295554f05d816686a1488c685db">is_dusk</a></div><div class="ttdeci">bool is_dusk(const time_point &amp;p)</div><div class="ttdoc">Returns true if it's currently dusk - between sunset and and twilight_duration after sunset.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00155">calendar.cpp:155</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_ac4913a41335973f0a82358272fe601eb"><div class="ttname"><a href="calendar_8cpp.html#ac4913a41335973f0a82358272fe601eb">day_of_week</a></div><div class="ttdeci">weekdays day_of_week(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00427">calendar.cpp:427</a></div></div>
<div class="ttc" id="acalendar_8h_html_a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8"><div class="ttname"><a href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">clipped_unit::day</a></div><div class="ttdeci">@ day</div></div>
<div class="ttc" id="aclassovermapbuffer_html_ae65ce03be0ec7c6890583b7ae2ee639f"><div class="ttname"><a href="classovermapbuffer.html#ae65ce03be0ec7c6890583b7ae2ee639f">overmapbuffer::closest_city</a></div><div class="ttdeci">city_reference closest_city(const tripoint_abs_sm &amp;center)</div><div class="ttdoc">Find the closest city.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l01375">overmapbuffer.cpp:1375</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00058">achievement.cpp:58</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a20688ca0a8848ec0d73636ede90d27ad"><div class="ttname"><a href="classtime__duration.html#a20688ca0a8848ec0d73636ede90d27ad">time_duration::from_minutes</a></div><div class="ttdeci">static constexpr time_duration from_minutes(const T m)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00212">calendar.h:212</a></div></div>
<div class="ttc" id="acoordinates_8h_html_ae72b84003f239e5e878a036da3758331"><div class="ttname"><a href="coordinates_8h.html#ae72b84003f239e5e878a036da3758331">tripoint_abs_sm</a></div><div class="ttdeci">coords::coord_point&lt; tripoint, coords::origin::abs, coords::sm &gt; tripoint_abs_sm</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00490">coordinates.h:490</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga0eb7c656a09bbd24a6d761982e23c80e"><div class="ttname"><a href="group__Weather.html#ga0eb7c656a09bbd24a6d761982e23c80e">print_time_just_hour</a></div><div class="ttdeci">static std::string print_time_just_hour(const time_point &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00563">weather.cpp:563</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga90010e7f5354e53651b541dcfe9c9e9a"><div class="ttname"><a href="group__Weather.html#ga90010e7f5354e53651b541dcfe9c9e9a">to_string</a></div><div class="ttdeci">static std::string to_string(const weekdays &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00549">weather.cpp:549</a></div></div>
<div class="ttc" id="agroup__Weather_html_gab36b70cc7755703a4307e998c5ffc28b"><div class="ttname"><a href="group__Weather.html#gab36b70cc7755703a4307e998c5ffc28b">NUM_FORECAST_PERIODS</a></div><div class="ttdeci">constexpr int NUM_FORECAST_PERIODS</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00573">weather.cpp:573</a></div></div>
<div class="ttc" id="astructcity__reference_html_ab0c773d91319598da593679bf737f4aa"><div class="ttname"><a href="structcity__reference.html#ab0c773d91319598da593679bf737f4aa">city_reference::city</a></div><div class="ttdeci">const struct city * city</div><div class="ttdoc">The city itself, points into overmap::cities.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8h_source.html#l00081">overmapbuffer.h:81</a></div></div>
<div class="ttc" id="astructcity_html_afadfa28cfb7910655e01932913a3d928"><div class="ttname"><a href="structcity.html#afadfa28cfb7910655e01932913a3d928">city::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8h_source.html#l00059">overmap.h:59</a></div></div>
<div class="ttc" id="astructforecast__period_html"><div class="ttname"><a href="structforecast__period.html">forecast_period</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00575">weather.cpp:575</a></div></div>
<div class="ttc" id="astructforecast__period_html_a0622b2a69ef1fe83e20f2eedec2a2872"><div class="ttname"><a href="structforecast__period.html#a0622b2a69ef1fe83e20f2eedec2a2872">forecast_period::temp_high</a></div><div class="ttdeci">units::temperature temp_high</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00576">weather.cpp:576</a></div></div>
<div class="ttc" id="astructforecast__period_html_a311a1d8357724d4522a03dffbeda3944"><div class="ttname"><a href="structforecast__period.html#a311a1d8357724d4522a03dffbeda3944">forecast_period::type</a></div><div class="ttdeci">const weather_type * type</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00578">weather.cpp:578</a></div></div>
<div class="ttc" id="astructforecast__period_html_a458c9cf523e63da8d2dc3c5bb11a8419"><div class="ttname"><a href="structforecast__period.html#a458c9cf523e63da8d2dc3c5bb11a8419">forecast_period::type_priority</a></div><div class="ttdeci">int type_priority</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00579">weather.cpp:579</a></div></div>
<div class="ttc" id="astructforecast__period_html_a5dae07c2ebbfa7a97ff8d785b7e59d46"><div class="ttname"><a href="structforecast__period.html#a5dae07c2ebbfa7a97ff8d785b7e59d46">forecast_period::temp_low</a></div><div class="ttdeci">units::temperature temp_low</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00577">weather.cpp:577</a></div></div>
<div class="ttc" id="astructforecast__period_html_a7708c0d080288fd20d39803b6b887bab"><div class="ttname"><a href="structforecast__period.html#a7708c0d080288fd20d39803b6b887bab">forecast_period::week_day</a></div><div class="ttdeci">weekdays week_day</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00580">weather.cpp:580</a></div></div>
<div class="ttc" id="astructforecast__period_html_aaaf771b21e42d26a8661ee28cc468ac4"><div class="ttname"><a href="structforecast__period.html#aaaf771b21e42d26a8661ee28cc468ac4">forecast_period::is_day</a></div><div class="ttdeci">bool is_day</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00581">weather.cpp:581</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="overmapbuffer_8h_source.html#l00081">city_reference::city</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l01375">overmapbuffer::closest_city()</a>, <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00a628b7db04235f228d40adc671413a8c8">day</a>, <a class="el" href="calendar_8cpp_source.html#l00427">day_of_week()</a>, <a class="el" href="calendar_8h_source.html#l00212">time_duration::from_minutes()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="weather_8cpp_source.html#l00064">get_weather()</a>, <a class="el" href="calendar_8cpp_source.html#l00163">is_dawn()</a>, <a class="el" href="calendar_8cpp_source.html#l00146">is_day()</a>, <a class="el" href="weather_8cpp_source.html#l00581">forecast_period::is_day</a>, <a class="el" href="calendar_8cpp_source.html#l00155">is_dusk()</a>, <a class="el" href="overmap_8h_source.html#l00059">city::name</a>, <a class="el" href="weather__type_8h_source.html#l00106">weather_type::name</a>, <a class="el" href="weather_8cpp_source.html#l00573">NUM_FORECAST_PERIODS</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="overmapbuffer_8cpp_source.html#l00046">overmap_buffer</a>, <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="weather_8cpp_source.html#l00717">print_temperature()</a>, <a class="el" href="weather_8cpp_source.html#l00563">print_time_just_hour()</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="weather_8cpp_source.html#l00576">forecast_period::temp_high</a>, <a class="el" href="weather_8cpp_source.html#l00577">forecast_period::temp_low</a>, <a class="el" href="weather__gen_8h_source.html#l00016">w_point::temperature</a>, <a class="el" href="weather_8cpp_source.html#l00549">to_string()</a>, <a class="el" href="calendar_8cpp_source.html#l00400">to_string_time_of_day()</a>, <a class="el" href="calendar_8cpp_source.html#l00036">calendar::turn</a>, <a class="el" href="weather_8cpp_source.html#l00578">forecast_period::type</a>, <a class="el" href="weather_8cpp_source.html#l00579">forecast_period::type_priority</a>, and <a class="el" href="weather_8cpp_source.html#l00580">forecast_period::week_day</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l02169">iuse::radio_on()</a>.</p>

</div>
</div>
<a id="ga67a9f7471f0ad8b9812e213ac1c78c8f" name="ga67a9f7471f0ad8b9812e213ac1c78c8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67a9f7471f0ad8b9812e213ac1c78c8f">&#9670;&nbsp;</a></span>weather_manager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">weather_manager::weather_manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l01038">1038</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>{</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    <a class="code hl_variable" href="classweather__manager.html#a2f3392f297f6df41358a1e3a7f21d4b4">lightning_active</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <a class="code hl_variable" href="classweather__manager.html#a7900f28733571347e2e3ba0266a314dc">weather_override</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">weather_type_id::NULL_ID</a>();</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    <a class="code hl_variable" href="classweather__manager.html#ad3ea47132cda00f52a4c589ab1c671ad">nextweather</a> = <a class="code hl_variable" href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a>;</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>    <a class="code hl_variable" href="classweather__manager.html#a7340d2e1861893258606e6910cf79137">temperature</a> = 0;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>    <a class="code hl_variable" href="classweather__manager.html#ae3a0fada13f5c0e5d8fbe1a33b0fbc33">weather_id</a> = <a class="code hl_function" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">weather_type_id::NULL_ID</a>();</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>}</div>
<div class="ttc" id="anamespacecalendar_html_ae25f99fbff61e25df40b5b26bcedee8c"><div class="ttname"><a href="namespacecalendar.html#ae25f99fbff61e25df40b5b26bcedee8c">calendar::before_time_starts</a></div><div class="ttdeci">const time_point before_time_starts</div><div class="ttdoc">A time point that is always before the current turn, even when the game has just started.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00025">calendar.cpp:25</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8cpp_source.html#l00025">calendar::before_time_starts</a>, <a class="el" href="weather_8h_source.html#l00191">weather_manager::lightning_active</a>, <a class="el" href="weather_8h_source.html#l00205">weather_manager::nextweather</a>, <a class="el" href="classstring__id.html#ae29dd8ed38d2b5eb443a65ad46f10b2d">string_id&lt; weather_type &gt;::NULL_ID()</a>, <a class="el" href="weather_8h_source.html#l00188">weather_manager::temperature</a>, <a class="el" href="weather_8h_source.html#l00193">weather_manager::weather_id</a>, and <a class="el" href="weather_8h_source.html#l00199">weather_manager::weather_override</a>.</p>

</div>
</div>
<a id="ga65f6fab727709c98cc9959f01ecac53b" name="ga65f6fab727709c98cc9959f01ecac53b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65f6fab727709c98cc9959f01ecac53b">&#9670;&nbsp;</a></span>wet_player()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void weather_effect::wet_player </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main routine for wet effects caused by weather. </p>
<p >Drenching the player is applied after checks against worn and held items.</p>
<p >The warmth of armor is considered when determining how much drench happens per tick.</p>
<p >Note that this is not the only place where drenching can happen. For example, moving or swimming into water tiles will also cause drenching. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Weather.html#gaee2ea0506e3eef92eb305bf1289204aa" title="Fill funnels and makeshift funnels from weather effects.">fill_water_collectors</a> </dd>
<dd>
<a class="el" href="classmap.html#afdc3d888540a2a6f8fedc8b8026b08d3" title="Moved here from weather.cpp for speed.">map::decay_fields_and_scent</a> </dd>
<dd>
<a class="el" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc" title="Drenches the player with water, saturation is the percent gotten wet.">player::drench</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00372">372</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>{</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <a class="code hl_class" href="classCharacter.html">Character</a> &amp;target = <a class="code hl_function" href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a>();</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="group__Weather.html#ga29f289ab496b2f58d297384490905e92">is_player_outside</a>() ||</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>        target.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="weather_8cpp.html#a8e617648db087f046feac6d5cc381efe">trait_FEATHERS</a> ) ||</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        target.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;RAIN_PROTECT&quot;</span> ) ||</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        ( !<a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 50 ) &amp;&amp; target.<a class="code hl_function" href="classCharacter.html#a3aaa75382f6308a729369c7f2ccf0600">worn_with_flag</a>( <span class="stringliteral">&quot;RAINPROOF&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    }</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    <span class="comment">// Coarse correction to get us back to previously intended soaking rate.</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 6_seconds ) ) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    }</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    std::map&lt;bodypart_id, std::vector&lt;const item *&gt;&gt; clothing_map;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> &amp;bp : target.<a class="code hl_function" href="classCreature.html#a9f9cc294949ffc5bd51ab464b5c5ad6f">get_all_body_parts</a>() ) {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        clothing_map.emplace( bp, std::vector&lt;const item *&gt;() );</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>    }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classitem.html">item</a> &amp;it : target.<a class="code hl_variable" href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">worn</a> ) {</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>        <span class="comment">// TODO: Port body part set id changes</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        <span class="keyword">const</span> <a class="code hl_class" href="classbody__part__set.html">body_part_set</a> &amp;covered = it.<a class="code hl_function" href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">get_covered_body_parts</a>();</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>        <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>; i++ ) {</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> token = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a><span class="keyword">&gt;</span>( i );</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>            <span class="keywordflow">if</span>( covered.<a class="code hl_function" href="classbody__part__set.html#a450fb1707f17ac6ba5147ea73c3957c2">test</a>( token ) ) {</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>                clothing_map[<a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( token )].emplace_back( &amp;it );</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>            }</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        }</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    }</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    std::map&lt;bodypart_id, int&gt; warmth_bp = target.<a class="code hl_function" href="classCharacter.html#a64f14497e3cba41e92963ba948f20e80">warmth</a>( clothing_map );</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> warmth_delay = warmth_bp[<a class="code hl_variable" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>] * 0.8 +</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>                             warmth_bp[<a class="code hl_variable" href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a>] * 0.2;</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, 100 - amount + warmth_delay ) &gt; 10 ) {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>        <span class="comment">// Thick clothing slows down (but doesn&#39;t cap) soaking</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_enumvalue" href="relic_8h.html#a4beeee7f54b2b6d8a7f559714d979139a9ff49c6a11b0ed72fa190e9b55ec4f6d">wet</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.body_wetness;</div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keyword">const</span> <span class="keyword">auto</span> &amp;capacity = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.drench_capacity;</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <a class="code hl_class" href="classbody__part__set.html">body_part_set</a> drenched_parts{ { <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a> } };</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>    <span class="keywordflow">if</span>( wet[<a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>] * 100 &gt;= capacity[<a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>] * 50 ) {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>        <span class="comment">// Once upper body is 50%+ drenched, start soaking the legs too</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>        drenched_parts |= { { <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a> } };</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>    }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;u.drench( amount, drenched_parts, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>}</div>
<div class="ttc" id="aavatar_8cpp_html_a2eddae690431cd32ce7a091217d68a3a"><div class="ttname"><a href="avatar_8cpp.html#a2eddae690431cd32ce7a091217d68a3a">get_avatar</a></div><div class="ttdeci">avatar &amp; get_avatar()</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8cpp_source.html#l00104">avatar.cpp:104</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_aa1af101175ef4c9194f748dd67829fa9"><div class="ttname"><a href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a></div><div class="ttdeci">const bodypart_str_id body_part_torso(&quot;torso&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ade2e301ed150ac0191c87e8fb19420c1"><div class="ttname"><a href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a></div><div class="ttdeci">const bodypart_str_id body_part_head(&quot;head&quot;)</div></div>
<div class="ttc" id="abodypart_8cpp_html_ae34a481a7c686b233f2d8c48e43b723a"><div class="ttname"><a href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; convert_bp(body_part bp)</div><div class="ttdoc">Returns the new id for old token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00185">bodypart.cpp:185</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a></div><div class="ttdeci">body_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00039">bodypart.h:39</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a></div><div class="ttdeci">@ bp_leg_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00049">bodypart.h:49</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a></div><div class="ttdeci">@ bp_arm_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00044">bodypart.h:44</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a></div><div class="ttdeci">@ bp_leg_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00048">bodypart.h:48</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00040">bodypart.h:40</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a></div><div class="ttdeci">@ bp_arm_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00045">bodypart.h:45</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00217">character.h:218</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3aaa75382f6308a729369c7f2ccf0600"><div class="ttname"><a href="classCharacter.html#a3aaa75382f6308a729369c7f2ccf0600">Character::worn_with_flag</a></div><div class="ttdeci">bool worn_with_flag(const std::string &amp;flag, const bodypart_id &amp;bp=bodypart_str_id::NULL_ID()) const</div><div class="ttdoc">Returns true if the player is wearing an item with the given flag.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03231">character.cpp:3231</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c3defc0d53472077cb7577b30b1605f"><div class="ttname"><a href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">Character::worn</a></div><div class="ttdeci">std::list&lt; item &gt; worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01532">character.h:1532</a></div></div>
<div class="ttc" id="aclassCharacter_html_a64f14497e3cba41e92963ba948f20e80"><div class="ttname"><a href="classCharacter.html#a64f14497e3cba41e92963ba948f20e80">Character::warmth</a></div><div class="ttdeci">std::map&lt; bodypart_id, int &gt; warmth(const std::map&lt; bodypart_id, std::vector&lt; const item * &gt; &gt; &amp;clothing_map) const</div><div class="ttdoc">Returns warmth provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09328">character.cpp:9328</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01546">character.h:1546</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00101">mutation.cpp:101</a></div></div>
<div class="ttc" id="aclassCreature_html_a9f9cc294949ffc5bd51ab464b5c5ad6f"><div class="ttname"><a href="classCreature.html#a9f9cc294949ffc5bd51ab464b5c5ad6f">Creature::get_all_body_parts</a></div><div class="ttdeci">std::vector&lt; bodypart_id &gt; get_all_body_parts(bool only_main=false) const</div><div class="ttdoc">Returns body parts this creature have.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01633">creature.cpp:1633</a></div></div>
<div class="ttc" id="aclassbody__part__set_html"><div class="ttname"><a href="classbody__part__set.html">body_part_set</a></div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00198">bodypart.h:199</a></div></div>
<div class="ttc" id="aclassbody__part__set_html_a450fb1707f17ac6ba5147ea73c3957c2"><div class="ttname"><a href="classbody__part__set.html#a450fb1707f17ac6ba5147ea73c3957c2">body_part_set::test</a></div><div class="ttdeci">bool test(const body_part &amp;bp) const</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00237">bodypart.h:237</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id</a></div><div class="ttdoc">Just like the string_id, this is a wrapper for int based identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="int__id_8h_source.html#l00019">int_id.h:20</a></div></div>
<div class="ttc" id="aclassitem_html_aa370bf267d606ed6098dc9d1c518ebf5"><div class="ttname"><a href="classitem.html#aa370bf267d606ed6098dc9d1c518ebf5">item::get_covered_body_parts</a></div><div class="ttdeci">body_part_set get_covered_body_parts() const</div><div class="ttdoc">Bitset of all covered body parts.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00753">item.cpp:753</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05303">item.cpp:5303</a></div></div>
<div class="ttc" id="arelic_8h_html_a4beeee7f54b2b6d8a7f559714d979139a9ff49c6a11b0ed72fa190e9b55ec4f6d"><div class="ttname"><a href="relic_8h.html#a4beeee7f54b2b6d8a7f559714d979139a9ff49c6a11b0ed72fa190e9b55ec4f6d">relic_recharge_req::wet</a></div><div class="ttdeci">@ wet</div><div class="ttdoc">Must be wet or in rain.</div></div>
<div class="ttc" id="aweather_8cpp_html_a8e617648db087f046feac6d5cc381efe"><div class="ttname"><a href="weather_8cpp.html#a8e617648db087f046feac6d5cc381efe">trait_FEATHERS</a></div><div class="ttdeci">static const trait_id trait_FEATHERS(&quot;FEATHERS&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bodypart_8cpp.html#ade2e301ed150ac0191c87e8fb19420c1">body_part_head</a>, <a class="el" href="bodypart_8cpp.html#aa1af101175ef4c9194f748dd67829fa9">body_part_torso</a>, <a class="el" href="bodypart_8h_source.html#l00044">bp_arm_l</a>, <a class="el" href="bodypart_8h_source.html#l00045">bp_arm_r</a>, <a class="el" href="bodypart_8h_source.html#l00041">bp_head</a>, <a class="el" href="bodypart_8h_source.html#l00048">bp_leg_l</a>, <a class="el" href="bodypart_8h_source.html#l00049">bp_leg_r</a>, <a class="el" href="bodypart_8h_source.html#l00040">bp_torso</a>, <a class="el" href="bodypart_8cpp_source.html#l00185">convert_bp()</a>, <a class="el" href="game_8cpp_source.html#l00281">g</a>, <a class="el" href="creature_8cpp_source.html#l01633">Creature::get_all_body_parts()</a>, <a class="el" href="avatar_8cpp_source.html#l00104">get_avatar()</a>, <a class="el" href="item_8cpp_source.html#l00753">item::get_covered_body_parts()</a>, <a class="el" href="item_8cpp_source.html#l05303">item::has_flag()</a>, <a class="el" href="mutation_8cpp_source.html#l00101">Character::has_trait()</a>, <a class="el" href="weather_8cpp_source.html#l00069">is_player_outside()</a>, <a class="el" href="bodypart_8h_source.html#l00052">num_bp</a>, <a class="el" href="calendar_8cpp_source.html#l00490">calendar::once_every()</a>, <a class="el" href="rng_8cpp_source.html#l00065">one_in()</a>, <a class="el" href="artifact_8cpp_source.html#l00032">rng()</a>, <a class="el" href="bodypart_8h_source.html#l00237">body_part_set::test()</a>, <a class="el" href="weather_8cpp.html#a8e617648db087f046feac6d5cc381efe">trait_FEATHERS</a>, <a class="el" href="character_8cpp_source.html#l09328">Character::warmth()</a>, <a class="el" href="character_8h_source.html#l01546">Character::weapon</a>, <a class="el" href="relic_8h.html#a4beeee7f54b2b6d8a7f559714d979139a9ff49c6a11b0ed72fa190e9b55ec4f6d">wet</a>, <a class="el" href="character_8h_source.html#l01532">Character::worn</a>, and <a class="el" href="character_8cpp_source.html#l03231">Character::worn_with_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00522">handle_weather_effects()</a>, and <a class="el" href="weather__type_8cpp_source.html#l00121">weather_type::load()</a>.</p>

</div>
</div>
<a id="ga08bb6f845f2ee9c1efff1d0122da1edb" name="ga08bb6f845f2ee9c1efff1d0122da1edb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08bb6f845f2ee9c1efff1d0122da1edb">&#9670;&nbsp;</a></span>~weather_manager()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">weather_manager::~weather_manager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gab36b70cc7755703a4307e998c5ffc28b" name="gab36b70cc7755703a4307e998c5ffc28b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab36b70cc7755703a4307e998c5ffc28b">&#9670;&nbsp;</a></span>NUM_FORECAST_PERIODS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">constexpr int NUM_FORECAST_PERIODS = 6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">constexpr</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="weather_8cpp_source.html#l00573">573</a> of file <a class="el" href="weather_8cpp_source.html">weather.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="weather_8cpp_source.html#l00611">weather_forecast()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Apr 6 2023 22:52:42 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
