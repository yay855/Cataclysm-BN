<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: pf Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacepf.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pf Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html">anonymous_namespace{simple_pathfinding.cpp}</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpf_1_1directed__node.html">directed_node</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpf_1_1directed__path.html">directed_path</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpf_1_1node__score.html">node_score</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpf_1_1omt__score.html">omt_score</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpf_1_1simple__path.html">simple_path</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a049eccf54dd8305d85f562c73285f182"><td class="memTemplParams" colspan="2">template&lt;typename Point &gt; </td></tr>
<tr class="memitem:a049eccf54dd8305d85f562c73285f182"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn</a> = std::function&lt; <a class="el" href="structpf_1_1node__score.html">node_score</a>(<a class="el" href="structpf_1_1directed__node.html">directed_node</a>&lt; Point &gt;, <a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="structpf_1_1directed__node.html">directed_node</a>&lt; Point &gt; &gt;)&gt;</td></tr>
<tr class="separator:a049eccf54dd8305d85f562c73285f182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21fea0f310cb84db892b52e393aa7976"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepf.html#a21fea0f310cb84db892b52e393aa7976">omt_scoring_fn</a> = std::function&lt; <a class="el" href="structpf_1_1omt__score.html">omt_score</a>(<a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a>)&gt;</td></tr>
<tr class="separator:a21fea0f310cb84db892b52e393aa7976"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a14c469101b5d1f4999b0f73ffeac688a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpf_1_1directed__path.html">directed_path</a>&lt; <a class="el" href="structpoint.html">point</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepf.html#a14c469101b5d1f4999b0f73ffeac688a">greedy_path</a> (const <a class="el" href="structpoint.html">point</a> &amp;source, const <a class="el" href="structpoint.html">point</a> &amp;dest, const <a class="el" href="structpoint.html">point</a> &amp;max, <a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn</a>&lt; <a class="el" href="structpoint.html">point</a> &gt; scorer)</td></tr>
<tr class="separator:a14c469101b5d1f4999b0f73ffeac688a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9522754a6de06d3734399c3b198854b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpf_1_1simple__path.html">simple_path</a>&lt; <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepf.html#af9522754a6de06d3734399c3b198854b">find_overmap_path</a> (const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;source, const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;dest, int radius, <a class="el" href="namespacepf.html#a21fea0f310cb84db892b52e393aa7976">omt_scoring_fn</a> scorer, <a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; int &gt; max_cost=<a class="el" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a>)</td></tr>
<tr class="memdesc:af9522754a6de06d3734399c3b198854b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses A* to find an approximately-cheapest path from source to destination (in 3D).  <a href="namespacepf.html#af9522754a6de06d3734399c3b198854b">More...</a><br /></td></tr>
<tr class="separator:af9522754a6de06d3734399c3b198854b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adedfead83061a84d7be004b71c57fe09"><td class="memTemplParams" colspan="2">template&lt;typename Point , typename  = std::enable_if_t&lt;Point::dimension == 2&gt;&gt; </td></tr>
<tr class="memitem:adedfead83061a84d7be004b71c57fe09"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="structpf_1_1directed__path.html">directed_path</a>&lt; Point &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacepf.html#adedfead83061a84d7be004b71c57fe09">greedy_path</a> (const Point &amp;source, const Point &amp;dest, const Point &amp;max, <a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn</a>&lt; Point &gt; scorer)</td></tr>
<tr class="memdesc:adedfead83061a84d7be004b71c57fe09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses Greedy Best-First-Search to find a short path from source to destination [2D only].  <a href="namespacepf.html#adedfead83061a84d7be004b71c57fe09">More...</a><br /></td></tr>
<tr class="separator:adedfead83061a84d7be004b71c57fe09"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a21fea0f310cb84db892b52e393aa7976" name="a21fea0f310cb84db892b52e393aa7976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21fea0f310cb84db892b52e393aa7976">&#9670;&nbsp;</a></span>omt_scoring_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacepf.html#a21fea0f310cb84db892b52e393aa7976">pf::omt_scoring_fn</a> = typedef std::function&lt;<a class="el" href="structpf_1_1omt__score.html">omt_score</a>( <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> )&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="simple__pathfinding_8h_source.html#l00117">117</a> of file <a class="el" href="simple__pathfinding_8h_source.html">simple_pathfinding.h</a>.</p>

</div>
</div>
<a id="a049eccf54dd8305d85f562c73285f182" name="a049eccf54dd8305d85f562c73285f182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a049eccf54dd8305d85f562c73285f182">&#9670;&nbsp;</a></span>two_node_scoring_fn</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Point &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">pf::two_node_scoring_fn</a> = typedef std::function&lt;<a class="el" href="structpf_1_1node__score.html">node_score</a>( <a class="el" href="structpf_1_1directed__node.html">directed_node</a>&lt;Point&gt;, <a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt;<a class="el" href="structpf_1_1directed__node.html">directed_node</a>&lt;Point&gt; &gt; )&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="simple__pathfinding_8h_source.html#l00066">66</a> of file <a class="el" href="simple__pathfinding_8h_source.html">simple_pathfinding.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="af9522754a6de06d3734399c3b198854b" name="af9522754a6de06d3734399c3b198854b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9522754a6de06d3734399c3b198854b">&#9670;&nbsp;</a></span>find_overmap_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpf_1_1simple__path.html">simple_path</a>&lt; <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &gt; pf::find_overmap_path </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="coordinates_8h.html#a383a8345c0282c087ef788e4421c3ded">tripoint_abs_omt</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepf.html#a21fea0f310cb84db892b52e393aa7976">omt_scoring_fn</a>&#160;</td>
          <td class="paramname"><em>scorer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; int &gt;&#160;</td>
          <td class="paramname"><em>max_cost</em> = <code><a class="el" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses A* to find an approximately-cheapest path from source to destination (in 3D). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>Starting point of path </td></tr>
    <tr><td class="paramname">dest</td><td>End point of path </td></tr>
    <tr><td class="paramname">radius</td><td>Maximum search radius </td></tr>
    <tr><td class="paramname">scorer</td><td>function that returns the <a class="el" href="structpf_1_1omt__score.html">omt_score</a> for the given OMT </td></tr>
    <tr><td class="paramname">max_cost</td><td>Maximum path cost (optional) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="simple__pathfinding_8cpp_source.html#l00243">243</a> of file <a class="el" href="simple__pathfinding_8cpp_source.html">simple_pathfinding.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>{</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>    <span class="keyword">constexpr</span> <span class="keywordtype">size_t</span> max_search_count = 100000;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>    <a class="code hl_struct" href="structpf_1_1simple__path.html">simple_path&lt;tripoint_abs_omt&gt;</a> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    <span class="keywordtype">bool</span> meet = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="keyword">auto</span> do_astar = [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> &amp; start,</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                         std::unordered_map&lt;tripoint_abs_omt, navigation_node&gt; &amp;known_nodes,</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>                         std::priority_queue&lt;scored_address, std::vector&lt;scored_address&gt;, std::greater&lt;&gt;&gt; &amp;open_set,</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    std::unordered_map&lt;tripoint_abs_omt, navigation_node&gt; &amp;other_known_nodes ) {</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> cur_addr = open_set.top().addr;</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        open_set.pop();</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <span class="keywordflow">if</span>( other_known_nodes.find( cur_addr ) != other_known_nodes.end() ) {</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            meet = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> addr = cur_addr;</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> other_start = start == source ? dest : source;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <span class="keywordflow">while</span>( addr != other_start ) {</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.points.emplace_back( addr );</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                addr = addr + <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a0e8ef21a2d69ccae460acfc3baac8c07">direction_to_tripoint</a>( other_known_nodes.at( addr ).get_prev_dir() );</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.points.emplace_back( addr );</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>            addr = cur_addr;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>            <span class="keywordflow">while</span>( addr != start ) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                addr = addr + <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a0e8ef21a2d69ccae460acfc3baac8c07">direction_to_tripoint</a>( known_nodes.at( addr ).get_prev_dir() );</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.points.emplace_back( addr );</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>            }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structnavigation__node.html">navigation_node</a> &amp;cur_node = known_nodes.at( cur_addr );</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        <span class="keywordflow">for</span>( <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> dir : <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#aa1c49846f7751d9fa02c273867180a7e">enumerate_directions</a>( cur_node.allow_z_change ) ) {</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            <span class="keywordflow">if</span>( dir == cur_node.prev_dir ) {</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>                <span class="keywordflow">continue</span>; <span class="comment">// don&#39;t go back the way we just came</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            }</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            <span class="keyword">const</span> <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> rev_dir = <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a2e85cc5786917ed6927e8ac06512f374">reverse_direction</a>( dir );</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> next_addr = cur_addr + <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a0e8ef21a2d69ccae460acfc3baac8c07">direction_to_tripoint</a>( dir );</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> cumulative_cost = cur_node.cumulative_cost + <a class="code hl_function" href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a6e3091cce260b1c3821827e9dde921e9">adjust_omt_cost</a>( cur_node.node_cost, rev_dir,</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>                                        cur_node.get_prev_dir() );</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            <span class="keyword">auto</span> iter = known_nodes.find( next_addr );</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            <span class="keywordflow">if</span>( iter != known_nodes.end() ) {</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>                <a class="code hl_struct" href="structnavigation__node.html">navigation_node</a> &amp;next_node = iter-&gt;second;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>                <span class="keywordflow">if</span>( next_node.cumulative_cost &gt; cumulative_cost ) {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>                    next_node.cumulative_cost = cumulative_cost;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>                    next_node.prev_dir = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>( rev_dir );</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>                }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( known_nodes.size() &lt; max_search_count ) {</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#af1e184d8de5334c2012868d2295ea436">octile_dist</a>( source.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>(), next_addr.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>() ) &gt; radius ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>                }</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>                <span class="keyword">const</span> omt_score next_score = scorer( next_addr );</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>                <span class="keywordflow">if</span>( next_score.node_cost &lt; 0 ) {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                    <span class="comment">// TODO: add to closed set to avoid re-visiting</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>                }</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>                <span class="comment">// TODO: pass in the 10 (default terrain cost)</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> xy_score = <a class="code hl_function" href="coordinates_8h.html#af1e184d8de5334c2012868d2295ea436">octile_dist</a>( next_addr.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>(), dest.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>(), 10 );</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> z_score = std::abs( next_addr.<a class="code hl_function" href="classcoords_1_1coord__point.html#a2a7eadc4507dc5944b117ede64d77944">z</a>() - dest.<a class="code hl_function" href="classcoords_1_1coord__point.html#a2a7eadc4507dc5944b117ede64d77944">z</a>() ) * 10;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> estimated_total_cost = cumulative_cost + next_score.node_cost + xy_score + z_score;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>                <span class="keywordflow">if</span>( max_cost &amp;&amp; estimated_total_cost &gt; *max_cost ) {</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>                }</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>                <a class="code hl_struct" href="structnavigation__node.html">navigation_node</a> &amp;next_node = known_nodes[next_addr];</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>                next_node.cumulative_cost = cumulative_cost;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>                next_node.node_cost = next_score.node_cost;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>                next_node.prev_dir = <span class="keyword">static_cast&lt;</span>int8_t<span class="keyword">&gt;</span>( rev_dir );</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>                next_node.allow_z_change = next_score.allow_z_change;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                open_set.push( <a class="code hl_struct" href="structscored__address.html">scored_address</a>{ next_addr, estimated_total_cost } );</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>            }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>        }</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    };</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>    <span class="keyword">const</span> omt_score start_score = scorer( source );</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <span class="keyword">const</span> omt_score end_score = scorer( dest );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>    <span class="keywordflow">if</span>( start_score.node_cost &lt; 0 || end_score.node_cost &lt; 0 ) {</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>    }</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    std::unordered_map&lt;tripoint_abs_omt, navigation_node&gt; known_nodes_src;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>    std::priority_queue&lt;scored_address, std::vector&lt;scored_address&gt;, std::greater&lt;&gt;&gt; open_set_src;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>    known_nodes_src.emplace( source, <a class="code hl_struct" href="structnavigation__node.html">navigation_node</a>{0, 0, -1, start_score.allow_z_change} );</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>    open_set_src.push( <a class="code hl_struct" href="structscored__address.html">scored_address</a>{ source, 0 } );</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>    std::unordered_map&lt;tripoint_abs_omt, navigation_node&gt; known_nodes_dest;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>    std::priority_queue&lt;scored_address, std::vector&lt;scored_address&gt;, std::greater&lt;&gt;&gt; open_set_dest;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>    known_nodes_dest.emplace( dest, <a class="code hl_struct" href="structnavigation__node.html">navigation_node</a>{0, 0, -1, end_score.allow_z_change} );</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    open_set_dest.push( <a class="code hl_struct" href="structscored__address.html">scored_address</a>{ dest, 0 } );</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span> </div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keywordtype">int</span> search_count = 0;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <span class="keywordflow">while</span>( !open_set_src.empty() &amp;&amp; !open_set_dest.empty() &amp;&amp; !meet ) {</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        search_count++;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>        do_astar( source, known_nodes_src, open_set_src, known_nodes_dest );</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="keywordflow">if</span>( meet ) {</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>        <span class="keywordflow">if</span>( search_count &gt; 10000 ) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            do_astar( dest, known_nodes_dest, open_set_dest, known_nodes_src );</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        }</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>    }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>}</div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_a2a7eadc4507dc5944b117ede64d77944"><div class="ttname"><a href="classcoords_1_1coord__point.html#a2a7eadc4507dc5944b117ede64d77944">coords::coord_point::z</a></div><div class="ttdeci">constexpr auto &amp; z()</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00133">coordinates.h:133</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_acb7438b5f344b6841e64b56100761783"><div class="ttname"><a href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00130">coordinates.h:130</a></div></div>
<div class="ttc" id="acoordinates_8h_html_af1e184d8de5334c2012868d2295ea436"><div class="ttname"><a href="coordinates_8h.html#af1e184d8de5334c2012868d2295ea436">octile_dist</a></div><div class="ttdeci">int octile_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2, int multiplier=1)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00533">coordinates.h:533</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
<div class="ttc" id="anamespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03_html_a0e8ef21a2d69ccae460acfc3baac8c07"><div class="ttname"><a href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a0e8ef21a2d69ccae460acfc3baac8c07">pf::anonymous_namespace{simple_pathfinding.cpp}::direction_to_tripoint</a></div><div class="ttdeci">const tripoint &amp; direction_to_tripoint(direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8cpp_source.html#l00135">simple_pathfinding.cpp:135</a></div></div>
<div class="ttc" id="anamespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03_html_a2e85cc5786917ed6927e8ac06512f374"><div class="ttname"><a href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a2e85cc5786917ed6927e8ac06512f374">pf::anonymous_namespace{simple_pathfinding.cpp}::reverse_direction</a></div><div class="ttdeci">direction reverse_direction(direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8cpp_source.html#l00219">simple_pathfinding.cpp:219</a></div></div>
<div class="ttc" id="anamespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03_html_a6e3091cce260b1c3821827e9dde921e9"><div class="ttname"><a href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#a6e3091cce260b1c3821827e9dde921e9">pf::anonymous_namespace{simple_pathfinding.cpp}::adjust_omt_cost</a></div><div class="ttdeci">int adjust_omt_cost(int base_cost, direction dir_in, direction dir_out)</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8cpp_source.html#l00224">simple_pathfinding.cpp:224</a></div></div>
<div class="ttc" id="anamespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03_html_aa1c49846f7751d9fa02c273867180a7e"><div class="ttname"><a href="namespacepf_1_1anonymous__namespace_02simple__pathfinding_8cpp_03.html#aa1c49846f7751d9fa02c273867180a7e">pf::anonymous_namespace{simple_pathfinding.cpp}::enumerate_directions</a></div><div class="ttdeci">const std::vector&lt; direction &gt; &amp; enumerate_directions(bool allow_z_change)</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8cpp_source.html#l00202">simple_pathfinding.cpp:202</a></div></div>
<div class="ttc" id="astructnavigation__node_html"><div class="ttname"><a href="structnavigation__node.html">navigation_node</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00224">vehicle_autodrive.cpp:224</a></div></div>
<div class="ttc" id="astructpf_1_1simple__path_html"><div class="ttname"><a href="structpf_1_1simple__path.html">pf::simple_path</a></div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00045">simple_pathfinding.h:45</a></div></div>
<div class="ttc" id="astructscored__address_html"><div class="ttname"><a href="structscored__address.html">scored_address</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle__autodrive_8cpp_source.html#l00211">vehicle_autodrive.cpp:211</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simple__pathfinding_8cpp_source.html#l00224">pf::anonymous_namespace{simple_pathfinding.cpp}::adjust_omt_cost()</a>, <a class="el" href="simple__pathfinding_8h_source.html#l00110">pf::omt_score::allow_z_change</a>, <a class="el" href="simple__pathfinding_8cpp_source.html#l00135">pf::anonymous_namespace{simple_pathfinding.cpp}::direction_to_tripoint()</a>, <a class="el" href="simple__pathfinding_8cpp_source.html#l00202">pf::anonymous_namespace{simple_pathfinding.cpp}::enumerate_directions()</a>, <a class="el" href="simple__pathfinding_8h_source.html#l00106">pf::omt_score::node_cost</a>, <a class="el" href="coordinates_8h_source.html#l00533">octile_dist()</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="simple__pathfinding_8cpp_source.html#l00219">pf::anonymous_namespace{simple_pathfinding.cpp}::reverse_direction()</a>, <a class="el" href="coordinates_8h_source.html#l00130">coords::coord_point&lt; Point, Origin, Scale &gt;::xy()</a>, and <a class="el" href="coordinates_8h_source.html#l00133">coords::coord_point&lt; Point, Origin, Scale &gt;::z()</a>.</p>

<p class="reference">Referenced by <a class="el" href="overmapbuffer_8cpp_source.html#l00824">overmapbuffer::get_travel_path()</a>.</p>

</div>
</div>
<a id="a14c469101b5d1f4999b0f73ffeac688a" name="a14c469101b5d1f4999b0f73ffeac688a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c469101b5d1f4999b0f73ffeac688a">&#9670;&nbsp;</a></span>greedy_path() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpf_1_1directed__path.html">directed_path</a>&lt; <a class="el" href="structpoint.html">point</a> &gt; pf::greedy_path </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpoint.html">point</a> &amp;&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn</a>&lt; <a class="el" href="structpoint.html">point</a> &gt;&#160;</td>
          <td class="paramname"><em>scorer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="simple__pathfinding_8cpp_source.html#l00043">43</a> of file <a class="el" href="simple__pathfinding_8cpp_source.html">simple_pathfinding.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>{</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="keyword">using</span> Node = point_node;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="keyword">const</span> <span class="keyword">auto</span> inbounds = [ max ]( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp; p ) {</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        <span class="keywordflow">return</span> p.x &gt;= 0 &amp;&amp; p.x &lt; max.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> &amp;&amp; p.y &gt;= 0 &amp;&amp; p.y &lt; max.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    };</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    <span class="keyword">const</span> <span class="keyword">auto</span> map_index = [ max ]( <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> &amp; p ) {</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <span class="keywordflow">return</span> p.y * max.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> + p.x;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    };</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    directed_path&lt;point&gt; res;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="keywordflow">if</span>( source == dest ) {</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    }</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="keywordflow">if</span>( !inbounds( source ) || !inbounds( dest ) ) {</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    }</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keyword">const</span> Node first_node( source, <a class="code hl_enumvalue" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::type::invalid</a>, 1000 );</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="keywordflow">if</span>( scorer( directed_node&lt;point&gt;( first_node.pos, first_node.dir ),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                <a class="code hl_variable" href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a> ).node_cost &lt; 0 ) {</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    }</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <span class="keyword">const</span> <span class="keywordtype">size_t</span> map_size = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( max.<a class="code hl_variable" href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">x</a> * max.<a class="code hl_variable" href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">y</a> );</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    std::vector&lt;bool&gt; closed( map_size, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    std::vector&lt;int&gt; <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>( map_size, 0 );</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>    std::vector&lt;short&gt; dirs( map_size, 0 );</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    std::priority_queue&lt;Node, std::vector&lt;Node&gt;&gt; nodes[2];</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    nodes[i].push( first_node );</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>    <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>[map_index( source )] = std::numeric_limits&lt;int&gt;::max();</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="keywordflow">while</span>( !nodes[i].empty() ) {</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        <span class="keyword">const</span> Node mn( nodes[i].top() ); <span class="comment">// get the best-looking node</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        nodes[i].pop();</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <span class="comment">// mark it visited</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        closed[map_index( mn.pos )] = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="comment">// if we&#39;ve reached the end, draw the path and return</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="keywordflow">if</span>( mn.pos == dest ) {</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <a class="code hl_struct" href="structpoint.html">point</a> p = mn.pos;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            res.nodes.reserve( nodes[i].<a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() );</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>            <span class="keywordflow">while</span>( p != source ) {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>                <span class="keyword">const</span> <span class="keywordtype">int</span> n = map_index( p );</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>                <span class="keyword">const</span> <a class="code hl_enumeration" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a> dir = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a><span class="keyword">&gt;</span>( dirs[n] );</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                res.nodes.emplace_back( p, dir );</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                p += <a class="code hl_function" href="namespaceom__direction.html#abd60495dc245de428919857c1db77b04">om_direction::displace</a>( dir );</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>            }</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>            res.nodes.emplace_back( p );</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        }</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="keywordflow">for</span>( <a class="code hl_enumeration" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a> dir : <a class="code hl_variable" href="namespaceom__direction.html#a27cad92b0d05637eb934f1a7f3424e41">om_direction::all</a> ) {</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structpoint.html">point</a> p = mn.pos + <a class="code hl_function" href="namespaceom__direction.html#abd60495dc245de428919857c1db77b04">om_direction::displace</a>( dir );</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> n = map_index( p );</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            <span class="comment">// don&#39;t allow out of bounds or already traversed tiles</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            <span class="keywordflow">if</span>( !inbounds( p ) || closed[n] ) {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>            }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            <span class="keyword">const</span> node_score <a class="code hl_class" href="classscore.html">score</a> = scorer( directed_node&lt;point&gt;( p, dir ), directed_node&lt;point&gt;( mn.pos,</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                                             mn.dir ) );</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            <span class="keywordflow">if</span>( <a class="code hl_class" href="classscore.html">score</a>.node_cost &lt; 0 ) {</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>            <span class="keyword">const</span> <span class="keywordtype">int</span> priority = <a class="code hl_class" href="classscore.html">score</a>.node_cost + <a class="code hl_class" href="classscore.html">score</a>.estimated_dest_cost;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            <span class="comment">// record direction to shortest path</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>[n] == 0 || <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>[n] &gt; priority ) {</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>                dirs[n] = ( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( dir ) + 2 ) % 4;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>[n] != 0 ) {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                    <span class="keywordflow">while</span>( nodes[i].top().pos != p ) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                        nodes[1 - i].push( nodes[i].top() );</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>                        nodes[i].pop();</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>                    }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                    nodes[i].pop();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                    <span class="keywordflow">if</span>( nodes[i].<a class="code hl_variable" href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">size</a>() &gt; nodes[1 - i].size() ) {</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>                        i = 1 - i;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>                    }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>                    <span class="keywordflow">while</span>( !nodes[i].empty() ) {</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>                        nodes[1 - i].push( nodes[i].top() );</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>                        nodes[i].pop();</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>                    }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>                    i = 1 - i;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>                }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>                <a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>[n] = priority;</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                nodes[i].emplace( p, dir, priority );</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>            }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        }</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    }</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>}</div>
<div class="ttc" id="aclassscore_html"><div class="ttname"><a href="classscore.html">score</a></div><div class="ttdef"><b>Definition:</b> <a href="event__statistics_8h_source.html#l00092">event_statistics.h:93</a></div></div>
<div class="ttc" id="ahandle__action_8cpp_html_a18a5c5b03ba964c4d5d06e062510c99c"><div class="ttname"><a href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a></div><div class="ttdeci">static void open()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00516">handle_action.cpp:516</a></div></div>
<div class="ttc" id="anamespacecata_html_ad05314667ac5d05f984aeeef26b9a87f"><div class="ttname"><a href="namespacecata.html#ad05314667ac5d05f984aeeef26b9a87f">cata::nullopt</a></div><div class="ttdeci">static constexpr nullopt_t nullopt</div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00022">optional.h:22</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a27cad92b0d05637eb934f1a7f3424e41"><div class="ttname"><a href="namespaceom__direction.html#a27cad92b0d05637eb934f1a7f3424e41">om_direction::all</a></div><div class="ttdeci">const std::array&lt; type, 4 &gt; all</div><div class="ttdoc">For the purposes of iteration.</div><div class="ttdef"><b>Definition:</b> <a href="om__direction_8h_source.html#l00026">om_direction.h:26</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7c"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7c">om_direction::type</a></div><div class="ttdeci">type</div><div class="ttdoc">Basic enum for directions.</div><div class="ttdef"><b>Definition:</b> <a href="om__direction_8h_source.html#l00016">om_direction.h:16</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3"><div class="ttname"><a href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::type::invalid</a></div><div class="ttdeci">@ invalid</div></div>
<div class="ttc" id="anamespaceom__direction_html_abd60495dc245de428919857c1db77b04"><div class="ttname"><a href="namespaceom__direction.html#abd60495dc245de428919857c1db77b04">om_direction::displace</a></div><div class="ttdeci">point displace(type dir, int dist=1)</div><div class="ttdoc">Returns point(0, 0) displaced in specified direction by a specified distance.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04178">overmap.cpp:4178</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_af97f9dbddaa758278662da3478826c61"><div class="ttname"><a href="namespaceom__direction.html#af97f9dbddaa758278662da3478826c61">om_direction::size</a></div><div class="ttdeci">const size_t size</div><div class="ttdef"><b>Definition:</b> <a href="om__direction_8h_source.html#l00027">om_direction.h:27</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
<div class="ttc" id="astructpoint_html_a9a82ca9504acabb1e30569f89c805471"><div class="ttname"><a href="structpoint.html#a9a82ca9504acabb1e30569f89c805471">point::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00039">point.h:39</a></div></div>
<div class="ttc" id="astructpoint_html_ad679b07fb69d55f5ad454d0f1f2891d5"><div class="ttname"><a href="structpoint.html#ad679b07fb69d55f5ad454d0f1f2891d5">point::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00038">point.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="om__direction_8h_source.html#l00026">om_direction::all</a>, <a class="el" href="overmap_8cpp_source.html#l04178">om_direction::displace()</a>, <a class="el" href="namespaceom__direction.html#a3f3a3bf2c5af33fc8036734d1ba70b7cafedb2d84cafe20862cb4399751a8a7e3">om_direction::invalid</a>, <a class="el" href="simple__pathfinding_8h_source.html#l00036">pf::directed_path&lt; Point &gt;::nodes</a>, <a class="el" href="optional_8h_source.html#l00022">cata::nullopt</a>, <a class="el" href="handle__action_8cpp_source.html#l00516">open()</a>, <a class="el" href="om__direction_8h_source.html#l00027">om_direction::size</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, and <a class="el" href="point_8h_source.html#l00039">point::y</a>.</p>

<p class="reference">Referenced by <a class="el" href="simple__pathfinding_8h_source.html#l00083">greedy_path()</a>, <a class="el" href="overmap_8cpp_source.html#l03722">overmap::lay_out_connection()</a>, and <a class="el" href="overmapbuffer_8cpp_source.html#l00844">overmapbuffer::reveal_route()</a>.</p>

</div>
</div>
<a id="adedfead83061a84d7be004b71c57fe09" name="adedfead83061a84d7be004b71c57fe09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adedfead83061a84d7be004b71c57fe09">&#9670;&nbsp;</a></span>greedy_path() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename Point , typename  = std::enable_if_t&lt;Point::dimension == 2&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpf_1_1directed__path.html">directed_path</a>&lt; Point &gt; pf::greedy_path </td>
          <td>(</td>
          <td class="paramtype">const Point &amp;&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Point &amp;&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Point &amp;&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn</a>&lt; Point &gt;&#160;</td>
          <td class="paramname"><em>scorer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Uses Greedy Best-First-Search to find a short path from source to destination [2D only]. </p>
<p >The search area is a rectangle with corners at (0,0) and max.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>Starting point of path </td></tr>
    <tr><td class="paramname">dest</td><td>End point of path </td></tr>
    <tr><td class="paramname">max</td><td>Max permissible coordinates for a point on the path </td></tr>
    <tr><td class="paramname">scorer</td><td>function of (node &amp;current, node *previous) that returns <a class="el" href="structpf_1_1node__score.html">node_score</a>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="simple__pathfinding_8h_source.html#l00083">83</a> of file <a class="el" href="simple__pathfinding_8h_source.html">simple_pathfinding.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>{</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <a class="code hl_struct" href="structpf_1_1directed__path.html">directed_path&lt;Point&gt;</a> res;</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">two_node_scoring_fn&lt;point&gt;</a> point_scorer</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    = [scorer]( <a class="code hl_struct" href="structpf_1_1directed__node.html">directed_node&lt;point&gt;</a> current, <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;directed_node&lt;point&gt;</a>&gt; prev ) {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;directed_node&lt;Point&gt;</a>&gt; prev_node;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        <span class="keywordflow">if</span>( prev ) {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            prev_node = <a class="code hl_struct" href="structpf_1_1directed__node.html">directed_node&lt;Point&gt;</a>( Point( prev-&gt;pos ), prev-&gt;dir );</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>        }</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>        <span class="keywordflow">return</span> scorer( directed_node&lt;Point&gt;( Point( current.<a class="code hl_variable" href="structpf_1_1directed__node.html#af504819e11a3a8c20594e4f2052031f8">pos</a> ), current.<a class="code hl_variable" href="structpf_1_1directed__node.html#a4a6124c404afcce36de84771e09b6115">dir</a> ), prev_node );</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    };</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>    directed_path&lt;point&gt; path = <a class="code hl_function" href="namespacepf.html#adedfead83061a84d7be004b71c57fe09">greedy_path</a>( source.raw(), dest.raw(), max.raw(), point_scorer );</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    res.<a class="code hl_variable" href="structpf_1_1directed__path.html#aab5a8d20a948d75a4b517ac6e4893eab">nodes</a>.reserve( path.nodes.size() );</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;node : path.nodes ) {</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        res.<a class="code hl_variable" href="structpf_1_1directed__path.html#aab5a8d20a948d75a4b517ac6e4893eab">nodes</a>.emplace_back( Point( node.pos ), node.dir );</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    }</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keywordflow">return</span> res;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>}</div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="anamespacepf_html_a049eccf54dd8305d85f562c73285f182"><div class="ttname"><a href="namespacepf.html#a049eccf54dd8305d85f562c73285f182">pf::two_node_scoring_fn</a></div><div class="ttdeci">std::function&lt; node_score(directed_node&lt; Point &gt;, cata::optional&lt; directed_node&lt; Point &gt; &gt;)&gt; two_node_scoring_fn</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00066">simple_pathfinding.h:67</a></div></div>
<div class="ttc" id="anamespacepf_html_adedfead83061a84d7be004b71c57fe09"><div class="ttname"><a href="namespacepf.html#adedfead83061a84d7be004b71c57fe09">pf::greedy_path</a></div><div class="ttdeci">directed_path&lt; Point &gt; greedy_path(const Point &amp;source, const Point &amp;dest, const Point &amp;max, two_node_scoring_fn&lt; Point &gt; scorer)</div><div class="ttdoc">Uses Greedy Best-First-Search to find a short path from source to destination [2D only].</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00083">simple_pathfinding.h:83</a></div></div>
<div class="ttc" id="astructpf_1_1directed__node_html"><div class="ttname"><a href="structpf_1_1directed__node.html">pf::directed_node</a></div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00021">simple_pathfinding.h:21</a></div></div>
<div class="ttc" id="astructpf_1_1directed__node_html_a4a6124c404afcce36de84771e09b6115"><div class="ttname"><a href="structpf_1_1directed__node.html#a4a6124c404afcce36de84771e09b6115">pf::directed_node::dir</a></div><div class="ttdeci">om_direction::type dir</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00023">simple_pathfinding.h:23</a></div></div>
<div class="ttc" id="astructpf_1_1directed__node_html_af504819e11a3a8c20594e4f2052031f8"><div class="ttname"><a href="structpf_1_1directed__node.html#af504819e11a3a8c20594e4f2052031f8">pf::directed_node::pos</a></div><div class="ttdeci">Point pos</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00022">simple_pathfinding.h:22</a></div></div>
<div class="ttc" id="astructpf_1_1directed__path_html"><div class="ttname"><a href="structpf_1_1directed__path.html">pf::directed_path</a></div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00035">simple_pathfinding.h:35</a></div></div>
<div class="ttc" id="astructpf_1_1directed__path_html_aab5a8d20a948d75a4b517ac6e4893eab"><div class="ttname"><a href="structpf_1_1directed__path.html#aab5a8d20a948d75a4b517ac6e4893eab">pf::directed_path::nodes</a></div><div class="ttdeci">std::vector&lt; directed_node&lt; Point &gt; &gt; nodes</div><div class="ttdef"><b>Definition:</b> <a href="simple__pathfinding_8h_source.html#l00036">simple_pathfinding.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="simple__pathfinding_8h_source.html#l00023">pf::directed_node&lt; Point &gt;::dir</a>, <a class="el" href="simple__pathfinding_8cpp_source.html#l00043">greedy_path()</a>, <a class="el" href="simple__pathfinding_8h_source.html#l00036">pf::directed_path&lt; Point &gt;::nodes</a>, and <a class="el" href="simple__pathfinding_8h_source.html#l00022">pf::directed_node&lt; Point &gt;::pos</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacepf.html">pf</a></li>
    <li class="footer">Generated on Wed Feb 22 2023 22:40:24 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
