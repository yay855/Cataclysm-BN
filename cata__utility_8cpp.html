<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/cata_utility.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('cata__utility_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cata_utility.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="cata__utility_8h_source.html">cata_utility.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="fstream__utils_8h_source.html">fstream_utils.h</a>&quot;</code><br />
<code>#include &lt;cctype&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;cstdio&gt;</code><br />
<code>#include &lt;exception&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;iterator&gt;</code><br />
<code>#include &lt;memory&gt;</code><br />
<code>#include &lt;sstream&gt;</code><br />
<code>#include &lt;stdexcept&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &quot;<a class="el" href="debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="filesystem_8h_source.html">filesystem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="json_8h_source.html">json.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="options_8h_source.html">options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="output_8h_source.html">output.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="rng_8h_source.html">rng.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="translations_8h_source.html">translations.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="units_8h_source.html">units.h</a>&quot;</code><br />
</div>
<p><a href="cata__utility_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a81f1689c51547e98b9c0dc94e3363906"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a81f1689c51547e98b9c0dc94e3363906">pow10</a> (unsigned int n)</td></tr>
<tr class="separator:a81f1689c51547e98b9c0dc94e3363906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dbcecb703a6e1111a0552177b6bf9fc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">round_up</a> (double val, unsigned int dp)</td></tr>
<tr class="memdesc:a9dbcecb703a6e1111a0552177b6bf9fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Round a value up at a given decimal place.  <a href="cata__utility_8cpp.html#a9dbcecb703a6e1111a0552177b6bf9fc">More...</a><br /></td></tr>
<tr class="separator:a9dbcecb703a6e1111a0552177b6bf9fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6f470a02d08b2537d7ac06d3cabaf45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aa6f470a02d08b2537d7ac06d3cabaf45">modulo</a> (int v, int m)</td></tr>
<tr class="separator:aa6f470a02d08b2537d7ac06d3cabaf45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacdf27156d98b65ffe95503a510df4f5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aacdf27156d98b65ffe95503a510df4f5">isBetween</a> (int test, int down, int up)</td></tr>
<tr class="memdesc:aacdf27156d98b65ffe95503a510df4f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine whether a value is between two given boundaries.  <a href="cata__utility_8cpp.html#aacdf27156d98b65ffe95503a510df4f5">More...</a><br /></td></tr>
<tr class="separator:aacdf27156d98b65ffe95503a510df4f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1dabdd2cede5afc6bec5c63bfdadf13d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">logarithmic</a> (double t)</td></tr>
<tr class="memdesc:a1dabdd2cede5afc6bec5c63bfdadf13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic logistic function.  <a href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">More...</a><br /></td></tr>
<tr class="separator:a1dabdd2cede5afc6bec5c63bfdadf13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a85dc6d2ab7bcb093e77d20fcf171d6"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a> (int min, int max, int pos)</td></tr>
<tr class="memdesc:a6a85dc6d2ab7bcb093e77d20fcf171d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Normalized logistic function.  <a href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">More...</a><br /></td></tr>
<tr class="separator:a6a85dc6d2ab7bcb093e77d20fcf171d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedad91155e8b8c3f459bd5c588b80dd0"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aedad91155e8b8c3f459bd5c588b80dd0">normal_cdf</a> (double x, double mean, double stddev)</td></tr>
<tr class="memdesc:aedad91155e8b8c3f459bd5c588b80dd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cumulative distribution function of a certain normal distribution.  <a href="cata__utility_8cpp.html#aedad91155e8b8c3f459bd5c588b80dd0">More...</a><br /></td></tr>
<tr class="separator:aedad91155e8b8c3f459bd5c588b80dd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83338e5cfd99aac60a46f68a518b1bc2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a> (int val, int mod, int max, int min)</td></tr>
<tr class="memdesc:a83338e5cfd99aac60a46f68a518b1bc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clamp the value of a modifier in order to bound the resulting value.  <a href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">More...</a><br /></td></tr>
<tr class="separator:a83338e5cfd99aac60a46f68a518b1bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7932fbdf57e169d07e4e745365262393"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a7932fbdf57e169d07e4e745365262393">clamp_to_width</a> (double value, int width, int &amp;scale)</td></tr>
<tr class="memdesc:a7932fbdf57e169d07e4e745365262393"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clamp (number and space wise) value to with, taking into account the specified preferred scale, returning the adjusted (shortened) scale that best fit the width, optionally returning a flag that indicate if the value was truncated to fit the width.  <a href="cata__utility_8cpp.html#a7932fbdf57e169d07e4e745365262393">More...</a><br /></td></tr>
<tr class="separator:a7932fbdf57e169d07e4e745365262393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1fdd27f531841ea8ab1bf12c500cb8f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#af1fdd27f531841ea8ab1bf12c500cb8f">clamp_to_width</a> (double value, int width, int &amp;scale, bool *out_truncated)</td></tr>
<tr class="separator:af1fdd27f531841ea8ab1bf12c500cb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49c7bae3c3ac926a5501ffb127c1e97"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a> (const std::vector&lt; std::pair&lt; float, float &gt; &gt; &amp;points, float x)</td></tr>
<tr class="memdesc:ac49c7bae3c3ac926a5501ffb127c1e97"><td class="mdescLeft">&#160;</td><td class="mdescRight">From <code>points</code>, finds p1 and p2 such that p1.first &lt; x &lt; p2.first Then linearly interpolates between p1.second and p2.second and returns the result.  <a href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">More...</a><br /></td></tr>
<tr class="separator:ac49c7bae3c3ac926a5501ffb127c1e97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ce6437f37c6bc40771b7dcdceed438a"><td class="memItemLeft" align="right" valign="top">static std::ios_base::openmode&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a8ce6437f37c6bc40771b7dcdceed438a">cata_ios_mode_to_std</a> (std::ios_base::openmode dir, <a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9b">cata_ios_mode</a> m)</td></tr>
<tr class="separator:a8ce6437f37c6bc40771b7dcdceed438a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a622c5bbf103e24e414fea34574eb68a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a622c5bbf103e24e414fea34574eb68a8">write_to_file</a> (const std::string &amp;path, const std::function&lt; void(std::ostream &amp;)&gt; &amp;writer)</td></tr>
<tr class="separator:a622c5bbf103e24e414fea34574eb68a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa38aaf0ea769ed89a21d613c34925d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aaa38aaf0ea769ed89a21d613c34925d9">write_to_file</a> (const std::string &amp;path, const std::function&lt; void(std::ostream &amp;)&gt; &amp;writer, const char *const fail_message)</td></tr>
<tr class="memdesc:aaa38aaf0ea769ed89a21d613c34925d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a file for writing, calls the writer on that stream.  <a href="cata__utility_8cpp.html#aaa38aaf0ea769ed89a21d613c34925d9">More...</a><br /></td></tr>
<tr class="separator:aaa38aaf0ea769ed89a21d613c34925d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c6c3ddf581f85556062d6804445690b"><td class="memItemLeft" align="right" valign="top">std::istream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a3c6c3ddf581f85556062d6804445690b">safe_getline</a> (std::istream &amp;ins, std::string &amp;str)</td></tr>
<tr class="separator:a3c6c3ddf581f85556062d6804445690b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a996629d79715bd5b44fb507d0d368476"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a996629d79715bd5b44fb507d0d368476">read_from_file</a> (const std::string &amp;path, const std::function&lt; void(std::istream &amp;)&gt; &amp;reader)</td></tr>
<tr class="memdesc:a996629d79715bd5b44fb507d0d368476"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to open and read from given file using the given callback.  <a href="cata__utility_8cpp.html#a996629d79715bd5b44fb507d0d368476">More...</a><br /></td></tr>
<tr class="separator:a996629d79715bd5b44fb507d0d368476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb5f308b4d5f3656ad32fbe62fab29f1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#adb5f308b4d5f3656ad32fbe62fab29f1">read_from_file_json</a> (const std::string &amp;path, const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;reader)</td></tr>
<tr class="separator:adb5f308b4d5f3656ad32fbe62fab29f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6027f853e7b1145c11e17bdcf6a63a91"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a6027f853e7b1145c11e17bdcf6a63a91">read_from_file</a> (const std::string &amp;path, <a class="el" href="classJsonDeserializer.html">JsonDeserializer</a> &amp;reader)</td></tr>
<tr class="separator:a6027f853e7b1145c11e17bdcf6a63a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc8cc3e35ba50c37cf8597c5fa334c82"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#afc8cc3e35ba50c37cf8597c5fa334c82">read_from_file_optional</a> (const std::string &amp;path, const std::function&lt; void(std::istream &amp;)&gt; &amp;reader)</td></tr>
<tr class="separator:afc8cc3e35ba50c37cf8597c5fa334c82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbce2161540e3ab943aaf845688098bd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#abbce2161540e3ab943aaf845688098bd">read_from_file_optional_json</a> (const std::string &amp;path, const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;reader)</td></tr>
<tr class="separator:abbce2161540e3ab943aaf845688098bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab05ae72a3aac78f038cad1c969d9b78d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#ab05ae72a3aac78f038cad1c969d9b78d">read_from_file_optional</a> (const std::string &amp;path, <a class="el" href="classJsonDeserializer.html">JsonDeserializer</a> &amp;reader)</td></tr>
<tr class="separator:ab05ae72a3aac78f038cad1c969d9b78d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef9839561ee9641f7ba15ac9fe4f40c1"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aef9839561ee9641f7ba15ac9fe4f40c1">obscure_message</a> (const std::string &amp;str, std::function&lt; char()&gt; f)</td></tr>
<tr class="memdesc:aef9839561ee9641f7ba15ac9fe4f40c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply fuzzy effect to a string like: Hello, world! --&gt; H##lo, wurl#!  <a href="cata__utility_8cpp.html#aef9839561ee9641f7ba15ac9fe4f40c1">More...</a><br /></td></tr>
<tr class="separator:aef9839561ee9641f7ba15ac9fe4f40c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa093577de74b80470a847b6aac22d56e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#aa093577de74b80470a847b6aac22d56e">serialize_wrapper</a> (const std::function&lt; void(<a class="el" href="classJsonOut.html">JsonOut</a> &amp;)&gt; &amp;callback)</td></tr>
<tr class="memdesc:aa093577de74b80470a847b6aac22d56e"><td class="mdescLeft">&#160;</td><td class="mdescRight">@group JSON (de)serialization wrappers.  <a href="cata__utility_8cpp.html#aa093577de74b80470a847b6aac22d56e">More...</a><br /></td></tr>
<tr class="separator:aa093577de74b80470a847b6aac22d56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bef7ba76ece7cbf962a0effbd5d7d11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cata__utility_8cpp.html#a3bef7ba76ece7cbf962a0effbd5d7d11">deserialize_wrapper</a> (const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;callback, const std::string &amp;data)</td></tr>
<tr class="separator:a3bef7ba76ece7cbf962a0effbd5d7d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a83338e5cfd99aac60a46f68a518b1bc2" name="a83338e5cfd99aac60a46f68a518b1bc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83338e5cfd99aac60a46f68a518b1bc2">&#9670;&nbsp;</a></span>bound_mod_to_vals()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bound_mod_to_vals </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clamp the value of a modifier in order to bound the resulting value. </p>
<p >Ensures that a modifier value will not cause a base value to exceed given bounds when applied. If necessary, the given modifier value is increased or reduced to meet this constraint.</p>
<p >Giving a value of zero for min or max indicates that there is no minimum or maximum boundary, respectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>The base value that the modifier will be applied to </td></tr>
    <tr><td class="paramname">mod</td><td>The desired modifier to be added to the base value </td></tr>
    <tr><td class="paramname">max</td><td>The desired maximum value of the base value after modification, or zero. </td></tr>
    <tr><td class="paramname">min</td><td>The desired minimum value of the base value after modification, or zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value of mod, possibly altered to respect the min and max boundaries </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00111">111</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>{</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    <span class="keywordflow">if</span>( val + <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &gt; max &amp;&amp; max != 0 ) {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = std::max( max - val, 0 );</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    }</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordflow">if</span>( val + <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> &lt; min &amp;&amp; min != 0 ) {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = std::min( min - val, 0 );</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    }</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a>;</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>}</div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00026">magic_enchantment.h:26</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="character__turn_8cpp_source.html#l00326">Character::process_one_effect()</a>.</p>

</div>
</div>
<a id="a8ce6437f37c6bc40771b7dcdceed438a" name="a8ce6437f37c6bc40771b7dcdceed438a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ce6437f37c6bc40771b7dcdceed438a">&#9670;&nbsp;</a></span>cata_ios_mode_to_std()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static std::ios_base::openmode cata_ios_mode_to_std </td>
          <td>(</td>
          <td class="paramtype">std::ios_base::openmode&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9b">cata_ios_mode</a>&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00177">177</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>{</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    std::ios_base::openmode <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = dir;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( m ) &amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">cata_ios_mode::binary</a> ) ) {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> |= std::ios_base::binary;</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">if</span>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( m ) &amp; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_enumvalue" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9bad2a57dc1d883fd21fb9951699df71cc7">cata_ios_mode::app</a> ) ) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> |= std::ios_base::app;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>}</div>
<div class="ttc" id="afstream__utils_8h_html_ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20"><div class="ttname"><a href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">cata_ios_mode::binary</a></div><div class="ttdeci">@ binary</div></div>
<div class="ttc" id="afstream__utils_8h_html_ac4a6edeeba0600920806e9fc71394d9bad2a57dc1d883fd21fb9951699df71cc7"><div class="ttname"><a href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9bad2a57dc1d883fd21fb9951699df71cc7">cata_ios_mode::app</a></div><div class="ttdeci">@ app</div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9bad2a57dc1d883fd21fb9951699df71cc7">app</a>, <a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">binary</a>, and <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="cata__utility_8cpp_source.html#l00274">cata_ofstream::open()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00394">cata_ifstream::open()</a>.</p>

</div>
</div>
<a id="a7932fbdf57e169d07e4e745365262393" name="a7932fbdf57e169d07e4e745365262393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7932fbdf57e169d07e4e745365262393">&#9670;&nbsp;</a></span>clamp_to_width() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double clamp_to_width </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>scale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clamp (number and space wise) value to with, taking into account the specified preferred scale, returning the adjusted (shortened) scale that best fit the width, optionally returning a flag that indicate if the value was truncated to fit the width. </p>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00122">122</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>{</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8cpp.html#a7932fbdf57e169d07e4e745365262393">clamp_to_width</a>( value, width, <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>, <span class="keyword">nullptr</span> );</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a7932fbdf57e169d07e4e745365262393"><div class="ttname"><a href="cata__utility_8cpp.html#a7932fbdf57e169d07e4e745365262393">clamp_to_width</a></div><div class="ttdeci">double clamp_to_width(double value, int width, int &amp;scale)</div><div class="ttdoc">Clamp (number and space wise) value to with, taking into account the specified preferred scale,...</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00122">cata_utility.cpp:122</a></div></div>
<div class="ttc" id="anamespacecoords_html_aefed5186be640da17dc0e723c536715a"><div class="ttname"><a href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">coords::scale</a></div><div class="ttdeci">scale</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00021">coordinates.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00122">clamp_to_width()</a>.</p>

<p class="reference">Referenced by <a class="el" href="cata__utility_8cpp_source.html#l00122">clamp_to_width()</a>, and <a class="el" href="output_8cpp_source.html#l01985">format_volume()</a>.</p>

</div>
</div>
<a id="af1fdd27f531841ea8ab1bf12c500cb8f" name="af1fdd27f531841ea8ab1bf12c500cb8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1fdd27f531841ea8ab1bf12c500cb8f">&#9670;&nbsp;</a></span>clamp_to_width() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double clamp_to_width </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>out_truncated</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00127">127</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>{</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <span class="keywordflow">if</span>( out_truncated != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        *out_truncated = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <span class="keywordflow">if</span>( value &gt;= std::pow( 10.0, width ) ) {</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="comment">// above the maximum number we can fit in the width without decimal</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <span class="comment">// show the biggest number we can without decimal</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="comment">// flag as truncated</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        value = std::pow( 10.0, width ) - 1.0;</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> = 0;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <span class="keywordflow">if</span>( out_truncated != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>            *out_truncated = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        }</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> &gt; 0 ) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> s = 1; s &lt;= <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a>; s++ ) {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            <span class="comment">// 1 decimal separator + &quot;s&quot;</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>            <span class="keywordtype">int</span> scale_width = 1 + s;</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>            <span class="keywordflow">if</span>( width &gt; scale_width &amp;&amp; value &gt;= std::pow( 10.0, width - scale_width ) ) {</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                <span class="comment">// above the maximum number we can fit in the width with &quot;s&quot; decimals</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                <span class="comment">// show this number with one less decimal than &quot;s&quot;</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                <a class="code hl_enumeration" href="namespacecoords.html#aefed5186be640da17dc0e723c536715a">scale</a> = s - 1;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>            }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>        }</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    }</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">return</span> value;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bef7ba76ece7cbf962a0effbd5d7d11" name="a3bef7ba76ece7cbf962a0effbd5d7d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bef7ba76ece7cbf962a0effbd5d7d11">&#9670;&nbsp;</a></span>deserialize_wrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deserialize_wrapper </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00667">667</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>{</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    std::istringstream buffer( data );</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>    <a class="code hl_class" href="classJsonIn.html">JsonIn</a> jsin( buffer );</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>    callback( jsin );</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>}</div>
<div class="ttc" id="aclassJsonIn_html"><div class="ttname"><a href="classJsonIn.html">JsonIn</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00172">json.h:173</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="fstream__utils_8h_source.html#l00218">deserialize()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00399">rcdrive()</a>.</p>

</div>
</div>
<a id="aacdf27156d98b65ffe95503a510df4f5" name="aacdf27156d98b65ffe95503a510df4f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacdf27156d98b65ffe95503a510df4f5">&#9670;&nbsp;</a></span>isBetween()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool isBetween </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>down</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>up</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine whether a value is between two given boundaries. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">test</td><td>Value to be tested. </td></tr>
    <tr><td class="paramname">down</td><td>Lower boundary for value. </td></tr>
    <tr><td class="paramname">up</td><td>Upper boundary for value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if test value is greater than lower boundary and less than upper boundary, otherwise returns false. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00059">59</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>{</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>    <span class="keywordflow">return</span> test &gt; <a class="code hl_enumvalue" href="namespacedetail.html#a85c22d2ea092a6b8340cec5779f4f2e7a74e8333ad11685ff3bdae589c8f6e34d">down</a> &amp;&amp; test &lt; <a class="code hl_enumvalue" href="namespacedetail.html#a85c22d2ea092a6b8340cec5779f4f2e7a46c48bec0d282018b9d167eef7711b2c">up</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>}</div>
<div class="ttc" id="anamespacedetail_html_a85c22d2ea092a6b8340cec5779f4f2e7a46c48bec0d282018b9d167eef7711b2c"><div class="ttname"><a href="namespacedetail.html#a85c22d2ea092a6b8340cec5779f4f2e7a46c48bec0d282018b9d167eef7711b2c">detail::round_direction::up</a></div><div class="ttdeci">@ up</div></div>
<div class="ttc" id="anamespacedetail_html_a85c22d2ea092a6b8340cec5779f4f2e7a74e8333ad11685ff3bdae589c8f6e34d"><div class="ttname"><a href="namespacedetail.html#a85c22d2ea092a6b8340cec5779f4f2e7a74e8333ad11685ff3bdae589c8f6e34d">detail::round_direction::down</a></div><div class="ttdeci">@ down</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1dabdd2cede5afc6bec5c63bfdadf13d" name="a1dabdd2cede5afc6bec5c63bfdadf13d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1dabdd2cede5afc6bec5c63bfdadf13d">&#9670;&nbsp;</a></span>logarithmic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double logarithmic </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Basic logistic function. </p>
<p >Calculates the value at a single point on a standard logistic curve.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>Point on logistic curve to retrieve value for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value of the logistic curve at the given point </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00068">68</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>{</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keywordflow">return</span> 1 / ( 1 + std::exp( -t ) );</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="cata__utility_8cpp_source.html#l00073">logarithmic_range()</a>.</p>

</div>
</div>
<a id="a6a85dc6d2ab7bcb093e77d20fcf171d6" name="a6a85dc6d2ab7bcb093e77d20fcf171d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a85dc6d2ab7bcb093e77d20fcf171d6">&#9670;&nbsp;</a></span>logarithmic_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double logarithmic_range </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Normalized logistic function. </p>
<p >Generates a logistic curve on the domain [-6,6], then normalizes such that the value ranges from 1 to 0. A single point is then calculated on this curve.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">min</td><td>t-value that should yield an output of 1 on the scaled curve. </td></tr>
    <tr><td class="paramname">max</td><td>t-value that should yield an output of 0 on the scaled curve. </td></tr>
    <tr><td class="paramname">pos</td><td>t-value to calculate the output for.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The value of the scaled logistic curve at point pos. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00073">73</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>{</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> LOGI_CUTOFF = 4;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> LOGI_MIN = <a class="code hl_function" href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">logarithmic</a>( -LOGI_CUTOFF );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> LOGI_MAX = <a class="code hl_function" href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">logarithmic</a>( +LOGI_CUTOFF );</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> LOGI_RANGE = LOGI_MAX - LOGI_MIN;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>    <span class="keywordflow">if</span>( min &gt;= max ) {</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Invalid interval (%d, %d).&quot;</span>, min, max );</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    }</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    <span class="comment">// Anything beyond (min,max) gets clamped.</span></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    <span class="keywordflow">if</span>( pos &lt;= min ) {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>        <span class="keywordflow">return</span> 1.0;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( pos &gt;= max ) {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    }</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <span class="comment">// Normalize the pos to [0,1]</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>    <span class="keywordtype">double</span> range = max - min;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>    <span class="keywordtype">double</span> unit_pos = ( pos - min ) / range;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="comment">// Scale and flip it to [+LOGI_CUTOFF,-LOGI_CUTOFF]</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="keywordtype">double</span> scaled_pos = LOGI_CUTOFF - 2 * LOGI_CUTOFF * unit_pos;</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span> </div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="comment">// Get the raw logistic value.</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keywordtype">double</span> raw_logistic = <a class="code hl_function" href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">logarithmic</a>( scaled_pos );</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <span class="comment">// Scale the output to [0,1]</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    <span class="keywordflow">return</span> ( raw_logistic - LOGI_MIN ) / LOGI_RANGE;</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a1dabdd2cede5afc6bec5c63bfdadf13d"><div class="ttname"><a href="cata__utility_8cpp.html#a1dabdd2cede5afc6bec5c63bfdadf13d">logarithmic</a></div><div class="ttdeci">double logarithmic(double t)</div><div class="ttdoc">Basic logistic function.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00068">cata_utility.cpp:68</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00068">logarithmic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03875">ranged::aim_per_move()</a>, <a class="el" href="melee_8cpp_source.html#l01576">Character::block_hit()</a>, <a class="el" href="morale_8cpp_source.html#l00138">player_morale::morale_point::get_net_bonus()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00287">weather_generator::get_water_temperature()</a>, and <a class="el" href="character_8cpp_source.html#l05179">Character::update_bodytemp()</a>.</p>

</div>
</div>
<a id="aa6f470a02d08b2537d7ac06d3cabaf45" name="aa6f470a02d08b2537d7ac06d3cabaf45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6f470a02d08b2537d7ac06d3cabaf45">&#9670;&nbsp;</a></span>modulo()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int modulo </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>v</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00050">50</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>{</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    <span class="comment">// C++11: negative v and positive m result in negative v%m (or 0),</span></div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// but this is supposed to be mathematical modulo: 0 &lt;= v%m &lt; m,</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> r = v % m;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    <span class="comment">// Adding m in that (and only that) case.</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <span class="keywordflow">return</span> r &gt;= 0 ? r : r + ( m * ( 1 - r / m ) );</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="vehicle_8cpp_source.html#l06821">is_sm_tile_outside()</a>, <a class="el" href="vehicle_8cpp_source.html#l06801">is_sm_tile_over_water()</a>, <a class="el" href="newcharacter_8cpp_source.html#l01743">set_skills()</a>, and <a class="el" href="distraction__manager_8cpp_source.html#l00061">distraction_manager::distraction_manager_gui::show()</a>.</p>

</div>
</div>
<a id="ac49c7bae3c3ac926a5501ffb127c1e97" name="ac49c7bae3c3ac926a5501ffb127c1e97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49c7bae3c3ac926a5501ffb127c1e97">&#9670;&nbsp;</a></span>multi_lerp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float multi_lerp </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; std::pair&lt; float, float &gt; &gt; &amp;&#160;</td>
          <td class="paramname"><em>points</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>x</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>From <code>points</code>, finds p1 and p2 such that p1.first &lt; x &lt; p2.first Then linearly interpolates between p1.second and p2.second and returns the result. </p>
<p ><code>points</code> should be sorted by first elements of the pairs. If x is outside range, returns second value of the first (if x &lt; points[0].first) or last point. </p>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00156">156</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>{</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="keywordtype">size_t</span> i = 0;</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keywordflow">while</span>( i &lt; points.size() &amp;&amp; points[i].first &lt;= x ) {</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>        i++;</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    }</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordflow">if</span>( i == 0 ) {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>        <span class="keywordflow">return</span> points.front().second;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( i &gt;= points.size() ) {</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="keywordflow">return</span> points.back().second;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    }</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span> </div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="comment">// How far are we along the way from last threshold to current one</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> t = ( x - points[i - 1].first ) /</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>                    ( points[i].first - points[i - 1].first );</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    <span class="comment">// Linear interpolation of values at relevant thresholds</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">return</span> ( t * points[i].second ) + ( ( 1 - t ) * points[i - 1].second );</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="calendar_8h.html#a5db9490f8316b22d7c367c5a563a2f00aa9f0e61a137d86aa9db53465e0801612">second</a>.</p>

<p class="reference">Referenced by <a class="el" href="character__effects_8cpp_source.html#l00073">character_effects::get_kcal_speed_penalty()</a>, <a class="el" href="character__effects_8cpp_source.html#l00089">character_effects::get_thirst_speed_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l01939">npc_ai::gun_value()</a>, and <a class="el" href="character__turn_8cpp_source.html#l00580">Character::reset_stats()</a>.</p>

</div>
</div>
<a id="aedad91155e8b8c3f459bd5c588b80dd0" name="aedad91155e8b8c3f459bd5c588b80dd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedad91155e8b8c3f459bd5c588b80dd0">&#9670;&nbsp;</a></span>normal_cdf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double normal_cdf </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>mean</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>stddev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cumulative distribution function of a certain normal distribution. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>point at which the CDF of the distribution is measured </td></tr>
    <tr><td class="paramname">mean</td><td>mean of the normal distribution </td></tr>
    <tr><td class="paramname">stddev</td><td>standard deviation of the normal distribution</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The probability that a random point from the distribution will be lesser than</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00106">106</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>{</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    <span class="keywordflow">return</span> 0.5 * ( 1.0 + std::erf( ( x - mean ) / ( stddev * <a class="code hl_define" href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a> ) ) );</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>}</div>
<div class="ttc" id="amath__defines_8h_html_a66b3ab30f1332874326ed93969e496e0"><div class="ttname"><a href="math__defines_8h.html#a66b3ab30f1332874326ed93969e496e0">M_SQRT2</a></div><div class="ttdeci">#define M_SQRT2</div><div class="ttdef"><b>Definition:</b> <a href="math__defines_8h_source.html#l00029">math_defines.h:29</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="math__defines_8h_source.html#l00029">M_SQRT2</a>.</p>

<p class="reference">Referenced by <a class="el" href="ballistics_8cpp_source.html#l00514">ranged::hit_chance()</a>.</p>

</div>
</div>
<a id="aef9839561ee9641f7ba15ac9fe4f40c1" name="aef9839561ee9641f7ba15ac9fe4f40c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef9839561ee9641f7ba15ac9fe4f40c1">&#9670;&nbsp;</a></span>obscure_message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string obscure_message </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::function&lt; char()&gt;&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply fuzzy effect to a string like: Hello, world! --&gt; H##lo, wurl#! </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>the original string to be processed </td></tr>
    <tr><td class="paramname">f</td><td>the function that guides how to mess the message f() will be called for each character (lingual, not byte): [-] f() == -1 : nothing will be done [-] f() == 0 : the said character will be replace by a random character [-] f() == ch : the said character will be replace by ch</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The processed string </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00620">620</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>{</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>    <span class="comment">//~ translators: place some random 1-width characters here in your language if possible, or leave it as is</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>    std::string gibberish_narrow = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span> );</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    std::string gibberish_wide =</div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        <span class="comment">//~ translators: place some random 2-width characters here in your language if possible, or leave it as is</span></div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>        <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    std::wstring w_gibberish_narrow = <a class="code hl_function" href="catacharset_8cpp.html#a3120d20c82d79bda9e9c74dabeec2e99">utf8_to_wstr</a>( gibberish_narrow );</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    std::wstring w_gibberish_wide = <a class="code hl_function" href="catacharset_8cpp.html#a3120d20c82d79bda9e9c74dabeec2e99">utf8_to_wstr</a>( gibberish_wide );</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>    std::wstring w_str = <a class="code hl_function" href="catacharset_8cpp.html#a3120d20c82d79bda9e9c74dabeec2e99">utf8_to_wstr</a>( str );</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    <span class="comment">// a trailing NULL terminator is necessary for utf8_width function</span></div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <span class="keywordtype">char</span> transformation[2] = { 0 };</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; w_str.size(); ++i ) {</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        transformation[0] = f();</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>        std::string this_char = <a class="code hl_function" href="catacharset_8cpp.html#a62f23c35aca0971caf148e4c35ee152c">wstr_to_utf8</a>( std::wstring( 1, w_str[i] ) );</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        <span class="keywordflow">if</span>( transformation[0] == -1 ) {</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( transformation[0] == 0 ) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( this_char ) == 1 ) {</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>                w_str[i] = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( w_gibberish_narrow );</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>                w_str[i] = <a class="code hl_function" href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a>( w_gibberish_wide );</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>            }</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            <span class="comment">// Only support the case e.g. replace current character to symbols like # or ?</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( transformation ) != 1 ) {</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>                <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;target character isn&#39;t narrow&quot;</span> );</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>            }</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>            <span class="comment">// A 2-width wide character in the original string should be replace by two narrow characters</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>            w_str.replace( i, 1, <a class="code hl_function" href="catacharset_8cpp.html#a3120d20c82d79bda9e9c74dabeec2e99">utf8_to_wstr</a>( std::string( <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( this_char ), transformation[0] ) ) );</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        }</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    }</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    std::string <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> = <a class="code hl_function" href="catacharset_8cpp.html#a62f23c35aca0971caf148e4c35ee152c">wstr_to_utf8</a>( w_str );</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( str ) != <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a> ) ) {</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;utf8_width differ between original string and obscured string&quot;</span> );</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    }</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    <span class="keywordflow">return</span> <a class="code hl_enumeration" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">result</a>;</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>}</div>
<div class="ttc" id="acatacharset_8cpp_html_a3120d20c82d79bda9e9c74dabeec2e99"><div class="ttname"><a href="catacharset_8cpp.html#a3120d20c82d79bda9e9c74dabeec2e99">utf8_to_wstr</a></div><div class="ttdeci">std::wstring utf8_to_wstr(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00383">catacharset.cpp:383</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_a62f23c35aca0971caf148e4c35ee152c"><div class="ttname"><a href="catacharset_8cpp.html#a62f23c35aca0971caf148e4c35ee152c">wstr_to_utf8</a></div><div class="ttdeci">std::string wstr_to_utf8(const std::wstring &amp;wstr)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00400">catacharset.cpp:400</a></div></div>
<div class="ttc" id="acatacharset_8cpp_html_a7616a48a4b48437c60b6683439a8f3e2"><div class="ttname"><a href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a></div><div class="ttdeci">int utf8_width(const char *s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00142">catacharset.cpp:142</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5ae"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5ae">detail::digits::result</a></div><div class="ttdeci">result</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01626">fmtlib_format-inl.h:1626</a></div></div>
<div class="ttc" id="arng_8h_html_a12244355ee77108f1b08618e9962e4d1"><div class="ttname"><a href="rng_8h.html#a12244355ee77108f1b08618e9962e4d1">random_entry</a></div><div class="ttdeci">V random_entry(const C &amp;container, D default_value)</div><div class="ttdoc">Returns a random entry in the container.</div><div class="ttdef"><b>Definition:</b> <a href="rng_8h_source.html#l00088">rng.h:88</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="rng_8h_source.html#l00088">random_entry()</a>, <a class="el" href="catacharset_8cpp_source.html#l00383">utf8_to_wstr()</a>, <a class="el" href="catacharset_8cpp_source.html#l00142">utf8_width()</a>, and <a class="el" href="catacharset_8cpp_source.html#l00400">wstr_to_utf8()</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l02165">iuse::radio_on()</a>.</p>

</div>
</div>
<a id="a81f1689c51547e98b9c0dc94e3363906" name="a81f1689c51547e98b9c0dc94e3363906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81f1689c51547e98b9c0dc94e3363906">&#9670;&nbsp;</a></span>pow10()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double pow10 </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00028">28</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>{</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> = 1;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <span class="keywordtype">double</span> tmp = 10;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>    <span class="keywordflow">while</span>( n ) {</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>        <span class="keywordflow">if</span>( n &amp; 1 ) {</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>            <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a> *= tmp;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>        }</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>        tmp *= tmp;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        n &gt;&gt;= 1;</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    }</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>.</p>

<p class="reference">Referenced by <a class="el" href="cata__utility_8cpp_source.html#l00042">round_up()</a>.</p>

</div>
</div>
<a id="a996629d79715bd5b44fb507d0d368476" name="a996629d79715bd5b44fb507d0d368476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a996629d79715bd5b44fb507d0d368476">&#9670;&nbsp;</a></span>read_from_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(std::istream &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to open and read from given file using the given callback. </p>
<p >The file is opened for reading (binary mode), given to the callback (which does the actual reading) and closed. Any exceptions from the callbacks are caught and reported as <code>debugmsg</code>. If the stream is in a fail state (other than EOF) after the callback returns, it is handled as error as well.</p>
<p >The callback can either be a generic <code>std::istream</code>, a <a class="el" href="classJsonIn.html">JsonIn</a> stream (which has been initialized from the <code>std::istream</code>) or a <a class="el" href="classJsonDeserializer.html">JsonDeserializer</a> object (in case of the later, it's <code><a class="el" href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">JsonDeserializer::deserialize</a></code> method will be invoked).</p>
<p >The functions with the "_optional" prefix do not show a debug message when the file does not exist. They simply ignore the call and return <code>false</code> immediately (without calling the callback). They can be used for loading legacy files.</p>
<dl class="section return"><dt>Returns</dt><dd><code>true</code> is the file was read without any errors, <code>false</code> upon any error. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00519">519</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>{</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <a class="code hl_struct" href="structcata__ifstream.html">cata_ifstream</a> fin = <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">std::move</a>( <a class="code hl_struct" href="structcata__ifstream.html">cata_ifstream</a>().mode( <a class="code hl_enumvalue" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">cata_ios_mode::binary</a> ).<a class="code hl_function" href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a>( path ) );</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        <span class="keywordflow">if</span>( !fin.<a class="code hl_function" href="structcata__ifstream.html#a7195d2116c324701d4886768b3294ad8">is_open</a>() ) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>            <span class="keywordflow">throw</span> std::runtime_error( <span class="stringliteral">&quot;opening file failed&quot;</span> );</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        }</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        reader( *fin );</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keywordflow">if</span>( fin.<a class="code hl_function" href="structcata__ifstream.html#ad5a97b22f2c696791b4955ddd1aab61b">bad</a>() ) {</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>            <span class="keywordflow">throw</span> std::runtime_error( <span class="stringliteral">&quot;reading file failed&quot;</span> );</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    } <span class="keywordflow">catch</span>( <span class="keyword">const</span> std::exception &amp;err ) {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Failed to read from \&quot;%1$s\&quot;: %2$s&quot;</span> ), path.c_str(), err.what() );</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>    }</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>}</div>
<div class="ttc" id="ahandle__action_8cpp_html_a18a5c5b03ba964c4d5d06e062510c99c"><div class="ttname"><a href="handle__action_8cpp.html#a18a5c5b03ba964c4d5d06e062510c99c">open</a></div><div class="ttdeci">static void open()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l00516">handle_action.cpp:516</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00096">avatar_action.cpp:96</a></div></div>
<div class="ttc" id="astructcata__ifstream_html"><div class="ttname"><a href="structcata__ifstream.html">cata_ifstream</a></div><div class="ttdoc">Wrapper around std::ifstream that provides cross-platform support for UTF-8 paths.</div><div class="ttdef"><b>Definition:</b> <a href="fstream__utils_8h_source.html#l00068">fstream_utils.h:68</a></div></div>
<div class="ttc" id="astructcata__ifstream_html_a7195d2116c324701d4886768b3294ad8"><div class="ttname"><a href="structcata__ifstream.html#a7195d2116c324701d4886768b3294ad8">cata_ifstream::is_open</a></div><div class="ttdeci">bool is_open()</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00406">cata_utility.cpp:406</a></div></div>
<div class="ttc" id="astructcata__ifstream_html_ad5a97b22f2c696791b4955ddd1aab61b"><div class="ttname"><a href="structcata__ifstream.html#ad5a97b22f2c696791b4955ddd1aab61b">cata_ifstream::bad</a></div><div class="ttdeci">bool bad()</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00438">cata_utility.cpp:438</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="cata__utility_8cpp_source.html#l00438">cata_ifstream::bad()</a>, <a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">binary</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="cata__utility_8cpp_source.html#l00406">cata_ifstream::is_open()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00096">avatar_action::move()</a>, and <a class="el" href="handle__action_8cpp_source.html#l00516">open()</a>.</p>

<p class="reference">Referenced by <a class="el" href="options_8cpp_source.html#l01019">build_resource_list()</a>, <a class="el" href="diary_8cpp_source.html#l00810">diary::load()</a>, <a class="el" href="game_8cpp_source.html#l02532">game::load()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00538">read_from_file_json()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00553">read_from_file_optional()</a>, and <a class="el" href="iuse__software__sokoban_8cpp_source.html#l00213">sokoban_game::start_game()</a>.</p>

</div>
</div>
<a id="a6027f853e7b1145c11e17bdcf6a63a91" name="a6027f853e7b1145c11e17bdcf6a63a91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6027f853e7b1145c11e17bdcf6a63a91">&#9670;&nbsp;</a></span>read_from_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classJsonDeserializer.html">JsonDeserializer</a> &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00546">546</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>{</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8cpp.html#adb5f308b4d5f3656ad32fbe62fab29f1">read_from_file_json</a>( path, [&amp;reader]( <a class="code hl_class" href="classJsonIn.html">JsonIn</a> &amp; jsin ) {</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>        reader.<a class="code hl_function" href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">deserialize</a>( jsin );</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    } );</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_adb5f308b4d5f3656ad32fbe62fab29f1"><div class="ttname"><a href="cata__utility_8cpp.html#adb5f308b4d5f3656ad32fbe62fab29f1">read_from_file_json</a></div><div class="ttdeci">bool read_from_file_json(const std::string &amp;path, const std::function&lt; void(JsonIn &amp;)&gt; &amp;reader)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00538">cata_utility.cpp:538</a></div></div>
<div class="ttc" id="aclassJsonDeserializer_html_a3583f1e3cbe7cad440828d461b22ac22"><div class="ttname"><a href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">JsonDeserializer::deserialize</a></div><div class="ttdeci">virtual void deserialize(JsonIn &amp;jsin)=0</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">JsonDeserializer::deserialize()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00538">read_from_file_json()</a>.</p>

</div>
</div>
<a id="adb5f308b4d5f3656ad32fbe62fab29f1" name="adb5f308b4d5f3656ad32fbe62fab29f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb5f308b4d5f3656ad32fbe62fab29f1">&#9670;&nbsp;</a></span>read_from_file_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file_json </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00538">538</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>{</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8cpp.html#a996629d79715bd5b44fb507d0d368476">read_from_file</a>( path, [&amp;]( std::istream &amp; fin ) {</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>        <a class="code hl_class" href="classJsonIn.html">JsonIn</a> jsin( fin, path );</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        reader( jsin );</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    } );</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a996629d79715bd5b44fb507d0d368476"><div class="ttname"><a href="cata__utility_8cpp.html#a996629d79715bd5b44fb507d0d368476">read_from_file</a></div><div class="ttdeci">bool read_from_file(const std::string &amp;path, const std::function&lt; void(std::istream &amp;)&gt; &amp;reader)</div><div class="ttdoc">Try to open and read from given file using the given callback.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00519">cata_utility.cpp:519</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00519">read_from_file()</a>.</p>

<p class="reference">Referenced by <a class="el" href="text__snippets_8cpp_source.html#l00206">get_random_tip_of_the_day()</a>, <a class="el" href="name_8cpp_source.html#l00080">Name::load_from_file()</a>, <a class="el" href="newcharacter_8cpp_source.html#l03007">avatar::load_template()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00546">read_from_file()</a>.</p>

</div>
</div>
<a id="afc8cc3e35ba50c37cf8597c5fa334c82" name="afc8cc3e35ba50c37cf8597c5fa334c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc8cc3e35ba50c37cf8597c5fa334c82">&#9670;&nbsp;</a></span>read_from_file_optional() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file_optional </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(std::istream &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00553">553</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>{</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="comment">// Note: slight race condition here, but we&#39;ll ignore it. Worst case: the file</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="comment">// exists and got removed before reading it -&gt; reading fails with a message</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="comment">// Or file does not exists, than everything works fine because it&#39;s optional anyway.</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="filesystem_8cpp.html#aea678a36e4bf1e9ff808c85f1f367d30">file_exist</a>( path ) &amp;&amp; <a class="code hl_function" href="cata__utility_8cpp.html#a996629d79715bd5b44fb507d0d368476">read_from_file</a>( path, reader );</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>}</div>
<div class="ttc" id="afilesystem_8cpp_html_aea678a36e4bf1e9ff808c85f1f367d30"><div class="ttname"><a href="filesystem_8cpp.html#aea678a36e4bf1e9ff808c85f1f367d30">file_exist</a></div><div class="ttdeci">bool file_exist(const std::string &amp;path)</div><div class="ttdoc">Check if file exists.</div><div class="ttdef"><b>Definition:</b> <a href="filesystem_8cpp_source.html#l00075">filesystem.cpp:75</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="filesystem_8cpp_source.html#l00075">file_exist()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00519">read_from_file()</a>.</p>

<p class="reference">Referenced by <a class="el" href="input_8cpp_source.html#l00084">get_input_string_from_file()</a>, <a class="el" href="main__menu_8cpp_source.html#l00326">main_menu::init_strings()</a>, <a class="el" href="game_8cpp_source.html#l02532">game::load()</a>, <a class="el" href="main__menu_8cpp_source.html#l00197">main_menu::load_file()</a>, <a class="el" href="game_8cpp_source.html#l02501">game::load_master()</a>, <a class="el" href="clzones_8cpp_source.html#l01216">zone_manager::load_zones()</a>, <a class="el" href="overmap_8cpp_source.html#l04793">overmap::open()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00562">read_from_file_optional_json()</a>.</p>

</div>
</div>
<a id="ab05ae72a3aac78f038cad1c969d9b78d" name="ab05ae72a3aac78f038cad1c969d9b78d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab05ae72a3aac78f038cad1c969d9b78d">&#9670;&nbsp;</a></span>read_from_file_optional() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file_optional </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classJsonDeserializer.html">JsonDeserializer</a> &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00571">571</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>{</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8cpp.html#abbce2161540e3ab943aaf845688098bd">read_from_file_optional_json</a>( path, [&amp;reader]( <a class="code hl_class" href="classJsonIn.html">JsonIn</a> &amp; jsin ) {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        reader.<a class="code hl_function" href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">deserialize</a>( jsin );</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>    } );</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_abbce2161540e3ab943aaf845688098bd"><div class="ttname"><a href="cata__utility_8cpp.html#abbce2161540e3ab943aaf845688098bd">read_from_file_optional_json</a></div><div class="ttdeci">bool read_from_file_optional_json(const std::string &amp;path, const std::function&lt; void(JsonIn &amp;)&gt; &amp;reader)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00562">cata_utility.cpp:562</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classJsonDeserializer.html#a3583f1e3cbe7cad440828d461b22ac22">JsonDeserializer::deserialize()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00562">read_from_file_optional_json()</a>.</p>

</div>
</div>
<a id="abbce2161540e3ab943aaf845688098bd" name="abbce2161540e3ab943aaf845688098bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbce2161540e3ab943aaf845688098bd">&#9670;&nbsp;</a></span>read_from_file_optional_json()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_from_file_optional_json </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classJsonIn.html">JsonIn</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>reader</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00562">562</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>{</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="cata__utility_8cpp.html#afc8cc3e35ba50c37cf8597c5fa334c82">read_from_file_optional</a>( path, [&amp;]( std::istream &amp; fin ) {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <a class="code hl_class" href="classJsonIn.html">JsonIn</a> jsin( fin, path );</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        reader( jsin );</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    } );</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_afc8cc3e35ba50c37cf8597c5fa334c82"><div class="ttname"><a href="cata__utility_8cpp.html#afc8cc3e35ba50c37cf8597c5fa334c82">read_from_file_optional</a></div><div class="ttdeci">bool read_from_file_optional(const std::string &amp;path, const std::function&lt; void(std::istream &amp;)&gt; &amp;reader)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00553">cata_utility.cpp:553</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00553">read_from_file_optional()</a>.</p>

<p class="reference">Referenced by <a class="el" href="auto__note_8cpp_source.html#l00066">auto_notes::auto_note_settings::load()</a>, <a class="el" href="help_8cpp_source.html#l00036">help::load()</a>, <a class="el" href="options_8cpp_source.html#l03356">options_manager::load()</a>, <a class="el" href="panels_8cpp_source.html#l02211">panel_manager::load()</a>, <a class="el" href="auto__pickup_8cpp_source.html#l00745">auto_pickup::player_settings::load()</a>, <a class="el" href="map__memory_8cpp_source.html#l00300">map_memory::load()</a>, <a class="el" href="artifact_8cpp_source.html#l01098">load_artifacts()</a>, <a class="el" href="color_8cpp_source.html#l01039">color_manager::load_custom()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00306">mod_management::load_mod_info()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00346">mod_management::load_mod_list()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00437">mod_manager::load_mods_list()</a>, <a class="el" href="worldfactory_8cpp_source.html#l01609">WORLD::load_options()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00102">mod_manager::load_replacement_mods()</a>, <a class="el" href="map__memory_8cpp_source.html#l00232">map_memory::load_submap()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00571">read_from_file_optional()</a>, and <a class="el" href="mapbuffer_8cpp_source.html#l00248">mapbuffer::unserialize_submaps()</a>.</p>

</div>
</div>
<a id="a9dbcecb703a6e1111a0552177b6bf9fc" name="a9dbcecb703a6e1111a0552177b6bf9fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9dbcecb703a6e1111a0552177b6bf9fc">&#9670;&nbsp;</a></span>round_up()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double round_up </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>dp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Round a value up at a given decimal place. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">val</td><td>Value to be rounded. </td></tr>
    <tr><td class="paramname">dp</td><td>Decimal place to round the value at. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Rounded value. </dd></dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00042">42</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>{</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <span class="comment">// Some implementations of std::pow does not return the accurate result even</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>    <span class="comment">// for small powers of 10, so we use a specialized routine to calculate them.</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> denominator = <a class="code hl_function" href="cata__utility_8cpp.html#a81f1689c51547e98b9c0dc94e3363906">pow10</a>( dp );</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    <span class="keywordflow">return</span> std::ceil( denominator * val ) / denominator;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a81f1689c51547e98b9c0dc94e3363906"><div class="ttname"><a href="cata__utility_8cpp.html#a81f1689c51547e98b9c0dc94e3363906">pow10</a></div><div class="ttdeci">static double pow10(unsigned int n)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00028">cata_utility.cpp:28</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00028">pow10()</a>.</p>

<p class="reference">Referenced by <a class="el" href="item_8cpp_source.html#l02703">item::animal_armor_info()</a>, <a class="el" href="item_8cpp_source.html#l02520">item::armor_info()</a>, <a class="el" href="item_8cpp_source.html#l01458">item::basic_info()</a>, <a class="el" href="veh__interact_8cpp_source.html#l01363">veh_interact::calc_overview()</a>, <a class="el" href="panels_8cpp_source.html#l01029">carry_volume_string()</a>, <a class="el" href="panels_8cpp_source.html#l01022">carry_weight_string()</a>, <a class="el" href="game__inventory_8cpp_source.html#l00508">comestible_inventory_preset::comestible_inventory_preset()</a>, <a class="el" href="item_8cpp_source.html#l03531">item::contents_info()</a>, <a class="el" href="output_8cpp_source.html#l01985">format_volume()</a>, <a class="el" href="inventory__ui_8cpp_source.html#l01457">inventory_selector::get_weight_and_volume_stats()</a>, <a class="el" href="pickup_8cpp_source.html#l00572">pickup::pick_up()</a>, <a class="el" href="character_8cpp_source.html#l06361">Character::pour_into()</a>, and <a class="el" href="vehicle__display_8cpp_source.html#l00157">vehicle::print_part_list()</a>.</p>

</div>
</div>
<a id="a3c6c3ddf581f85556062d6804445690b" name="a3c6c3ddf581f85556062d6804445690b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c6c3ddf581f85556062d6804445690b">&#9670;&nbsp;</a></span>safe_getline()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream &amp; safe_getline </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>ins</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00492">492</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>{</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    str.clear();</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    std::istream::sentry se( ins, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    std::streambuf *sb = ins.rdbuf();</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span> </div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keywordflow">while</span>( <span class="keyword">true</span> ) {</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        <span class="keywordtype">int</span> <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> = sb-&gt;sbumpc();</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        <span class="keywordflow">switch</span>( <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> ) {</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>                <span class="keywordflow">return</span> ins;</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            <span class="keywordflow">case</span> <span class="charliteral">&#39;\r&#39;</span>:</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>                <span class="keywordflow">if</span>( sb-&gt;sgetc() == <span class="charliteral">&#39;\n&#39;</span> ) {</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>                    sb-&gt;sbumpc();</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>                }</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>                <span class="keywordflow">return</span> ins;</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>            <span class="keywordflow">case</span> EOF:</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>                <span class="keywordflow">if</span>( str.empty() ) {</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>                    ins.setstate( std::ios::eofbit );</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>                }</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>                <span class="keywordflow">return</span> ins;</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>                str += <span class="keyword">static_cast&lt;</span><span class="keywordtype">char</span><span class="keyword">&gt;</span>( <a class="code hl_variable" href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a> );</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    }</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>}</div>
<div class="ttc" id="amagic_8cpp_html_a6753ecfe87da659675b18c2f81d6ec12"><div class="ttname"><a href="magic_8cpp.html#a6753ecfe87da659675b18c2f81d6ec12">c</a></div><div class="ttdeci">constexpr double c</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01032">magic.cpp:1032</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01032">c</a>.</p>

<p class="reference">Referenced by <a class="el" href="iuse__software__sokoban_8cpp_source.html#l00036">sokoban_game::parse_level()</a>.</p>

</div>
</div>
<a id="aa093577de74b80470a847b6aac22d56e" name="aa093577de74b80470a847b6aac22d56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa093577de74b80470a847b6aac22d56e">&#9670;&nbsp;</a></span>serialize_wrapper()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string serialize_wrapper </td>
          <td>(</td>
          <td class="paramtype">const std::function&lt; void(<a class="el" href="classJsonOut.html">JsonOut</a> &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>callback</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>@group JSON (de)serialization wrappers. </p>
<p >The functions here provide a way to (de)serialize objects without actually including "json.h". The <code>*_wrapper</code> function create the JSON stream instances and therefor require "json.h", but the caller doesn't. Callers should just forward the stream reference to the actual (de)serialization function.</p>
<p >The inline function do this by calling <code>T::(de)serialize</code> (which is assumed to exist with the proper signature).</p>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">std::exception</td><td>Deserialization functions may throw upon malformed JSON or unexpected/invalid content. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00659">659</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>{</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>    std::ostringstream buffer;</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <a class="code hl_class" href="classJsonOut.html">JsonOut</a> jsout( buffer );</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    callback( jsout );</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="keywordflow">return</span> buffer.str();</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>}</div>
<div class="ttc" id="aclassJsonOut_html"><div class="ttname"><a href="classJsonOut.html">JsonOut</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00575">json.h:576</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="iuse_8cpp_source.html#l08065">iuse::radiocontrol()</a>, <a class="el" href="handle__action_8cpp_source.html#l00399">rcdrive()</a>, <a class="el" href="map__memory_8cpp_source.html#l00333">map_memory::save()</a>, and <a class="el" href="fstream__utils_8h_source.html#l00210">serialize()</a>.</p>

</div>
</div>
<a id="a622c5bbf103e24e414fea34574eb68a8" name="a622c5bbf103e24e414fea34574eb68a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a622c5bbf103e24e414fea34574eb68a8">&#9670;&nbsp;</a></span>write_to_file() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void write_to_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(std::ostream &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>writer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00453">453</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>{</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="comment">// Any of the below may throw. ofstream_wrapper will clean up the temporary path on its own.</span></div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>    <a class="code hl_class" href="classofstream__wrapper.html">ofstream_wrapper</a> fout( path, <a class="code hl_enumvalue" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">cata_ios_mode::binary</a> );</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>    writer( fout.stream() );</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>    fout.close();</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>}</div>
<div class="ttc" id="aclassofstream__wrapper_html"><div class="ttname"><a href="classofstream__wrapper.html">ofstream_wrapper</a></div><div class="ttdoc">Wrapper around std::ofstream that handles error checking and throws on errors.</div><div class="ttdef"><b>Definition:</b> <a href="fstream__utils_8h_source.html#l00165">fstream_utils.h:166</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="fstream__utils_8h.html#ac4a6edeeba0600920806e9fc71394d9ba9d7183f16acce70658f686ae7f1a4d20">binary</a>, <a class="el" href="cata__utility_8cpp_source.html#l00599">ofstream_wrapper::close()</a>, and <a class="el" href="fstream__utils_8h_source.html#l00178">ofstream_wrapper::stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="filesystem_8cpp_source.html#l00470">can_write_to_dir()</a>, <a class="el" href="filesystem_8cpp_source.html#l00436">copy_file()</a>, <a class="el" href="editmap_8cpp_source.html#l00108">edit_json()</a>, <a class="el" href="auto__note_8cpp_source.html#l00034">auto_notes::auto_note_settings::save()</a>, <a class="el" href="distraction__manager_8cpp_source.html#l00200">distraction_manager::distraction_manager_gui::save()</a>, <a class="el" href="game_8cpp_source.html#l02722">game::save()</a>, <a class="el" href="input_8cpp_source.html#l00276">input_manager::save()</a>, <a class="el" href="options_8cpp_source.html#l03344">options_manager::save()</a>, <a class="el" href="panels_8cpp_source.html#l02203">panel_manager::save()</a>, <a class="el" href="overmap_8cpp_source.html#l04824">overmap::save()</a>, <a class="el" href="auto__pickup_8cpp_source.html#l00715">auto_pickup::player_settings::save()</a>, <a class="el" href="safemode__ui_8cpp_source.html#l00758">safemode::save()</a>, <a class="el" href="worldfactory_8cpp_source.html#l00223">WORLD::save()</a>, <a class="el" href="map__memory_8cpp_source.html#l00333">map_memory::save()</a>, <a class="el" href="artifact_8cpp_source.html#l01277">save_artifacts()</a>, <a class="el" href="color_8cpp_source.html#l01029">color_manager::save_custom()</a>, <a class="el" href="game_8cpp_source.html#l02649">game::save_factions_missions_npcs()</a>, <a class="el" href="worldfactory_8cpp_source.html#l00587">worldfactory::save_last_world_info()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00338">mod_management::save_mod_list()</a>, <a class="el" href="mod__manager_8cpp_source.html#l00419">mod_manager::save_mods_list()</a>, <a class="el" href="game_8cpp_source.html#l02676">game::save_player_data()</a>, <a class="el" href="mapbuffer_8cpp_source.html#l00166">mapbuffer::save_quad()</a>, <a class="el" href="newcharacter_8cpp_source.html#l02982">avatar::save_template()</a>, <a class="el" href="clzones_8cpp_source.html#l01203">zone_manager::save_zones()</a>, <a class="el" href="diary_8cpp_source.html#l00760">diary::store()</a>, <a class="el" href="weather__gen_8cpp_source.html#l00328">weather_generator::test_weather()</a>, <a class="el" href="game_8cpp_source.html#l02762">game::write_memorial_file()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00461">write_to_file()</a>.</p>

</div>
</div>
<a id="aaa38aaf0ea769ed89a21d613c34925d9" name="aaa38aaf0ea769ed89a21d613c34925d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa38aaf0ea769ed89a21d613c34925d9">&#9670;&nbsp;</a></span>write_to_file() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool write_to_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::function&lt; void(std::ostream &amp;)&gt; &amp;&#160;</td>
          <td class="paramname"><em>writer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fail_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a file for writing, calls the writer on that stream. </p>
<p >If the writer throws, or if the file could not be opened or if any I/O error happens, the function shows a popup containing the <code>fail_message</code>, the error text and the path.</p>
<dl class="section return"><dt>Returns</dt><dd>Whether saving succeeded (no error was caught). </dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">The</td><td>void function throws when writing failes or when the <code>writer</code> throws. The other function catches all exceptions and returns false. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="cata__utility_8cpp_source.html#l00461">461</a> of file <a class="el" href="cata__utility_8cpp_source.html">cata_utility.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>{</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>    <span class="keywordflow">try</span> {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>        <a class="code hl_function" href="cata__utility_8cpp.html#a622c5bbf103e24e414fea34574eb68a8">write_to_file</a>( path, writer );</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span> </div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>    } <span class="keywordflow">catch</span>( <span class="keyword">const</span> std::exception &amp;err ) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>        <span class="keywordflow">if</span>( fail_message ) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            <a class="code hl_function" href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Failed to write %1$s to \&quot;%2$s\&quot;: %3$s&quot;</span> ), fail_message, path.c_str(), err.what() );</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>        }</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>    }</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a622c5bbf103e24e414fea34574eb68a8"><div class="ttname"><a href="cata__utility_8cpp.html#a622c5bbf103e24e414fea34574eb68a8">write_to_file</a></div><div class="ttdeci">void write_to_file(const std::string &amp;path, const std::function&lt; void(std::ostream &amp;)&gt; &amp;writer)</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00453">cata_utility.cpp:453</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1e645471d321d71b235fb285da5c08ff"><div class="ttname"><a href="output_8cpp.html#a1e645471d321d71b235fb285da5c08ff">popup</a></div><div class="ttdeci">int popup(const std::string &amp;text, PopupFlags flags)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00764">output.cpp:764</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="output_8cpp_source.html#l00764">popup()</a>, and <a class="el" href="cata__utility_8cpp_source.html#l00453">write_to_file()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="cata__utility_8cpp.html">cata_utility.cpp</a></li>
    <li class="footer">Generated on Wed Feb 22 2023 22:34:09 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
