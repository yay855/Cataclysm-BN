<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: npc_ai Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('namespacenpc__ai.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">npc_ai Namespace Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a14d62aa6c1fc78bcfe3c3bb845d913cd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenpc__ai.html#a14d62aa6c1fc78bcfe3c3bb845d913cd">weapon_value</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="classitem.html">item</a> &amp;weap, int ammo=10)</td></tr>
<tr class="memdesc:a14d62aa6c1fc78bcfe3c3bb845d913cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate item as weapon (melee or gun)  <a href="namespacenpc__ai.html#a14d62aa6c1fc78bcfe3c3bb845d913cd">More...</a><br /></td></tr>
<tr class="separator:a14d62aa6c1fc78bcfe3c3bb845d913cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9019036bc8d7314e1bb9fb1624afb429"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">gun_value</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="classitem.html">item</a> &amp;weap, int ammo=10)</td></tr>
<tr class="memdesc:a9019036bc8d7314e1bb9fb1624afb429"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluates item as a gun.  <a href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">More...</a><br /></td></tr>
<tr class="separator:a9019036bc8d7314e1bb9fb1624afb429"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15c5ded877137a648d04762228055b66"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenpc__ai.html#a15c5ded877137a648d04762228055b66">melee_value</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who, const <a class="el" href="classitem.html">item</a> &amp;weap)</td></tr>
<tr class="memdesc:a15c5ded877137a648d04762228055b66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate item as a melee weapon.  <a href="namespacenpc__ai.html#a15c5ded877137a648d04762228055b66">More...</a><br /></td></tr>
<tr class="separator:a15c5ded877137a648d04762228055b66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64daf871b45496787e445f932f4381d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacenpc__ai.html#a64daf871b45496787e445f932f4381d3">unarmed_value</a> (const <a class="el" href="classCharacter.html">Character</a> &amp;who)</td></tr>
<tr class="memdesc:a64daf871b45496787e445f932f4381d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate unarmed melee value.  <a href="namespacenpc__ai.html#a64daf871b45496787e445f932f4381d3">More...</a><br /></td></tr>
<tr class="separator:a64daf871b45496787e445f932f4381d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9019036bc8d7314e1bb9fb1624afb429" name="a9019036bc8d7314e1bb9fb1624afb429"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9019036bc8d7314e1bb9fb1624afb429">&#9670;&nbsp;</a></span>gun_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double npc_ai::gun_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ammo</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluates item as a gun. </p>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l01938">1938</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>{</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="comment">// TODO: Mods</span></div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    <span class="comment">// TODO: Allow using a specified type of ammo rather than default or current</span></div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>    <span class="keywordflow">if</span>( !weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_variable" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a> ) {</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    }</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span> </div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>    <span class="keywordflow">if</span>( ammo &lt;= 0 ) {</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>    }</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span> </div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structislot__gun.html">islot_gun</a> &amp;gun = *weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_variable" href="structitype.html#a623ec8243b1e599086fa3a23c3179370">gun</a>;</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>    <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_type;</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>    <span class="keywordflow">if</span>( !weap.<a class="code hl_function" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>().<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ) {</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>        ammo_type = weap.<a class="code hl_function" href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">ammo_current</a>();</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( weap.<a class="code hl_function" href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">magazine_current</a>() ) {</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>        ammo_type = weap.<a class="code hl_function" href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">common_ammo_default</a>();</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>        ammo_type = weap.<a class="code hl_function" href="classitem.html#ab07d96e30c441a84435972df842f4c77">ammo_default</a>();</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span>    }</div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structitype.html">itype</a> *def_ammo_i = ammo_type.<a class="code hl_function" href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">is_null</a>() ? nullptr : &amp;*ammo_type;</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span> </div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span>    <a class="code hl_struct" href="structdamage__instance.html">damage_instance</a> gun_damage = weap.<a class="code hl_function" href="classitem.html#ada111938a57ec6c7b47fcca30ec9d36c">gun_damage</a>();</div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>    <a class="code hl_class" href="classitem.html">item</a> tmp = weap;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>    tmp.<a class="code hl_function" href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">ammo_set</a>( ammo_type );</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span>    <span class="keywordtype">int</span> total_dispersion = <a class="code hl_function" href="namespaceranged.html#a8b31304e61913a0072ad6df6e16bc932">ranged::get_weapon_dispersion</a>( who, tmp ).<a class="code hl_function" href="classdispersion__sources.html#ac3dc7f13e78a217aeaba57740f3af17c">max</a>() +</div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"> 1965</span>                           <a class="code hl_function" href="namespaceranged.html#a77dfe116a20cfa50c55a3c2073408e63">ranged::effective_dispersion</a>( who, tmp.<a class="code hl_function" href="classitem.html#af0b7e5875297be57d675270f57ff775a">sight_dispersion</a>() );</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span> </div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>    <span class="keywordflow">if</span>( def_ammo_i != <span class="keyword">nullptr</span> &amp;&amp; def_ammo_i-&gt;<a class="code hl_variable" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a> ) {</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structislot__ammo.html">islot_ammo</a> &amp;def_ammo = *def_ammo_i-&gt;<a class="code hl_variable" href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">ammo</a>;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span>        gun_damage.<a class="code hl_function" href="structdamage__instance.html#ae17bfa13ed37fd55281fa769a152e941">add</a>( def_ammo.<a class="code hl_variable" href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">damage</a> );</div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>        total_dispersion += def_ammo.<a class="code hl_variable" href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">dispersion</a>;</div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>    }</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span> </div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>    <span class="keywordtype">float</span> damage_factor = gun_damage.<a class="code hl_function" href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">total_damage</a>();</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>    <span class="keywordflow">if</span>( damage_factor &gt; 0 ) {</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span>        <span class="comment">// TODO: Multiple damage types</span></div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>        damage_factor += 0.5f * gun_damage.<a class="code hl_variable" href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_units</a>.front().res_pen;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>    }</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span> </div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"> 1979</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a> = <a class="code hl_function" href="ranged_8cpp.html#a613a8b59e4b2f2aaf05091d354bb4aa3">time_to_attack</a>( who, *weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a> );</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>    <span class="keywordflow">if</span>( gun.<a class="code hl_variable" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a> != 0 &amp;&amp; gun.<a class="code hl_variable" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a> &lt; 10 ) {</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>        <span class="comment">// TODO: RELOAD_ONE should get a penalty here</span></div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>        <span class="keywordtype">int</span> reload_cost = gun.<a class="code hl_variable" href="structislot__gun.html#acedd47c3f7557f9b7b839af476c5989e">reload_time</a> + who.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a> ) + who.<a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a> );</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>        reload_cost /= gun.<a class="code hl_variable" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a>;</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>        <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a> += reload_cost;</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span>    }</div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"> 1986</span> </div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>    <span class="comment">// &quot;Medium range&quot; below means 9 tiles, &quot;short range&quot; means 4</span></div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>    <span class="comment">// Those are guarantees (assuming maximum time spent aiming)</span></div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;float, float&gt;&gt; dispersion_thresholds = {{</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>            <span class="comment">// Headshots all the time</span></div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>            { 0.0f, 5.0f },</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>            <span class="comment">// Critical at medium range</span></div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>            { 100.0f, 4.5f },</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>            <span class="comment">// Critical at short range or good hit at medium</span></div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>            { 200.0f, 3.5f },</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>            <span class="comment">// OK hits at medium</span></div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>            { 300.0f, 3.0f },</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>            <span class="comment">// Point blank headshots</span></div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>            { 450.0f, 2.5f },</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>            <span class="comment">// OK hits at short</span></div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>            { 700.0f, 1.5f },</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>            <span class="comment">// Glances at medium, criticals at point blank</span></div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>            { 1000.0f, 1.0f },</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>            <span class="comment">// Nothing guaranteed, pure gamble</span></div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>            { 2000.0f, 0.1f },</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>        }</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>    };</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span> </div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;float, float&gt;&gt; move_cost_thresholds = {{</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>            { 10.0f, 4.0f },</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>            { 25.0f, 3.0f },</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>            { 100.0f, 1.0f },</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>            { 500.0f, 5.0f },</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>        }</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>    };</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span> </div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>    <span class="keywordtype">float</span> move_cost_factor = <a class="code hl_function" href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a>( move_cost_thresholds, <a class="code hl_function" href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a> );</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span> </div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>    <span class="comment">// Penalty for dodging in melee makes the gun unusable in melee</span></div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>    <span class="comment">// Until NPCs get proper kiting, at least</span></div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>    <span class="keywordtype">int</span> melee_penalty = who.<a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">volume</a>() / 250_ml - who.<a class="code hl_function" href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">get_skill_level</a>( <a class="code hl_variable" href="ranged_8cpp.html#a1d5482b7403ee4ac3e70e88ecfee2141">skill_dodge</a> );</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>    <span class="keywordflow">if</span>( melee_penalty &lt;= 0 ) {</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        <span class="comment">// Dispersion matters less if you can just use the gun in melee</span></div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>        total_dispersion = std::min&lt;int&gt;( total_dispersion / move_cost_factor, total_dispersion );</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>    }</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span> </div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>    <span class="keywordtype">float</span> dispersion_factor = <a class="code hl_function" href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a>( dispersion_thresholds, total_dispersion );</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span> </div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span>    <span class="keywordtype">float</span> damage_and_accuracy = damage_factor * dispersion_factor;</div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"> 2030</span> </div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>    <span class="comment">// TODO: Some better approximation of the ability to keep on shooting</span></div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>    <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;float, float&gt;&gt; capacity_thresholds = {{</div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span>            { 1.0f, 0.5f },</div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span>            { 5.0f, 1.0f },</div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span>            { 10.0f, 1.5f },</div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span>            { 20.0f, 2.0f },</div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span>            { 50.0f, 3.0f },</div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span>        }</div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span>    };</div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span> </div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span>    <span class="comment">// How much until reload</span></div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span>    <span class="keywordtype">float</span> capacity = gun.<a class="code hl_variable" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a> &gt; 0 ? std::min&lt;float&gt;( gun.<a class="code hl_variable" href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">clip</a>, ammo ) : ammo;</div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>    <span class="comment">// How much until dry and a new weapon is needed</span></div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>    capacity += std::min&lt;float&gt;( 1.0, ammo / 20.0 );</div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>    <span class="keywordtype">double</span> capacity_factor = <a class="code hl_function" href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a>( capacity_thresholds, capacity );</div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span> </div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>    <span class="keywordtype">double</span> <a class="code hl_function" href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">gun_value</a> = damage_and_accuracy * capacity_factor;</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span> </div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s as gun: %.1f total, %.1f dispersion, %.1f damage, %.1f capacity&quot;</span>,</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span>             weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>(), <a class="code hl_function" href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">gun_value</a>, dispersion_factor, damage_factor,</div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>             capacity_factor );</div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span>    <span class="keywordflow">return</span> std::max( 0.0, <a class="code hl_function" href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">gun_value</a> );</div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>}</div>
<div class="ttc" id="aactivity__item__handling_8cpp_html_a0572000ec0976f2d095ae0cd9d20e78b"><div class="ttname"><a href="activity__item__handling_8cpp.html#a0572000ec0976f2d095ae0cd9d20e78b">move_cost</a></div><div class="ttdeci">static int move_cost(const item &amp;it, const tripoint &amp;src, const tripoint &amp;dest)</div><div class="ttdef"><b>Definition:</b> <a href="activity__item__handling_8cpp_source.html#l00899">activity_item_handling.cpp:899</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a></div><div class="ttdeci">@ bp_hand_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00046">bodypart.h:46</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div><div class="ttdeci">@ bp_hand_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00047">bodypart.h:47</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_ac49c7bae3c3ac926a5501ffb127c1e97"><div class="ttname"><a href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a></div><div class="ttdeci">float multi_lerp(const std::vector&lt; std::pair&lt; float, float &gt; &gt; &amp;points, float x)</div><div class="ttdoc">From points, finds p1 and p2 such that p1.first &lt; x &lt; p2.first Then linearly interpolates between p1....</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00156">cata_utility.cpp:156</a></div></div>
<div class="ttc" id="aclassCharacter_html_adc1fd84a88722a905e57fea8bfd5b6b0"><div class="ttname"><a href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">Character::encumb</a></div><div class="ttdeci">int encumb(body_part bp) const</div><div class="ttdoc">Returns ENC provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03858">character.cpp:3858</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01515">character.h:1515</a></div></div>
<div class="ttc" id="aclassCharacter_html_afa95fe499ca6b55ab97f1b442a4c95c5"><div class="ttname"><a href="classCharacter.html#afa95fe499ca6b55ab97f1b442a4c95c5">Character::get_skill_level</a></div><div class="ttdeci">int get_skill_level(const skill_id &amp;ident) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03268">character.cpp:3268</a></div></div>
<div class="ttc" id="aclassdispersion__sources_html_ac3dc7f13e78a217aeaba57740f3af17c"><div class="ttname"><a href="classdispersion__sources.html#ac3dc7f13e78a217aeaba57740f3af17c">dispersion_sources::max</a></div><div class="ttdeci">double max() const</div><div class="ttdef"><b>Definition:</b> <a href="dispersion_8cpp_source.html#l00020">dispersion.cpp:20</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00178">item.h:179</a></div></div>
<div class="ttc" id="aclassitem_html_a51eafbdf8b331d88b741c0c527f98eb9"><div class="ttname"><a href="classitem.html#a51eafbdf8b331d88b741c0c527f98eb9">item::volume</a></div><div class="ttdeci">units::volume volume(bool integral=false) const</div><div class="ttdoc">Total volume of an item accounting for all contained/integrated items NOTE: Result is rounded up to n...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05026">item.cpp:5026</a></div></div>
<div class="ttc" id="aclassitem_html_a5cc833f71e0454446fd0f877d24f6585"><div class="ttname"><a href="classitem.html#a5cc833f71e0454446fd0f877d24f6585">item::common_ammo_default</a></div><div class="ttdeci">itype_id common_ammo_default(bool conversion=true) const</div><div class="ttdoc">Get default ammo for the first ammotype common to an item and its current magazine or &quot;NULL&quot; if none ...</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07511">item.cpp:7511</a></div></div>
<div class="ttc" id="aclassitem_html_a624c3b7ec10ae766a9e75718af71e647"><div class="ttname"><a href="classitem.html#a624c3b7ec10ae766a9e75718af71e647">item::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type, returns &quot;null&quot; if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07458">item.cpp:7458</a></div></div>
<div class="ttc" id="aclassitem_html_a6a3f16444c412bce4b75a7d600d6a3fe"><div class="ttname"><a href="classitem.html#a6a3f16444c412bce4b75a7d600d6a3fe">item::ammo_set</a></div><div class="ttdeci">item &amp; ammo_set(const itype_id &amp;ammo, int qty=-1)</div><div class="ttdoc">Filter setting the ammo for this instance Any existing ammo is removed.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00590">item.cpp:590</a></div></div>
<div class="ttc" id="aclassitem_html_ab07d96e30c441a84435972df842f4c77"><div class="ttname"><a href="classitem.html#ab07d96e30c441a84435972df842f4c77">item::ammo_default</a></div><div class="ttdeci">itype_id ammo_default(bool conversion=true) const</div><div class="ttdoc">Get default ammo used by item or a null id if item does not have a default ammo type.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07495">item.cpp:7495</a></div></div>
<div class="ttc" id="aclassitem_html_ab22fc9a4e0f9c6f5569b93e00deccfac"><div class="ttname"><a href="classitem.html#ab22fc9a4e0f9c6f5569b93e00deccfac">item::magazine_current</a></div><div class="ttdeci">item * magazine_current()</div><div class="ttdoc">Currently loaded magazine (if any)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07621">item.cpp:7621</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02171">item.h:2171</a></div></div>
<div class="ttc" id="aclassitem_html_ada111938a57ec6c7b47fcca30ec9d36c"><div class="ttname"><a href="classitem.html#ada111938a57ec6c7b47fcca30ec9d36c">item::gun_damage</a></div><div class="ttdeci">damage_instance gun_damage(bool with_ammo=true) const</div><div class="ttdoc">Summed ranged damage, armor piercing, and multipliers for both, of a gun, including values from mods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07174">item.cpp:7174</a></div></div>
<div class="ttc" id="aclassitem_html_af0b7e5875297be57d675270f57ff775a"><div class="ttname"><a href="classitem.html#af0b7e5875297be57d675270f57ff775a">item::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion() const</div><div class="ttdoc">Get lowest dispersion of either integral or any attached sights.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07155">item.cpp:7155</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a3ca78345025397b3d3ac22729ba1684b"><div class="ttname"><a href="classstring__id.html#a3ca78345025397b3d3ac22729ba1684b">string_id::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns whether this represents the id of the null-object (in which case it's the null-id).</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00317">string_id.h:317</a></div></div>
<div class="ttc" id="aclassstring__id_html_aa7dabc565f0c067e1a237ea224b18f93"><div class="ttname"><a href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">string_id::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdoc">Returns the identifier as plain std::string.</div><div class="ttdef"><b>Definition:</b> <a href="string__id_8h_source.html#l00255">string_id.h:255</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a></div><div class="ttdeci">@ m_debug</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00271">enums.h:271</a></div></div>
<div class="ttc" id="amessages_8cpp_html_a54489326fc37823819c5105addfa27f2"><div class="ttname"><a href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a></div><div class="ttdeci">void add_msg(std::string msg)</div><div class="ttdef"><b>Definition:</b> <a href="messages_8cpp_source.html#l00884">messages.cpp:884</a></div></div>
<div class="ttc" id="anamespacenpc__ai_html_a9019036bc8d7314e1bb9fb1624afb429"><div class="ttname"><a href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">npc_ai::gun_value</a></div><div class="ttdeci">double gun_value(const Character &amp;who, const item &amp;weap, int ammo=10)</div><div class="ttdoc">Evaluates item as a gun.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01938">ranged.cpp:1938</a></div></div>
<div class="ttc" id="anamespaceranged_html_a77dfe116a20cfa50c55a3c2073408e63"><div class="ttname"><a href="namespaceranged.html#a77dfe116a20cfa50c55a3c2073408e63">ranged::effective_dispersion</a></div><div class="ttdeci">int effective_dispersion(const Character &amp;who, int dispersion)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03775">ranged.cpp:3775</a></div></div>
<div class="ttc" id="anamespaceranged_html_a8b31304e61913a0072ad6df6e16bc932"><div class="ttname"><a href="namespaceranged.html#a8b31304e61913a0072ad6df6e16bc932">ranged::get_weapon_dispersion</a></div><div class="ttdeci">dispersion_sources get_weapon_dispersion(const Character &amp;who, const item &amp;obj)</div><div class="ttdoc">Get weapon's dispersion value modified accoring to character stats.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01888">ranged.cpp:1888</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a1d5482b7403ee4ac3e70e88ecfee2141"><div class="ttname"><a href="ranged_8cpp.html#a1d5482b7403ee4ac3e70e88ecfee2141">skill_dodge</a></div><div class="ttdeci">static const skill_id skill_dodge(&quot;dodge&quot;)</div></div>
<div class="ttc" id="aranged_8cpp_html_a613a8b59e4b2f2aaf05091d354bb4aa3"><div class="ttname"><a href="ranged_8cpp.html#a613a8b59e4b2f2aaf05091d354bb4aa3">time_to_attack</a></div><div class="ttdeci">int time_to_attack(const Character &amp;p, const itype &amp;firing)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01716">ranged.cpp:1716</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a497cd4533098e79f14f8a97fcec6ca1a"><div class="ttname"><a href="structcommon__ranged__data.html#a497cd4533098e79f14f8a97fcec6ca1a">common_ranged_data::dispersion</a></div><div class="ttdeci">int dispersion</div><div class="ttdoc">Dispersion &quot;bonus&quot; from gun.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00420">itype.h:420</a></div></div>
<div class="ttc" id="astructcommon__ranged__data_html_a94254f1acb94261bb47c4b7aaa3b0c89"><div class="ttname"><a href="structcommon__ranged__data.html#a94254f1acb94261bb47c4b7aaa3b0c89">common_ranged_data::damage</a></div><div class="ttdeci">damage_instance damage</div><div class="ttdoc">Damage, armor piercing and multipliers for each.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00412">itype.h:412</a></div></div>
<div class="ttc" id="astructdamage__instance_html"><div class="ttname"><a href="structdamage__instance.html">damage_instance</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00051">damage.h:51</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a2cc3ee4ff8f77ab6cd74168b1999246a"><div class="ttname"><a href="structdamage__instance.html#a2cc3ee4ff8f77ab6cd74168b1999246a">damage_instance::damage_units</a></div><div class="ttdeci">std::vector&lt; damage_unit &gt; damage_units</div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00052">damage.h:52</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a96f6f6d008ed8744ce549cefcfec3951"><div class="ttname"><a href="structdamage__instance.html#a96f6f6d008ed8744ce549cefcfec3951">damage_instance::total_damage</a></div><div class="ttdeci">float total_damage() const</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00075">damage.cpp:75</a></div></div>
<div class="ttc" id="astructdamage__instance_html_ae17bfa13ed37fd55281fa769a152e941"><div class="ttname"><a href="structdamage__instance.html#ae17bfa13ed37fd55281fa769a152e941">damage_instance::add</a></div><div class="ttdeci">void add(const damage_instance &amp;added_di)</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00093">damage.cpp:93</a></div></div>
<div class="ttc" id="astructislot__ammo_html"><div class="ttname"><a href="structislot__ammo.html">islot_ammo</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00672">itype.h:672</a></div></div>
<div class="ttc" id="astructislot__gun_html"><div class="ttname"><a href="structislot__gun.html">islot_gun</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00459">itype.h:459</a></div></div>
<div class="ttc" id="astructislot__gun_html_a5a7e4998071d2cd8f7ecd9504003968b"><div class="ttname"><a href="structislot__gun.html#a5a7e4998071d2cd8f7ecd9504003968b">islot_gun::clip</a></div><div class="ttdeci">int clip</div><div class="ttdoc">For guns with an integral magazine what is the capacity?</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00475">itype.h:475</a></div></div>
<div class="ttc" id="astructislot__gun_html_acedd47c3f7557f9b7b839af476c5989e"><div class="ttname"><a href="structislot__gun.html#acedd47c3f7557f9b7b839af476c5989e">islot_gun::reload_time</a></div><div class="ttdeci">int reload_time</div><div class="ttdoc">Reload time, in moves.</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00479">itype.h:479</a></div></div>
<div class="ttc" id="astructitype_html"><div class="ttname"><a href="structitype.html">itype</a></div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00836">itype.h:836</a></div></div>
<div class="ttc" id="astructitype_html_a623ec8243b1e599086fa3a23c3179370"><div class="ttname"><a href="structitype.html#a623ec8243b1e599086fa3a23c3179370">itype::gun</a></div><div class="ttdeci">cata::value_ptr&lt; islot_gun &gt; gun</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00859">itype.h:859</a></div></div>
<div class="ttc" id="astructitype_html_a7cb80d77696cefb42ac6e75756b47e60"><div class="ttname"><a href="structitype.html#a7cb80d77696cefb42ac6e75756b47e60">itype::ammo</a></div><div class="ttdeci">cata::value_ptr&lt; islot_ammo &gt; ammo</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l00864">itype.h:864</a></div></div>
<div class="ttc" id="astructitype_html_abc2596bacfc718fba56ab8076bab5d6b"><div class="ttname"><a href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">itype::get_id</a></div><div class="ttdeci">const itype_id &amp; get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01065">itype.h:1065</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="damage_8cpp_source.html#l00093">damage_instance::add()</a>, <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="itype_8h_source.html#l00864">itype::ammo</a>, <a class="el" href="item_8cpp_source.html#l07458">item::ammo_current()</a>, <a class="el" href="item_8cpp_source.html#l07495">item::ammo_default()</a>, <a class="el" href="item_8cpp_source.html#l00590">item::ammo_set()</a>, <a class="el" href="bodypart_8h_source.html#l00046">bp_hand_l</a>, <a class="el" href="bodypart_8h_source.html#l00047">bp_hand_r</a>, <a class="el" href="itype_8h_source.html#l00475">islot_gun::clip</a>, <a class="el" href="item_8cpp_source.html#l07511">item::common_ammo_default()</a>, <a class="el" href="itype_8h_source.html#l00412">common_ranged_data::damage</a>, <a class="el" href="damage_8h_source.html#l00052">damage_instance::damage_units</a>, <a class="el" href="itype_8h_source.html#l00420">common_ranged_data::dispersion</a>, <a class="el" href="ranged_8cpp_source.html#l03775">ranged::effective_dispersion()</a>, <a class="el" href="character_8cpp_source.html#l03858">Character::encumb()</a>, <a class="el" href="itype_8h_source.html#l01065">itype::get_id()</a>, <a class="el" href="character_8cpp_source.html#l03268">Character::get_skill_level()</a>, <a class="el" href="ranged_8cpp_source.html#l01888">ranged::get_weapon_dispersion()</a>, <a class="el" href="itype_8h_source.html#l00859">itype::gun</a>, <a class="el" href="item_8cpp_source.html#l07174">item::gun_damage()</a>, <a class="el" href="ranged_8cpp_source.html#l01938">gun_value()</a>, <a class="el" href="string__id_8h_source.html#l00317">string_id&lt; T &gt;::is_null()</a>, <a class="el" href="enums_8h_source.html#l00271">m_debug</a>, <a class="el" href="item_8cpp_source.html#l07621">item::magazine_current()</a>, <a class="el" href="dispersion_8cpp_source.html#l00020">dispersion_sources::max()</a>, <a class="el" href="activity__item__handling_8cpp_source.html#l00899">move_cost()</a>, <a class="el" href="cata__utility_8cpp_source.html#l00156">multi_lerp()</a>, <a class="el" href="itype_8h_source.html#l00479">islot_gun::reload_time</a>, <a class="el" href="item_8cpp_source.html#l07155">item::sight_dispersion()</a>, <a class="el" href="ranged_8cpp.html#a1d5482b7403ee4ac3e70e88ecfee2141">skill_dodge</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, <a class="el" href="ranged_8cpp_source.html#l01716">time_to_attack()</a>, <a class="el" href="damage_8cpp_source.html#l00075">damage_instance::total_damage()</a>, <a class="el" href="item_8h_source.html#l02171">item::type</a>, <a class="el" href="item_8cpp_source.html#l05026">item::volume()</a>, and <a class="el" href="character_8h_source.html#l01515">Character::weapon</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l01938">gun_value()</a>, and <a class="el" href="melee_8cpp_source.html#l02260">weapon_value()</a>.</p>

</div>
</div>
<a id="a15c5ded877137a648d04762228055b66" name="a15c5ded877137a648d04762228055b66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15c5ded877137a648d04762228055b66">&#9670;&nbsp;</a></span>melee_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double npc_ai::melee_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate item as a melee weapon. </p>

<p class="definition">Definition at line <a class="el" href="melee_8cpp_source.html#l02288">2288</a> of file <a class="el" href="melee_8cpp_source.html">melee.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>{</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    <span class="comment">// start with average effective dps against a range of enemies</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>    <span class="keywordtype">double</span> my_value = weap.<a class="code hl_function" href="classitem.html#a96c8a18aef6da2f8d876178a3d21dfb0">average_dps</a>( *who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>() );</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span> </div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    <span class="keywordtype">float</span> reach = weap.<a class="code hl_function" href="classitem.html#a04985a2b99688b687432463fb2f0a853">reach_range</a>( who );</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    <span class="comment">// value reach weapons more</span></div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>    <span class="keywordflow">if</span>( reach &gt; 1.0f ) {</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>        my_value *= 1.0f + 0.5f * ( std::sqrt( reach ) - 1.0f );</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    }</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>    <span class="comment">// value polearms less to account for the trickiness of keeping the right range</span></div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>    <span class="keywordflow">if</span>( weap.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;POLEARM&quot;</span> ) ) {</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>        my_value *= 0.8;</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>    }</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span> </div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>    <span class="comment">// value style weapons more</span></div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>    <span class="keywordflow">if</span>( !who.<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;enumerate_known_styles( weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>() ).empty() ) {</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>        my_value *= 1.5;</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>    }</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span> </div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s as melee: %.1f&quot;</span>, weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>(), my_value );</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span> </div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>    <span class="keywordflow">return</span> std::max( 0.0, my_value );</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>}</div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01519">character.h:1519</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassitem_html_a04985a2b99688b687432463fb2f0a853"><div class="ttname"><a href="classitem.html#a04985a2b99688b687432463fb2f0a853">item::reach_range</a></div><div class="ttdeci">int reach_range(const Character &amp;guy) const</div><div class="ttdoc">Max range of melee attack this weapon can be used for.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05203">item.cpp:5203</a></div></div>
<div class="ttc" id="aclassitem_html_a96c8a18aef6da2f8d876178a3d21dfb0"><div class="ttname"><a href="classitem.html#a96c8a18aef6da2f8d876178a3d21dfb0">item::average_dps</a></div><div class="ttdeci">double average_dps(const player &amp;guy) const</div><div class="ttdoc">return the average dps of the weapon against evaluation monsters</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l01464">item.cpp:1464</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05241">item.cpp:5241</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="creature_8h_source.html#l00122">Creature::as_player()</a>, <a class="el" href="item_8cpp_source.html#l01464">item::average_dps()</a>, <a class="el" href="itype_8h_source.html#l01065">itype::get_id()</a>, <a class="el" href="item_8cpp_source.html#l05241">item::has_flag()</a>, <a class="el" href="enums_8h_source.html#l00271">m_debug</a>, <a class="el" href="character_8h_source.html#l01519">Character::martial_arts_data</a>, <a class="el" href="item_8cpp_source.html#l05203">item::reach_range()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8h_source.html#l02171">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npc_8cpp_source.html#l02187">npc::average_damage_dealt()</a>, <a class="el" href="melee_8cpp_source.html#l02313">unarmed_value()</a>, and <a class="el" href="melee_8cpp_source.html#l02260">weapon_value()</a>.</p>

</div>
</div>
<a id="a64daf871b45496787e445f932f4381d3" name="a64daf871b45496787e445f932f4381d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64daf871b45496787e445f932f4381d3">&#9670;&nbsp;</a></span>unarmed_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double npc_ai::unarmed_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate unarmed melee value. </p>

<p class="definition">Definition at line <a class="el" href="melee_8cpp_source.html#l02313">2313</a> of file <a class="el" href="melee_8cpp_source.html">melee.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>{</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>    <span class="comment">// TODO: Martial arts</span></div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="namespacenpc__ai.html#a15c5ded877137a648d04762228055b66">melee_value</a>( who, <a class="code hl_class" href="classitem.html">item</a>() );</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>}</div>
<div class="ttc" id="anamespacenpc__ai_html_a15c5ded877137a648d04762228055b66"><div class="ttname"><a href="namespacenpc__ai.html#a15c5ded877137a648d04762228055b66">npc_ai::melee_value</a></div><div class="ttdeci">double melee_value(const Character &amp;who, const item &amp;weap)</div><div class="ttdoc">Evaluate item as a melee weapon.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l02288">melee.cpp:2288</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="melee_8cpp_source.html#l02288">melee_value()</a>.</p>

</div>
</div>
<a id="a14d62aa6c1fc78bcfe3c3bb845d913cd" name="a14d62aa6c1fc78bcfe3c3bb845d913cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d62aa6c1fc78bcfe3c3bb845d913cd">&#9670;&nbsp;</a></span>weapon_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double npc_ai::weapon_value </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classCharacter.html">Character</a> &amp;&#160;</td>
          <td class="paramname"><em>who</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classitem.html">item</a> &amp;&#160;</td>
          <td class="paramname"><em>weap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ammo</em> = <code>10</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Evaluate item as weapon (melee or gun) </p>

<p class="definition">Definition at line <a class="el" href="melee_8cpp_source.html#l02260">2260</a> of file <a class="el" href="melee_8cpp_source.html">melee.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>{</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">is_wielding</a>( weap ) ) {</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>        <span class="keyword">auto</span> cached = who.<a class="code hl_function" href="classCharacter.html#af5517d543f6f1b7e418de235bf8997fa">get_npc_ai_info_cache</a>( <span class="stringliteral">&quot;weapon_value&quot;</span> );</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>        <span class="keywordflow">if</span>( cached ) {</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>            <span class="keywordflow">return</span> *cached;</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>        }</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>    }</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> val_gun = <a class="code hl_function" href="namespacenpc__ai.html#a9019036bc8d7314e1bb9fb1624afb429">gun_value</a>( who, weap, ammo );</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> val_melee = <a class="code hl_function" href="namespacenpc__ai.html#a15c5ded877137a648d04762228055b66">melee_value</a>( who, weap );</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aea74589f67c5fc9945d7dde9d16aecda3a">more</a> = std::max( val_gun, val_melee );</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> less = std::min( val_gun, val_melee );</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span> </div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>    <span class="comment">// discourage wielding helmets, but not worn firearms</span></div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>    <span class="keywordtype">int</span> armor_penalty = 1;</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>    <span class="keywordflow">if</span>( weap.<a class="code hl_function" href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">is_armor</a>() &amp;&amp; !weap.<a class="code hl_function" href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">is_gun</a>() ) {</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>        armor_penalty = 0;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>    }</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span> </div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>    <span class="comment">// A small bonus for guns you can also use to hit stuff with (bayonets etc.)</span></div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> my_val = ( <a class="code hl_enumvalue" href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aea74589f67c5fc9945d7dde9d16aecda3a">more</a> + ( less / 2.0 ) ) * armor_penalty;</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>    <a class="code hl_function" href="messages_8cpp.html#a54489326fc37823819c5105addfa27f2">add_msg</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea9855e523119c93601d8f67718994df05">m_debug</a>, <span class="stringliteral">&quot;%s (%ld ammo) sum value: %.1f&quot;</span>, weap.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>().<a class="code hl_function" href="classstring__id.html#aa7dabc565f0c067e1a237ea224b18f93">str</a>(), ammo, my_val );</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">is_wielding</a>( weap ) ) {</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>        who.<a class="code hl_function" href="classCharacter.html#acfea23752502eca8ea44d9b07e465735">set_npc_ai_info_cache</a>( <span class="stringliteral">&quot;weapon_value&quot;</span>, my_val );</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>    }</div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>    <span class="keywordflow">return</span> my_val;</div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>}</div>
<div class="ttc" id="aclassCharacter_html_a81864eee5b75943bd4222b696117a52a"><div class="ttname"><a href="classCharacter.html#a81864eee5b75943bd4222b696117a52a">Character::is_wielding</a></div><div class="ttdeci">bool is_wielding(const item &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03147">character.cpp:3147</a></div></div>
<div class="ttc" id="aclassCharacter_html_acfea23752502eca8ea44d9b07e465735"><div class="ttname"><a href="classCharacter.html#acfea23752502eca8ea44d9b07e465735">Character::set_npc_ai_info_cache</a></div><div class="ttdeci">void set_npc_ai_info_cache(const std::string &amp;key, double val) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10368">character.cpp:10368</a></div></div>
<div class="ttc" id="aclassCharacter_html_af5517d543f6f1b7e418de235bf8997fa"><div class="ttname"><a href="classCharacter.html#af5517d543f6f1b7e418de235bf8997fa">Character::get_npc_ai_info_cache</a></div><div class="ttdeci">cata::optional&lt; double &gt; get_npc_ai_info_cache(const std::string &amp;key) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10373">character.cpp:10373</a></div></div>
<div class="ttc" id="aclassitem_html_a2912b2e15a4eec07a5070fffbbd152e8"><div class="ttname"><a href="classitem.html#a2912b2e15a4eec07a5070fffbbd152e8">item::is_gun</a></div><div class="ttdeci">bool is_gun() const</div><div class="ttdoc">Can this item be used to perform a ranged attack?</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06416">item.cpp:6416</a></div></div>
<div class="ttc" id="aclassitem_html_a9aab8660fb40eedb8d2da95e797ecd32"><div class="ttname"><a href="classitem.html#a9aab8660fb40eedb8d2da95e797ecd32">item::is_armor</a></div><div class="ttdeci">bool is_armor() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l06603">item.cpp:6603</a></div></div>
<div class="ttc" id="anamespacedetail_1_1digits_html_aad69d2373aa047bdd9e81494bf3da5aea74589f67c5fc9945d7dde9d16aecda3a"><div class="ttname"><a href="namespacedetail_1_1digits.html#aad69d2373aa047bdd9e81494bf3da5aea74589f67c5fc9945d7dde9d16aecda3a">detail::digits::more</a></div><div class="ttdeci">@ more</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format-inl_8h_source.html#l01627">fmtlib_format-inl.h:1627</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="messages_8cpp_source.html#l00884">add_msg()</a>, <a class="el" href="itype_8h_source.html#l01065">itype::get_id()</a>, <a class="el" href="character_8cpp_source.html#l10373">Character::get_npc_ai_info_cache()</a>, <a class="el" href="ranged_8cpp_source.html#l01938">gun_value()</a>, <a class="el" href="item_8cpp_source.html#l06603">item::is_armor()</a>, <a class="el" href="item_8cpp_source.html#l06416">item::is_gun()</a>, <a class="el" href="character_8cpp_source.html#l03147">Character::is_wielding()</a>, <a class="el" href="enums_8h_source.html#l00271">m_debug</a>, <a class="el" href="melee_8cpp_source.html#l02288">melee_value()</a>, <a class="el" href="fmtlib__format-inl_8h_source.html#l01627">detail::digits::more</a>, <a class="el" href="character_8cpp_source.html#l10368">Character::set_npc_ai_info_cache()</a>, <a class="el" href="string__id_8h_source.html#l00255">string_id&lt; T &gt;::str()</a>, and <a class="el" href="item_8h_source.html#l02171">item::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="npcmove_8cpp_source.html#l00639">npc::character_danger()</a>, <a class="el" href="bionics_8cpp_source.html#l00463">npc::check_or_use_weapon_cbm()</a>, <a class="el" href="npc_8cpp_source.html#l01494">npc::decide_needs()</a>, <a class="el" href="npc_8cpp_source.html#l01221">npc::form_opinion()</a>, <a class="el" href="npctalk_8cpp_source.html#l03339">give_item_to()</a>, <a class="el" href="avatar__action_8cpp_source.html#l00573">rate_critter()</a>, <a class="el" href="npcmove_8cpp_source.html#l00661">npc::regen_ai_cache()</a>, <a class="el" href="npc_8cpp_source.html#l01752">npc::value()</a>, and <a class="el" href="npcmove_8cpp_source.html#l03392">npc::wield_better_weapon()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacenpc__ai.html">npc_ai</a></li>
    <li class="footer">Generated on Sun Jan 22 2023 21:15:55 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
