<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: target_ui Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classtarget__ui.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classtarget__ui-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">target_ui Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae0dd055ba040ba97125cbf165a33c997"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a> : int { <br />
&#160;&#160;<a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>
, <br />
&#160;&#160;<a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>
, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">Shape</a>
<br />
 }</td></tr>
<tr class="separator:ae0dd055ba040ba97125cbf165a33c997"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a11be420f4d6ffd6128dd23d01be6c310"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a11be420f4d6ffd6128dd23d01be6c310">run</a> ()</td></tr>
<tr class="separator:a11be420f4d6ffd6128dd23d01be6c310"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a83609daab209a1d8e462919182014d33"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classavatar.html">avatar</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a></td></tr>
<tr class="separator:a83609daab209a1d8e462919182014d33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee1b122468e838a1f62691b2cd43396"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> = <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a></td></tr>
<tr class="separator:aeee1b122468e838a1f62691b2cd43396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a190a8193e6454bb636bc8f5288b4a27b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classitem.html">item</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> = nullptr</td></tr>
<tr class="separator:a190a8193e6454bb636bc8f5288b4a27b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c8602522a1638d3af42b10f1750e26"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = 0</td></tr>
<tr class="separator:aa3c8602522a1638d3af42b10f1750e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classturret__data.html">turret_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a> = nullptr</td></tr>
<tr class="separator:ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7a7446b4088911709b2eb6a1d3973e5"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="structvehicle__part.html">vehicle_part</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a> = nullptr</td></tr>
<tr class="separator:ae7a7446b4088911709b2eb6a1d3973e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2200f3f97047dbc1e1cf14bae201c34"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classvehicle.html">vehicle</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a> = nullptr</td></tr>
<tr class="separator:ac2200f3f97047dbc1e1cf14bae201c34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af184a9cc7c52521c129182e2cc643375"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classspell.html">spell</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a> = nullptr</td></tr>
<tr class="separator:af184a9cc7c52521c129182e2cc643375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146d794c8cb9c23e6ba71727c9a25852"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">no_fail</a> = false</td></tr>
<tr class="separator:a146d794c8cb9c23e6ba71727c9a25852"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b01fafb341eaec6c8f85582fd7f32f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> = false</td></tr>
<tr class="separator:ac9b01fafb341eaec6c8f85582fd7f32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1dc50e9e2195f48ffdb87a1daacc178"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classaim__activity__actor.html">aim_activity_actor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a> = nullptr</td></tr>
<tr class="separator:af1dc50e9e2195f48ffdb87a1daacc178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f93a66a18420fd252e275a9c6f536d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt; <a class="el" href="classshape__factory.html">shape_factory</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a2f93a66a18420fd252e275a9c6f536d4">shape_gen</a></td></tr>
<tr class="separator:a2f93a66a18420fd252e275a9c6f536d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:aa98e28471bb023e99404674ad6331ad6"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">ExitCode</a> : int { <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">Abort</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">Timeout</a>
, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">Reload</a>
 }</td></tr>
<tr class="separator:aa98e28471bb023e99404674ad6331ad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3594a3a61aa50c8a0ce8c7ea20796202"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a> : int { <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">BadTarget</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>
, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>
 }</td></tr>
<tr class="separator:a3594a3a61aa50c8a0ce8c7ea20796202"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af3857720f2059a0a2f23896bc7e808c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">init_window_and_input</a> ()</td></tr>
<tr class="separator:af3857720f2059a0a2f23896bc7e808c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab290e475e7cd308b447788ec369053b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">handle_cursor_movement</a> (const std::string &amp;<a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, bool &amp;skip_redraw)</td></tr>
<tr class="separator:ab290e475e7cd308b447788ec369053b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ead422f4a78394c13bc3f4c6c953f42"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;new_pos)</td></tr>
<tr class="separator:a3ead422f4a78394c13bc3f4c6c953f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf459ec49ad96c44eddeb94d0c22fb36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a> ()</td></tr>
<tr class="separator:aaf459ec49ad96c44eddeb94d0c22fb36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17fecf6fc24afc0a1af11ee1447b39a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a> ()</td></tr>
<tr class="separator:af17fecf6fc24afc0a1af11ee1447b39a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1591b490e9f8d48547b108ae481f982e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">choose_initial_target</a> ()</td></tr>
<tr class="separator:a1591b490e9f8d48547b108ae481f982e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c885fc69abc2190e1850b7f23601ac2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">try_reacquire_target</a> (bool critter, <a class="el" href="structtripoint.html">tripoint</a> &amp;new_dst)</td></tr>
<tr class="memdesc:a5c885fc69abc2190e1850b7f23601ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to re-acquire target for aim-and-fire.  <a href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">More...</a><br /></td></tr>
<tr class="separator:a5c885fc69abc2190e1850b7f23601ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1e40f0212d403109c8969d7308e493f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a> ()</td></tr>
<tr class="separator:ad1e40f0212d403109c8969d7308e493f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab236848678058afb7605e6d82a5c8fa9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;p)</td></tr>
<tr class="separator:ab236848678058afb7605e6d82a5c8fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa53ba52da62f64baa29130908cf8637b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a> ()</td></tr>
<tr class="separator:aa53ba52da62f64baa29130908cf8637b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97d244cde8cae12d0266daf6fc083014"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a> ()</td></tr>
<tr class="separator:a97d244cde8cae12d0266daf6fc083014"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2ca7887fd647df92c825e8ee153ff84"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">prompt_friendlies_in_lof</a> ()</td></tr>
<tr class="separator:ad2ca7887fd647df92c825e8ee153ff84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac352f6aae1cb28945f8115b76fea2eb6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a>&lt; <a class="el" href="classCreature.html">Creature</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a> ()</td></tr>
<tr class="separator:ac352f6aae1cb28945f8115b76fea2eb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779bc721417ab8ee4a6b103d8a1030f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a> ()</td></tr>
<tr class="separator:a779bc721417ab8ee4a6b103d8a1030f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af007dd5fcc266ee10d673299ca90c29c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a> (int <a class="el" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a>)</td></tr>
<tr class="separator:af007dd5fcc266ee10d673299ca90c29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb5ba4fec5983a480a4f765da7abe23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a> (const <a class="el" href="structtripoint.html">tripoint</a> &amp;new_offset)</td></tr>
<tr class="separator:abcb5ba4fec5983a480a4f765da7abe23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa955ab0c7cfbd2c8c5d439f5aed608ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">update_turrets_in_range</a> ()</td></tr>
<tr class="separator:aa955ab0c7cfbd2c8c5d439f5aed608ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1403890979533cd6ea29897e3ee81ab5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a> ()</td></tr>
<tr class="separator:a1403890979533cd6ea29897e3ee81ab5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40bd320b465d966959268698b54a0d98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a40bd320b465d966959268698b54a0d98">apply_aim_turning_penalty</a> ()</td></tr>
<tr class="separator:a40bd320b465d966959268698b54a0d98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691e0bd6f4c5f82b309fd0e026f77825"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a691e0bd6f4c5f82b309fd0e026f77825">action_switch_mode</a> ()</td></tr>
<tr class="separator:a691e0bd6f4c5f82b309fd0e026f77825"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92256c0cb72fe5b2520a5808a5fcb79a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a92256c0cb72fe5b2520a5808a5fcb79a">ensure_ranged_gun_mode</a> ()</td></tr>
<tr class="separator:a92256c0cb72fe5b2520a5808a5fcb79a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77429c16aec83b5c81d3a1c259259cd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a77429c16aec83b5c81d3a1c259259cd5">update_ammo_range_from_gun_mode</a> ()</td></tr>
<tr class="separator:a77429c16aec83b5c81d3a1c259259cd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbdcdc8f41dd8bcbf887b12d96c9948d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">action_switch_ammo</a> ()</td></tr>
<tr class="separator:acbdcdc8f41dd8bcbf887b12d96c9948d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0468c35f79fb501be1a3a50b4081d4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">action_aim</a> ()</td></tr>
<tr class="separator:a6c0468c35f79fb501be1a3a50b4081d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21275763803a2ce0d00e02dc0076a36c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">action_aim_and_shoot</a> (const std::string &amp;<a class="el" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>)</td></tr>
<tr class="separator:a21275763803a2ce0d00e02dc0076a36c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15d523ae27fc66cbff7adac5e9fa91dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">draw_terrain_overlay</a> ()</td></tr>
<tr class="separator:a15d523ae27fc66cbff7adac5e9fa91dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a478e95d201324548329f39a087208"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a93a478e95d201324548329f39a087208">draw_ui_window</a> ()</td></tr>
<tr class="separator:a93a478e95d201324548329f39a087208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae2f397600dc6b01bb03f22bcd18666"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#abae2f397600dc6b01bb03f22bcd18666">uitext_title</a> ()</td></tr>
<tr class="separator:abae2f397600dc6b01bb03f22bcd18666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c23b4913b52b2a5f80357f34d92700c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a2c23b4913b52b2a5f80357f34d92700c">uitext_fire</a> ()</td></tr>
<tr class="separator:a2c23b4913b52b2a5f80357f34d92700c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad62889056a10382de6835688498cf20e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">draw_window_title</a> ()</td></tr>
<tr class="separator:ad62889056a10382de6835688498cf20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5b1b952d220d0cd766f9c32ab5eb38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">draw_help_notice</a> ()</td></tr>
<tr class="separator:acc5b1b952d220d0cd766f9c32ab5eb38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d5114b61c688d3810c108986ddc8bf7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">draw_controls_list</a> (int text_y)</td></tr>
<tr class="separator:a7d5114b61c688d3810c108986ddc8bf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86966228ce7aad77c233058bf1285962"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">panel_cursor_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a86966228ce7aad77c233058bf1285962"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a545580558b81b3d44c43b52fc5ff1b77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">panel_gun_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a545580558b81b3d44c43b52fc5ff1b77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f08c10cac1401587f330fb97f5c2183"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">panel_recoil</a> (int &amp;text_y)</td></tr>
<tr class="separator:a9f08c10cac1401587f330fb97f5c2183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14b8ebef108aaa7ad8c5176a04f600bb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">panel_spell_info</a> (int &amp;text_y)</td></tr>
<tr class="separator:a14b8ebef108aaa7ad8c5176a04f600bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb70bd52ece44447bec77880106009d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">panel_target_info</a> (int &amp;text_y, bool fill_with_blank_if_no_target)</td></tr>
<tr class="separator:a4bb70bd52ece44447bec77880106009d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5c1e8816cd2a0f9c10e3ea2095eefe1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#aa5c1e8816cd2a0f9c10e3ea2095eefe1">panel_fire_mode_aim</a> (int &amp;text_y)</td></tr>
<tr class="separator:aa5c1e8816cd2a0f9c10e3ea2095eefe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4a9c004a4c4cf26ad705174612584ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">panel_turret_list</a> (int &amp;text_y)</td></tr>
<tr class="separator:ad4a9c004a4c4cf26ad705174612584ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d84b28ee34fdefd76ae987c95a29600"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a9d84b28ee34fdefd76ae987c95a29600">on_target_accepted</a> (bool harmful)</td></tr>
<tr class="separator:a9d84b28ee34fdefd76ae987c95a29600"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:abb6df512b8b794227dc5f1d9afe17bf1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a></td></tr>
<tr class="separator:abb6df512b8b794227dc5f1d9afe17bf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ae79a739fcab56301077b8802355ce"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structitype.html">itype</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = nullptr</td></tr>
<tr class="separator:ae5ae79a739fcab56301077b8802355ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542ba80f542b41ea6a81f1ab8b14b521"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a></td></tr>
<tr class="separator:a542ba80f542b41ea6a81f1ab8b14b521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe4c97cc5abb0ce402bd9e89411e1778"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a></td></tr>
<tr class="separator:afe4c97cc5abb0ce402bd9e89411e1778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a954878eb50877ad7fc1902a28beb2539"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtripoint.html">tripoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a></td></tr>
<tr class="separator:a954878eb50877ad7fc1902a28beb2539"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a362df365f84b306e2ff14edf099a1000"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classCreature.html">Creature</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = nullptr</td></tr>
<tr class="separator:a362df365f84b306e2ff14edf099a1000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a281f9ea6ae900ff7991e457f1d34b8f6"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCreature.html">Creature</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a></td></tr>
<tr class="separator:a281f9ea6ae900ff7991e457f1d34b8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45f98789c877903961a56a54b17d9e96"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a45f98789c877903961a56a54b17d9e96">allow_zlevel_shift</a> = false</td></tr>
<tr class="separator:a45f98789c877903961a56a54b17d9e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a270f72c5bfef55a533d3cd9b3cf57ea0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = false</td></tr>
<tr class="separator:a270f72c5bfef55a533d3cd9b3cf57ea0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a122323ec4c1e72c291e76643ccfd3fde"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = false</td></tr>
<tr class="separator:a122323ec4c1e72c291e76643ccfd3fde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34b69263e28fa4472b51104ec1d2e6f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = false</td></tr>
<tr class="separator:a34b69263e28fa4472b51104ec1d2e6f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e6534092ef1b213639575c914030eb1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a> = false</td></tr>
<tr class="separator:a1e6534092ef1b213639575c914030eb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b525b1e2a39f4748409b97e8984947b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> = false</td></tr>
<tr class="separator:a4b525b1e2a39f4748409b97e8984947b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a246e6aa2bb08bb724c44571e8451ac30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcatacurses_1_1window.html">catacurses::window</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a></td></tr>
<tr class="separator:a246e6aa2bb08bb724c44571e8451ac30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e5479e5dd0b2883bbf2927c489ddb6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classinput__context.html">input_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a></td></tr>
<tr class="separator:a4e5479e5dd0b2883bbf2927c489ddb6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e6f4c9c827b91ce215a1a7b32a4affb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> = 0</td></tr>
<tr class="separator:a2e6f4c9c827b91ce215a1a7b32a4affb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c3b0302e89b82b60f16c8ccf50ac29a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structranged_1_1aim__type.html">ranged::aim_type</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a></td></tr>
<tr class="separator:a5c3b0302e89b82b60f16c8ccf50ac29a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06d24870763e37a97c0aed0829bddb25"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structranged_1_1aim__type.html">ranged::aim_type</a> &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a></td></tr>
<tr class="separator:a06d24870763e37a97c0aed0829bddb25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0a5aad7e60b30082e7ec2ff97f8f6d4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = 0</td></tr>
<tr class="separator:ac0a5aad7e60b30082e7ec2ff97f8f6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab855722580bd112ef0590b5a9b4f3556"><td class="memItemLeft" align="right" valign="top">std::set&lt; <a class="el" href="structtripoint.html">tripoint</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a></td></tr>
<tr class="separator:ab855722580bd112ef0590b5a9b4f3556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2c970f904d7b8c06e403dbc4560f4d"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="structtripoint.html">tripoint</a>, double &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a6f2c970f904d7b8c06e403dbc4560f4d">shape_coverage</a></td></tr>
<tr class="separator:a6f2c970f904d7b8c06e403dbc4560f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a></td></tr>
<tr class="separator:ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63ac73585a9794e93d181362f7473b50"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = false</td></tr>
<tr class="separator:a63ac73585a9794e93d181362f7473b50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00169">169</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="aa98e28471bb023e99404674ad6331ad6" name="aa98e28471bb023e99404674ad6331ad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa98e28471bb023e99404674ad6331ad6">&#9670;&nbsp;</a></span>ExitCode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">target_ui::ExitCode</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2" name="aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2"></a>Abort&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb" name="aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb"></a>Fire&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398" name="aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398"></a>Timeout&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006" name="aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006"></a>Reload&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00214">214</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                            : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            Abort,</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            Fire,</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>            Timeout,</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            Reload</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        };</div>
</div><!-- fragment -->
</div>
</div>
<a id="a3594a3a61aa50c8a0ce8c7ea20796202" name="a3594a3a61aa50c8a0ce8c7ea20796202"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3594a3a61aa50c8a0ce8c7ea20796202">&#9670;&nbsp;</a></span>Status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">target_ui::Status</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc" name="a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc"></a>Good&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408" name="a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408"></a>BadTarget&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773" name="a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773"></a>OutOfAmmo&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f" name="a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f"></a>OutOfRange&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00221">221</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>                          : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>            Good, <span class="comment">// All UI elements are enabled</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            BadTarget, <span class="comment">// Bad &#39;dst&#39; selected; forbid aiming/firing</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            OutOfAmmo, <span class="comment">// Selected gun mode is out of ammo; forbid moving cursor,aiming and firing</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            OutOfRange <span class="comment">// Selected target is out of range of current gun mode; forbid aiming/firing</span></div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        };</div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0dd055ba040ba97125cbf165a33c997" name="ae0dd055ba040ba97125cbf165a33c997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0dd055ba040ba97125cbf165a33c997">&#9670;&nbsp;</a></span>TargetMode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum class <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">target_ui::TargetMode</a> : int</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb" name="ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb"></a>Fire&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f" name="ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f"></a>Throw&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86" name="ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86"></a>ThrowBlind&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb" name="ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb"></a>Turrets&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70" name="ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70"></a>TurretManual&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae" name="ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae"></a>Reach&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd" name="ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd"></a>Spell&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9" name="ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9"></a>Shape&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00174">174</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                              : <span class="keywordtype">int</span> {</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>            Fire,</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            Throw,</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            ThrowBlind,</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            Turrets,</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            TurretManual,</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>            Reach,</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            Spell,</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            Shape</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        };</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6c0468c35f79fb501be1a3a50b4081d4" name="a6c0468c35f79fb501be1a3a50b4081d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0468c35f79fb501be1a3a50b4081d4">&#9670;&nbsp;</a></span>action_aim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_aim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03091">3091</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03092" name="l03092"></a><span class="lineno"> 3092</span>{</div>
<div class="line"><a id="l03093" name="l03093"></a><span class="lineno"> 3093</span>    <a class="code hl_function" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a id="l03094" name="l03094"></a><span class="lineno"> 3094</span>    <a class="code hl_function" href="classtarget__ui.html#a40bd320b465d966959268698b54a0d98">apply_aim_turning_penalty</a>();</div>
<div class="line"><a id="l03095" name="l03095"></a><span class="lineno"> 3095</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> min_recoil = <a class="code hl_function" href="ranged_8cpp.html#aa870bb65c1a33e8684356da74c00e1dd">calculate_aim_cap</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l03096" name="l03096"></a><span class="lineno"> 3096</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> i = 0; i &lt; 10; ++i ) {</div>
<div class="line"><a id="l03097" name="l03097"></a><span class="lineno"> 3097</span>        <a class="code hl_function" href="ranged_8cpp.html#a886852cf2495b6ef65ed030e8975d747">do_aim</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>, min_recoil );</div>
<div class="line"><a id="l03098" name="l03098"></a><span class="lineno"> 3098</span>    }</div>
<div class="line"><a id="l03099" name="l03099"></a><span class="lineno"> 3099</span> </div>
<div class="line"><a id="l03100" name="l03100"></a><span class="lineno"> 3100</span>    <span class="comment">// We&#39;ve changed pc.recoil, update penalty</span></div>
<div class="line"><a id="l03101" name="l03101"></a><span class="lineno"> 3101</span>    <a class="code hl_function" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a>();</div>
<div class="line"><a id="l03102" name="l03102"></a><span class="lineno"> 3102</span> </div>
<div class="line"><a id="l03103" name="l03103"></a><span class="lineno"> 3103</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &gt; 0;</div>
<div class="line"><a id="l03104" name="l03104"></a><span class="lineno"> 3104</span>}</div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00570">creature.h:570</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1403890979533cd6ea29897e3ee81ab5"><div class="ttname"><a href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">target_ui::recalc_aim_turning_penalty</a></div><div class="ttdeci">void recalc_aim_turning_penalty()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02931">ranged.cpp:2931</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a190a8193e6454bb636bc8f5288b4a27b"><div class="ttname"><a href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">target_ui::relevant</a></div><div class="ttdeci">item * relevant</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00190">ranged.cpp:190</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a40bd320b465d966959268698b54a0d98"><div class="ttname"><a href="classtarget__ui.html#a40bd320b465d966959268698b54a0d98">target_ui::apply_aim_turning_penalty</a></div><div class="ttdeci">void apply_aim_turning_penalty()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02970">ranged.cpp:2970</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a83609daab209a1d8e462919182014d33"><div class="ttname"><a href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">target_ui::you</a></div><div class="ttdeci">avatar * you</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00186">ranged.cpp:186</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a954878eb50877ad7fc1902a28beb2539"><div class="ttname"><a href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">target_ui::dst</a></div><div class="ttdeci">tripoint dst</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00239">ranged.cpp:239</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa53ba52da62f64baa29130908cf8637b"><div class="ttname"><a href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">target_ui::set_last_target</a></div><div class="ttdeci">void set_last_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02786">ranged.cpp:2786</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a886852cf2495b6ef65ed030e8975d747"><div class="ttname"><a href="ranged_8cpp.html#a886852cf2495b6ef65ed030e8975d747">do_aim</a></div><div class="ttdeci">static void do_aim(avatar &amp;you, const item &amp;relevant, const double min_recoil)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01283">ranged.cpp:1283</a></div></div>
<div class="ttc" id="aranged_8cpp_html_aa870bb65c1a33e8684356da74c00e1dd"><div class="ttname"><a href="ranged_8cpp.html#aa870bb65c1a33e8684356da74c00e1dd">calculate_aim_cap</a></div><div class="ttdeci">static double calculate_aim_cap(const Character &amp;p, const tripoint &amp;target)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01532">ranged.cpp:1532</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l02970">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l01532">calculate_aim_cap()</a>, <a class="el" href="ranged_8cpp_source.html#l01283">do_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="creature_8h_source.html#l00570">Creature::moves</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a21275763803a2ce0d00e02dc0076a36c" name="a21275763803a2ce0d00e02dc0076a36c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21275763803a2ce0d00e02dc0076a36c">&#9670;&nbsp;</a></span>action_aim_and_shoot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_aim_and_shoot </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03106">3106</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03107" name="l03107"></a><span class="lineno"> 3107</span>{</div>
<div class="line"><a id="l03108" name="l03108"></a><span class="lineno"> 3108</span>    std::vector&lt;ranged::aim_type&gt;::iterator it;</div>
<div class="line"><a id="l03109" name="l03109"></a><span class="lineno"> 3109</span>    <span class="keywordflow">for</span>( it = <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.begin(); it != <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.end(); it++ ) {</div>
<div class="line"><a id="l03110" name="l03110"></a><span class="lineno"> 3110</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == it-&gt;action ) {</div>
<div class="line"><a id="l03111" name="l03111"></a><span class="lineno"> 3111</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l03112" name="l03112"></a><span class="lineno"> 3112</span>        }</div>
<div class="line"><a id="l03113" name="l03113"></a><span class="lineno"> 3113</span>    }</div>
<div class="line"><a id="l03114" name="l03114"></a><span class="lineno"> 3114</span>    <span class="keywordflow">if</span>( it == <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.end() ) {</div>
<div class="line"><a id="l03115" name="l03115"></a><span class="lineno"> 3115</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Could not find a valid aim_type for %s&quot;</span>, <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.c_str() );</div>
<div class="line"><a id="l03116" name="l03116"></a><span class="lineno"> 3116</span>        <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a> = <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.begin();</div>
<div class="line"><a id="l03117" name="l03117"></a><span class="lineno"> 3117</span>    }</div>
<div class="line"><a id="l03118" name="l03118"></a><span class="lineno"> 3118</span>    <span class="keywordtype">int</span> aim_threshold = it-&gt;threshold;</div>
<div class="line"><a id="l03119" name="l03119"></a><span class="lineno"> 3119</span>    <a class="code hl_function" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a id="l03120" name="l03120"></a><span class="lineno"> 3120</span>    <a class="code hl_function" href="classtarget__ui.html#a40bd320b465d966959268698b54a0d98">apply_aim_turning_penalty</a>();</div>
<div class="line"><a id="l03121" name="l03121"></a><span class="lineno"> 3121</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> min_recoil = <a class="code hl_function" href="ranged_8cpp.html#aa870bb65c1a33e8684356da74c00e1dd">calculate_aim_cap</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l03122" name="l03122"></a><span class="lineno"> 3122</span>    <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l03123" name="l03123"></a><span class="lineno"> 3123</span>        <a class="code hl_function" href="ranged_8cpp.html#a886852cf2495b6ef65ed030e8975d747">do_aim</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> ? *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> : <a class="code hl_function" href="item_8cpp.html#a300b99af4ea719590afac661e0bff7a1">null_item_reference</a>(), min_recoil );</div>
<div class="line"><a id="l03124" name="l03124"></a><span class="lineno"> 3124</span>    } <span class="keywordflow">while</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &gt; 0 &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> &gt; aim_threshold &amp;&amp;</div>
<div class="line"><a id="l03125" name="l03125"></a><span class="lineno"> 3125</span>             <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> - <a class="code hl_variable" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> &gt; min_recoil );</div>
<div class="line"><a id="l03126" name="l03126"></a><span class="lineno"> 3126</span> </div>
<div class="line"><a id="l03127" name="l03127"></a><span class="lineno"> 3127</span>    <span class="comment">// If we made it under the aim threshold, go ahead and fire.</span></div>
<div class="line"><a id="l03128" name="l03128"></a><span class="lineno"> 3128</span>    <span class="comment">// Also fire if we&#39;re at our best aim level already.</span></div>
<div class="line"><a id="l03129" name="l03129"></a><span class="lineno"> 3129</span>    <span class="comment">// If no critter is at dst then sight dispersion does not apply,</span></div>
<div class="line"><a id="l03130" name="l03130"></a><span class="lineno"> 3130</span>    <span class="comment">// so it would lock into an infinite loop.</span></div>
<div class="line"><a id="l03131" name="l03131"></a><span class="lineno"> 3131</span>    <span class="keywordtype">bool</span> done_aiming = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> &lt;= aim_threshold || <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> - <a class="code hl_variable" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> == min_recoil ||</div>
<div class="line"><a id="l03132" name="l03132"></a><span class="lineno"> 3132</span>                       ( !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> == min_recoil );</div>
<div class="line"><a id="l03133" name="l03133"></a><span class="lineno"> 3133</span>    <span class="keywordflow">return</span> done_aiming;</div>
<div class="line"><a id="l03134" name="l03134"></a><span class="lineno"> 3134</span>}</div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00555">character.h:555</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a06d24870763e37a97c0aed0829bddb25"><div class="ttname"><a href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">target_ui::aim_mode</a></div><div class="ttdeci">std::vector&lt; ranged::aim_type &gt;::iterator aim_mode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00273">ranged.cpp:273</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a2e6f4c9c827b91ce215a1a7b32a4affb"><div class="ttname"><a href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">target_ui::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00269">ranged.cpp:269</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a5c3b0302e89b82b60f16c8ccf50ac29a"><div class="ttname"><a href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">target_ui::aim_types</a></div><div class="ttdeci">std::vector&lt; ranged::aim_type &gt; aim_types</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00271">ranged.cpp:271</a></div></div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
<div class="ttc" id="adialogue_8h_html_abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8"><div class="ttname"><a href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a></div><div class="ttdeci">@ action</div><div class="ttdef"><b>Definition:</b> <a href="dialogue_8h_source.html#l00037">dialogue.h:36</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00280">game.cpp:280</a></div></div>
<div class="ttc" id="aitem_8cpp_html_a300b99af4ea719590afac661e0bff7a1"><div class="ttname"><a href="item_8cpp.html#a300b99af4ea719590afac661e0bff7a1">null_item_reference</a></div><div class="ttdeci">item &amp; null_item_reference()</div><div class="ttdoc">Returns a reference to a null item (see item::is_null).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l00322">item.cpp:322</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00036">action</a>, <a class="el" href="ranged_8cpp_source.html#l00273">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00271">aim_types</a>, <a class="el" href="ranged_8cpp_source.html#l02970">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l01532">calculate_aim_cap()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l01283">do_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="creature_8h_source.html#l00570">Creature::moves</a>, <a class="el" href="item_8cpp_source.html#l00322">null_item_reference()</a>, <a class="el" href="character_8h_source.html#l00555">Character::recoil</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00269">sight_dispersion</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="acbdcdc8f41dd8bcbf887b12d96c9948d" name="acbdcdc8f41dd8bcbf887b12d96c9948d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbdcdc8f41dd8bcbf887b12d96c9948d">&#9670;&nbsp;</a></span>action_switch_ammo()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::action_switch_ammo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03071">3071</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03072" name="l03072"></a><span class="lineno"> 3072</span>{</div>
<div class="line"><a id="l03073" name="l03073"></a><span class="lineno"> 3073</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l03074" name="l03074"></a><span class="lineno"> 3074</span>        <span class="comment">// For turrets that use vehicle tanks &amp; can fire multiple liquids</span></div>
<div class="line"><a id="l03075" name="l03075"></a><span class="lineno"> 3075</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">ammo_options</a>().size() &gt; 1 ) {</div>
<div class="line"><a id="l03076" name="l03076"></a><span class="lineno"> 3076</span>            <span class="keyword">const</span> <span class="keyword">auto</span> opts = <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">ammo_options</a>();</div>
<div class="line"><a id="l03077" name="l03077"></a><span class="lineno"> 3077</span>            <span class="keyword">auto</span> iter = opts.find( <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>() );</div>
<div class="line"><a id="l03078" name="l03078"></a><span class="lineno"> 3078</span>            <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#a21fc6c32651797ffe152775d1b51687b">ammo_select</a>( ++iter != opts.end() ? *iter : *opts.begin() );</div>
<div class="line"><a id="l03079" name="l03079"></a><span class="lineno"> 3079</span>            <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = &amp;*<a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>();</div>
<div class="line"><a id="l03080" name="l03080"></a><span class="lineno"> 3080</span>            <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">range</a>();</div>
<div class="line"><a id="l03081" name="l03081"></a><span class="lineno"> 3081</span>        }</div>
<div class="line"><a id="l03082" name="l03082"></a><span class="lineno"> 3082</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03083" name="l03083"></a><span class="lineno"> 3083</span>        <span class="comment">// Leave aiming UI and open reloading UI since</span></div>
<div class="line"><a id="l03084" name="l03084"></a><span class="lineno"> 3084</span>        <span class="comment">// reloading annihilates our aim anyway</span></div>
<div class="line"><a id="l03085" name="l03085"></a><span class="lineno"> 3085</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l03086" name="l03086"></a><span class="lineno"> 3086</span>    }</div>
<div class="line"><a id="l03087" name="l03087"></a><span class="lineno"> 3087</span>    <a class="code hl_function" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a>();</div>
<div class="line"><a id="l03088" name="l03088"></a><span class="lineno"> 3088</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l03089" name="l03089"></a><span class="lineno"> 3089</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_aa3c8602522a1638d3af42b10f1750e26"><div class="ttname"><a href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">target_ui::range</a></div><div class="ttdeci">int range</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00192">ranged.cpp:192</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aaf459ec49ad96c44eddeb94d0c22fb36"><div class="ttname"><a href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">target_ui::on_range_ammo_changed</a></div><div class="ttdeci">void on_range_ammo_changed()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02670">ranged.cpp:2670</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">target_ui::TargetMode::TurretManual</a></div><div class="ttdeci">@ TurretManual</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae5ae79a739fcab56301077b8802355ce"><div class="ttname"><a href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">target_ui::ammo</a></div><div class="ttdeci">const itype * ammo</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00232">ranged.cpp:232</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae9e40adc2b44c3cd4cdbcc62dd8a1e30"><div class="ttname"><a href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">target_ui::turret</a></div><div class="ttdeci">turret_data * turret</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00194">ranged.cpp:194</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aeee1b122468e838a1f62691b2cd43396"><div class="ttname"><a href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">target_ui::mode</a></div><div class="ttdeci">TargetMode mode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00188">ranged.cpp:188</a></div></div>
<div class="ttc" id="aclassturret__data_html_a21fc6c32651797ffe152775d1b51687b"><div class="ttname"><a href="classturret__data.html#a21fc6c32651797ffe152775d1b51687b">turret_data::ammo_select</a></div><div class="ttdeci">bool ammo_select(const itype_id &amp;ammo)</div><div class="ttdoc">Attempts selecting ammo type and returns true if selection was valid.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00166">turret.cpp:166</a></div></div>
<div class="ttc" id="aclassturret__data_html_a78df34a41feb7bf25a677dba1e8181d5"><div class="ttname"><a href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">turret_data::range</a></div><div class="ttdeci">int range() const</div><div class="ttdoc">Maximum range considering current ammo (if any)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00188">turret.cpp:188</a></div></div>
<div class="ttc" id="aclassturret__data_html_aee56a3a0b07255f5b008cd16898b75e0"><div class="ttname"><a href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">turret_data::ammo_current</a></div><div class="ttdeci">itype_id ammo_current() const</div><div class="ttdoc">Specific ammo type or returns &quot;null&quot; if no ammo available.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00124">turret.cpp:124</a></div></div>
<div class="ttc" id="aclassturret__data_html_af1938c9e7db9350ae08fef7a921f19c6"><div class="ttname"><a href="classturret__data.html#af1938c9e7db9350ae08fef7a921f19c6">turret_data::ammo_options</a></div><div class="ttdeci">std::set&lt; itype_id &gt; ammo_options() const</div><div class="ttdoc">What ammo is available for this turret (may be multiple if uses tanks)</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00139">turret.cpp:139</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00232">ammo</a>, <a class="el" href="turret_8cpp_source.html#l00124">turret_data::ammo_current()</a>, <a class="el" href="turret_8cpp_source.html#l00139">turret_data::ammo_options()</a>, <a class="el" href="turret_8cpp_source.html#l00166">turret_data::ammo_select()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l02670">on_range_ammo_changed()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="turret_8cpp_source.html#l00188">turret_data::range()</a>, <a class="el" href="ranged_8cpp_source.html#l00194">turret</a>, and <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a691e0bd6f4c5f82b309fd0e026f77825" name="a691e0bd6f4c5f82b309fd0e026f77825"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a691e0bd6f4c5f82b309fd0e026f77825">&#9670;&nbsp;</a></span>action_switch_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::action_switch_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02975">2975</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02976" name="l02976"></a><span class="lineno"> 2976</span>{</div>
<div class="line"><a id="l02977" name="l02977"></a><span class="lineno"> 2977</span>    <a class="code hl_class" href="classuilist.html">uilist</a> menu;</div>
<div class="line"><a id="l02978" name="l02978"></a><span class="lineno"> 2978</span>    menu.<a class="code hl_function" href="classuilist.html#a5ed3c6e3829c033040fa9f11f1a7d0aa">settext</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Select preferences&quot;</span> ) );</div>
<div class="line"><a id="l02979" name="l02979"></a><span class="lineno"> 2979</span> </div>
<div class="line"><a id="l02980" name="l02980"></a><span class="lineno"> 2980</span>    std::vector&lt;std::function&lt;void()&gt;&gt; on_select;</div>
<div class="line"><a id="l02981" name="l02981"></a><span class="lineno"> 2981</span> </div>
<div class="line"><a id="l02982" name="l02982"></a><span class="lineno"> 2982</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.empty() ) {</div>
<div class="line"><a id="l02983" name="l02983"></a><span class="lineno"> 2983</span>        menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( -1, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;  &quot;</span> + std::string( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Default aiming mode&quot;</span> ) ) );</div>
<div class="line"><a id="l02984" name="l02984"></a><span class="lineno"> 2984</span>        menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().force_color = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02985" name="l02985"></a><span class="lineno"> 2985</span>        menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a id="l02986" name="l02986"></a><span class="lineno"> 2986</span> </div>
<div class="line"><a id="l02987" name="l02987"></a><span class="lineno"> 2987</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.begin(); it != <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.end(); ++it ) {</div>
<div class="line"><a id="l02988" name="l02988"></a><span class="lineno"> 2988</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> is_active_aim_mode = <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a> == it;</div>
<div class="line"><a id="l02989" name="l02989"></a><span class="lineno"> 2989</span>            <span class="keyword">const</span> std::string text = ( it-&gt;name.empty() ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Immediate&quot;</span> ) : it-&gt;<a class="code hl_function" href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">name</a> ) +</div>
<div class="line"><a id="l02990" name="l02990"></a><span class="lineno"> 2990</span>                                     ( is_active_aim_mode ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (active)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l02991" name="l02991"></a><span class="lineno"> 2991</span> </div>
<div class="line"><a id="l02992" name="l02992"></a><span class="lineno"> 2992</span>            menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( on_select.size(), <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, text );</div>
<div class="line"><a id="l02993" name="l02993"></a><span class="lineno"> 2993</span>            on_select.emplace_back( [it, <span class="keyword">this</span>]() {</div>
<div class="line"><a id="l02994" name="l02994"></a><span class="lineno"> 2994</span>                <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a> = it;</div>
<div class="line"><a id="l02995" name="l02995"></a><span class="lineno"> 2995</span>                <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">preferred_aiming_mode</a> = it-&gt;action;</div>
<div class="line"><a id="l02996" name="l02996"></a><span class="lineno"> 2996</span>            } );</div>
<div class="line"><a id="l02997" name="l02997"></a><span class="lineno"> 2997</span>            <span class="keywordflow">if</span>( is_active_aim_mode ) {</div>
<div class="line"><a id="l02998" name="l02998"></a><span class="lineno"> 2998</span>                menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l02999" name="l02999"></a><span class="lineno"> 2999</span>            }</div>
<div class="line"><a id="l03000" name="l03000"></a><span class="lineno"> 3000</span>        }</div>
<div class="line"><a id="l03001" name="l03001"></a><span class="lineno"> 3001</span>    }</div>
<div class="line"><a id="l03002" name="l03002"></a><span class="lineno"> 3002</span> </div>
<div class="line"><a id="l03003" name="l03003"></a><span class="lineno"> 3003</span>    <span class="keyword">const</span> std::map&lt;gun_mode_id, gun_mode&gt; &amp;all_gun_modes = <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">gun_all_modes</a>();</div>
<div class="line"><a id="l03004" name="l03004"></a><span class="lineno"> 3004</span>    <span class="keywordflow">if</span>( !all_gun_modes.empty() ) {</div>
<div class="line"><a id="l03005" name="l03005"></a><span class="lineno"> 3005</span>        menu.<a class="code hl_function" href="classuilist.html#af99f28334902af64487e2d0758df2ab9">addentry</a>( -1, <span class="keyword">false</span>, 0, <span class="stringliteral">&quot;  &quot;</span> + std::string( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Firing mode&quot;</span> ) ) );</div>
<div class="line"><a id="l03006" name="l03006"></a><span class="lineno"> 3006</span>        menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().force_color = <span class="keyword">true</span>;</div>
<div class="line"><a id="l03007" name="l03007"></a><span class="lineno"> 3007</span>        menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code hl_define" href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a>;</div>
<div class="line"><a id="l03008" name="l03008"></a><span class="lineno"> 3008</span> </div>
<div class="line"><a id="l03009" name="l03009"></a><span class="lineno"> 3009</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;<a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> : all_gun_modes ) {</div>
<div class="line"><a id="l03010" name="l03010"></a><span class="lineno"> 3010</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.second.melee() ) {</div>
<div class="line"><a id="l03011" name="l03011"></a><span class="lineno"> 3011</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03012" name="l03012"></a><span class="lineno"> 3012</span>            }</div>
<div class="line"><a id="l03013" name="l03013"></a><span class="lineno"> 3013</span>            <span class="keyword">const</span> <span class="keywordtype">bool</span> active_gun_mode = <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a3b83c2e0d1313b542801169382be1605">gun_get_mode_id</a>() == <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.first;</div>
<div class="line"><a id="l03014" name="l03014"></a><span class="lineno"> 3014</span> </div>
<div class="line"><a id="l03015" name="l03015"></a><span class="lineno"> 3015</span>            <span class="comment">// If gun mode is from a gunmod use gunmod&#39;s name, pay attention to the &quot;-&gt;&quot; on tname</span></div>
<div class="line"><a id="l03016" name="l03016"></a><span class="lineno"> 3016</span>            std::string text = ( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.second.target == <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> )</div>
<div class="line"><a id="l03017" name="l03017"></a><span class="lineno"> 3017</span>                               ? <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.second.tname()</div>
<div class="line"><a id="l03018" name="l03018"></a><span class="lineno"> 3018</span>                               : <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.second-&gt;tname() + <span class="stringliteral">&quot; (&quot;</span> + <a class="code hl_function" href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">std::to_string</a>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.second.qty ) + <span class="stringliteral">&quot;)&quot;</span>;</div>
<div class="line"><a id="l03019" name="l03019"></a><span class="lineno"> 3019</span> </div>
<div class="line"><a id="l03020" name="l03020"></a><span class="lineno"> 3020</span>            text += ( active_gun_mode ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; (active)&quot;</span> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l03021" name="l03021"></a><span class="lineno"> 3021</span> </div>
<div class="line"><a id="l03022" name="l03022"></a><span class="lineno"> 3022</span>            menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.emplace_back( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( on_select.size() ), <span class="keyword">true</span>, <a class="code hl_variable" href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a>, text );</div>
<div class="line"><a id="l03023" name="l03023"></a><span class="lineno"> 3023</span>            on_select.emplace_back( [<a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>, <span class="keyword">this</span>]() {</div>
<div class="line"><a id="l03024" name="l03024"></a><span class="lineno"> 3024</span>                <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">gun_set_mode</a>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a>.first );</div>
<div class="line"><a id="l03025" name="l03025"></a><span class="lineno"> 3025</span>            } );</div>
<div class="line"><a id="l03026" name="l03026"></a><span class="lineno"> 3026</span>            <span class="keywordflow">if</span>( active_gun_mode ) {</div>
<div class="line"><a id="l03027" name="l03027"></a><span class="lineno"> 3027</span>                menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.back().text_color = <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>;</div>
<div class="line"><a id="l03028" name="l03028"></a><span class="lineno"> 3028</span>                <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> == 0 ) {</div>
<div class="line"><a id="l03029" name="l03029"></a><span class="lineno"> 3029</span>                    menu.<a class="code hl_variable" href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">selected</a> = menu.<a class="code hl_variable" href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">entries</a>.size() - 1;</div>
<div class="line"><a id="l03030" name="l03030"></a><span class="lineno"> 3030</span>                }</div>
<div class="line"><a id="l03031" name="l03031"></a><span class="lineno"> 3031</span>            }</div>
<div class="line"><a id="l03032" name="l03032"></a><span class="lineno"> 3032</span>        }</div>
<div class="line"><a id="l03033" name="l03033"></a><span class="lineno"> 3033</span>    }</div>
<div class="line"><a id="l03034" name="l03034"></a><span class="lineno"> 3034</span> </div>
<div class="line"><a id="l03035" name="l03035"></a><span class="lineno"> 3035</span>    menu.<a class="code hl_function" href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">query</a>();</div>
<div class="line"><a id="l03036" name="l03036"></a><span class="lineno"> 3036</span>    <span class="keywordflow">if</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &gt;= 0 &amp;&amp; menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> &lt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( on_select.size() ) ) {</div>
<div class="line"><a id="l03037" name="l03037"></a><span class="lineno"> 3037</span>        <span class="keywordtype">size_t</span> i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( menu.<a class="code hl_variable" href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">ret</a> );</div>
<div class="line"><a id="l03038" name="l03038"></a><span class="lineno"> 3038</span>        on_select[i]();</div>
<div class="line"><a id="l03039" name="l03039"></a><span class="lineno"> 3039</span>    } <span class="comment">// else - just refresh</span></div>
<div class="line"><a id="l03040" name="l03040"></a><span class="lineno"> 3040</span> </div>
<div class="line"><a id="l03041" name="l03041"></a><span class="lineno"> 3041</span>    <a class="code hl_function" href="classtarget__ui.html#a92256c0cb72fe5b2520a5808a5fcb79a">ensure_ranged_gun_mode</a>();</div>
<div class="line"><a id="l03042" name="l03042"></a><span class="lineno"> 3042</span>    <a class="code hl_function" href="classtarget__ui.html#a77429c16aec83b5c81d3a1c259259cd5">update_ammo_range_from_gun_mode</a>();</div>
<div class="line"><a id="l03043" name="l03043"></a><span class="lineno"> 3043</span>    <a class="code hl_function" href="classtarget__ui.html#aaf459ec49ad96c44eddeb94d0c22fb36">on_range_ammo_changed</a>();</div>
<div class="line"><a id="l03044" name="l03044"></a><span class="lineno"> 3044</span>}</div>
<div class="ttc" id="acalendar_8cpp_html_aeb989652ea2bf7fd03b07a74fd30bd7a"><div class="ttname"><a href="calendar_8cpp.html#aeb989652ea2bf7fd03b07a74fd30bd7a">to_string</a></div><div class="ttdeci">std::string to_string(const time_duration &amp;d)</div><div class="ttdoc">Returns a string showing a duration.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00327">calendar.cpp:327</a></div></div>
<div class="ttc" id="aclassavatar_html_a98553758b9d158c58dd11c77d97ff55e"><div class="ttname"><a href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">avatar::preferred_aiming_mode</a></div><div class="ttdeci">std::string preferred_aiming_mode</div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00191">avatar.h:191</a></div></div>
<div class="ttc" id="aclassitem_html_a3b83c2e0d1313b542801169382be1605"><div class="ttname"><a href="classitem.html#a3b83c2e0d1313b542801169382be1605">item::gun_get_mode_id</a></div><div class="ttdeci">gun_mode_id gun_get_mode_id() const</div><div class="ttdoc">Get id of mode a gun is currently set to, e.g.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07797">item.cpp:7797</a></div></div>
<div class="ttc" id="aclassitem_html_aa1a2ecb3e9ebf95dc7fedac4c1de32b4"><div class="ttname"><a href="classitem.html#aa1a2ecb3e9ebf95dc7fedac4c1de32b4">item::gun_all_modes</a></div><div class="ttdeci">std::map&lt; gun_mode_id, gun_mode &gt; gun_all_modes() const</div><div class="ttdoc">Get all possible modes for this gun inclusive of any attached gunmods.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07733">item.cpp:7733</a></div></div>
<div class="ttc" id="aclassitem_html_afcc181d2e2fe380ac28dd70f814798c2"><div class="ttname"><a href="classitem.html#afcc181d2e2fe380ac28dd70f814798c2">item::gun_set_mode</a></div><div class="ttdeci">bool gun_set_mode(const gun_mode_id &amp;mode)</div><div class="ttdoc">Try to set the mode for a gun, returning false if no such mode is possible.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07805">item.cpp:7805</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a77429c16aec83b5c81d3a1c259259cd5"><div class="ttname"><a href="classtarget__ui.html#a77429c16aec83b5c81d3a1c259259cd5">target_ui::update_ammo_range_from_gun_mode</a></div><div class="ttdeci">void update_ammo_range_from_gun_mode()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03053">ranged.cpp:3053</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a92256c0cb72fe5b2520a5808a5fcb79a"><div class="ttname"><a href="classtarget__ui.html#a92256c0cb72fe5b2520a5808a5fcb79a">target_ui::ensure_ranged_gun_mode</a></div><div class="ttdeci">void ensure_ranged_gun_mode()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03046">ranged.cpp:3046</a></div></div>
<div class="ttc" id="aclassuilist_html"><div class="ttname"><a href="classuilist.html">uilist</a></div><div class="ttdoc">uilist: scrolling vertical list menu</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00186">ui.h:187</a></div></div>
<div class="ttc" id="aclassuilist_html_a0baa34622db6972a59d47d478bfd21d6"><div class="ttname"><a href="classuilist.html#a0baa34622db6972a59d47d478bfd21d6">uilist::ret</a></div><div class="ttdeci">int ret</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00412">ui.h:412</a></div></div>
<div class="ttc" id="aclassuilist_html_a5ed3c6e3829c033040fa9f11f1a7d0aa"><div class="ttname"><a href="classuilist.html#a5ed3c6e3829c033040fa9f11f1a7d0aa">uilist::settext</a></div><div class="ttdeci">void settext(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00968">ui.cpp:968</a></div></div>
<div class="ttc" id="aclassuilist_html_ab0890d56d6d29dd98a0b3f17bb3ebba3"><div class="ttname"><a href="classuilist.html#ab0890d56d6d29dd98a0b3f17bb3ebba3">uilist::selected</a></div><div class="ttdeci">int selected</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00415">ui.h:415</a></div></div>
<div class="ttc" id="aclassuilist_html_af5fc2972d43a795c49a632dbcf58132b"><div class="ttname"><a href="classuilist.html#af5fc2972d43a795c49a632dbcf58132b">uilist::entries</a></div><div class="ttdeci">std::vector&lt; uilist_entry &gt; entries</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00323">ui.h:323</a></div></div>
<div class="ttc" id="aclassuilist_html_af99f28334902af64487e2d0758df2ab9"><div class="ttname"><a href="classuilist.html#af99f28334902af64487e2d0758df2ab9">uilist::addentry</a></div><div class="ttdeci">void addentry(const std::string &amp;str)</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00942">ui.cpp:942</a></div></div>
<div class="ttc" id="acolor_8h_html_a2236aa1fe66b707a104f19ad45c23230"><div class="ttname"><a href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a></div><div class="ttdeci">#define c_light_green</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00028">color.h:28</a></div></div>
<div class="ttc" id="acolor_8h_html_a95b67111e2e4be7fcac981d2b7b208f6"><div class="ttname"><a href="color_8h.html#a95b67111e2e4be7fcac981d2b7b208f6">c_cyan</a></div><div class="ttdeci">#define c_cyan</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00024">color.h:24</a></div></div>
<div class="ttc" id="agroup__UI_html_ga7604af7545244003f0a52ac87ce37979"><div class="ttname"><a href="group__UI.html#ga7604af7545244003f0a52ac87ce37979">uilist::query</a></div><div class="ttdeci">void query(bool loop=true, int timeout=-1)</div><div class="ttdoc">Handle input and update display.</div><div class="ttdef"><b>Definition:</b> <a href="ui_8cpp_source.html#l00838">ui.cpp:838</a></div></div>
<div class="ttc" id="anamespaceom__direction_html_a8ba958ccfad28c0a5572a04dd1428f32"><div class="ttname"><a href="namespaceom__direction.html#a8ba958ccfad28c0a5572a04dd1428f32">om_direction::name</a></div><div class="ttdeci">std::string name(type dir)</div><div class="ttdoc">Get Human readable name of a direction.</div><div class="ttdef"><b>Definition:</b> <a href="overmap_8cpp_source.html#l04127">overmap.cpp:4127</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="aui_8h_html_a06d5f3667ed71fa40939c4e7367e30ce"><div class="ttname"><a href="ui_8h.html#a06d5f3667ed71fa40939c4e7367e30ce">MENU_AUTOASSIGN</a></div><div class="ttdeci">const int MENU_AUTOASSIGN</div><div class="ttdef"><b>Definition:</b> <a href="ui_8h_source.html#l00031">ui.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ui_8cpp_source.html#l00942">uilist::addentry()</a>, <a class="el" href="ranged_8cpp_source.html#l00273">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00271">aim_types</a>, <a class="el" href="color_8h_source.html#l00024">c_cyan</a>, <a class="el" href="color_8h_source.html#l00028">c_light_green</a>, <a class="el" href="ranged_8cpp_source.html#l03046">ensure_ranged_gun_mode()</a>, <a class="el" href="ui_8h_source.html#l00323">uilist::entries</a>, <a class="el" href="item_8cpp_source.html#l07733">item::gun_all_modes()</a>, <a class="el" href="item_8cpp_source.html#l07797">item::gun_get_mode_id()</a>, <a class="el" href="item_8cpp_source.html#l07805">item::gun_set_mode()</a>, <a class="el" href="ui_8h_source.html#l00031">MENU_AUTOASSIGN</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l02670">on_range_ammo_changed()</a>, <a class="el" href="avatar_8h_source.html#l00191">avatar::preferred_aiming_mode</a>, <a class="el" href="ui_8cpp_source.html#l00838">uilist::query()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ui_8h_source.html#l00412">uilist::ret</a>, <a class="el" href="ui_8h_source.html#l00415">uilist::selected</a>, <a class="el" href="ui_8cpp_source.html#l00968">uilist::settext()</a>, <a class="el" href="calendar_8cpp_source.html#l00327">to_string()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a40bd320b465d966959268698b54a0d98" name="a40bd320b465d966959268698b54a0d98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40bd320b465d966959268698b54a0d98">&#9670;&nbsp;</a></span>apply_aim_turning_penalty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::apply_aim_turning_penalty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02970">2970</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02971" name="l02971"></a><span class="lineno"> 2971</span>{</div>
<div class="line"><a id="l02972" name="l02972"></a><span class="lineno"> 2972</span>    <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a>;</div>
<div class="line"><a id="l02973" name="l02973"></a><span class="lineno"> 2973</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_ac0a5aad7e60b30082e7ec2ff97f8f6d4"><div class="ttname"><a href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">target_ui::predicted_recoil</a></div><div class="ttdeci">double predicted_recoil</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00279">ranged.cpp:279</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00279">predicted_recoil</a>, <a class="el" href="character_8h_source.html#l00555">Character::recoil</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>.</p>

</div>
</div>
<a id="a1591b490e9f8d48547b108ae481f982e" name="a1591b490e9f8d48547b108ae481f982e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1591b490e9f8d48547b108ae481f982e">&#9670;&nbsp;</a></span>choose_initial_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::choose_initial_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02696">2696</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02697" name="l02697"></a><span class="lineno"> 2697</span>{</div>
<div class="line"><a id="l02698" name="l02698"></a><span class="lineno"> 2698</span>    <span class="comment">// Try previously targeted creature</span></div>
<div class="line"><a id="l02699" name="l02699"></a><span class="lineno"> 2699</span>    <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> cr = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a>.lock();</div>
<div class="line"><a id="l02700" name="l02700"></a><span class="lineno"> 2700</span>    <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code hl_function" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) &amp;&amp; <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( cr-&gt;pos() ) &lt;= <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02701" name="l02701"></a><span class="lineno"> 2701</span>        <span class="keywordflow">return</span> cr-&gt;pos();</div>
<div class="line"><a id="l02702" name="l02702"></a><span class="lineno"> 2702</span>    }</div>
<div class="line"><a id="l02703" name="l02703"></a><span class="lineno"> 2703</span> </div>
<div class="line"><a id="l02704" name="l02704"></a><span class="lineno"> 2704</span>    <span class="comment">// Try closest creature</span></div>
<div class="line"><a id="l02705" name="l02705"></a><span class="lineno"> 2705</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.empty() ) {</div>
<div class="line"><a id="l02706" name="l02706"></a><span class="lineno"> 2706</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>[0]-&gt;pos();</div>
<div class="line"><a id="l02707" name="l02707"></a><span class="lineno"> 2707</span>    }</div>
<div class="line"><a id="l02708" name="l02708"></a><span class="lineno"> 2708</span> </div>
<div class="line"><a id="l02709" name="l02709"></a><span class="lineno"> 2709</span>    <span class="comment">// Try closest practice target</span></div>
<div class="line"><a id="l02710" name="l02710"></a><span class="lineno"> 2710</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02711" name="l02711"></a><span class="lineno"> 2711</span>    <span class="keyword">const</span> std::vector&lt;tripoint&gt; nearby = <a class="code hl_function" href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a id="l02712" name="l02712"></a><span class="lineno"> 2712</span>    <span class="keyword">const</span> <span class="keyword">auto</span> target_spot = std::find_if( nearby.begin(), nearby.end(),</div>
<div class="line"><a id="l02713" name="l02713"></a><span class="lineno"> 2713</span>    [<span class="keyword">this</span>, &amp;here]( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; pt ) {</div>
<div class="line"><a id="l02714" name="l02714"></a><span class="lineno"> 2714</span>        return here.tr_at( pt ).id == tr_practice_target &amp;&amp; this-&gt;you-&gt;sees( pt );</div>
<div class="line"><a id="l02715" name="l02715"></a><span class="lineno"> 2715</span>    } );</div>
<div class="line"><a id="l02716" name="l02716"></a><span class="lineno"> 2716</span>    <span class="keywordflow">if</span>( target_spot != nearby.end() ) {</div>
<div class="line"><a id="l02717" name="l02717"></a><span class="lineno"> 2717</span>        <span class="keywordflow">return</span> *target_spot;</div>
<div class="line"><a id="l02718" name="l02718"></a><span class="lineno"> 2718</span>    }</div>
<div class="line"><a id="l02719" name="l02719"></a><span class="lineno"> 2719</span> </div>
<div class="line"><a id="l02720" name="l02720"></a><span class="lineno"> 2720</span>    <span class="comment">// We&#39;ve got nothing.</span></div>
<div class="line"><a id="l02721" name="l02721"></a><span class="lineno"> 2721</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a id="l02722" name="l02722"></a><span class="lineno"> 2722</span>}</div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00383">map.h:384</a></div></div>
<div class="ttc" id="aclassplayer_html_ab679d40f5584e38a6af33bcd7e3c102d"><div class="ttname"><a href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">player::last_target</a></div><div class="ttdeci">weak_ptr_fast&lt; Creature &gt; last_target</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00373">player.h:373</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a281f9ea6ae900ff7991e457f1d34b8f6"><div class="ttname"><a href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">target_ui::targets</a></div><div class="ttdeci">std::vector&lt; Creature * &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00244">ranged.cpp:244</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ab236848678058afb7605e6d82a5c8fa9"><div class="ttname"><a href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">target_ui::dist_fn</a></div><div class="ttdeci">int dist_fn(const tripoint &amp;p)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02781">ranged.cpp:2781</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_afe4c97cc5abb0ce402bd9e89411e1778"><div class="ttname"><a href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">target_ui::src</a></div><div class="ttdeci">tripoint src</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00236">ranged.cpp:236</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a13a12943d34d5f17e6c3b4e730659fc6"><div class="ttname"><a href="coordinates_8h.html#a13a12943d34d5f17e6c3b4e730659fc6">closest_points_first</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; closest_points_first(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc, int min_dist, int max_dist)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00596">coordinates.h:596</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00146">map.cpp:146</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ada897699f31fc8b37c5af09d95d45840"><div class="ttname"><a href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00016">memory_fast.h:16</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a7c4d782d03c3f30e5b3332260ded8951"><div class="ttname"><a href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a></div><div class="ttdeci">static bool pl_sees(const Creature &amp;cr)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01525">ranged.cpp:1525</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="coordinates_8h_source.html#l00596">closest_points_first()</a>, <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="player_8h_source.html#l00373">player::last_target</a>, <a class="el" href="ranged_8cpp_source.html#l01525">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00244">targets</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a97d244cde8cae12d0266daf6fc083014" name="a97d244cde8cae12d0266daf6fc083014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97d244cde8cae12d0266daf6fc083014">&#9670;&nbsp;</a></span>confirm_non_enemy_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::confirm_non_enemy_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02796">2796</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02797" name="l02797"></a><span class="lineno"> 2797</span>{</div>
<div class="line"><a id="l02798" name="l02798"></a><span class="lineno"> 2798</span>    <a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">const</span> who = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a id="l02799" name="l02799"></a><span class="lineno"> 2799</span>    <span class="keywordflow">if</span>( who &amp;&amp; !who-&gt;<a class="code hl_function" href="classnpc.html#adc0b90f197e58b09eb6eb92132d432f0">guaranteed_hostile</a>() ) {</div>
<div class="line"><a id="l02800" name="l02800"></a><span class="lineno"> 2800</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Really attack %s?&quot;</span> ), who-&gt;<a class="code hl_variable" href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">name</a>.c_str() );</div>
<div class="line"><a id="l02801" name="l02801"></a><span class="lineno"> 2801</span>    }</div>
<div class="line"><a id="l02802" name="l02802"></a><span class="lineno"> 2802</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02803" name="l02803"></a><span class="lineno"> 2803</span>}</div>
<div class="ttc" id="aclassCharacter_html_a6592c35167738421f3e04ca8808d37db"><div class="ttname"><a href="classCharacter.html#a6592c35167738421f3e04ca8808d37db">Character::name</a></div><div class="ttdeci">std::string name</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01498">character.h:1498</a></div></div>
<div class="ttc" id="aclassnpc_html"><div class="ttname"><a href="classnpc.html">npc</a></div><div class="ttdef"><b>Definition:</b> <a href="npc_8h_source.html#l00780">npc.h:781</a></div></div>
<div class="ttc" id="aclassnpc_html_adc0b90f197e58b09eb6eb92132d432f0"><div class="ttname"><a href="classnpc.html#adc0b90f197e58b09eb6eb92132d432f0">npc::guaranteed_hostile</a></div><div class="ttdeci">bool guaranteed_hostile() const</div><div class="ttdoc">Is enemy or will turn into one (can't be convinced not to attack).</div><div class="ttdef"><b>Definition:</b> <a href="npc_8cpp_source.html#l02016">npc.cpp:2016</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a362df365f84b306e2ff14edf099a1000"><div class="ttname"><a href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">target_ui::dst_critter</a></div><div class="ttdeci">Creature * dst_critter</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00242">ranged.cpp:242</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab62599a77867b8f416669b92f60f4900"><div class="ttname"><a href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a></div><div class="ttdeci">bool query_yn(const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00698">output.cpp:698</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="npc_8cpp_source.html#l02016">npc::guaranteed_hostile()</a>, <a class="el" href="character_8h_source.html#l01498">Character::name</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="af007dd5fcc266ee10d673299ca90c29c" name="af007dd5fcc266ee10d673299ca90c29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af007dd5fcc266ee10d673299ca90c29c">&#9670;&nbsp;</a></span>cycle_targets()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::cycle_targets </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02878">2878</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02879" name="l02879"></a><span class="lineno"> 2879</span>{</div>
<div class="line"><a id="l02880" name="l02880"></a><span class="lineno"> 2880</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.empty() ) {</div>
<div class="line"><a id="l02881" name="l02881"></a><span class="lineno"> 2881</span>        <span class="comment">// Nothing to cycle</span></div>
<div class="line"><a id="l02882" name="l02882"></a><span class="lineno"> 2882</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02883" name="l02883"></a><span class="lineno"> 2883</span>    }</div>
<div class="line"><a id="l02884" name="l02884"></a><span class="lineno"> 2884</span> </div>
<div class="line"><a id="l02885" name="l02885"></a><span class="lineno"> 2885</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a id="l02886" name="l02886"></a><span class="lineno"> 2886</span>        <span class="keyword">auto</span> t = <a class="code hl_function" href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">std::find</a>( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end(), <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a id="l02887" name="l02887"></a><span class="lineno"> 2887</span>        <span class="keywordtype">size_t</span> new_target = 0;</div>
<div class="line"><a id="l02888" name="l02888"></a><span class="lineno"> 2888</span>        <span class="keywordflow">if</span>( t != <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end() ) {</div>
<div class="line"><a id="l02889" name="l02889"></a><span class="lineno"> 2889</span>            <span class="keywordtype">size_t</span> idx = std::distance( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), t );</div>
<div class="line"><a id="l02890" name="l02890"></a><span class="lineno"> 2890</span>            new_target = ( idx + <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size() + <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> ) % <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size();</div>
<div class="line"><a id="l02891" name="l02891"></a><span class="lineno"> 2891</span>            <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>[new_target]-&gt;pos() );</div>
<div class="line"><a id="l02892" name="l02892"></a><span class="lineno"> 2892</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02893" name="l02893"></a><span class="lineno"> 2893</span>        }</div>
<div class="line"><a id="l02894" name="l02894"></a><span class="lineno"> 2894</span>    }</div>
<div class="line"><a id="l02895" name="l02895"></a><span class="lineno"> 2895</span> </div>
<div class="line"><a id="l02896" name="l02896"></a><span class="lineno"> 2896</span>    <span class="comment">// There is either no creature under the cursor or the player can&#39;t see it.</span></div>
<div class="line"><a id="l02897" name="l02897"></a><span class="lineno"> 2897</span>    <span class="comment">// Use the closest/farthest target in this case</span></div>
<div class="line"><a id="l02898" name="l02898"></a><span class="lineno"> 2898</span>    <span class="keywordflow">if</span>( <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> == 1 ) {</div>
<div class="line"><a id="l02899" name="l02899"></a><span class="lineno"> 2899</span>        <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.front()-&gt;pos() );</div>
<div class="line"><a id="l02900" name="l02900"></a><span class="lineno"> 2900</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02901" name="l02901"></a><span class="lineno"> 2901</span>        <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.back()-&gt;pos() );</div>
<div class="line"><a id="l02902" name="l02902"></a><span class="lineno"> 2902</span>    }</div>
<div class="line"><a id="l02903" name="l02903"></a><span class="lineno"> 2903</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_a3ead422f4a78394c13bc3f4c6c953f42"><div class="ttname"><a href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">target_ui::set_cursor_pos</a></div><div class="ttdeci">bool set_cursor_pos(const tripoint &amp;new_pos)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02538">ranged.cpp:2538</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="anamespacedetail_html_ad06b74f7502b63cbab323bba1ca3f72b"><div class="ttname"><a href="namespacedetail.html#ad06b74f7502b63cbab323bba1ca3f72b">detail::find</a></div><div class="ttdeci">FMT_CONSTEXPR bool find(Ptr first, Ptr last, T value, Ptr &amp;out)</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__format_8h_source.html#l03355">fmtlib_format.h:3355</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="fmtlib__format_8h_source.html#l03355">detail::find()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l00244">targets</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>.</p>

</div>
</div>
<a id="ab236848678058afb7605e6d82a5c8fa9" name="ab236848678058afb7605e6d82a5c8fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab236848678058afb7605e6d82a5c8fa9">&#9670;&nbsp;</a></span>dist_fn()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::dist_fn </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02781">2781</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02782" name="l02782"></a><span class="lineno"> 2782</span>{</div>
<div class="line"><a id="l02783" name="l02783"></a><span class="lineno"> 2783</span>    <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( std::round( <a class="code hl_function" href="line_8cpp.html#a2d906c9af0b0586f48bc34cff0838817">rl_dist_exact</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, p ) ) );</div>
<div class="line"><a id="l02784" name="l02784"></a><span class="lineno"> 2784</span>}</div>
<div class="ttc" id="aline_8cpp_html_a2d906c9af0b0586f48bc34cff0838817"><div class="ttname"><a href="line_8cpp.html#a2d906c9af0b0586f48bc34cff0838817">rl_dist_exact</a></div><div class="ttdeci">float rl_dist_exact(const tripoint &amp;loc1, const tripoint &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00292">line.cpp:292</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="line_8cpp_source.html#l00292">rl_dist_exact()</a>, and <a class="el" href="ranged_8cpp_source.html#l00236">src</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02724">try_reacquire_target()</a>, and <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>.</p>

</div>
</div>
<a id="a7d5114b61c688d3810c108986ddc8bf7" name="a7d5114b61c688d3810c108986ddc8bf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d5114b61c688d3810c108986ddc8bf7">&#9670;&nbsp;</a></span>draw_controls_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_controls_list </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03330">3330</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03331" name="l03331"></a><span class="lineno"> 3331</span>{</div>
<div class="line"><a id="l03332" name="l03332"></a><span class="lineno"> 3332</span>    <span class="comment">// Change UI colors for visual feedback</span></div>
<div class="line"><a id="l03333" name="l03333"></a><span class="lineno"> 3333</span>    <span class="comment">// TODO: Colorize keys inside brackets to be consistent with other UI windows</span></div>
<div class="line"><a id="l03334" name="l03334"></a><span class="lineno"> 3334</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col_enabled = <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a id="l03335" name="l03335"></a><span class="lineno"> 3335</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col_disabled = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03336" name="l03336"></a><span class="lineno"> 3336</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col_move = ( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> ? col_enabled : col_disabled );</div>
<div class="line"><a id="l03337" name="l03337"></a><span class="lineno"> 3337</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col_fire = ( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ? col_enabled : col_disabled );</div>
<div class="line"><a id="l03338" name="l03338"></a><span class="lineno"> 3338</span> </div>
<div class="line"><a id="l03339" name="l03339"></a><span class="lineno"> 3339</span>    <span class="comment">// Get first key bound to given action OR &#39; &#39; if there are none.</span></div>
<div class="line"><a id="l03340" name="l03340"></a><span class="lineno"> 3340</span>    <span class="keyword">const</span> <span class="keyword">auto</span> bound_key = [<span class="keyword">this</span>]( <span class="keyword">const</span> std::string &amp; s ) {</div>
<div class="line"><a id="l03341" name="l03341"></a><span class="lineno"> 3341</span>        <span class="keyword">const</span> std::vector&lt;char&gt; keys = this-&gt;<a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#af2b7d6cab67d5a2eeb1122f3041edf79">keys_bound_to</a>( s );</div>
<div class="line"><a id="l03342" name="l03342"></a><span class="lineno"> 3342</span>        <span class="keywordflow">return</span> keys.empty() ? <span class="charliteral">&#39; &#39;</span> : keys.front();</div>
<div class="line"><a id="l03343" name="l03343"></a><span class="lineno"> 3343</span>    };</div>
<div class="line"><a id="l03344" name="l03344"></a><span class="lineno"> 3344</span>    <span class="keyword">const</span> <span class="keyword">auto</span> colored = [col_enabled]( <a class="code hl_class" href="classnc__color.html">nc_color</a> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>, <span class="keyword">const</span> std::string &amp; s ) {</div>
<div class="line"><a id="l03345" name="l03345"></a><span class="lineno"> 3345</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> == col_enabled ) {</div>
<div class="line"><a id="l03346" name="l03346"></a><span class="lineno"> 3346</span>            <span class="comment">// col_enabled is the default one when printing</span></div>
<div class="line"><a id="l03347" name="l03347"></a><span class="lineno"> 3347</span>            <span class="keywordflow">return</span> s;</div>
<div class="line"><a id="l03348" name="l03348"></a><span class="lineno"> 3348</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03349" name="l03349"></a><span class="lineno"> 3349</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( s, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> );</div>
<div class="line"><a id="l03350" name="l03350"></a><span class="lineno"> 3350</span>        }</div>
<div class="line"><a id="l03351" name="l03351"></a><span class="lineno"> 3351</span>    };</div>
<div class="line"><a id="l03352" name="l03352"></a><span class="lineno"> 3352</span> </div>
<div class="line"><a id="l03353" name="l03353"></a><span class="lineno"> 3353</span>    <span class="keyword">struct </span><a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> {</div>
<div class="line"><a id="l03354" name="l03354"></a><span class="lineno"> 3354</span>        <span class="keywordtype">size_t</span> <a class="code hl_enumvalue" href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7">order</a>; <span class="comment">// Lines with highest &#39;order&#39; are removed first</span></div>
<div class="line"><a id="l03355" name="l03355"></a><span class="lineno"> 3355</span>        std::string str;</div>
<div class="line"><a id="l03356" name="l03356"></a><span class="lineno"> 3356</span>    };</div>
<div class="line"><a id="l03357" name="l03357"></a><span class="lineno"> 3357</span>    std::vector&lt;line&gt; lines;</div>
<div class="line"><a id="l03358" name="l03358"></a><span class="lineno"> 3358</span> </div>
<div class="line"><a id="l03359" name="l03359"></a><span class="lineno"> 3359</span>    <span class="comment">// Compile full list</span></div>
<div class="line"><a id="l03360" name="l03360"></a><span class="lineno"> 3360</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a id="l03361" name="l03361"></a><span class="lineno"> 3361</span>        lines.push_back( { 8, colored( col_move, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Shift view with directional keys&quot;</span> ) ) } );</div>
<div class="line"><a id="l03362" name="l03362"></a><span class="lineno"> 3362</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03363" name="l03363"></a><span class="lineno"> 3363</span>        lines.push_back( { 8, colored( col_move, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Move cursor with directional keys&quot;</span> ) ) } );</div>
<div class="line"><a id="l03364" name="l03364"></a><span class="lineno"> 3364</span>    }</div>
<div class="line"><a id="l03365" name="l03365"></a><span class="lineno"> 3365</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="input_8cpp.html#aceedd903724817bad81fbc03216ff125">is_mouse_enabled</a>() ) {</div>
<div class="line"><a id="l03366" name="l03366"></a><span class="lineno"> 3366</span>        std::string <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Mouse: LMB: Target, Wheel: Cycle,&quot;</span> );</div>
<div class="line"><a id="l03367" name="l03367"></a><span class="lineno"> 3367</span>        std::string <a class="code hl_function" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;RMB: Fire&quot;</span> );</div>
<div class="line"><a id="l03368" name="l03368"></a><span class="lineno"> 3368</span>        lines.push_back( { 7, colored( col_move, <a class="code hl_function" href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">move</a> ) + <span class="stringliteral">&quot; &quot;</span> + colored( col_fire, <a class="code hl_function" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> ) } );</div>
<div class="line"><a id="l03369" name="l03369"></a><span class="lineno"> 3369</span>    }</div>
<div class="line"><a id="l03370" name="l03370"></a><span class="lineno"> 3370</span>    {</div>
<div class="line"><a id="l03371" name="l03371"></a><span class="lineno"> 3371</span>        std::string cycle = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%s] Cycle targets;&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;NEXT_TARGET&quot;</span>, 1 ) );</div>
<div class="line"><a id="l03372" name="l03372"></a><span class="lineno"> 3372</span>        std::string <a class="code hl_function" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] %s.&quot;</span> ), bound_key( <span class="stringliteral">&quot;FIRE&quot;</span> ), <a class="code hl_function" href="classtarget__ui.html#a2c23b4913b52b2a5f80357f34d92700c">uitext_fire</a>() );</div>
<div class="line"><a id="l03373" name="l03373"></a><span class="lineno"> 3373</span>        lines.push_back( { 0, colored( col_move, cycle ) + <span class="stringliteral">&quot; &quot;</span> + colored( col_fire, <a class="code hl_function" href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a> ) } );</div>
<div class="line"><a id="l03374" name="l03374"></a><span class="lineno"> 3374</span>    }</div>
<div class="line"><a id="l03375" name="l03375"></a><span class="lineno"> 3375</span>    {</div>
<div class="line"><a id="l03376" name="l03376"></a><span class="lineno"> 3376</span>        std::string text = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] target self; [%c] toggle snap-to-target&quot;</span> ),</div>
<div class="line"><a id="l03377" name="l03377"></a><span class="lineno"> 3377</span>                                          bound_key( <span class="stringliteral">&quot;CENTER&quot;</span> ), bound_key( <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> ) );</div>
<div class="line"><a id="l03378" name="l03378"></a><span class="lineno"> 3378</span>        lines.push_back( { 3, colored( col_enabled, text ) } );</div>
<div class="line"><a id="l03379" name="l03379"></a><span class="lineno"> 3379</span>    }</div>
<div class="line"><a id="l03380" name="l03380"></a><span class="lineno"> 3380</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l03381" name="l03381"></a><span class="lineno"> 3381</span>        std::string aim_and_fire;</div>
<div class="line"><a id="l03382" name="l03382"></a><span class="lineno"> 3382</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a> ) {</div>
<div class="line"><a id="l03383" name="l03383"></a><span class="lineno"> 3383</span>            <span class="keywordflow">if</span>( e.has_threshold ) {</div>
<div class="line"><a id="l03384" name="l03384"></a><span class="lineno"> 3384</span>                aim_and_fire += <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;[%c] &quot;</span>, bound_key( e.action ) );</div>
<div class="line"><a id="l03385" name="l03385"></a><span class="lineno"> 3385</span>            }</div>
<div class="line"><a id="l03386" name="l03386"></a><span class="lineno"> 3386</span>        }</div>
<div class="line"><a id="l03387" name="l03387"></a><span class="lineno"> 3387</span>        aim_and_fire += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;to aim and fire.&quot;</span> );</div>
<div class="line"><a id="l03388" name="l03388"></a><span class="lineno"> 3388</span> </div>
<div class="line"><a id="l03389" name="l03389"></a><span class="lineno"> 3389</span>        std::string aim = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] to steady your aim.  (10 moves)&quot;</span> ),</div>
<div class="line"><a id="l03390" name="l03390"></a><span class="lineno"> 3390</span>                                         bound_key( <span class="stringliteral">&quot;AIM&quot;</span> ) );</div>
<div class="line"><a id="l03391" name="l03391"></a><span class="lineno"> 3391</span> </div>
<div class="line"><a id="l03392" name="l03392"></a><span class="lineno"> 3392</span>        lines.push_back( { 2, colored( col_fire, aim ) } );</div>
<div class="line"><a id="l03393" name="l03393"></a><span class="lineno"> 3393</span>        lines.push_back( { 4, colored( col_fire, aim_and_fire ) } );</div>
<div class="line"><a id="l03394" name="l03394"></a><span class="lineno"> 3394</span>    }</div>
<div class="line"><a id="l03395" name="l03395"></a><span class="lineno"> 3395</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l03396" name="l03396"></a><span class="lineno"> 3396</span>        lines.push_back( { 5, colored( col_enabled, <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] to switch firing modes.&quot;</span> ),</div>
<div class="line"><a id="l03397" name="l03397"></a><span class="lineno"> 3397</span>                                       bound_key( <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> ) ) ) } );</div>
<div class="line"><a id="l03398" name="l03398"></a><span class="lineno"> 3398</span>        lines.push_back( { 6, colored( col_enabled, <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] to switch ammo.&quot;</span> ),</div>
<div class="line"><a id="l03399" name="l03399"></a><span class="lineno"> 3399</span>                                       bound_key( <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> ) ) ) } );</div>
<div class="line"><a id="l03400" name="l03400"></a><span class="lineno"> 3400</span>    }</div>
<div class="line"><a id="l03401" name="l03401"></a><span class="lineno"> 3401</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l03402" name="l03402"></a><span class="lineno"> 3402</span>        <span class="keyword">const</span> std::string <a class="code hl_struct" href="structlabel.html">label</a> = <a class="code hl_variable" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a></div>
<div class="line"><a id="l03403" name="l03403"></a><span class="lineno"> 3403</span>                                  ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] Hide lines of fire&quot;</span> )</div>
<div class="line"><a id="l03404" name="l03404"></a><span class="lineno"> 3404</span>                                  : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%c] Show lines of fire&quot;</span> );</div>
<div class="line"><a id="l03405" name="l03405"></a><span class="lineno"> 3405</span>        lines.push_back( { 1, colored( col_enabled, <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_struct" href="structlabel.html">label</a>, bound_key( <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> ) ) ) } );</div>
<div class="line"><a id="l03406" name="l03406"></a><span class="lineno"> 3406</span>    }</div>
<div class="line"><a id="l03407" name="l03407"></a><span class="lineno"> 3407</span> </div>
<div class="line"><a id="l03408" name="l03408"></a><span class="lineno"> 3408</span>    <span class="comment">// Shrink the list until it fits</span></div>
<div class="line"><a id="l03409" name="l03409"></a><span class="lineno"> 3409</span>    <span class="keywordtype">int</span> height = <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03410" name="l03410"></a><span class="lineno"> 3410</span>    <span class="keywordtype">int</span> available_lines = height - text_y - 1; <span class="comment">// 1 for bottom border</span></div>
<div class="line"><a id="l03411" name="l03411"></a><span class="lineno"> 3411</span>    <span class="keywordflow">if</span>( available_lines &lt;= 0 ) {</div>
<div class="line"><a id="l03412" name="l03412"></a><span class="lineno"> 3412</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l03413" name="l03413"></a><span class="lineno"> 3413</span>    }</div>
<div class="line"><a id="l03414" name="l03414"></a><span class="lineno"> 3414</span>    <span class="keywordflow">while</span>( lines.size() &gt; <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>( available_lines ) ) {</div>
<div class="line"><a id="l03415" name="l03415"></a><span class="lineno"> 3415</span>        lines.erase( std::max_element( lines.begin(), lines.end(), []( <span class="keyword">const</span> <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> &amp; l1, <span class="keyword">const</span> <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> &amp; l2 ) {</div>
<div class="line"><a id="l03416" name="l03416"></a><span class="lineno"> 3416</span>            return l1.order &lt; l2.order;</div>
<div class="line"><a id="l03417" name="l03417"></a><span class="lineno"> 3417</span>        } ) );</div>
<div class="line"><a id="l03418" name="l03418"></a><span class="lineno"> 3418</span>    }</div>
<div class="line"><a id="l03419" name="l03419"></a><span class="lineno"> 3419</span> </div>
<div class="line"><a id="l03420" name="l03420"></a><span class="lineno"> 3420</span>    text_y = height - lines.size() - 1;</div>
<div class="line"><a id="l03421" name="l03421"></a><span class="lineno"> 3421</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_function" href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a> &amp;l : lines ) {</div>
<div class="line"><a id="l03422" name="l03422"></a><span class="lineno"> 3422</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> col = col_enabled;</div>
<div class="line"><a id="l03423" name="l03423"></a><span class="lineno"> 3423</span>        <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), col, col, l.str );</div>
<div class="line"><a id="l03424" name="l03424"></a><span class="lineno"> 3424</span>    }</div>
<div class="line"><a id="l03425" name="l03425"></a><span class="lineno"> 3425</span>}</div>
<div class="ttc" id="aclassinput__context_html_abe76d2c284f2a277cbd2f367963fa9ab"><div class="ttname"><a href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">input_context::get_desc</a></div><div class="ttdeci">std::string get_desc(const std::string &amp;action_descriptor, unsigned int max_limit=0, const input_event_filter &amp;evt_filter=allow_all_keys) const</div><div class="ttdoc">Get a description text for the key/other input method associated with the given action.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00756">input.cpp:756</a></div></div>
<div class="ttc" id="aclassinput__context_html_af2b7d6cab67d5a2eeb1122f3041edf79"><div class="ttname"><a href="classinput__context.html#af2b7d6cab67d5a2eeb1122f3041edf79">input_context::keys_bound_to</a></div><div class="ttdeci">std::vector&lt; char &gt; keys_bound_to(const std::string &amp;action_descriptor, bool restrict_to_printable=true) const</div><div class="ttdoc">Keys (and only keys, other input types are not included) that trigger the given action.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00695">input.cpp:695</a></div></div>
<div class="ttc" id="aclassnc__color_html"><div class="ttname"><a href="classnc__color.html">nc_color</a></div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00348">color.h:349</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a122323ec4c1e72c291e76643ccfd3fde"><div class="ttname"><a href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">target_ui::shifting_view</a></div><div class="ttdeci">bool shifting_view</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00253">ranged.cpp:253</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a246e6aa2bb08bb724c44571e8451ac30"><div class="ttname"><a href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">target_ui::w_target</a></div><div class="ttdeci">catacurses::window w_target</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00263">ranged.cpp:263</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a2c23b4913b52b2a5f80357f34d92700c"><div class="ttname"><a href="classtarget__ui.html#a2c23b4913b52b2a5f80357f34d92700c">target_ui::uitext_fire</a></div><div class="ttdeci">std::string uitext_fire()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03296">ranged.cpp:3296</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">target_ui::Status::Good</a></div><div class="ttdeci">@ Good</div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">target_ui::Status::OutOfAmmo</a></div><div class="ttdeci">@ OutOfAmmo</div></div>
<div class="ttc" id="aclasstarget__ui_html_a4e5479e5dd0b2883bbf2927c489ddb6a"><div class="ttname"><a href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">target_ui::ctxt</a></div><div class="ttdeci">input_context ctxt</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00265">ranged.cpp:265</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a63ac73585a9794e93d181362f7473b50"><div class="ttname"><a href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">target_ui::draw_turret_lines</a></div><div class="ttdeci">bool draw_turret_lines</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00299">ranged.cpp:299</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_abb6df512b8b794227dc5f1d9afe17bf1"><div class="ttname"><a href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">target_ui::status</a></div><div class="ttdeci">Status status</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00229">ranged.cpp:229</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">target_ui::TargetMode::Turrets</a></div><div class="ttdeci">@ Turrets</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">target_ui::TargetMode::Fire</a></div><div class="ttdeci">@ Fire</div></div>
<div class="ttc" id="acolor_8cpp_html_a0f25678be1fc95cb81381a004493a4cc"><div class="ttname"><a href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a></div><div class="ttdeci">std::string colorize(const std::string &amp;text, const nc_color &amp;color)</div><div class="ttdef"><b>Definition:</b> <a href="color_8cpp_source.html#l00669">color.cpp:669</a></div></div>
<div class="ttc" id="acolor_8h_html_a0d06dc49b9761bbc54607397213728bb"><div class="ttname"><a href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a></div><div class="ttdeci">#define c_white</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00018">color.h:18</a></div></div>
<div class="ttc" id="acolor_8h_html_a1b1e3c0bef566a83c3535e38a93ad733"><div class="ttname"><a href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a></div><div class="ttdeci">#define c_light_gray</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00019">color.h:19</a></div></div>
<div class="ttc" id="aeditmap_8cpp_html_a025a5c063205294df20818edc4cfe355"><div class="ttname"><a href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a></div><div class="ttdeci">static nc_color color(const T_t &amp;t)</div></div>
<div class="ttc" id="ahandle__action_8cpp_html_ad56544ec96a0f79ea4e47ae8f8754d10"><div class="ttname"><a href="handle__action_8cpp.html#ad56544ec96a0f79ea4e47ae8f8754d10">fire</a></div><div class="ttdeci">static void fire()</div><div class="ttdef"><b>Definition:</b> <a href="handle__action_8cpp_source.html#l01324">handle_action.cpp:1324</a></div></div>
<div class="ttc" id="ainput_8cpp_html_aceedd903724817bad81fbc03216ff125"><div class="ttname"><a href="input_8cpp.html#aceedd903724817bad81fbc03216ff125">is_mouse_enabled</a></div><div class="ttdeci">bool is_mouse_enabled()</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00074">input.cpp:74</a></div></div>
<div class="ttc" id="amapgen_8cpp_html_a90f1f53dc044e93e7f7f9314cef1bd45"><div class="ttname"><a href="mapgen_8cpp.html#a90f1f53dc044e93e7f7f9314cef1bd45">line</a></div><div class="ttdeci">void line(map *m, const ter_id &amp;type, const point &amp;p1, const point &amp;p2)</div><div class="ttdef"><b>Definition:</b> <a href="mapgen_8cpp_source.html#l06485">mapgen.cpp:6485</a></div></div>
<div class="ttc" id="anamespaceavatar__action_html_a76ba74774376a08222b8cdcce08f7304"><div class="ttname"><a href="namespaceavatar__action.html#a76ba74774376a08222b8cdcce08f7304">avatar_action::move</a></div><div class="ttdeci">bool move(avatar &amp;you, map &amp;m, const tripoint &amp;d)</div><div class="ttdef"><b>Definition:</b> <a href="avatar__action_8cpp_source.html#l00094">avatar_action.cpp:94</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_adc81ca40445dc062af12fb6d7a4793d0"><div class="ttname"><a href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">catacurses::getmaxy</a></div><div class="ttdeci">int getmaxy(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00063">ncurses_def.cpp:63</a></div></div>
<div class="ttc" id="anamespacesounds_html_af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7"><div class="ttname"><a href="namespacesounds.html#af6b3d144906d9ccfda6824fb87e46aa3a70a17ffa722a3985b86d30b034ad06d7">sounds::sound_t::order</a></div><div class="ttdeci">@ order</div></div>
<div class="ttc" id="aoutput_8cpp_html_a9fcad5b904c8019b15fe1ac8e665a1cb"><div class="ttname"><a href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a></div><div class="ttdeci">void print_colored_text(const catacurses::window &amp;w, const point &amp;p, nc_color &amp;color, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Print text with embedded color_tags, x, y are in curses system.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00185">output.cpp:185</a></div></div>
<div class="ttc" id="astring__formatter_8h_html_a8964099387da2f95396c67566bafce3d"><div class="ttname"><a href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a></div><div class="ttdeci">std::string string_format(std::string_view format, Args &amp;&amp;...args)</div><div class="ttdoc">Simple wrapper over string_formatter::parse.</div><div class="ttdef"><b>Definition:</b> <a href="string__formatter_8h_source.html#l00431">string_formatter.h:431</a></div></div>
<div class="ttc" id="astructlabel_html"><div class="ttname"><a href="structlabel.html">label</a></div><div class="ttdoc">Struct used for storing labels (easier to json opposed to a std::map&lt;point, std::string&gt;)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00578">vehicle.h:578</a></div></div>
<div class="ttc" id="astructpoint_html"><div class="ttname"><a href="structpoint.html">point</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00035">point.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ranged_8cpp_source.html#l00271">aim_types</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00018">c_white</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="ranged_8cpp_source.html#l00299">draw_turret_lines</a>, <a class="el" href="handle__action_8cpp_source.html#l01324">fire()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="input_8cpp_source.html#l00756">input_context::get_desc()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00063">catacurses::getmaxy()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="input_8cpp_source.html#l00074">is_mouse_enabled()</a>, <a class="el" href="input_8cpp_source.html#l00695">input_context::keys_bound_to()</a>, <a class="el" href="mapgen_8cpp_source.html#l06485">line()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="avatar__action_8cpp_source.html#l00094">avatar_action::move()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="ranged_8cpp_source.html#l00253">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l03296">uitext_fire()</a>, and <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="acc5b1b952d220d0cd766f9c32ab5eb38" name="acc5b1b952d220d0cd766f9c32ab5eb38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc5b1b952d220d0cd766f9c32ab5eb38">&#9670;&nbsp;</a></span>draw_help_notice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_help_notice </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03316">3316</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03317" name="l03317"></a><span class="lineno"> 3317</span>{</div>
<div class="line"><a id="l03318" name="l03318"></a><span class="lineno"> 3318</span>    <span class="keywordtype">int</span> text_y = <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 1;</div>
<div class="line"><a id="l03319" name="l03319"></a><span class="lineno"> 3319</span>    <span class="keywordtype">int</span> width = <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03320" name="l03320"></a><span class="lineno"> 3320</span>    <span class="keyword">const</span> std::string label_help = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>(</div>
<div class="line"><a id="l03321" name="l03321"></a><span class="lineno"> 3321</span>                                       <a class="code hl_variable" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%s] show help&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;[%s] show all controls&quot;</span> ),</div>
<div class="line"><a id="l03322" name="l03322"></a><span class="lineno"> 3322</span>                                       <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#abe76d2c284f2a277cbd2f367963fa9ab">get_desc</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span>, 1 ) );</div>
<div class="line"><a id="l03323" name="l03323"></a><span class="lineno"> 3323</span>    <span class="keywordtype">int</span> label_width = std::min( <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( label_help ), width - 6 ); <span class="comment">// 6 for borders and &quot;&lt; &quot; + &quot; &gt;&quot;</span></div>
<div class="line"><a id="l03324" name="l03324"></a><span class="lineno"> 3324</span>    <span class="keywordtype">int</span> text_x = width - label_width - 6;</div>
<div class="line"><a id="l03325" name="l03325"></a><span class="lineno"> 3325</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( text_x + 1, text_y ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot;&lt; &quot;</span> );</div>
<div class="line"><a id="l03326" name="l03326"></a><span class="lineno"> 3326</span>    <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( text_x + 3, text_y ), label_width, <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, label_help );</div>
<div class="line"><a id="l03327" name="l03327"></a><span class="lineno"> 3327</span>    <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot; &gt;&quot;</span> );</div>
<div class="line"><a id="l03328" name="l03328"></a><span class="lineno"> 3328</span>}</div>
<div class="ttc" id="acatacharset_8cpp_html_a7616a48a4b48437c60b6683439a8f3e2"><div class="ttname"><a href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a></div><div class="ttdeci">int utf8_width(const char *s, const bool ignore_tags)</div><div class="ttdef"><b>Definition:</b> <a href="catacharset_8cpp_source.html#l00142">catacharset.cpp:142</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a4b525b1e2a39f4748409b97e8984947b"><div class="ttname"><a href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">target_ui::narrow</a></div><div class="ttdeci">bool narrow</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00261">ranged.cpp:261</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a929fe85d472028f52d8a5cdfc0d35017"><div class="ttname"><a href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">catacurses::getmaxx</a></div><div class="ttdeci">int getmaxx(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00058">ncurses_def.cpp:58</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a1184e3eda011b110d09bf2dcf08228f5"><div class="ttname"><a href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a></div><div class="ttdeci">void mvwprintz(const catacurses::window &amp;w, const point &amp;p, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02035">output.cpp:2035</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab7abbbd98907f496533db9bc2a02cf4a"><div class="ttname"><a href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a></div><div class="ttdeci">void trim_and_print(const catacurses::window &amp;w, const point &amp;begin, const int width, const nc_color &amp;base_color, const std::string &amp;text, const report_color_error color_error)</div><div class="ttdoc">Prints a single line of text.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00214">output.cpp:214</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_aedec608a42edd33ec812f7769a9ed0c9"><div class="ttname"><a href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a></div><div class="ttdeci">void wprintz(const catacurses::window &amp;w, const nc_color &amp;FG, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l02043">output.cpp:2043</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00018">c_white</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="input_8cpp_source.html#l00756">input_context::get_desc()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00063">catacurses::getmaxy()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="ranged_8cpp_source.html#l00261">narrow</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="output_8cpp_source.html#l00214">trim_and_print()</a>, <a class="el" href="catacharset_8cpp_source.html#l00142">utf8_width()</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="output_8cpp_source.html#l02043">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a15d523ae27fc66cbff7adac5e9fa91dd" name="a15d523ae27fc66cbff7adac5e9fa91dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d523ae27fc66cbff7adac5e9fa91dd">&#9670;&nbsp;</a></span>draw_terrain_overlay()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_terrain_overlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03136">3136</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03137" name="l03137"></a><span class="lineno"> 3137</span>{</div>
<div class="line"><a id="l03138" name="l03138"></a><span class="lineno"> 3138</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() + <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a>;</div>
<div class="line"><a id="l03139" name="l03139"></a><span class="lineno"> 3139</span> </div>
<div class="line"><a id="l03140" name="l03140"></a><span class="lineno"> 3140</span>    <span class="comment">// Removes parts that don&#39;t belong to currently visible Z level</span></div>
<div class="line"><a id="l03141" name="l03141"></a><span class="lineno"> 3141</span>    <span class="keyword">const</span> <span class="keyword">auto</span> filter_this_z = [&amp;<a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>]( <span class="keyword">const</span> std::vector&lt;tripoint&gt; &amp;<a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> ) {</div>
<div class="line"><a id="l03142" name="l03142"></a><span class="lineno"> 3142</span>        std::vector&lt;tripoint&gt; this_z = <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>;</div>
<div class="line"><a id="l03143" name="l03143"></a><span class="lineno"> 3143</span>        this_z.erase( std::remove_if( this_z.begin(), this_z.end(),</div>
<div class="line"><a id="l03144" name="l03144"></a><span class="lineno"> 3144</span>        [&amp;<a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>]( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; p ) {</div>
<div class="line"><a id="l03145" name="l03145"></a><span class="lineno"> 3145</span>            return p.z != center.z;</div>
<div class="line"><a id="l03146" name="l03146"></a><span class="lineno"> 3146</span>        } ), this_z.end() );</div>
<div class="line"><a id="l03147" name="l03147"></a><span class="lineno"> 3147</span>        <span class="keywordflow">return</span> this_z;</div>
<div class="line"><a id="l03148" name="l03148"></a><span class="lineno"> 3148</span>    };</div>
<div class="line"><a id="l03149" name="l03149"></a><span class="lineno"> 3149</span> </div>
<div class="line"><a id="l03150" name="l03150"></a><span class="lineno"> 3150</span>    <span class="comment">// FIXME: TILES version of g-&gt;draw_line helpfully draws a cursor at last point.</span></div>
<div class="line"><a id="l03151" name="l03151"></a><span class="lineno"> 3151</span>    <span class="comment">//        This creates a fake cursor if &#39;dst&#39; is on a z-level we cannot see.</span></div>
<div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span> </div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <span class="comment">// Draw approximate line of fire for each turret in range</span></div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> ) {</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>        <span class="comment">// TODO: TILES version doesn&#39;t know how to draw more than 1 line at a time.</span></div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>        <span class="comment">//       We merge all lines together and draw them as a big malformed one</span></div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>        std::set&lt;tripoint&gt; points;</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> turret_with_lof &amp;it : <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a> ) {</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>            std::vector&lt;tripoint&gt; this_z = filter_this_z( it.line );</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>            <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : this_z ) {</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>                points.insert( p );</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>            }</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>        }</div>
<div class="line"><a id="l03164" name="l03164"></a><span class="lineno"> 3164</span>        <span class="comment">// Since &quot;trajectory&quot; for each turret is just a straight line,</span></div>
<div class="line"><a id="l03165" name="l03165"></a><span class="lineno"> 3165</span>        <span class="comment">// we can draw it even if the player can&#39;t see some parts</span></div>
<div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>        points.erase( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ); <span class="comment">// Workaround for fake cursor on TILES</span></div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>        std::vector&lt;tripoint&gt; l( points.begin(), points.end() );</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>            <span class="comment">// Workaround for fake cursor bug on TILES</span></div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>            l.push_back( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>        }</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_line( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, l, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>    }</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span> </div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>    <span class="comment">// Draw trajectory</span></div>
<div class="line"><a id="l03176" name="l03176"></a><span class="lineno"> 3176</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> != <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a id="l03177" name="l03177"></a><span class="lineno"> 3177</span>        std::vector&lt;tripoint&gt; this_z = filter_this_z( <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> );</div>
<div class="line"><a id="l03178" name="l03178"></a><span class="lineno"> 3178</span> </div>
<div class="line"><a id="l03179" name="l03179"></a><span class="lineno"> 3179</span>        <span class="comment">// Draw a highlighted trajectory only if we can see the endpoint.</span></div>
<div class="line"><a id="l03180" name="l03180"></a><span class="lineno"> 3180</span>        <span class="comment">// Provides feedback to the player, but avoids leaking information</span></div>
<div class="line"><a id="l03181" name="l03181"></a><span class="lineno"> 3181</span>        <span class="comment">// about tiles they can&#39;t see.</span></div>
<div class="line"><a id="l03182" name="l03182"></a><span class="lineno"> 3182</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_line( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, this_z );</div>
<div class="line"><a id="l03183" name="l03183"></a><span class="lineno"> 3183</span>    }</div>
<div class="line"><a id="l03184" name="l03184"></a><span class="lineno"> 3184</span> </div>
<div class="line"><a id="l03185" name="l03185"></a><span class="lineno"> 3185</span>    <span class="comment">// Since draw_line does nothing if destination is not visible,</span></div>
<div class="line"><a id="l03186" name="l03186"></a><span class="lineno"> 3186</span>    <span class="comment">// cursor also disappears. Draw it explicitly.</span></div>
<div class="line"><a id="l03187" name="l03187"></a><span class="lineno"> 3187</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> == <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a id="l03188" name="l03188"></a><span class="lineno"> 3188</span>        <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_cursor( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l03189" name="l03189"></a><span class="lineno"> 3189</span>    }</div>
<div class="line"><a id="l03190" name="l03190"></a><span class="lineno"> 3190</span> </div>
<div class="line"><a id="l03191" name="l03191"></a><span class="lineno"> 3191</span>    <span class="comment">// Draw spell AOE</span></div>
<div class="line"><a id="l03192" name="l03192"></a><span class="lineno"> 3192</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a id="l03193" name="l03193"></a><span class="lineno"> 3193</span>        <a class="code hl_struct" href="structdrawsq__params.html">drawsq_params</a> params = <a class="code hl_struct" href="structdrawsq__params.html">drawsq_params</a>().<a class="code hl_function" href="structdrawsq__params.html#a07e0031d80c902338e81e0625215c8ee">highlight</a>( <span class="keyword">true</span> ).<a class="code hl_function" href="structdrawsq__params.html#a62c9449e7c7cf3d1a7828e2c65100ac8">center</a>( <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> );</div>
<div class="line"><a id="l03194" name="l03194"></a><span class="lineno"> 3194</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tile : <a class="code hl_variable" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> ) {</div>
<div class="line"><a id="l03195" name="l03195"></a><span class="lineno"> 3195</span>            <span class="keywordflow">if</span>( tile.z != <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>.z ) {</div>
<div class="line"><a id="l03196" name="l03196"></a><span class="lineno"> 3196</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03197" name="l03197"></a><span class="lineno"> 3197</span>            }</div>
<div class="line"><a id="l03198" name="l03198"></a><span class="lineno"> 3198</span><span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a id="l03199" name="l03199"></a><span class="lineno"> 3199</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a> ) {</div>
<div class="line"><a id="l03200" name="l03200"></a><span class="lineno"> 3200</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_highlight( tile );</div>
<div class="line"><a id="l03201" name="l03201"></a><span class="lineno"> 3201</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03202" name="l03202"></a><span class="lineno"> 3202</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03203" name="l03203"></a><span class="lineno"> 3203</span>                <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#ad189f4216a9eaacbf9c5aa0ceedaea18">drawsq</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;w_terrain, tile, params );</div>
<div class="line"><a id="l03204" name="l03204"></a><span class="lineno"> 3204</span><span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a id="l03205" name="l03205"></a><span class="lineno"> 3205</span>            }</div>
<div class="line"><a id="l03206" name="l03206"></a><span class="lineno"> 3206</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03207" name="l03207"></a><span class="lineno"> 3207</span>        }</div>
<div class="line"><a id="l03208" name="l03208"></a><span class="lineno"> 3208</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">TargetMode::Shape</a> ) {</div>
<div class="line"><a id="l03209" name="l03209"></a><span class="lineno"> 3209</span>        <a class="code hl_struct" href="structdrawsq__params.html">drawsq_params</a> params = <a class="code hl_struct" href="structdrawsq__params.html">drawsq_params</a>().<a class="code hl_function" href="structdrawsq__params.html#a07e0031d80c902338e81e0625215c8ee">highlight</a>( <span class="keyword">true</span> ).<a class="code hl_function" href="structdrawsq__params.html#a62c9449e7c7cf3d1a7828e2c65100ac8">center</a>( <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> );</div>
<div class="line"><a id="l03210" name="l03210"></a><span class="lineno"> 3210</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> std::pair&lt;const tripoint, double&gt; &amp;pr : <a class="code hl_variable" href="classtarget__ui.html#a6f2c970f904d7b8c06e403dbc4560f4d">shape_coverage</a> ) {</div>
<div class="line"><a id="l03211" name="l03211"></a><span class="lineno"> 3211</span>            <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tile = pr.first;</div>
<div class="line"><a id="l03212" name="l03212"></a><span class="lineno"> 3212</span><span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a id="l03213" name="l03213"></a><span class="lineno"> 3213</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a> ) {</div>
<div class="line"><a id="l03214" name="l03214"></a><span class="lineno"> 3214</span>                <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_highlight( tile );</div>
<div class="line"><a id="l03215" name="l03215"></a><span class="lineno"> 3215</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03216" name="l03216"></a><span class="lineno"> 3216</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03217" name="l03217"></a><span class="lineno"> 3217</span>                <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#ad189f4216a9eaacbf9c5aa0ceedaea18">drawsq</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;w_terrain, tile, params );</div>
<div class="line"><a id="l03218" name="l03218"></a><span class="lineno"> 3218</span>                <a class="code hl_class" href="classCreature.html">Creature</a> *critter = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( tile );</div>
<div class="line"><a id="l03219" name="l03219"></a><span class="lineno"> 3219</span>                <span class="keywordflow">if</span>( critter != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l03220" name="l03220"></a><span class="lineno"> 3220</span>                    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;draw_critter_highlighted( *critter, <a class="code hl_enumvalue" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a> );</div>
<div class="line"><a id="l03221" name="l03221"></a><span class="lineno"> 3221</span>                }</div>
<div class="line"><a id="l03222" name="l03222"></a><span class="lineno"> 3222</span><span class="preprocessor">#ifdef TILES</span></div>
<div class="line"><a id="l03223" name="l03223"></a><span class="lineno"> 3223</span>            }</div>
<div class="line"><a id="l03224" name="l03224"></a><span class="lineno"> 3224</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l03225" name="l03225"></a><span class="lineno"> 3225</span>        }</div>
<div class="line"><a id="l03226" name="l03226"></a><span class="lineno"> 3226</span>    }</div>
<div class="line"><a id="l03227" name="l03227"></a><span class="lineno"> 3227</span>}</div>
<div class="ttc" id="acached__options_8cpp_html_a9b72c9314ac0439a25820b3abf2229f3"><div class="ttname"><a href="cached__options_8cpp.html#a9b72c9314ac0439a25820b3abf2229f3">use_tiles</a></div><div class="ttdeci">bool use_tiles</div><div class="ttdoc">Use tiles for display.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00006">cached_options.cpp:6</a></div></div>
<div class="ttc" id="acata__tiles_8h_html_affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667"><div class="ttname"><a href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">text_alignment::center</a></div><div class="ttdeci">@ center</div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00576">character.cpp:576</a></div></div>
<div class="ttc" id="aclassCreature_html"><div class="ttname"><a href="classCreature.html">Creature</a></div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00077">creature.h:78</a></div></div>
<div class="ttc" id="aclassmap_html_ad189f4216a9eaacbf9c5aa0ceedaea18"><div class="ttname"><a href="classmap.html#ad189f4216a9eaacbf9c5aa0ceedaea18">map::drawsq</a></div><div class="ttdeci">void drawsq(const catacurses::window &amp;w, const tripoint &amp;p, const drawsq_params &amp;params) const</div><div class="ttdoc">Draw the map tile at the given coordinate.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05842">map.cpp:5842</a></div></div>
<div class="ttc" id="aclassplayer_html_a625b6dd5247589902251e845d07a2154"><div class="ttname"><a href="classplayer.html#a625b6dd5247589902251e845d07a2154">player::view_offset</a></div><div class="ttdeci">tripoint view_offset</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00365">player.h:365</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a542ba80f542b41ea6a81f1ab8b14b521"><div class="ttname"><a href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">target_ui::traj</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; traj</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00234">ranged.cpp:234</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a6f2c970f904d7b8c06e403dbc4560f4d"><div class="ttname"><a href="classtarget__ui.html#a6f2c970f904d7b8c06e403dbc4560f4d">target_ui::shape_coverage</a></div><div class="ttdeci">std::map&lt; tripoint, double &gt; shape_coverage</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00286">ranged.cpp:286</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ab855722580bd112ef0590b5a9b4f3556"><div class="ttname"><a href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">target_ui::spell_aoe</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_aoe</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00283">ranged.cpp:283</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">target_ui::TargetMode::Shape</a></div><div class="ttdeci">@ Shape</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">target_ui::TargetMode::Spell</a></div><div class="ttdeci">@ Spell</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae8d4216fdc3f48ee8f6dd5f22c33d9d9"><div class="ttname"><a href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">target_ui::turrets_in_range</a></div><div class="ttdeci">std::vector&lt; turret_with_lof &gt; turrets_in_range</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00295">ranged.cpp:295</a></div></div>
<div class="ttc" id="astructdrawsq__params_html"><div class="ttname"><a href="structdrawsq__params.html">drawsq_params</a></div><div class="ttdoc">Draw parameters used by map::drawsq() and similar methods.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00180">map.h:180</a></div></div>
<div class="ttc" id="astructdrawsq__params_html_a07e0031d80c902338e81e0625215c8ee"><div class="ttname"><a href="structdrawsq__params.html#a07e0031d80c902338e81e0625215c8ee">drawsq_params::highlight</a></div><div class="ttdeci">constexpr drawsq_params &amp; highlight(bool v)</div><div class="ttdoc">Highlight the tile.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00198">map.h:198</a></div></div>
<div class="ttc" id="astructdrawsq__params_html_a62c9449e7c7cf3d1a7828e2c65100ac8"><div class="ttname"><a href="structdrawsq__params.html#a62c9449e7c7cf3d1a7828e2c65100ac8">drawsq_params::center</a></div><div class="ttdeci">constexpr drawsq_params &amp; center(const tripoint &amp;p)</div><div class="ttdoc">Set view center.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00283">map.h:283</a></div></div>
<div class="ttc" id="astructtripoint_html_ac944c0e329b5eba2602f7a52f66bbbb9"><div class="ttname"><a href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">tripoint::z</a></div><div class="ttdeci">int z</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00152">point.h:152</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__tiles_8h.html#affa90804269b044a43867f93746f8f8eaadb115059e28d960fa8badfac5516667">center</a>, <a class="el" href="map_8h_source.html#l00283">drawsq_params::center()</a>, <a class="el" href="ranged_8cpp_source.html#l00299">draw_turret_lines</a>, <a class="el" href="map_8cpp_source.html#l05842">map::drawsq()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8h_source.html#l00198">drawsq_params::highlight()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="character_8cpp_source.html#l00576">Character::pos()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">Shape</a>, <a class="el" href="ranged_8cpp_source.html#l00286">shape_coverage</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00283">spell_aoe</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00234">traj</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00295">turrets_in_range</a>, <a class="el" href="cached__options_8cpp_source.html#l00006">use_tiles</a>, <a class="el" href="player_8h_source.html#l00365">player::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00186">you</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a93a478e95d201324548329f39a087208" name="a93a478e95d201324548329f39a087208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93a478e95d201324548329f39a087208">&#9670;&nbsp;</a></span>draw_ui_window()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_ui_window </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03229">3229</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03230" name="l03230"></a><span class="lineno"> 3230</span>{</div>
<div class="line"><a id="l03231" name="l03231"></a><span class="lineno"> 3231</span>    <span class="comment">// Clear target window and make it non-transparent.</span></div>
<div class="line"><a id="l03232" name="l03232"></a><span class="lineno"> 3232</span>    <span class="keywordtype">int</span> width = <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03233" name="l03233"></a><span class="lineno"> 3233</span>    <span class="keywordtype">int</span> height = <a class="code hl_function" href="namespacecatacurses.html#adc81ca40445dc062af12fb6d7a4793d0">getmaxy</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03234" name="l03234"></a><span class="lineno"> 3234</span>    <span class="keywordflow">for</span>( <span class="keywordtype">int</span> y = 0; y &lt; height; y++ ) {</div>
<div class="line"><a id="l03235" name="l03235"></a><span class="lineno"> 3235</span>        <span class="keywordflow">for</span>( <span class="keywordtype">int</span> x = 0; x &lt; width; x++ ) {</div>
<div class="line"><a id="l03236" name="l03236"></a><span class="lineno"> 3236</span>            <a class="code hl_function" href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( x, y ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="charliteral">&#39; &#39;</span> );</div>
<div class="line"><a id="l03237" name="l03237"></a><span class="lineno"> 3237</span>        }</div>
<div class="line"><a id="l03238" name="l03238"></a><span class="lineno"> 3238</span>    }</div>
<div class="line"><a id="l03239" name="l03239"></a><span class="lineno"> 3239</span> </div>
<div class="line"><a id="l03240" name="l03240"></a><span class="lineno"> 3240</span>    <a class="code hl_function" href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03241" name="l03241"></a><span class="lineno"> 3241</span>    <a class="code hl_function" href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">draw_window_title</a>();</div>
<div class="line"><a id="l03242" name="l03242"></a><span class="lineno"> 3242</span>    <a class="code hl_function" href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">draw_help_notice</a>();</div>
<div class="line"><a id="l03243" name="l03243"></a><span class="lineno"> 3243</span> </div>
<div class="line"><a id="l03244" name="l03244"></a><span class="lineno"> 3244</span>    <span class="keywordtype">int</span> text_y = 1; <span class="comment">// Skip top border</span></div>
<div class="line"><a id="l03245" name="l03245"></a><span class="lineno"> 3245</span> </div>
<div class="line"><a id="l03246" name="l03246"></a><span class="lineno"> 3246</span>    <a class="code hl_function" href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">panel_cursor_info</a>( text_y );</div>
<div class="line"><a id="l03247" name="l03247"></a><span class="lineno"> 3247</span>    text_y += <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a id="l03248" name="l03248"></a><span class="lineno"> 3248</span> </div>
<div class="line"><a id="l03249" name="l03249"></a><span class="lineno"> 3249</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l03250" name="l03250"></a><span class="lineno"> 3250</span>        <a class="code hl_function" href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">panel_gun_info</a>( text_y );</div>
<div class="line"><a id="l03251" name="l03251"></a><span class="lineno"> 3251</span>        <a class="code hl_function" href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">panel_recoil</a>( text_y );</div>
<div class="line"><a id="l03252" name="l03252"></a><span class="lineno"> 3252</span>        text_y += <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a id="l03253" name="l03253"></a><span class="lineno"> 3253</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a id="l03254" name="l03254"></a><span class="lineno"> 3254</span>        <a class="code hl_function" href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">panel_spell_info</a>( text_y );</div>
<div class="line"><a id="l03255" name="l03255"></a><span class="lineno"> 3255</span>        text_y += <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a id="l03256" name="l03256"></a><span class="lineno"> 3256</span>    }</div>
<div class="line"><a id="l03257" name="l03257"></a><span class="lineno"> 3257</span> </div>
<div class="line"><a id="l03258" name="l03258"></a><span class="lineno"> 3258</span>    <span class="keywordtype">bool</span> fill_with_blank_if_no_target = !<a class="code hl_variable" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a>;</div>
<div class="line"><a id="l03259" name="l03259"></a><span class="lineno"> 3259</span>    <a class="code hl_function" href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">panel_target_info</a>( text_y, fill_with_blank_if_no_target );</div>
<div class="line"><a id="l03260" name="l03260"></a><span class="lineno"> 3260</span>    text_y += <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ? 0 : 1;</div>
<div class="line"><a id="l03261" name="l03261"></a><span class="lineno"> 3261</span> </div>
<div class="line"><a id="l03262" name="l03262"></a><span class="lineno"> 3262</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l03263" name="l03263"></a><span class="lineno"> 3263</span>        <a class="code hl_function" href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">panel_turret_list</a>( text_y );</div>
<div class="line"><a id="l03264" name="l03264"></a><span class="lineno"> 3264</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a id="l03265" name="l03265"></a><span class="lineno"> 3265</span>        <span class="comment">// TODO: these are old, consider refactoring</span></div>
<div class="line"><a id="l03266" name="l03266"></a><span class="lineno"> 3266</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l03267" name="l03267"></a><span class="lineno"> 3267</span>            <a class="code hl_function" href="classtarget__ui.html#aa5c1e8816cd2a0f9c10e3ea2095eefe1">panel_fire_mode_aim</a>( text_y );</div>
<div class="line"><a id="l03268" name="l03268"></a><span class="lineno"> 3268</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a> ) {</div>
<div class="line"><a id="l03269" name="l03269"></a><span class="lineno"> 3269</span>            <span class="keywordtype">bool</span> blind = ( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a> );</div>
<div class="line"><a id="l03270" name="l03270"></a><span class="lineno"> 3270</span>            <a class="code hl_function" href="ranged_8cpp.html#a2e072a7b4bbd9c0deff64e0a8f1ffb85">draw_throw_aim</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>, *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, blind );</div>
<div class="line"><a id="l03271" name="l03271"></a><span class="lineno"> 3271</span>        }</div>
<div class="line"><a id="l03272" name="l03272"></a><span class="lineno"> 3272</span>    }</div>
<div class="line"><a id="l03273" name="l03273"></a><span class="lineno"> 3273</span> </div>
<div class="line"><a id="l03274" name="l03274"></a><span class="lineno"> 3274</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ) {</div>
<div class="line"><a id="l03275" name="l03275"></a><span class="lineno"> 3275</span>        <a class="code hl_function" href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">draw_controls_list</a>( text_y );</div>
<div class="line"><a id="l03276" name="l03276"></a><span class="lineno"> 3276</span>    }</div>
<div class="line"><a id="l03277" name="l03277"></a><span class="lineno"> 3277</span> </div>
<div class="line"><a id="l03278" name="l03278"></a><span class="lineno"> 3278</span>    <a class="code hl_function" href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">wnoutrefresh</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03279" name="l03279"></a><span class="lineno"> 3279</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_a14b8ebef108aaa7ad8c5176a04f600bb"><div class="ttname"><a href="classtarget__ui.html#a14b8ebef108aaa7ad8c5176a04f600bb">target_ui::panel_spell_info</a></div><div class="ttdeci">void panel_spell_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03512">ranged.cpp:3512</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1e6534092ef1b213639575c914030eb1"><div class="ttname"><a href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">target_ui::tiny</a></div><div class="ttdeci">bool tiny</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00258">ranged.cpp:258</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a34b69263e28fa4472b51104ec1d2e6f0"><div class="ttname"><a href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">target_ui::compact</a></div><div class="ttdeci">bool compact</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00256">ranged.cpp:256</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a4bb70bd52ece44447bec77880106009d"><div class="ttname"><a href="classtarget__ui.html#a4bb70bd52ece44447bec77880106009d">target_ui::panel_target_info</a></div><div class="ttdeci">void panel_target_info(int &amp;text_y, bool fill_with_blank_if_no_target)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03566">ranged.cpp:3566</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a545580558b81b3d44c43b52fc5ff1b77"><div class="ttname"><a href="classtarget__ui.html#a545580558b81b3d44c43b52fc5ff1b77">target_ui::panel_gun_info</a></div><div class="ttdeci">void panel_gun_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03464">ranged.cpp:3464</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a7d5114b61c688d3810c108986ddc8bf7"><div class="ttname"><a href="classtarget__ui.html#a7d5114b61c688d3810c108986ddc8bf7">target_ui::draw_controls_list</a></div><div class="ttdeci">void draw_controls_list(int text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03330">ranged.cpp:3330</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a86966228ce7aad77c233058bf1285962"><div class="ttname"><a href="classtarget__ui.html#a86966228ce7aad77c233058bf1285962">target_ui::panel_cursor_info</a></div><div class="ttdeci">void panel_cursor_info(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03427">ranged.cpp:3427</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a9f08c10cac1401587f330fb97f5c2183"><div class="ttname"><a href="classtarget__ui.html#a9f08c10cac1401587f330fb97f5c2183">target_ui::panel_recoil</a></div><div class="ttdeci">void panel_recoil(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03492">ranged.cpp:3492</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa5c1e8816cd2a0f9c10e3ea2095eefe1"><div class="ttname"><a href="classtarget__ui.html#aa5c1e8816cd2a0f9c10e3ea2095eefe1">target_ui::panel_fire_mode_aim</a></div><div class="ttdeci">void panel_fire_mode_aim(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03600">ranged.cpp:3600</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_acc5b1b952d220d0cd766f9c32ab5eb38"><div class="ttname"><a href="classtarget__ui.html#acc5b1b952d220d0cd766f9c32ab5eb38">target_ui::draw_help_notice</a></div><div class="ttdeci">void draw_help_notice()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03316">ranged.cpp:3316</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad4a9c004a4c4cf26ad705174612584ea"><div class="ttname"><a href="classtarget__ui.html#ad4a9c004a4c4cf26ad705174612584ea">target_ui::panel_turret_list</a></div><div class="ttdeci">void panel_turret_list(int &amp;text_y)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03635">ranged.cpp:3635</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad62889056a10382de6835688498cf20e"><div class="ttname"><a href="classtarget__ui.html#ad62889056a10382de6835688498cf20e">target_ui::draw_window_title</a></div><div class="ttdeci">void draw_window_title()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03309">ranged.cpp:3309</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">target_ui::TargetMode::Throw</a></div><div class="ttdeci">@ Throw</div></div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">target_ui::TargetMode::ThrowBlind</a></div><div class="ttdeci">@ ThrowBlind</div></div>
<div class="ttc" id="anamespacecatacurses_html_aa9823d249c21fa50daf277957fabb175"><div class="ttname"><a href="namespacecatacurses.html#aa9823d249c21fa50daf277957fabb175">catacurses::wnoutrefresh</a></div><div class="ttdeci">void wnoutrefresh(const window &amp;win)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00043">ncurses_def.cpp:43</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afb5597c87a5847c7d64b878ab3a77d5b"><div class="ttname"><a href="output_8cpp.html#afb5597c87a5847c7d64b878ab3a77d5b">mvwputch</a></div><div class="ttdeci">void mvwputch(const catacurses::window &amp;w, const point &amp;p, nc_color FG, int ch)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00477">output.cpp:477</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_afea9968fcee47ebca0e45d27099d1c22"><div class="ttname"><a href="output_8cpp.html#afea9968fcee47ebca0e45d27099d1c22">draw_border</a></div><div class="ttdeci">void draw_border(const catacurses::window &amp;w, nc_color border_color, const std::string &amp;title, nc_color title_color)</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00575">output.cpp:575</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a2e072a7b4bbd9c0deff64e0a8f1ffb85"><div class="ttname"><a href="ranged_8cpp.html#a2e072a7b4bbd9c0deff64e0a8f1ffb85">draw_throw_aim</a></div><div class="ttdeci">static int draw_throw_aim(const player &amp;p, const catacurses::window &amp;w, int line_number, input_context &amp;ctxt, const item &amp;weapon, const tripoint &amp;target_pos, bool is_blind_throw)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01594">ranged.cpp:1594</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00018">c_white</a>, <a class="el" href="ranged_8cpp_source.html#l00256">compact</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="output_8cpp_source.html#l00575">draw_border()</a>, <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03316">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l01594">draw_throw_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03309">draw_window_title()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00063">catacurses::getmaxy()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="output_8cpp_source.html#l00477">mvwputch()</a>, <a class="el" href="ranged_8cpp_source.html#l00261">narrow</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03464">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03492">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03566">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03635">panel_turret_list()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="ranged_8cpp_source.html#l00258">tiny</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00043">catacurses::wnoutrefresh()</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ad62889056a10382de6835688498cf20e" name="ad62889056a10382de6835688498cf20e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad62889056a10382de6835688498cf20e">&#9670;&nbsp;</a></span>draw_window_title()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::draw_window_title </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03309">3309</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03310" name="l03310"></a><span class="lineno"> 3310</span>{</div>
<div class="line"><a id="l03311" name="l03311"></a><span class="lineno"> 3311</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 2, 0 ), <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot;&lt; &quot;</span> );</div>
<div class="line"><a id="l03312" name="l03312"></a><span class="lineno"> 3312</span>    <a class="code hl_function" href="output_8cpp.html#ab7abbbd98907f496533db9bc2a02cf4a">trim_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 4, 0 ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 7, <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>, <a class="code hl_function" href="classtarget__ui.html#abae2f397600dc6b01bb03f22bcd18666">uitext_title</a>() );</div>
<div class="line"><a id="l03313" name="l03313"></a><span class="lineno"> 3313</span>    <a class="code hl_function" href="output_8cpp.html#aedec608a42edd33ec812f7769a9ed0c9">wprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>, <span class="stringliteral">&quot; &gt;&quot;</span> );</div>
<div class="line"><a id="l03314" name="l03314"></a><span class="lineno"> 3314</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_abae2f397600dc6b01bb03f22bcd18666"><div class="ttname"><a href="classtarget__ui.html#abae2f397600dc6b01bb03f22bcd18666">target_ui::uitext_title</a></div><div class="ttdeci">std::string uitext_title()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03281">ranged.cpp:3281</a></div></div>
<div class="ttc" id="acolor_8h_html_af0a87eaef36305269f4506dfa34d94c0"><div class="ttname"><a href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a></div><div class="ttdeci">#define c_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00021">color.h:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="color_8h_source.html#l00018">c_white</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="output_8cpp_source.html#l00214">trim_and_print()</a>, <a class="el" href="ranged_8cpp_source.html#l03281">uitext_title()</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="output_8cpp_source.html#l02043">wprintz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a92256c0cb72fe5b2520a5808a5fcb79a" name="a92256c0cb72fe5b2520a5808a5fcb79a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92256c0cb72fe5b2520a5808a5fcb79a">&#9670;&nbsp;</a></span>ensure_ranged_gun_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::ensure_ranged_gun_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03046">3046</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03047" name="l03047"></a><span class="lineno"> 3047</span>{</div>
<div class="line"><a id="l03048" name="l03048"></a><span class="lineno"> 3048</span>    <span class="keywordflow">while</span>( <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code hl_function" href="classgun__mode.html#a29fb11a5199f83a9c5801bf2af6d99e9">melee</a>() ) {</div>
<div class="line"><a id="l03049" name="l03049"></a><span class="lineno"> 3049</span>        <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a74a90ea94f124f8d857058c2704a7fc7">gun_cycle_mode</a>();</div>
<div class="line"><a id="l03050" name="l03050"></a><span class="lineno"> 3050</span>    }</div>
<div class="line"><a id="l03051" name="l03051"></a><span class="lineno"> 3051</span>}</div>
<div class="ttc" id="aclassgun__mode_html_a29fb11a5199f83a9c5801bf2af6d99e9"><div class="ttname"><a href="classgun__mode.html#a29fb11a5199f83a9c5801bf2af6d99e9">gun_mode::melee</a></div><div class="ttdeci">bool melee() const</div><div class="ttdoc">if true perform a melee attach as opposed to shooting</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00033">gun_mode.h:33</a></div></div>
<div class="ttc" id="aclassitem_html_a1a94ea108d695febf7f2bcf090f097fa"><div class="ttname"><a href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">item::gun_current_mode</a></div><div class="ttdeci">gun_mode gun_current_mode() const</div><div class="ttdoc">Get the current mode for this gun (or an invalid mode if item is not a gun)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07792">item.cpp:7792</a></div></div>
<div class="ttc" id="aclassitem_html_a74a90ea94f124f8d857058c2704a7fc7"><div class="ttname"><a href="classitem.html#a74a90ea94f124f8d857058c2704a7fc7">item::gun_cycle_mode</a></div><div class="ttdeci">void gun_cycle_mode()</div><div class="ttdoc">Switch to the next available firing mode.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07814">item.cpp:7814</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l07792">item::gun_current_mode()</a>, <a class="el" href="item_8cpp_source.html#l07814">item::gun_cycle_mode()</a>, <a class="el" href="gun__mode_8h_source.html#l00033">gun_mode::melee()</a>, and <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ab290e475e7cd308b447788ec369053b0" name="ab290e475e7cd308b447788ec369053b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab290e475e7cd308b447788ec369053b0">&#9670;&nbsp;</a></span>handle_cursor_movement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::handle_cursor_movement </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&#160;</td>
          <td class="paramname"><em>skip_redraw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02480">2480</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02481" name="l02481"></a><span class="lineno"> 2481</span>{</div>
<div class="line"><a id="l02482" name="l02482"></a><span class="lineno"> 2482</span>    <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a> mouse_pos;</div>
<div class="line"><a id="l02483" name="l02483"></a><span class="lineno"> 2483</span>    <span class="keyword">const</span> <span class="keyword">auto</span> shift_view_or_cursor = [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp; delta ) {</div>
<div class="line"><a id="l02484" name="l02484"></a><span class="lineno"> 2484</span>        <span class="keywordflow">if</span>( this-&gt;<a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a id="l02485" name="l02485"></a><span class="lineno"> 2485</span>            this-&gt;<a class="code hl_function" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a>( this-&gt;<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a> + delta );</div>
<div class="line"><a id="l02486" name="l02486"></a><span class="lineno"> 2486</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02487" name="l02487"></a><span class="lineno"> 2487</span>            this-&gt;<a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> + delta );</div>
<div class="line"><a id="l02488" name="l02488"></a><span class="lineno"> 2488</span>        }</div>
<div class="line"><a id="l02489" name="l02489"></a><span class="lineno"> 2489</span>    };</div>
<div class="line"><a id="l02490" name="l02490"></a><span class="lineno"> 2490</span> </div>
<div class="line"><a id="l02491" name="l02491"></a><span class="lineno"> 2491</span>    <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> || <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TIMEOUT&quot;</span> ) {</div>
<div class="line"><a id="l02492" name="l02492"></a><span class="lineno"> 2492</span>        <span class="comment">// Shift pos and/or view via edge scrolling</span></div>
<div class="line"><a id="l02493" name="l02493"></a><span class="lineno"> 2493</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> edge_scroll = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mouse_edge_scrolling_terrain( <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a> );</div>
<div class="line"><a id="l02494" name="l02494"></a><span class="lineno"> 2494</span>        <span class="keywordflow">if</span>( edge_scroll == <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> ) {</div>
<div class="line"><a id="l02495" name="l02495"></a><span class="lineno"> 2495</span>            skip_redraw = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02496" name="l02496"></a><span class="lineno"> 2496</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02497" name="l02497"></a><span class="lineno"> 2497</span>            <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> ) {</div>
<div class="line"><a id="l02498" name="l02498"></a><span class="lineno"> 2498</span>                edge_scroll *= 2;</div>
<div class="line"><a id="l02499" name="l02499"></a><span class="lineno"> 2499</span>            }</div>
<div class="line"><a id="l02500" name="l02500"></a><span class="lineno"> 2500</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a id="l02501" name="l02501"></a><span class="lineno"> 2501</span>                <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> + edge_scroll );</div>
<div class="line"><a id="l02502" name="l02502"></a><span class="lineno"> 2502</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02503" name="l02503"></a><span class="lineno"> 2503</span>                <a class="code hl_function" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a> + edge_scroll );</div>
<div class="line"><a id="l02504" name="l02504"></a><span class="lineno"> 2504</span>            }</div>
<div class="line"><a id="l02505" name="l02505"></a><span class="lineno"> 2505</span>        }</div>
<div class="line"><a id="l02506" name="l02506"></a><span class="lineno"> 2506</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;tripoint&gt;</a> delta = <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#a3c252676d2f1f2d49a0ec9c7fc7aae2b">get_direction</a>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) ) {</div>
<div class="line"><a id="l02507" name="l02507"></a><span class="lineno"> 2507</span>        <span class="comment">// Shift view/cursor with directional keys</span></div>
<div class="line"><a id="l02508" name="l02508"></a><span class="lineno"> 2508</span>        shift_view_or_cursor( *delta );</div>
<div class="line"><a id="l02509" name="l02509"></a><span class="lineno"> 2509</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SELECT&quot;</span> &amp;&amp; ( mouse_pos = <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#a0937bc6e559b46c12c78aa65bea21942">get_coordinates</a>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;w_terrain ) ) ) {</div>
<div class="line"><a id="l02510" name="l02510"></a><span class="lineno"> 2510</span>        <span class="comment">// Set pos by clicking with mouse</span></div>
<div class="line"><a id="l02511" name="l02511"></a><span class="lineno"> 2511</span>        mouse_pos-&gt;z = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>().<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l02512" name="l02512"></a><span class="lineno"> 2512</span>        <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( *mouse_pos );</div>
<div class="line"><a id="l02513" name="l02513"></a><span class="lineno"> 2513</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_UP&quot;</span> || <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_DOWN&quot;</span> ) {</div>
<div class="line"><a id="l02514" name="l02514"></a><span class="lineno"> 2514</span>        <span class="comment">// Shift view/cursor up/down one z level</span></div>
<div class="line"><a id="l02515" name="l02515"></a><span class="lineno"> 2515</span>        <a class="code hl_struct" href="structtripoint.html">tripoint</a> delta = <a class="code hl_struct" href="structtripoint.html">tripoint</a>(</div>
<div class="line"><a id="l02516" name="l02516"></a><span class="lineno"> 2516</span>                             0,</div>
<div class="line"><a id="l02517" name="l02517"></a><span class="lineno"> 2517</span>                             0,</div>
<div class="line"><a id="l02518" name="l02518"></a><span class="lineno"> 2518</span>                             <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;LEVEL_UP&quot;</span> ? 1 : -1</div>
<div class="line"><a id="l02519" name="l02519"></a><span class="lineno"> 2519</span>                         );</div>
<div class="line"><a id="l02520" name="l02520"></a><span class="lineno"> 2520</span>        shift_view_or_cursor( delta );</div>
<div class="line"><a id="l02521" name="l02521"></a><span class="lineno"> 2521</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;NEXT_TARGET&quot;</span> ) {</div>
<div class="line"><a id="l02522" name="l02522"></a><span class="lineno"> 2522</span>        <a class="code hl_function" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a>( 1 );</div>
<div class="line"><a id="l02523" name="l02523"></a><span class="lineno"> 2523</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PREV_TARGET&quot;</span> ) {</div>
<div class="line"><a id="l02524" name="l02524"></a><span class="lineno"> 2524</span>        <a class="code hl_function" href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">cycle_targets</a>( -1 );</div>
<div class="line"><a id="l02525" name="l02525"></a><span class="lineno"> 2525</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CENTER&quot;</span> ) {</div>
<div class="line"><a id="l02526" name="l02526"></a><span class="lineno"> 2526</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> ) {</div>
<div class="line"><a id="l02527" name="l02527"></a><span class="lineno"> 2527</span>            <a class="code hl_function" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a>( <a class="code hl_variable" href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a> );</div>
<div class="line"><a id="l02528" name="l02528"></a><span class="lineno"> 2528</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02529" name="l02529"></a><span class="lineno"> 2529</span>            <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a id="l02530" name="l02530"></a><span class="lineno"> 2530</span>        }</div>
<div class="line"><a id="l02531" name="l02531"></a><span class="lineno"> 2531</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02532" name="l02532"></a><span class="lineno"> 2532</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02533" name="l02533"></a><span class="lineno"> 2533</span>    }</div>
<div class="line"><a id="l02534" name="l02534"></a><span class="lineno"> 2534</span> </div>
<div class="line"><a id="l02535" name="l02535"></a><span class="lineno"> 2535</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02536" name="l02536"></a><span class="lineno"> 2536</span>}</div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclassinput__context_html_a0937bc6e559b46c12c78aa65bea21942"><div class="ttname"><a href="classinput__context.html#a0937bc6e559b46c12c78aa65bea21942">input_context::get_coordinates</a></div><div class="ttdeci">cata::optional&lt; tripoint &gt; get_coordinates(const catacurses::window &amp;capture_win_)</div><div class="ttdoc">Get the coordinates associated with the last mouse click (if any).</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l01338">input.cpp:1338</a></div></div>
<div class="ttc" id="aclassinput__context_html_a3c252676d2f1f2d49a0ec9c7fc7aae2b"><div class="ttname"><a href="classinput__context.html#a3c252676d2f1f2d49a0ec9c7fc7aae2b">input_context::get_direction</a></div><div class="ttdeci">cata::optional&lt; tripoint &gt; get_direction(const std::string &amp;action) const</div><div class="ttdoc">Convert a direction action (UP, DOWN etc) to a delta vector.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00961">input.cpp:961</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a270f72c5bfef55a533d3cd9b3cf57ea0"><div class="ttname"><a href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">target_ui::snap_to_target</a></div><div class="ttdeci">bool snap_to_target</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00250">ranged.cpp:250</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_abcb5ba4fec5983a480a4f765da7abe23"><div class="ttname"><a href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">target_ui::set_view_offset</a></div><div class="ttdeci">void set_view_offset(const tripoint &amp;new_offset)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02905">ranged.cpp:2905</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af007dd5fcc266ee10d673299ca90c29c"><div class="ttname"><a href="classtarget__ui.html#af007dd5fcc266ee10d673299ca90c29c">target_ui::cycle_targets</a></div><div class="ttdeci">void cycle_targets(int direction)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02878">ranged.cpp:2878</a></div></div>
<div class="ttc" id="apoint_8h_html_a4b1a6bcaa42d2c06ecc3afc63305bfdf"><div class="ttname"><a href="point_8h.html#a4b1a6bcaa42d2c06ecc3afc63305bfdf">tripoint_zero</a></div><div class="ttdeci">static constexpr tripoint tripoint_zero</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00273">point.h:273</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dialogue_8h_source.html#l00036">action</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="ranged_8cpp_source.html#l02878">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="input_8cpp_source.html#l01338">input_context::get_coordinates()</a>, <a class="el" href="input_8cpp_source.html#l00961">input_context::get_direction()</a>, <a class="el" href="character_8cpp_source.html#l00576">Character::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02905">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l00253">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00250">snap_to_target</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="point_8h_source.html#l00273">tripoint_zero</a>, <a class="el" href="player_8h_source.html#l00365">player::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00186">you</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="af3857720f2059a0a2f23896bc7e808c7" name="af3857720f2059a0a2f23896bc7e808c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3857720f2059a0a2f23896bc7e808c7">&#9670;&nbsp;</a></span>init_window_and_input()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::init_window_and_input </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02397">2397</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span>{</div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"> 2399</span>    std::string display_type = get_option&lt;std::string&gt;( <span class="stringliteral">&quot;ACCURACY_DISPLAY&quot;</span> );</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>    std::string panel_type = <a class="code hl_function" href="classpanel__manager.html#a1196cd08699822653246ccafd856f72c">panel_manager::get_manager</a>().<a class="code hl_function" href="classpanel__manager.html#a3f6290efcd5bca21c3cf44762bca2a91">get_current_layout_id</a>();</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>    <a class="code hl_variable" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> = ( panel_type == <span class="stringliteral">&quot;compact&quot;</span> || panel_type == <span class="stringliteral">&quot;labels-narrow&quot;</span> );</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span> </div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>    <span class="keywordtype">int</span> top = 0;</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>    <span class="keywordtype">int</span> width;</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span>    <span class="keywordtype">int</span> height;</div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"> 2406</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a4b525b1e2a39f4748409b97e8984947b">narrow</a> ) {</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>        <span class="comment">// Narrow layout removes the list of controls. This allows us</span></div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>        <span class="comment">// to have small window size and not suffer from it.</span></div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>        width = 34;</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>        height = 24;</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>        <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span>        width = 55;</div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"> 2414</span>        <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> = <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 41;</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>        <a class="code hl_variable" href="classtarget__ui.html#a1e6534092ef1b213639575c914030eb1">tiny</a> = <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 28;</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>        <span class="keywordtype">bool</span> use_whole_sidebar = <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a> &lt; 32;</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>        <span class="keywordflow">if</span>( use_whole_sidebar ) {</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>            <span class="comment">// If we&#39;re extremely short on space, use the whole sidebar.</span></div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span>            height = <a class="code hl_variable" href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a>;</div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"> 2420</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a34b69263e28fa4472b51104ec1d2e6f0">compact</a> ) {</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>            <span class="comment">// Cover up more low-value ui elements if we&#39;re tight on space.</span></div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>            height = 28;</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>            <span class="comment">// Go all out</span></div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>            height = 32;</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>        }</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>    }</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span> </div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span>    <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> = <a class="code hl_function" href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a>( height, width, <a class="code hl_struct" href="structpoint.html">point</a>( <a class="code hl_variable" href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a> - width, top ) );</div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span> </div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a> = <a class="code hl_class" href="classinput__context.html">input_context</a>( <span class="stringliteral">&quot;TARGET&quot;</span> );</div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#aec8e809c4ee9afcde858709e07b5f64b">set_iso</a>( <span class="keyword">true</span> );</div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#a26d796fbe876b21a2d8b85eb5d59195f">register_directions</a>();</div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;COORDINATE&quot;</span> );</div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"> 2435</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SELECT&quot;</span> );</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;FIRE&quot;</span> );</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;NEXT_TARGET&quot;</span> );</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;PREV_TARGET&quot;</span> );</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;CENTER&quot;</span> );</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> );</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;HELP_KEYBINDINGS&quot;</span> );</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;QUIT&quot;</span> );</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;MOUSE_MOVE&quot;</span> );</div>
<div class="line"><a id="l02444" name="l02444"></a><span class="lineno"> 2444</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;zoom_out&quot;</span> );</div>
<div class="line"><a id="l02445" name="l02445"></a><span class="lineno"> 2445</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;zoom_in&quot;</span> );</div>
<div class="line"><a id="l02446" name="l02446"></a><span class="lineno"> 2446</span>    <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_MOVE_CURSOR_VIEW&quot;</span> );</div>
<div class="line"><a id="l02447" name="l02447"></a><span class="lineno"> 2447</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a45f98789c877903961a56a54b17d9e96">allow_zlevel_shift</a> ) {</div>
<div class="line"><a id="l02448" name="l02448"></a><span class="lineno"> 2448</span>        <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;LEVEL_UP&quot;</span> );</div>
<div class="line"><a id="l02449" name="l02449"></a><span class="lineno"> 2449</span>        <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;LEVEL_DOWN&quot;</span> );</div>
<div class="line"><a id="l02450" name="l02450"></a><span class="lineno"> 2450</span>    }</div>
<div class="line"><a id="l02451" name="l02451"></a><span class="lineno"> 2451</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l02452" name="l02452"></a><span class="lineno"> 2452</span>        <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> );</div>
<div class="line"><a id="l02453" name="l02453"></a><span class="lineno"> 2453</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> || <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <a class="code hl_function" href="ranged_8cpp.html#a30c9d25adcf2167a8bff0fe6ca21fdaf">flag_RELOAD_AND_SHOOT</a> ) ) {</div>
<div class="line"><a id="l02454" name="l02454"></a><span class="lineno"> 2454</span>            <span class="comment">// Turrets may support multiple ammo types.</span></div>
<div class="line"><a id="l02455" name="l02455"></a><span class="lineno"> 2455</span>            <span class="comment">// RELOAD_AND_SHOOT weapons use whatever ammo is favorite.</span></div>
<div class="line"><a id="l02456" name="l02456"></a><span class="lineno"> 2456</span>            <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> );</div>
<div class="line"><a id="l02457" name="l02457"></a><span class="lineno"> 2457</span>        }</div>
<div class="line"><a id="l02458" name="l02458"></a><span class="lineno"> 2458</span>    }</div>
<div class="line"><a id="l02459" name="l02459"></a><span class="lineno"> 2459</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l02460" name="l02460"></a><span class="lineno"> 2460</span>        <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;AIM&quot;</span> );</div>
<div class="line"><a id="l02461" name="l02461"></a><span class="lineno"> 2461</span> </div>
<div class="line"><a id="l02462" name="l02462"></a><span class="lineno"> 2462</span>        <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a> = <a class="code hl_function" href="namespaceranged.html#a751a40c271349c3ea821c5badd49e42f">ranged::get_aim_types</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> );</div>
<div class="line"><a id="l02463" name="l02463"></a><span class="lineno"> 2463</span>        <span class="keywordflow">for</span>( <a class="code hl_struct" href="structranged_1_1aim__type.html">ranged::aim_type</a> &amp;<a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> : <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a> ) {</div>
<div class="line"><a id="l02464" name="l02464"></a><span class="lineno"> 2464</span>            <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>.has_threshold ) {</div>
<div class="line"><a id="l02465" name="l02465"></a><span class="lineno"> 2465</span>                <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>.action );</div>
<div class="line"><a id="l02466" name="l02466"></a><span class="lineno"> 2466</span>            }</div>
<div class="line"><a id="l02467" name="l02467"></a><span class="lineno"> 2467</span>        }</div>
<div class="line"><a id="l02468" name="l02468"></a><span class="lineno"> 2468</span>        <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a> = <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.begin();</div>
<div class="line"><a id="l02469" name="l02469"></a><span class="lineno"> 2469</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> it = <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.begin(); it != <a class="code hl_variable" href="classtarget__ui.html#a5c3b0302e89b82b60f16c8ccf50ac29a">aim_types</a>.end(); ++it ) {</div>
<div class="line"><a id="l02470" name="l02470"></a><span class="lineno"> 2470</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classavatar.html#a98553758b9d158c58dd11c77d97ff55e">preferred_aiming_mode</a> == it-&gt;action ) {</div>
<div class="line"><a id="l02471" name="l02471"></a><span class="lineno"> 2471</span>                <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a> = it; <span class="comment">// default to persisted mode if possible</span></div>
<div class="line"><a id="l02472" name="l02472"></a><span class="lineno"> 2472</span>            }</div>
<div class="line"><a id="l02473" name="l02473"></a><span class="lineno"> 2473</span>        }</div>
<div class="line"><a id="l02474" name="l02474"></a><span class="lineno"> 2474</span>    }</div>
<div class="line"><a id="l02475" name="l02475"></a><span class="lineno"> 2475</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l02476" name="l02476"></a><span class="lineno"> 2476</span>        <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">register_action</a>( <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> );</div>
<div class="line"><a id="l02477" name="l02477"></a><span class="lineno"> 2477</span>    }</div>
<div class="line"><a id="l02478" name="l02478"></a><span class="lineno"> 2478</span>}</div>
<div class="ttc" id="aclassinput__context_html"><div class="ttname"><a href="classinput__context.html">input_context</a></div><div class="ttdoc">Represents a context in which a set of actions can be performed.</div><div class="ttdef"><b>Definition:</b> <a href="input_8h_source.html#l00385">input.h:386</a></div></div>
<div class="ttc" id="aclassinput__context_html_a26d796fbe876b21a2d8b85eb5d59195f"><div class="ttname"><a href="classinput__context.html#a26d796fbe876b21a2d8b85eb5d59195f">input_context::register_directions</a></div><div class="ttdeci">void register_directions()</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00915">input.cpp:915</a></div></div>
<div class="ttc" id="aclassinput__context_html_ac66ac124d5c0ac5637b5806f124d428f"><div class="ttname"><a href="classinput__context.html#ac66ac124d5c0ac5637b5806f124d428f">input_context::register_action</a></div><div class="ttdeci">void register_action(const std::string &amp;action_descriptor)</div><div class="ttdoc">Register an action with this input context.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00676">input.cpp:676</a></div></div>
<div class="ttc" id="aclassinput__context_html_aec8e809c4ee9afcde858709e07b5f64b"><div class="ttname"><a href="classinput__context.html#aec8e809c4ee9afcde858709e07b5f64b">input_context::set_iso</a></div><div class="ttdeci">void set_iso(bool mode=true)</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l01429">input.cpp:1429</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05241">item.cpp:5241</a></div></div>
<div class="ttc" id="aclasspanel__manager_html_a1196cd08699822653246ccafd856f72c"><div class="ttname"><a href="classpanel__manager.html#a1196cd08699822653246ccafd856f72c">panel_manager::get_manager</a></div><div class="ttdeci">static panel_manager &amp; get_manager()</div><div class="ttdef"><b>Definition:</b> <a href="panels_8h_source.html#l00072">panels.h:72</a></div></div>
<div class="ttc" id="aclasspanel__manager_html_a3f6290efcd5bca21c3cf44762bca2a91"><div class="ttname"><a href="classpanel__manager.html#a3f6290efcd5bca21c3cf44762bca2a91">panel_manager::get_current_layout_id</a></div><div class="ttdeci">std::string get_current_layout_id() const</div><div class="ttdef"><b>Definition:</b> <a href="panels_8cpp_source.html#l02170">panels.cpp:2170</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a45f98789c877903961a56a54b17d9e96"><div class="ttname"><a href="classtarget__ui.html#a45f98789c877903961a56a54b17d9e96">target_ui::allow_zlevel_shift</a></div><div class="ttdeci">bool allow_zlevel_shift</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00247">ranged.cpp:247</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_a576fd20080b8f49e27acf97af45b374b"><div class="ttname"><a href="namespacecatacurses.html#a576fd20080b8f49e27acf97af45b374b">catacurses::newwin</a></div><div class="ttdeci">window newwin(int nlines, int ncols, const point &amp;begin)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00034">ncurses_def.cpp:34</a></div></div>
<div class="ttc" id="anamespaceranged_html_a751a40c271349c3ea821c5badd49e42f"><div class="ttname"><a href="namespaceranged.html#a751a40c271349c3ea821c5badd49e42f">ranged::get_aim_types</a></div><div class="ttdeci">std::vector&lt; aim_type &gt; get_aim_types(const Character &amp;who, const item &amp;gun)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01632">ranged.cpp:1632</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a000abea6447dfafd5f9b787aa6753609"><div class="ttname"><a href="output_8cpp.html#a000abea6447dfafd5f9b787aa6753609">TERMX</a></div><div class="ttdeci">int TERMX</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00047">output.cpp:47</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_a567a63be8cb70cc3eb47bf8affced8e5"><div class="ttname"><a href="output_8cpp.html#a567a63be8cb70cc3eb47bf8affced8e5">TERMY</a></div><div class="ttdeci">int TERMY</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00048">output.cpp:48</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a30c9d25adcf2167a8bff0fe6ca21fdaf"><div class="ttname"><a href="ranged_8cpp.html#a30c9d25adcf2167a8bff0fe6ca21fdaf">flag_RELOAD_AND_SHOOT</a></div><div class="ttdeci">static const std::string flag_RELOAD_AND_SHOOT(&quot;RELOAD_AND_SHOOT&quot;)</div></div>
<div class="ttc" id="astructranged_1_1aim__type_html"><div class="ttname"><a href="structranged_1_1aim__type.html">ranged::aim_type</a></div><div class="ttdef"><b>Definition:</b> <a href="ranged_8h_source.html#l00135">ranged.h:135</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00273">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l00271">aim_types</a>, <a class="el" href="ranged_8cpp_source.html#l00247">allow_zlevel_shift</a>, <a class="el" href="ranged_8cpp_source.html#l00256">compact</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp.html#a30c9d25adcf2167a8bff0fe6ca21fdaf">flag_RELOAD_AND_SHOOT()</a>, <a class="el" href="ranged_8cpp_source.html#l01632">ranged::get_aim_types()</a>, <a class="el" href="panels_8cpp_source.html#l02170">panel_manager::get_current_layout_id()</a>, <a class="el" href="panels_8h_source.html#l00072">panel_manager::get_manager()</a>, <a class="el" href="item_8cpp_source.html#l05241">item::has_flag()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00261">narrow</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00034">catacurses::newwin()</a>, <a class="el" href="avatar_8h_source.html#l00191">avatar::preferred_aiming_mode</a>, <a class="el" href="input_8cpp_source.html#l00676">input_context::register_action()</a>, <a class="el" href="input_8cpp_source.html#l00915">input_context::register_directions()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="input_8cpp_source.html#l01429">input_context::set_iso()</a>, <a class="el" href="output_8cpp_source.html#l00047">TERMX</a>, <a class="el" href="output_8cpp_source.html#l00048">TERMY</a>, <a class="el" href="ranged_8cpp_source.html#l00258">tiny</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ac352f6aae1cb28945f8115b76fea2eb6" name="ac352f6aae1cb28945f8115b76fea2eb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac352f6aae1cb28945f8115b76fea2eb6">&#9670;&nbsp;</a></span>list_friendlies_in_lof()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a>&lt; <a class="el" href="classCreature.html">Creature</a> &gt; &gt; target_ui::list_friendlies_in_lof </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02843">2843</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02844" name="l02844"></a><span class="lineno"> 2844</span>{</div>
<div class="line"><a id="l02845" name="l02845"></a><span class="lineno"> 2845</span>    std::vector&lt;weak_ptr_fast&lt;Creature&gt;&gt; <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l02846" name="l02846"></a><span class="lineno"> 2846</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a id="l02847" name="l02847"></a><span class="lineno"> 2847</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Not implemented&quot;</span> );</div>
<div class="line"><a id="l02848" name="l02848"></a><span class="lineno"> 2848</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l02849" name="l02849"></a><span class="lineno"> 2849</span>    }</div>
<div class="line"><a id="l02850" name="l02850"></a><span class="lineno"> 2850</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;p : <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> ) {</div>
<div class="line"><a id="l02851" name="l02851"></a><span class="lineno"> 2851</span>        <span class="keywordflow">if</span>( p != <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> &amp;&amp; p != <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a id="l02852" name="l02852"></a><span class="lineno"> 2852</span>            <a class="code hl_class" href="classCreature.html">Creature</a> *cr = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( p, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02853" name="l02853"></a><span class="lineno"> 2853</span>            <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">sees</a>( *cr ) ) {</div>
<div class="line"><a id="l02854" name="l02854"></a><span class="lineno"> 2854</span>                <a class="code hl_enumeration" href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a> <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> = cr-&gt;<a class="code hl_function" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">attitude_to</a>( *this-&gt;<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a id="l02855" name="l02855"></a><span class="lineno"> 2855</span>                <span class="keywordflow">if</span>(</div>
<div class="line"><a id="l02856" name="l02856"></a><span class="lineno"> 2856</span>                    ( cr-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> != <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217a8972817fc4b645a5fee948a7ab4d3cc2">Creature::A_HOSTILE</a> ) ||</div>
<div class="line"><a id="l02857" name="l02857"></a><span class="lineno"> 2857</span>                    ( !cr-&gt;<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code hl_variable" href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a> == <a class="code hl_enumvalue" href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a> )</div>
<div class="line"><a id="l02858" name="l02858"></a><span class="lineno"> 2858</span>                ) {</div>
<div class="line"><a id="l02859" name="l02859"></a><span class="lineno"> 2859</span>                    <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>.push_back( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( *cr ) );</div>
<div class="line"><a id="l02860" name="l02860"></a><span class="lineno"> 2860</span>                }</div>
<div class="line"><a id="l02861" name="l02861"></a><span class="lineno"> 2861</span>            }</div>
<div class="line"><a id="l02862" name="l02862"></a><span class="lineno"> 2862</span>        }</div>
<div class="line"><a id="l02863" name="l02863"></a><span class="lineno"> 2863</span>    }</div>
<div class="line"><a id="l02864" name="l02864"></a><span class="lineno"> 2864</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">ret</a>;</div>
<div class="line"><a id="l02865" name="l02865"></a><span class="lineno"> 2865</span>}</div>
<div class="ttc" id="aclassCharacter_html_aba9bd7517b334e6ed4149889ed32377a"><div class="ttname"><a href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_player=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10168">character.cpp:10168</a></div></div>
<div class="ttc" id="aclassCreature_html_a5698402eb4d7bbb013213f11f5768c92"><div class="ttname"><a href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to</a></div><div class="ttdeci">virtual Attitude attitude_to(const Creature &amp;other) const =0</div><div class="ttdoc">Attitude (of this creature) towards another creature.</div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217">Creature::Attitude</a></div><div class="ttdeci">Attitude</div><div class="ttdoc">Simplified attitude towards any creature: hostile - hate, want to kill, etc.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00166">creature.h:166</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217a8972817fc4b645a5fee948a7ab4d3cc2"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217a8972817fc4b645a5fee948a7ab4d3cc2">Creature::A_HOSTILE</a></div><div class="ttdeci">@ A_HOSTILE</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00167">creature.h:167</a></div></div>
<div class="ttc" id="aclassCreature_html_a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea"><div class="ttname"><a href="classCreature.html#a8a475630b3289c468bd06cf114008217ac45ee12dee5d3dc56de7fe86e4484bea">Creature::A_FRIENDLY</a></div><div class="ttdeci">@ A_FRIENDLY</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00169">creature.h:169</a></div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="amagic_8cpp_html_a188caae18b60b66f9f44214c7e28ac1f"><div class="ttname"><a href="magic_8cpp.html#a188caae18b60b66f9f44214c7e28ac1f">a</a></div><div class="ttdeci">constexpr double a</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01030">magic.cpp:1030</a></div></div>
<div class="ttc" id="anamespacecata_1_1hash64__detail_html_a5ca825db6fd06946302c60daa97333e4"><div class="ttname"><a href="namespacecata_1_1hash64__detail.html#a5ca825db6fd06946302c60daa97333e4">cata::hash64_detail::ret</a></div><div class="ttdeci">T ret</div><div class="ttdef"><b>Definition:</b> <a href="hash__utils_8h_source.html#l00097">hash_utils.h:97</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l01030">a</a>, <a class="el" href="creature_8h_source.html#l00169">Creature::A_FRIENDLY</a>, <a class="el" href="creature_8h_source.html#l00167">Creature::A_HOSTILE</a>, <a class="el" href="classCreature.html#a5698402eb4d7bbb013213f11f5768c92">Creature::attitude_to()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="creature_8h_source.html#l00098">Creature::is_npc()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="hash__utils_8h_source.html#l00097">cata::hash64_detail::ret</a>, <a class="el" href="character_8cpp_source.html#l10168">Character::sees()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00234">traj</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02805">prompt_friendlies_in_lof()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="aaf459ec49ad96c44eddeb94d0c22fb36" name="aaf459ec49ad96c44eddeb94d0c22fb36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf459ec49ad96c44eddeb94d0c22fb36">&#9670;&nbsp;</a></span>on_range_ammo_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::on_range_ammo_changed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02670">2670</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02671" name="l02671"></a><span class="lineno"> 2671</span>{</div>
<div class="line"><a id="l02672" name="l02672"></a><span class="lineno"> 2672</span>    <a class="code hl_function" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a>();</div>
<div class="line"><a id="l02673" name="l02673"></a><span class="lineno"> 2673</span>    <a class="code hl_function" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a>();</div>
<div class="line"><a id="l02674" name="l02674"></a><span class="lineno"> 2674</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_ad1e40f0212d403109c8969d7308e493f"><div class="ttname"><a href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">target_ui::update_status</a></div><div class="ttdeci">void update_status()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02752">ranged.cpp:2752</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af17fecf6fc24afc0a1af11ee1447b39a"><div class="ttname"><a href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">target_ui::update_target_list</a></div><div class="ttdeci">void update_target_list()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02676">ranged.cpp:2676</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, and <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>.</p>

</div>
</div>
<a id="a9d84b28ee34fdefd76ae987c95a29600" name="a9d84b28ee34fdefd76ae987c95a29600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d84b28ee34fdefd76ae987c95a29600">&#9670;&nbsp;</a></span>on_target_accepted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::on_target_accepted </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>harmful</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03647">3647</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03648" name="l03648"></a><span class="lineno"> 3648</span>{</div>
<div class="line"><a id="l03649" name="l03649"></a><span class="lineno"> 3649</span>    <span class="comment">// TODO: all of this should be moved into on-hit code</span></div>
<div class="line"><a id="l03650" name="l03650"></a><span class="lineno"> 3650</span>    <span class="keyword">const</span> <span class="keyword">auto</span> lt_ptr = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a>.lock();</div>
<div class="line"><a id="l03651" name="l03651"></a><span class="lineno"> 3651</span>    <span class="keywordflow">if</span>( <a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">const</span> guy = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classnpc.html">npc</a> *<span class="keyword">&gt;</span>( lt_ptr.get() ) ) {</div>
<div class="line"><a id="l03652" name="l03652"></a><span class="lineno"> 3652</span>        <span class="keywordflow">if</span>( harmful ) {</div>
<div class="line"><a id="l03653" name="l03653"></a><span class="lineno"> 3653</span>            <span class="keywordflow">if</span>( !guy-&gt;guaranteed_hostile() ) {</div>
<div class="line"><a id="l03654" name="l03654"></a><span class="lineno"> 3654</span>                <span class="comment">// TODO: get rid of this. Or combine it with effect_hit_by_player</span></div>
<div class="line"><a id="l03655" name="l03655"></a><span class="lineno"> 3655</span>                guy-&gt;hit_by_player = <span class="keyword">true</span>; <span class="comment">// used for morale penalty</span></div>
<div class="line"><a id="l03656" name="l03656"></a><span class="lineno"> 3656</span>            }</div>
<div class="line"><a id="l03657" name="l03657"></a><span class="lineno"> 3657</span>            guy-&gt;make_angry();</div>
<div class="line"><a id="l03658" name="l03658"></a><span class="lineno"> 3658</span>        }</div>
<div class="line"><a id="l03659" name="l03659"></a><span class="lineno"> 3659</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">const</span> mon = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="classmonster.html">monster</a> *<span class="keyword">&gt;</span>( lt_ptr.get() ) ) {</div>
<div class="line"><a id="l03660" name="l03660"></a><span class="lineno"> 3660</span>        mon-&gt;add_effect( <a class="code hl_variable" href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a>, 10_minutes );</div>
<div class="line"><a id="l03661" name="l03661"></a><span class="lineno"> 3661</span>    }</div>
<div class="line"><a id="l03662" name="l03662"></a><span class="lineno"> 3662</span>}</div>
<div class="ttc" id="aclassmonster_html"><div class="ttname"><a href="classmonster.html">monster</a></div><div class="ttdef"><b>Definition:</b> <a href="monster_8h_source.html#l00084">monster.h:85</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a4de2ef4c2e145815427b09adfaa0def5"><div class="ttname"><a href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a></div><div class="ttdeci">static const efftype_id effect_hit_by_player(&quot;hit_by_player&quot;)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp.html#a4de2ef4c2e145815427b09adfaa0def5">effect_hit_by_player</a>, <a class="el" href="player_8h_source.html#l00373">player::last_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a86966228ce7aad77c233058bf1285962" name="a86966228ce7aad77c233058bf1285962"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86966228ce7aad77c233058bf1285962">&#9670;&nbsp;</a></span>panel_cursor_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_cursor_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03427">3427</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03428" name="l03428"></a><span class="lineno"> 3428</span>{</div>
<div class="line"><a id="l03429" name="l03429"></a><span class="lineno"> 3429</span>    std::string label_range;</div>
<div class="line"><a id="l03430" name="l03430"></a><span class="lineno"> 3430</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> == <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a id="l03431" name="l03431"></a><span class="lineno"> 3431</span>        label_range = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Range: %d&quot;</span>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a id="l03432" name="l03432"></a><span class="lineno"> 3432</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03433" name="l03433"></a><span class="lineno"> 3433</span>        label_range = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;Range: %d/%d&quot;</span>, <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ), <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a id="l03434" name="l03434"></a><span class="lineno"> 3434</span>    }</div>
<div class="line"><a id="l03435" name="l03435"></a><span class="lineno"> 3435</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l03436" name="l03436"></a><span class="lineno"> 3436</span>        <span class="comment">// Since each turret has its own range, highlighting cursor</span></div>
<div class="line"><a id="l03437" name="l03437"></a><span class="lineno"> 3437</span>        <span class="comment">// range with red would be misleading</span></div>
<div class="line"><a id="l03438" name="l03438"></a><span class="lineno"> 3438</span>        label_range = <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( label_range, <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> );</div>
<div class="line"><a id="l03439" name="l03439"></a><span class="lineno"> 3439</span>    }</div>
<div class="line"><a id="l03440" name="l03440"></a><span class="lineno"> 3440</span> </div>
<div class="line"><a id="l03441" name="l03441"></a><span class="lineno"> 3441</span>    std::vector&lt;std::string&gt; labels;</div>
<div class="line"><a id="l03442" name="l03442"></a><span class="lineno"> 3442</span>    labels.push_back( label_range );</div>
<div class="line"><a id="l03443" name="l03443"></a><span class="lineno"> 3443</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a45f98789c877903961a56a54b17d9e96">allow_zlevel_shift</a> ) {</div>
<div class="line"><a id="l03444" name="l03444"></a><span class="lineno"> 3444</span>        labels.push_back( <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Elevation: %d&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> ) );</div>
<div class="line"><a id="l03445" name="l03445"></a><span class="lineno"> 3445</span>    }</div>
<div class="line"><a id="l03446" name="l03446"></a><span class="lineno"> 3446</span>    labels.push_back( <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Targets: %d&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.size() ) );</div>
<div class="line"><a id="l03447" name="l03447"></a><span class="lineno"> 3447</span> </div>
<div class="line"><a id="l03448" name="l03448"></a><span class="lineno"> 3448</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> col = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03449" name="l03449"></a><span class="lineno"> 3449</span>    <span class="keywordtype">int</span> width = <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l03450" name="l03450"></a><span class="lineno"> 3450</span>    <span class="keywordtype">int</span> text_x = 1;</div>
<div class="line"><a id="l03451" name="l03451"></a><span class="lineno"> 3451</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> std::string &amp;s : labels ) {</div>
<div class="line"><a id="l03452" name="l03452"></a><span class="lineno"> 3452</span>        <span class="keywordtype">int</span> x_left = width - text_x - 1;</div>
<div class="line"><a id="l03453" name="l03453"></a><span class="lineno"> 3453</span>        <span class="keywordtype">int</span> len = <a class="code hl_function" href="catacharset_8cpp.html#a7616a48a4b48437c60b6683439a8f3e2">utf8_width</a>( s, <span class="keyword">true</span> );</div>
<div class="line"><a id="l03454" name="l03454"></a><span class="lineno"> 3454</span>        <span class="keywordflow">if</span>( len &gt; x_left ) {</div>
<div class="line"><a id="l03455" name="l03455"></a><span class="lineno"> 3455</span>            text_x = 1;</div>
<div class="line"><a id="l03456" name="l03456"></a><span class="lineno"> 3456</span>            text_y++;</div>
<div class="line"><a id="l03457" name="l03457"></a><span class="lineno"> 3457</span>        }</div>
<div class="line"><a id="l03458" name="l03458"></a><span class="lineno"> 3458</span>        <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( text_x, text_y ), col, col, s );</div>
<div class="line"><a id="l03459" name="l03459"></a><span class="lineno"> 3459</span>        text_x += len + 1; <span class="comment">// 1 for space</span></div>
<div class="line"><a id="l03460" name="l03460"></a><span class="lineno"> 3460</span>    }</div>
<div class="line"><a id="l03461" name="l03461"></a><span class="lineno"> 3461</span>    text_y++;</div>
<div class="line"><a id="l03462" name="l03462"></a><span class="lineno"> 3462</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">target_ui::Status::OutOfRange</a></div><div class="ttdeci">@ OutOfRange</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ranged_8cpp_source.html#l00247">allow_zlevel_shift</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00244">targets</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="catacharset_8cpp_source.html#l00142">utf8_width()</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="aa5c1e8816cd2a0f9c10e3ea2095eefe1" name="aa5c1e8816cd2a0f9c10e3ea2095eefe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5c1e8816cd2a0f9c10e3ea2095eefe1">&#9670;&nbsp;</a></span>panel_fire_mode_aim()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_fire_mode_aim </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03600">3600</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03601" name="l03601"></a><span class="lineno"> 3601</span>{</div>
<div class="line"><a id="l03602" name="l03602"></a><span class="lineno"> 3602</span>    <span class="comment">// TODO: saving &amp; restoring pc.recoil may actually be unnecessary</span></div>
<div class="line"><a id="l03603" name="l03603"></a><span class="lineno"> 3603</span>    <span class="keywordtype">double</span> saved_pc_recoil = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a>;</div>
<div class="line"><a id="l03604" name="l03604"></a><span class="lineno"> 3604</span>    <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a>;</div>
<div class="line"><a id="l03605" name="l03605"></a><span class="lineno"> 3605</span> </div>
<div class="line"><a id="l03606" name="l03606"></a><span class="lineno"> 3606</span>    <span class="keywordtype">double</span> <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a>;</div>
<div class="line"><a id="l03607" name="l03607"></a><span class="lineno"> 3607</span>    <span class="keywordtype">int</span> predicted_delay = 0;</div>
<div class="line"><a id="l03608" name="l03608"></a><span class="lineno"> 3608</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;has_threshold &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;threshold &lt; <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> ) {</div>
<div class="line"><a id="l03609" name="l03609"></a><span class="lineno"> 3609</span>        <span class="keywordflow">do</span> {</div>
<div class="line"><a id="l03610" name="l03610"></a><span class="lineno"> 3610</span>            <span class="keyword">const</span> <span class="keywordtype">double</span> aim_amount = <a class="code hl_function" href="namespaceranged.html#aee24b0f617e2ee224a92d1c5422ae306">ranged::aim_per_move</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>, <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> );</div>
<div class="line"><a id="l03611" name="l03611"></a><span class="lineno"> 3611</span>            <span class="keywordflow">if</span>( aim_amount &gt; 0 ) {</div>
<div class="line"><a id="l03612" name="l03612"></a><span class="lineno"> 3612</span>                predicted_delay++;</div>
<div class="line"><a id="l03613" name="l03613"></a><span class="lineno"> 3613</span>                <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = std::max( <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> - aim_amount, 0.0 );</div>
<div class="line"><a id="l03614" name="l03614"></a><span class="lineno"> 3614</span>            }</div>
<div class="line"><a id="l03615" name="l03615"></a><span class="lineno"> 3615</span>        } <span class="keywordflow">while</span>( <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> &gt; <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;threshold &amp;&amp;</div>
<div class="line"><a id="l03616" name="l03616"></a><span class="lineno"> 3616</span>                 <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> - <a class="code hl_variable" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> &gt; 0 );</div>
<div class="line"><a id="l03617" name="l03617"></a><span class="lineno"> 3617</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03618" name="l03618"></a><span class="lineno"> 3618</span>        <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a>;</div>
<div class="line"><a id="l03619" name="l03619"></a><span class="lineno"> 3619</span>    }</div>
<div class="line"><a id="l03620" name="l03620"></a><span class="lineno"> 3620</span> </div>
<div class="line"><a id="l03621" name="l03621"></a><span class="lineno"> 3621</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> target_size = <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ? <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code hl_function" href="classCreature.html#a1c8ea56d06ff96a720201c46a40969aa">ranged_target_size</a>() :</div>
<div class="line"><a id="l03622" name="l03622"></a><span class="lineno"> 3622</span>                               <a class="code hl_function" href="ranged_8cpp.html#a463802d3c2fe3f6d4ba8cc36a77912c7">occupied_tile_fraction</a>( <a class="code hl_enumvalue" href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592aaef7580aead8b8a18bc50cb6c1f98b31">m_size::MS_MEDIUM</a> );</div>
<div class="line"><a id="l03623" name="l03623"></a><span class="lineno"> 3623</span> </div>
<div class="line"><a id="l03624" name="l03624"></a><span class="lineno"> 3624</span>    text_y = <a class="code hl_function" href="ranged_8cpp.html#a6833bfc5a59f5fc30d45fad5f098e9d3">print_aim</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>, *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>(),</div>
<div class="line"><a id="l03625" name="l03625"></a><span class="lineno"> 3625</span>                        target_size, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> );</div>
<div class="line"><a id="l03626" name="l03626"></a><span class="lineno"> 3626</span> </div>
<div class="line"><a id="l03627" name="l03627"></a><span class="lineno"> 3627</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;has_threshold ) {</div>
<div class="line"><a id="l03628" name="l03628"></a><span class="lineno"> 3628</span>        <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;%s Delay: %i&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;name,</div>
<div class="line"><a id="l03629" name="l03629"></a><span class="lineno"> 3629</span>                   predicted_delay );</div>
<div class="line"><a id="l03630" name="l03630"></a><span class="lineno"> 3630</span>    }</div>
<div class="line"><a id="l03631" name="l03631"></a><span class="lineno"> 3631</span> </div>
<div class="line"><a id="l03632" name="l03632"></a><span class="lineno"> 3632</span>    <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = saved_pc_recoil;</div>
<div class="line"><a id="l03633" name="l03633"></a><span class="lineno"> 3633</span>}</div>
<div class="ttc" id="aclassCreature_html_a1c8ea56d06ff96a720201c46a40969aa"><div class="ttname"><a href="classCreature.html#a1c8ea56d06ff96a720201c46a40969aa">Creature::ranged_target_size</a></div><div class="ttdeci">double ranged_target_size() const</div><div class="ttdoc">Size of the target this creature presents to ranged weapons.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00546">ranged.cpp:546</a></div></div>
<div class="ttc" id="acreature_8h_html_a94151e401c177b20ea9b8bcadf74f592aaef7580aead8b8a18bc50cb6c1f98b31"><div class="ttname"><a href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592aaef7580aead8b8a18bc50cb6c1f98b31">MS_MEDIUM</a></div><div class="ttdeci">@ MS_MEDIUM</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00060">creature.h:60</a></div></div>
<div class="ttc" id="anamespacecatacurses_html_abde9c157650e464f0a27441d81c84644"><div class="ttname"><a href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">catacurses::mvwprintw</a></div><div class="ttdeci">void mvwprintw(const window &amp;win, const point &amp;p, const std::string &amp;text)</div><div class="ttdef"><b>Definition:</b> <a href="ncurses__def_8cpp_source.html#l00103">ncurses_def.cpp:103</a></div></div>
<div class="ttc" id="anamespaceranged_html_aee24b0f617e2ee224a92d1c5422ae306"><div class="ttname"><a href="namespaceranged.html#aee24b0f617e2ee224a92d1c5422ae306">ranged::aim_per_move</a></div><div class="ttdeci">double aim_per_move(const Character &amp;who, const item &amp;gun, double recoil)</div><div class="ttdoc">Calculates aim improvement per move spent aiming at a given.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03874">ranged.cpp:3874</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a463802d3c2fe3f6d4ba8cc36a77912c7"><div class="ttname"><a href="ranged_8cpp.html#a463802d3c2fe3f6d4ba8cc36a77912c7">occupied_tile_fraction</a></div><div class="ttdeci">static double occupied_tile_fraction(m_size target_size)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00526">ranged.cpp:526</a></div></div>
<div class="ttc" id="aranged_8cpp_html_a6833bfc5a59f5fc30d45fad5f098e9d3"><div class="ttname"><a href="ranged_8cpp.html#a6833bfc5a59f5fc30d45fad5f098e9d3">print_aim</a></div><div class="ttdeci">static int print_aim(const Character &amp;p, const catacurses::window &amp;w, int line_number, input_context &amp;ctxt, const item &amp;weapon, const double target_size, const tripoint &amp;pos, double predicted_recoil)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01548">ranged.cpp:1548</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ranged_8cpp_source.html#l00273">aim_mode</a>, <a class="el" href="ranged_8cpp_source.html#l03874">ranged::aim_per_move()</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="item_8cpp_source.html#l07792">item::gun_current_mode()</a>, <a class="el" href="creature_8h_source.html#l00060">MS_MEDIUM</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00103">catacurses::mvwprintw()</a>, <a class="el" href="ranged_8cpp_source.html#l00526">occupied_tile_fraction()</a>, <a class="el" href="ranged_8cpp_source.html#l00279">predicted_recoil</a>, <a class="el" href="ranged_8cpp_source.html#l01548">print_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l00546">Creature::ranged_target_size()</a>, <a class="el" href="character_8h_source.html#l00555">Character::recoil</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l00269">sight_dispersion</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a545580558b81b3d44c43b52fc5ff1b77" name="a545580558b81b3d44c43b52fc5ff1b77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a545580558b81b3d44c43b52fc5ff1b77">&#9670;&nbsp;</a></span>panel_gun_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_gun_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03464">3464</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03465" name="l03465"></a><span class="lineno"> 3465</span>{</div>
<div class="line"><a id="l03466" name="l03466"></a><span class="lineno"> 3466</span>    <a class="code hl_class" href="classgun__mode.html">gun_mode</a> m = <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>();</div>
<div class="line"><a id="l03467" name="l03467"></a><span class="lineno"> 3467</span>    std::string mode_name = m.<a class="code hl_function" href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">tname</a>();</div>
<div class="line"><a id="l03468" name="l03468"></a><span class="lineno"> 3468</span>    std::string gunmod_name;</div>
<div class="line"><a id="l03469" name="l03469"></a><span class="lineno"> 3469</span>    <span class="keywordflow">if</span>( m.<a class="code hl_variable" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a> != <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> ) {</div>
<div class="line"><a id="l03470" name="l03470"></a><span class="lineno"> 3470</span>        <span class="comment">// Gun mode comes from a gunmod, not base gun. Add gunmod&#39;s name</span></div>
<div class="line"><a id="l03471" name="l03471"></a><span class="lineno"> 3471</span>        gunmod_name = m-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() + <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a id="l03472" name="l03472"></a><span class="lineno"> 3472</span>    }</div>
<div class="line"><a id="l03473" name="l03473"></a><span class="lineno"> 3473</span>    std::string str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Firing mode: &lt;color_cyan&gt;%s%s (%d)&lt;/color&gt;&quot;</span> ),</div>
<div class="line"><a id="l03474" name="l03474"></a><span class="lineno"> 3474</span>                                     gunmod_name, mode_name, m.<a class="code hl_variable" href="classgun__mode.html#a0b58020ecc1a637010d13f0ee7c40ef8">qty</a></div>
<div class="line"><a id="l03475" name="l03475"></a><span class="lineno"> 3475</span>                                   );</div>
<div class="line"><a id="l03476" name="l03476"></a><span class="lineno"> 3476</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> clr = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03477" name="l03477"></a><span class="lineno"> 3477</span>    <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a id="l03478" name="l03478"></a><span class="lineno"> 3478</span> </div>
<div class="line"><a id="l03479" name="l03479"></a><span class="lineno"> 3479</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> ) {</div>
<div class="line"><a id="l03480" name="l03480"></a><span class="lineno"> 3480</span>        <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;OUT OF AMMO&quot;</span> ) );</div>
<div class="line"><a id="l03481" name="l03481"></a><span class="lineno"> 3481</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> ) {</div>
<div class="line"><a id="l03482" name="l03482"></a><span class="lineno"> 3482</span>        str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( m-&gt;<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>() ? <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Ammo: %s (%d/%d)&quot;</span> ) : <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Ammo: %s&quot;</span> ),</div>
<div class="line"><a id="l03483" name="l03483"></a><span class="lineno"> 3483</span>                             <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code hl_function" href="structitype.html#ad35fbe0013544c1c396944b20b264421">nname</a>( std::max( m-&gt;<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>(), 1 ) ), <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a>-&gt;<a class="code hl_variable" href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">color</a> ), m-&gt;<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>(),</div>
<div class="line"><a id="l03484" name="l03484"></a><span class="lineno"> 3484</span>                             m-&gt;<a class="code hl_function" href="classitem.html#a5d89f04a2a08245ec865db0865e8a6c1">ammo_capacity</a>() );</div>
<div class="line"><a id="l03485" name="l03485"></a><span class="lineno"> 3485</span>        <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a id="l03486" name="l03486"></a><span class="lineno"> 3486</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03487" name="l03487"></a><span class="lineno"> 3487</span>        <span class="comment">// Weapon doesn&#39;t use ammunition</span></div>
<div class="line"><a id="l03488" name="l03488"></a><span class="lineno"> 3488</span>        text_y++;</div>
<div class="line"><a id="l03489" name="l03489"></a><span class="lineno"> 3489</span>    }</div>
<div class="line"><a id="l03490" name="l03490"></a><span class="lineno"> 3490</span>}</div>
<div class="ttc" id="aclassgun__mode_html"><div class="ttname"><a href="classgun__mode.html">gun_mode</a></div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00012">gun_mode.h:13</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a0b58020ecc1a637010d13f0ee7c40ef8"><div class="ttname"><a href="classgun__mode.html#a0b58020ecc1a637010d13f0ee7c40ef8">gun_mode::qty</a></div><div class="ttdeci">int qty</div><div class="ttdoc">burst size for is_gun() firearms, or melee range for is_melee() weapons</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00021">gun_mode.h:21</a></div></div>
<div class="ttc" id="aclassgun__mode_html_a583a586a605731dbd36af20553c0e51d"><div class="ttname"><a href="classgun__mode.html#a583a586a605731dbd36af20553c0e51d">gun_mode::tname</a></div><div class="ttdeci">std::string tname() const</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00059">gun_mode.h:59</a></div></div>
<div class="ttc" id="aclassgun__mode_html_aadaa36507ace08fc621348ae1052647e"><div class="ttname"><a href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">gun_mode::target</a></div><div class="ttdeci">item * target</div><div class="ttdoc">pointer to item providing this mode - base gun or attached gunmod</div><div class="ttdef"><b>Definition:</b> <a href="gun__mode_8h_source.html#l00019">gun_mode.h:19</a></div></div>
<div class="ttc" id="aclassitem_html_a26c025fd4909bd31c8e91ed87905507b"><div class="ttname"><a href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining() const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07281">item.cpp:7281</a></div></div>
<div class="ttc" id="aclassitem_html_a5d89f04a2a08245ec865db0865e8a6c1"><div class="ttname"><a href="classitem.html#a5d89f04a2a08245ec865db0865e8a6c1">item::ammo_capacity</a></div><div class="ttdeci">int ammo_capacity() const</div><div class="ttdoc">Maximum quantity of ammunition loadable for tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07308">item.cpp:7308</a></div></div>
<div class="ttc" id="aclassitem_html_a7e78e26dcf9b357cda769c3ca2938eda"><div class="ttname"><a href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">item::tname</a></div><div class="ttdeci">std::string tname(unsigned int quantity=1, bool with_prefix=true, unsigned int truncate=0) const</div><div class="ttdoc">Return the (translated) item name.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l04478">item.cpp:4478</a></div></div>
<div class="ttc" id="astructitype_html_ad35fbe0013544c1c396944b20b264421"><div class="ttname"><a href="structitype.html#ad35fbe0013544c1c396944b20b264421">itype::nname</a></div><div class="ttdeci">std::string nname(unsigned int quantity) const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8cpp_source.html#l00046">itype.cpp:46</a></div></div>
<div class="ttc" id="astructitype_html_af4d6fc9396d1e09f23d2008f974ac757"><div class="ttname"><a href="structitype.html#af4d6fc9396d1e09f23d2008f974ac757">itype::color</a></div><div class="ttdeci">nc_color color</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01008">itype.h:1008</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="ranged_8cpp_source.html#l00232">ammo</a>, <a class="el" href="item_8cpp_source.html#l07308">item::ammo_capacity()</a>, <a class="el" href="item_8cpp_source.html#l07281">item::ammo_remaining()</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="itype_8h_source.html#l01008">itype::color</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="item_8cpp_source.html#l07792">item::gun_current_mode()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="itype_8cpp_source.html#l00046">itype::nname()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="gun__mode_8h_source.html#l00021">gun_mode::qty</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="gun__mode_8h_source.html#l00019">gun_mode::target</a>, <a class="el" href="gun__mode_8h_source.html#l00059">gun_mode::tname()</a>, <a class="el" href="item_8cpp_source.html#l04478">item::tname()</a>, and <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a9f08c10cac1401587f330fb97f5c2183" name="a9f08c10cac1401587f330fb97f5c2183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f08c10cac1401587f330fb97f5c2183">&#9670;&nbsp;</a></span>panel_recoil()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_recoil </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03492">3492</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03493" name="l03493"></a><span class="lineno"> 3493</span>{</div>
<div class="line"><a id="l03494" name="l03494"></a><span class="lineno"> 3494</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> val = <a class="code hl_function" href="namespaceranged.html#a9fab96fd0829b448bad76e542e320156">ranged::recoil_total</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a id="l03495" name="l03495"></a><span class="lineno"> 3495</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> min_recoil = <a class="code hl_function" href="namespaceranged.html#a77dfe116a20cfa50c55a3c2073408e63">ranged::effective_dispersion</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#af0b7e5875297be57d675270f57ff775a">sight_dispersion</a>() );</div>
<div class="line"><a id="l03496" name="l03496"></a><span class="lineno"> 3496</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> recoil_range = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> - min_recoil;</div>
<div class="line"><a id="l03497" name="l03497"></a><span class="lineno"> 3497</span>    std::string str;</div>
<div class="line"><a id="l03498" name="l03498"></a><span class="lineno"> 3498</span>    <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range * 2 / 3 ) ) {</div>
<div class="line"><a id="l03499" name="l03499"></a><span class="lineno"> 3499</span>        str = <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_red&gt;High&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a id="l03500" name="l03500"></a><span class="lineno"> 3500</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range / 2 ) ) {</div>
<div class="line"><a id="l03501" name="l03501"></a><span class="lineno"> 3501</span>        str = <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_yellow&gt;Medium&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a id="l03502" name="l03502"></a><span class="lineno"> 3502</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( val &gt;= min_recoil + ( recoil_range / 4 ) ) {</div>
<div class="line"><a id="l03503" name="l03503"></a><span class="lineno"> 3503</span>        str = <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_light_green&gt;Low&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a id="l03504" name="l03504"></a><span class="lineno"> 3504</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03505" name="l03505"></a><span class="lineno"> 3505</span>        str = <a class="code hl_function" href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a>( <span class="stringliteral">&quot;amount of backward momentum&quot;</span>, <span class="stringliteral">&quot;&lt;color_cyan&gt;None&lt;/color&gt;&quot;</span> );</div>
<div class="line"><a id="l03506" name="l03506"></a><span class="lineno"> 3506</span>    }</div>
<div class="line"><a id="l03507" name="l03507"></a><span class="lineno"> 3507</span>    str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Recoil: %s&quot;</span> ), str );</div>
<div class="line"><a id="l03508" name="l03508"></a><span class="lineno"> 3508</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> clr = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03509" name="l03509"></a><span class="lineno"> 3509</span>    <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a id="l03510" name="l03510"></a><span class="lineno"> 3510</span>}</div>
<div class="ttc" id="aclassitem_html_af0b7e5875297be57d675270f57ff775a"><div class="ttname"><a href="classitem.html#af0b7e5875297be57d675270f57ff775a">item::sight_dispersion</a></div><div class="ttdeci">int sight_dispersion() const</div><div class="ttdoc">Get lowest dispersion of either integral or any attached sights.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07155">item.cpp:7155</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00127">game_constants.h:127</a></div></div>
<div class="ttc" id="anamespaceranged_html_a77dfe116a20cfa50c55a3c2073408e63"><div class="ttname"><a href="namespaceranged.html#a77dfe116a20cfa50c55a3c2073408e63">ranged::effective_dispersion</a></div><div class="ttdeci">int effective_dispersion(const Character &amp;who, int dispersion)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03775">ranged.cpp:3775</a></div></div>
<div class="ttc" id="anamespaceranged_html_a9fab96fd0829b448bad76e542e320156"><div class="ttname"><a href="namespaceranged.html#a9fab96fd0829b448bad76e542e320156">ranged::recoil_total</a></div><div class="ttdeci">double recoil_total(const Character &amp;who)</div><div class="ttdoc">Current total maximum recoil penalty from all sources.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02067">ranged.cpp:2067</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_af0c79b5c75a7cf2df78663485b03ed9a"><div class="ttname"><a href="translations_8cpp.html#af0c79b5c75a7cf2df78663485b03ed9a">pgettext</a></div><div class="ttdeci">const char * pgettext(const char *context, const char *msgid)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00041">translations.cpp:41</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="ranged_8cpp_source.html#l03775">ranged::effective_dispersion()</a>, <a class="el" href="game__constants_8h_source.html#l00127">MAX_RECOIL</a>, <a class="el" href="translations_8cpp_source.html#l00041">pgettext()</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="ranged_8cpp_source.html#l02067">ranged::recoil_total()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="item_8cpp_source.html#l07155">item::sight_dispersion()</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a14b8ebef108aaa7ad8c5176a04f600bb" name="a14b8ebef108aaa7ad8c5176a04f600bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b8ebef108aaa7ad8c5176a04f600bb">&#9670;&nbsp;</a></span>panel_spell_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_spell_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03512">3512</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03513" name="l03513"></a><span class="lineno"> 3513</span>{</div>
<div class="line"><a id="l03514" name="l03514"></a><span class="lineno"> 3514</span>    <a class="code hl_class" href="classnc__color.html">nc_color</a> clr = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03515" name="l03515"></a><span class="lineno"> 3515</span> </div>
<div class="line"><a id="l03516" name="l03516"></a><span class="lineno"> 3516</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Casting: %s (Level %u)&quot;</span> ),</div>
<div class="line"><a id="l03517" name="l03517"></a><span class="lineno"> 3517</span>               <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">name</a>(),</div>
<div class="line"><a id="l03518" name="l03518"></a><span class="lineno"> 3518</span>               <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">get_level</a>() );</div>
<div class="line"><a id="l03519" name="l03519"></a><span class="lineno"> 3519</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> || <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a9e3016a896d4431fed8428ea82ab6539">energy_source</a>() == <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b">energy_type::none_energy</a> ) {</div>
<div class="line"><a id="l03520" name="l03520"></a><span class="lineno"> 3520</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a9e3016a896d4431fed8428ea82ab6539">energy_source</a>() == <a class="code hl_enumvalue" href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3">energy_type::hp_energy</a> ) {</div>
<div class="line"><a id="l03521" name="l03521"></a><span class="lineno"> 3521</span>            text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2,</div>
<div class="line"><a id="l03522" name="l03522"></a><span class="lineno"> 3522</span>                                      clr,</div>
<div class="line"><a id="l03523" name="l03523"></a><span class="lineno"> 3523</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cost: %s %s&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">energy_cost_string</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ), <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>() );</div>
<div class="line"><a id="l03524" name="l03524"></a><span class="lineno"> 3524</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03525" name="l03525"></a><span class="lineno"> 3525</span>            text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2,</div>
<div class="line"><a id="l03526" name="l03526"></a><span class="lineno"> 3526</span>                                      clr,</div>
<div class="line"><a id="l03527" name="l03527"></a><span class="lineno"> 3527</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cost: %s %s (Current: %s)&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">energy_cost_string</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ), <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>(),</div>
<div class="line"><a id="l03528" name="l03528"></a><span class="lineno"> 3528</span>                                      <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a1dc2bd4fd1f177c091237236627bd993">energy_cur_string</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ) );</div>
<div class="line"><a id="l03529" name="l03529"></a><span class="lineno"> 3529</span>        }</div>
<div class="line"><a id="l03530" name="l03530"></a><span class="lineno"> 3530</span>    }</div>
<div class="line"><a id="l03531" name="l03531"></a><span class="lineno"> 3531</span> </div>
<div class="line"><a id="l03532" name="l03532"></a><span class="lineno"> 3532</span>    std::string fail_str;</div>
<div class="line"><a id="l03533" name="l03533"></a><span class="lineno"> 3533</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">no_fail</a> ) {</div>
<div class="line"><a id="l03534" name="l03534"></a><span class="lineno"> 3534</span>        fail_str = <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;0.0 % Failure Chance&quot;</span> ), <a class="code hl_define" href="color_8h.html#a2236aa1fe66b707a104f19ad45c23230">c_light_green</a> );</div>
<div class="line"><a id="l03535" name="l03535"></a><span class="lineno"> 3535</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03536" name="l03536"></a><span class="lineno"> 3536</span>        fail_str = <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#afe11a0854d38e947a10d02e29f7fd84c">colorized_fail_percent</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a id="l03537" name="l03537"></a><span class="lineno"> 3537</span>    }</div>
<div class="line"><a id="l03538" name="l03538"></a><span class="lineno"> 3538</span>    <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), clr, clr, fail_str );</div>
<div class="line"><a id="l03539" name="l03539"></a><span class="lineno"> 3539</span> </div>
<div class="line"><a id="l03540" name="l03540"></a><span class="lineno"> 3540</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a004decbbde4de635b4e652acff65eb8e">aoe</a>() &gt; 0 ) {</div>
<div class="line"><a id="l03541" name="l03541"></a><span class="lineno"> 3541</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a> = <a class="code hl_define" href="color_8h.html#a1b1e3c0bef566a83c3535e38a93ad733">c_light_gray</a>;</div>
<div class="line"><a id="l03542" name="l03542"></a><span class="lineno"> 3542</span>        <span class="keyword">const</span> std::string fx = <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>();</div>
<div class="line"><a id="l03543" name="l03543"></a><span class="lineno"> 3543</span>        <span class="keyword">const</span> std::string aoes = <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a7341749ae2cc5f13b784f057b5207252">aoe_string</a>();</div>
<div class="line"><a id="l03544" name="l03544"></a><span class="lineno"> 3544</span>        <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;projectile_attack&quot;</span> || fx == <span class="stringliteral">&quot;target_attack&quot;</span> ||</div>
<div class="line"><a id="l03545" name="l03545"></a><span class="lineno"> 3545</span>            fx == <span class="stringliteral">&quot;area_pull&quot;</span> || fx == <span class="stringliteral">&quot;area_push&quot;</span> ||</div>
<div class="line"><a id="l03546" name="l03546"></a><span class="lineno"> 3546</span>            fx == <span class="stringliteral">&quot;ter_transform&quot;</span> ) {</div>
<div class="line"><a id="l03547" name="l03547"></a><span class="lineno"> 3547</span>            text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a id="l03548" name="l03548"></a><span class="lineno"> 3548</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Effective Spell Radius: %s%s&quot;</span> ), aoes,</div>
<div class="line"><a id="l03549" name="l03549"></a><span class="lineno"> 3549</span>                                      <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a57d5063164f86d348ea38dab2edaf023">in_aoe</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) ? <a class="code hl_function" href="color_8cpp.html#a0f25678be1fc95cb81381a004493a4cc">colorize</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot; WARNING!  IN RANGE&quot;</span> ), <a class="code hl_define" href="color_8h.html#af0a87eaef36305269f4506dfa34d94c0">c_red</a> ) : <span class="stringliteral">&quot;&quot;</span> );</div>
<div class="line"><a id="l03550" name="l03550"></a><span class="lineno"> 3550</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;cone_attack&quot;</span> ) {</div>
<div class="line"><a id="l03551" name="l03551"></a><span class="lineno"> 3551</span>            text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a id="l03552" name="l03552"></a><span class="lineno"> 3552</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Cone Arc: %s degrees&quot;</span> ), aoes );</div>
<div class="line"><a id="l03553" name="l03553"></a><span class="lineno"> 3553</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;line_attack&quot;</span> ) {</div>
<div class="line"><a id="l03554" name="l03554"></a><span class="lineno"> 3554</span>            text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, <a class="code hl_function" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color</a>,</div>
<div class="line"><a id="l03555" name="l03555"></a><span class="lineno"> 3555</span>                                      <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Line width: %s&quot;</span> ), aoes );</div>
<div class="line"><a id="l03556" name="l03556"></a><span class="lineno"> 3556</span>        }</div>
<div class="line"><a id="l03557" name="l03557"></a><span class="lineno"> 3557</span>    }</div>
<div class="line"><a id="l03558" name="l03558"></a><span class="lineno"> 3558</span> </div>
<div class="line"><a id="l03559" name="l03559"></a><span class="lineno"> 3559</span>    <a class="code hl_function" href="output_8cpp.html#a1184e3eda011b110d09bf2dcf08228f5">mvwprintz</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), <a class="code hl_define" href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Damage: %s&quot;</span> ),</div>
<div class="line"><a id="l03560" name="l03560"></a><span class="lineno"> 3560</span>               <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#abe49463868f25cd4e65b184b02e96931">damage_string</a>() );</div>
<div class="line"><a id="l03561" name="l03561"></a><span class="lineno"> 3561</span> </div>
<div class="line"><a id="l03562" name="l03562"></a><span class="lineno"> 3562</span>    text_y += <a class="code hl_function" href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), <a class="code hl_function" href="namespacecatacurses.html#a929fe85d472028f52d8a5cdfc0d35017">getmaxx</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> ) - 2, clr,</div>
<div class="line"><a id="l03563" name="l03563"></a><span class="lineno"> 3563</span>                              <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#acc66691f05cd20a085370d79df52bafa">description</a>() );</div>
<div class="line"><a id="l03564" name="l03564"></a><span class="lineno"> 3564</span>}</div>
<div class="ttc" id="aclassspell_html_a004decbbde4de635b4e652acff65eb8e"><div class="ttname"><a href="classspell.html#a004decbbde4de635b4e652acff65eb8e">spell::aoe</a></div><div class="ttdeci">int aoe() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00518">magic.cpp:518</a></div></div>
<div class="ttc" id="aclassspell_html_a006cfd33c15f732b2463eda1ae0686cc"><div class="ttname"><a href="classspell.html#a006cfd33c15f732b2463eda1ae0686cc">spell::get_level</a></div><div class="ttdeci">int get_level() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l01034">magic.cpp:1034</a></div></div>
<div class="ttc" id="aclassspell_html_a0d3f68783edb1af2e111e85f7a1715fa"><div class="ttname"><a href="classspell.html#a0d3f68783edb1af2e111e85f7a1715fa">spell::energy_cost_string</a></div><div class="ttdeci">std::string energy_cost_string(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00838">magic.cpp:838</a></div></div>
<div class="ttc" id="aclassspell_html_a1dc2bd4fd1f177c091237236627bd993"><div class="ttname"><a href="classspell.html#a1dc2bd4fd1f177c091237236627bd993">spell::energy_cur_string</a></div><div class="ttdeci">std::string energy_cur_string(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00861">magic.cpp:861</a></div></div>
<div class="ttc" id="aclassspell_html_a57d5063164f86d348ea38dab2edaf023"><div class="ttname"><a href="classspell.html#a57d5063164f86d348ea38dab2edaf023">spell::in_aoe</a></div><div class="ttdeci">bool in_aoe(const tripoint &amp;source, const tripoint &amp;target) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00533">magic.cpp:533</a></div></div>
<div class="ttc" id="aclassspell_html_a7341749ae2cc5f13b784f057b5207252"><div class="ttname"><a href="classspell.html#a7341749ae2cc5f13b784f057b5207252">spell::aoe_string</a></div><div class="ttdeci">std::string aoe_string() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00542">magic.cpp:542</a></div></div>
<div class="ttc" id="aclassspell_html_a9e3016a896d4431fed8428ea82ab6539"><div class="ttname"><a href="classspell.html#a9e3016a896d4431fed8428ea82ab6539">spell::energy_source</a></div><div class="ttdeci">energy_type energy_source() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00940">magic.cpp:940</a></div></div>
<div class="ttc" id="aclassspell_html_aa34fc8ebf8b820ac055f4b4dd9d78c35"><div class="ttname"><a href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">spell::effect</a></div><div class="ttdeci">std::string effect() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00935">magic.cpp:935</a></div></div>
<div class="ttc" id="aclassspell_html_abdf34d5415c3fdafcd84fe3a7101bddb"><div class="ttname"><a href="classspell.html#abdf34d5415c3fdafcd84fe3a7101bddb">spell::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00729">magic.cpp:729</a></div></div>
<div class="ttc" id="aclassspell_html_abe49463868f25cd4e65b184b02e96931"><div class="ttname"><a href="classspell.html#abe49463868f25cd4e65b184b02e96931">spell::damage_string</a></div><div class="ttdeci">std::string damage_string() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00499">magic.cpp:499</a></div></div>
<div class="ttc" id="aclassspell_html_acc66691f05cd20a085370d79df52bafa"><div class="ttname"><a href="classspell.html#acc66691f05cd20a085370d79df52bafa">spell::description</a></div><div class="ttdeci">std::string description() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00990">magic.cpp:990</a></div></div>
<div class="ttc" id="aclassspell_html_aeb55e6084337fb199e3cab09260ad916"><div class="ttname"><a href="classspell.html#aeb55e6084337fb199e3cab09260ad916">spell::energy_string</a></div><div class="ttdeci">std::string energy_string() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00820">magic.cpp:820</a></div></div>
<div class="ttc" id="aclassspell_html_afe11a0854d38e947a10d02e29f7fd84c"><div class="ttname"><a href="classspell.html#afe11a0854d38e947a10d02e29f7fd84c">spell::colorized_fail_percent</a></div><div class="ttdeci">std::string colorized_fail_percent(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00782">magic.cpp:782</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a146d794c8cb9c23e6ba71727c9a25852"><div class="ttname"><a href="classtarget__ui.html#a146d794c8cb9c23e6ba71727c9a25852">target_ui::no_fail</a></div><div class="ttdeci">bool no_fail</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00202">ranged.cpp:202</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ac9b01fafb341eaec6c8f85582fd7f32f"><div class="ttname"><a href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">target_ui::no_mana</a></div><div class="ttdeci">bool no_mana</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00204">ranged.cpp:204</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af184a9cc7c52521c129182e2cc643375"><div class="ttname"><a href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">target_ui::casting</a></div><div class="ttdeci">spell * casting</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00200">ranged.cpp:200</a></div></div>
<div class="ttc" id="acolor_8h_html_aab11865a3631a7ce78da82b7fb386b71"><div class="ttname"><a href="color_8h.html#aab11865a3631a7ce78da82b7fb386b71">c_light_red</a></div><div class="ttdeci">#define c_light_red</div><div class="ttdef"><b>Definition:</b> <a href="color_8h_source.html#l00027">color.h:27</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313a035da4b29716d283ad9e6f63574058b3">hp_energy</a></div><div class="ttdeci">@ hp_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00064">magic.h:64</a></div></div>
<div class="ttc" id="amagic_8h_html_a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b"><div class="ttname"><a href="magic_8h.html#a3c314c02f97a7d720f18adcd1dbd7313ac5dea5bec6450a607e6b31abd578d55b">none_energy</a></div><div class="ttdeci">@ none_energy</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00070">magic.h:69</a></div></div>
<div class="ttc" id="aoutput_8cpp_html_ab9659cbe9ec23a2efd813f795cb7fb73"><div class="ttname"><a href="output_8cpp.html#ab9659cbe9ec23a2efd813f795cb7fb73">fold_and_print</a></div><div class="ttdeci">int fold_and_print(const catacurses::window &amp;w, const point &amp;begin, int width, const nc_color &amp;base_color, const std::string &amp;text, const char split)</div><div class="ttdoc">Fold and print text in the given window.</div><div class="ttdef"><b>Definition:</b> <a href="output_8cpp_source.html#l00299">output.cpp:299</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="magic_8cpp_source.html#l00518">spell::aoe()</a>, <a class="el" href="magic_8cpp_source.html#l00542">spell::aoe_string()</a>, <a class="el" href="color_8h_source.html#l00019">c_light_gray</a>, <a class="el" href="color_8h_source.html#l00028">c_light_green</a>, <a class="el" href="color_8h_source.html#l00027">c_light_red</a>, <a class="el" href="color_8h_source.html#l00021">c_red</a>, <a class="el" href="ranged_8cpp_source.html#l00200">casting</a>, <a class="el" href="editmap_8cpp.html#a025a5c063205294df20818edc4cfe355">color()</a>, <a class="el" href="color_8cpp_source.html#l00669">colorize()</a>, <a class="el" href="magic_8cpp_source.html#l00782">spell::colorized_fail_percent()</a>, <a class="el" href="magic_8cpp_source.html#l00499">spell::damage_string()</a>, <a class="el" href="magic_8cpp_source.html#l00990">spell::description()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="magic_8cpp_source.html#l00935">spell::effect()</a>, <a class="el" href="magic_8cpp_source.html#l00838">spell::energy_cost_string()</a>, <a class="el" href="magic_8cpp_source.html#l00861">spell::energy_cur_string()</a>, <a class="el" href="magic_8cpp_source.html#l00940">spell::energy_source()</a>, <a class="el" href="magic_8cpp_source.html#l00820">spell::energy_string()</a>, <a class="el" href="output_8cpp_source.html#l00299">fold_and_print()</a>, <a class="el" href="magic_8cpp_source.html#l01034">spell::get_level()</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00058">catacurses::getmaxx()</a>, <a class="el" href="magic_8h_source.html#l00064">hp_energy</a>, <a class="el" href="magic_8cpp_source.html#l00533">spell::in_aoe()</a>, <a class="el" href="output_8cpp_source.html#l02035">mvwprintz()</a>, <a class="el" href="magic_8cpp_source.html#l00729">spell::name()</a>, <a class="el" href="ranged_8cpp_source.html#l00202">no_fail</a>, <a class="el" href="ranged_8cpp_source.html#l00204">no_mana</a>, <a class="el" href="magic_8h_source.html#l00069">none_energy</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="a4bb70bd52ece44447bec77880106009d" name="a4bb70bd52ece44447bec77880106009d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4bb70bd52ece44447bec77880106009d">&#9670;&nbsp;</a></span>panel_target_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_target_info </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>fill_with_blank_if_no_target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03566">3566</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03567" name="l03567"></a><span class="lineno"> 3567</span>{</div>
<div class="line"><a id="l03568" name="l03568"></a><span class="lineno"> 3568</span>    <span class="keywordtype">int</span> max_lines = 4;</div>
<div class="line"><a id="l03569" name="l03569"></a><span class="lineno"> 3569</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a id="l03570" name="l03570"></a><span class="lineno"> 3570</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">sees</a>( *<a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a id="l03571" name="l03571"></a><span class="lineno"> 3571</span>            <span class="comment">// FIXME: print_info doesn&#39;t really care about line limit</span></div>
<div class="line"><a id="l03572" name="l03572"></a><span class="lineno"> 3572</span>            <span class="comment">//        and can always occupy up to 4 of them (or even more?).</span></div>
<div class="line"><a id="l03573" name="l03573"></a><span class="lineno"> 3573</span>            <span class="comment">//        To make things consistent, we ask it for 2 lines</span></div>
<div class="line"><a id="l03574" name="l03574"></a><span class="lineno"> 3574</span>            <span class="comment">//        and somewhat reliably get 4.</span></div>
<div class="line"><a id="l03575" name="l03575"></a><span class="lineno"> 3575</span>            <span class="keywordtype">int</span> fix_for_print_info = max_lines - 2;</div>
<div class="line"><a id="l03576" name="l03576"></a><span class="lineno"> 3576</span>            <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code hl_function" href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">print_info</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, text_y, fix_for_print_info, 1 );</div>
<div class="line"><a id="l03577" name="l03577"></a><span class="lineno"> 3577</span>            text_y += max_lines;</div>
<div class="line"><a id="l03578" name="l03578"></a><span class="lineno"> 3578</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03579" name="l03579"></a><span class="lineno"> 3579</span>            std::vector&lt;std::string&gt; buf;</div>
<div class="line"><a id="l03580" name="l03580"></a><span class="lineno"> 3580</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">sees_with_infrared</a>( *<a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a id="l03581" name="l03581"></a><span class="lineno"> 3581</span>                <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code hl_function" href="classCreature.html#a1eadbc3e5891d1ff578ac49291e12b66">describe_infrared</a>( buf );</div>
<div class="line"><a id="l03582" name="l03582"></a><span class="lineno"> 3582</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#a9333ab3cffa25b588ec5aa932db8d73d">sees_with_specials</a>( *<a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) ) {</div>
<div class="line"><a id="l03583" name="l03583"></a><span class="lineno"> 3583</span>                <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>-&gt;<a class="code hl_function" href="classCreature.html#a6293c17885ef44d613618b4953a1be17">describe_specials</a>( buf );</div>
<div class="line"><a id="l03584" name="l03584"></a><span class="lineno"> 3584</span>            }</div>
<div class="line"><a id="l03585" name="l03585"></a><span class="lineno"> 3585</span>            <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = 0; i &lt; static_cast&lt;size_t&gt;( max_lines ); i++, text_y++ ) {</div>
<div class="line"><a id="l03586" name="l03586"></a><span class="lineno"> 3586</span>                <span class="keywordflow">if</span>( i &gt;= buf.size() ) {</div>
<div class="line"><a id="l03587" name="l03587"></a><span class="lineno"> 3587</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l03588" name="l03588"></a><span class="lineno"> 3588</span>                }</div>
<div class="line"><a id="l03589" name="l03589"></a><span class="lineno"> 3589</span>                <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y ), buf[i] );</div>
<div class="line"><a id="l03590" name="l03590"></a><span class="lineno"> 3590</span>            }</div>
<div class="line"><a id="l03591" name="l03591"></a><span class="lineno"> 3591</span>        }</div>
<div class="line"><a id="l03592" name="l03592"></a><span class="lineno"> 3592</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fill_with_blank_if_no_target ) {</div>
<div class="line"><a id="l03593" name="l03593"></a><span class="lineno"> 3593</span>        <span class="comment">// Fill with blank lines to prevent other panels from jumping around</span></div>
<div class="line"><a id="l03594" name="l03594"></a><span class="lineno"> 3594</span>        <span class="comment">// when the cursor moves.</span></div>
<div class="line"><a id="l03595" name="l03595"></a><span class="lineno"> 3595</span>        text_y += max_lines;</div>
<div class="line"><a id="l03596" name="l03596"></a><span class="lineno"> 3596</span>        <span class="comment">// TODO: print info about tile?</span></div>
<div class="line"><a id="l03597" name="l03597"></a><span class="lineno"> 3597</span>    }</div>
<div class="line"><a id="l03598" name="l03598"></a><span class="lineno"> 3598</span>}</div>
<div class="ttc" id="aclassCharacter_html_a9333ab3cffa25b588ec5aa932db8d73d"><div class="ttname"><a href="classCharacter.html#a9333ab3cffa25b588ec5aa932db8d73d">Character::sees_with_specials</a></div><div class="ttdeci">bool sees_with_specials(const Creature &amp;critter) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06189">character.cpp:6189</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9976ba9d9bccdaff264bd834628b97ec"><div class="ttname"><a href="classCharacter.html#a9976ba9d9bccdaff264bd834628b97ec">Character::sees_with_infrared</a></div><div class="ttdeci">bool sees_with_infrared(const Creature &amp;critter) const</div><div class="ttdoc">Check whether the this player can see the other creature with infrared.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09941">character.cpp:9941</a></div></div>
<div class="ttc" id="aclassCreature_html_a1eadbc3e5891d1ff578ac49291e12b66"><div class="ttname"><a href="classCreature.html#a1eadbc3e5891d1ff578ac49291e12b66">Creature::describe_infrared</a></div><div class="ttdeci">void describe_infrared(std::vector&lt; std::string &gt; &amp;buf) const</div><div class="ttdoc">Describe this creature as seen by the avatar via infrared vision.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01977">creature.cpp:1977</a></div></div>
<div class="ttc" id="aclassCreature_html_a6293c17885ef44d613618b4953a1be17"><div class="ttname"><a href="classCreature.html#a6293c17885ef44d613618b4953a1be17">Creature::describe_specials</a></div><div class="ttdeci">void describe_specials(std::vector&lt; std::string &gt; &amp;buf) const</div><div class="ttdoc">Describe this creature as detected by the avatar's special senses.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l02005">creature.cpp:2005</a></div></div>
<div class="ttc" id="aclassCreature_html_ab0d27ad3c2c730a3c88ee897e55f344f"><div class="ttname"><a href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">Creature::print_info</a></div><div class="ttdeci">virtual int print_info(const catacurses::window &amp;w, int vStart, int vLines, int column) const =0</div><div class="ttdoc">Write information about this creature.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="creature_8cpp_source.html#l01977">Creature::describe_infrared()</a>, <a class="el" href="creature_8cpp_source.html#l02005">Creature::describe_specials()</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00103">catacurses::mvwprintw()</a>, <a class="el" href="classCreature.html#ab0d27ad3c2c730a3c88ee897e55f344f">Creature::print_info()</a>, <a class="el" href="character_8cpp_source.html#l10168">Character::sees()</a>, <a class="el" href="character_8cpp_source.html#l09941">Character::sees_with_infrared()</a>, <a class="el" href="character_8cpp_source.html#l06189">Character::sees_with_specials()</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="ad4a9c004a4c4cf26ad705174612584ea" name="ad4a9c004a4c4cf26ad705174612584ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4a9c004a4c4cf26ad705174612584ea">&#9670;&nbsp;</a></span>panel_turret_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::panel_turret_list </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>text_y</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03635">3635</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03636" name="l03636"></a><span class="lineno"> 3636</span>{</div>
<div class="line"><a id="l03637" name="l03637"></a><span class="lineno"> 3637</span>    <a class="code hl_function" href="namespacecatacurses.html#abde9c157650e464f0a27441d81c84644">mvwprintw</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Turrets in range: %d/%d&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.size(),</div>
<div class="line"><a id="l03638" name="l03638"></a><span class="lineno"> 3638</span>               <a class="code hl_variable" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a>-&gt;size() );</div>
<div class="line"><a id="l03639" name="l03639"></a><span class="lineno"> 3639</span> </div>
<div class="line"><a id="l03640" name="l03640"></a><span class="lineno"> 3640</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> turret_with_lof &amp;it : <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a> ) {</div>
<div class="line"><a id="l03641" name="l03641"></a><span class="lineno"> 3641</span>        std::string str = <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <span class="stringliteral">&quot;* %s&quot;</span>, it.turret-&gt;name() );</div>
<div class="line"><a id="l03642" name="l03642"></a><span class="lineno"> 3642</span>        <a class="code hl_class" href="classnc__color.html">nc_color</a> clr = <a class="code hl_define" href="color_8h.html#a0d06dc49b9761bbc54607397213728bb">c_white</a>;</div>
<div class="line"><a id="l03643" name="l03643"></a><span class="lineno"> 3643</span>        <a class="code hl_function" href="output_8cpp.html#a9fcad5b904c8019b15fe1ac8e665a1cb">print_colored_text</a>( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a>, <a class="code hl_struct" href="structpoint.html">point</a>( 1, text_y++ ), clr, clr, str );</div>
<div class="line"><a id="l03644" name="l03644"></a><span class="lineno"> 3644</span>    }</div>
<div class="line"><a id="l03645" name="l03645"></a><span class="lineno"> 3645</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_ae7a7446b4088911709b2eb6a1d3973e5"><div class="ttname"><a href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">target_ui::vturrets</a></div><div class="ttdeci">const std::vector&lt; vehicle_part * &gt; * vturrets</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00196">ranged.cpp:196</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="color_8h_source.html#l00018">c_white</a>, <a class="el" href="ncurses__def_8cpp_source.html#l00103">catacurses::mvwprintw()</a>, <a class="el" href="output_8cpp_source.html#l00185">print_colored_text()</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="ranged_8cpp_source.html#l00295">turrets_in_range</a>, <a class="el" href="ranged_8cpp_source.html#l00196">vturrets</a>, and <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>.</p>

</div>
</div>
<a id="ad2ca7887fd647df92c825e8ee153ff84" name="ad2ca7887fd647df92c825e8ee153ff84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2ca7887fd647df92c825e8ee153ff84">&#9670;&nbsp;</a></span>prompt_friendlies_in_lof()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::prompt_friendlies_in_lof </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02805">2805</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02806" name="l02806"></a><span class="lineno"> 2806</span>{</div>
<div class="line"><a id="l02807" name="l02807"></a><span class="lineno"> 2807</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l02808" name="l02808"></a><span class="lineno"> 2808</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Not implemented&quot;</span> );</div>
<div class="line"><a id="l02809" name="l02809"></a><span class="lineno"> 2809</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02810" name="l02810"></a><span class="lineno"> 2810</span>    }</div>
<div class="line"><a id="l02811" name="l02811"></a><span class="lineno"> 2811</span> </div>
<div class="line"><a id="l02812" name="l02812"></a><span class="lineno"> 2812</span>    std::vector&lt;weak_ptr_fast&lt;Creature&gt;&gt; in_lof = <a class="code hl_function" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a>();</div>
<div class="line"><a id="l02813" name="l02813"></a><span class="lineno"> 2813</span>    std::vector&lt;Creature *&gt; new_in_lof;</div>
<div class="line"><a id="l02814" name="l02814"></a><span class="lineno"> 2814</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_typedef" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast&lt;Creature&gt;</a> &amp;cr_ptr : in_lof ) {</div>
<div class="line"><a id="l02815" name="l02815"></a><span class="lineno"> 2815</span>        <span class="keywordtype">bool</span> found = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02816" name="l02816"></a><span class="lineno"> 2816</span>        <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> ptr_lock = cr_ptr.lock();</div>
<div class="line"><a id="l02817" name="l02817"></a><span class="lineno"> 2817</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *cr = ptr_lock.get();</div>
<div class="line"><a id="l02818" name="l02818"></a><span class="lineno"> 2818</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_typedef" href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast&lt;Creature&gt;</a> &amp;cr2_ptr : <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a> ) {</div>
<div class="line"><a id="l02819" name="l02819"></a><span class="lineno"> 2819</span>            <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> ptr2_lock = cr2_ptr.lock();</div>
<div class="line"><a id="l02820" name="l02820"></a><span class="lineno"> 2820</span>            <a class="code hl_class" href="classCreature.html">Creature</a> *cr2 = ptr2_lock.get();</div>
<div class="line"><a id="l02821" name="l02821"></a><span class="lineno"> 2821</span>            <span class="keywordflow">if</span>( cr == cr2 ) {</div>
<div class="line"><a id="l02822" name="l02822"></a><span class="lineno"> 2822</span>                found = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02823" name="l02823"></a><span class="lineno"> 2823</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02824" name="l02824"></a><span class="lineno"> 2824</span>            }</div>
<div class="line"><a id="l02825" name="l02825"></a><span class="lineno"> 2825</span>        }</div>
<div class="line"><a id="l02826" name="l02826"></a><span class="lineno"> 2826</span>        <span class="keywordflow">if</span>( !found ) {</div>
<div class="line"><a id="l02827" name="l02827"></a><span class="lineno"> 2827</span>            new_in_lof.push_back( cr );</div>
<div class="line"><a id="l02828" name="l02828"></a><span class="lineno"> 2828</span>        }</div>
<div class="line"><a id="l02829" name="l02829"></a><span class="lineno"> 2829</span>    }</div>
<div class="line"><a id="l02830" name="l02830"></a><span class="lineno"> 2830</span> </div>
<div class="line"><a id="l02831" name="l02831"></a><span class="lineno"> 2831</span>    <span class="keywordflow">if</span>( new_in_lof.empty() ) {</div>
<div class="line"><a id="l02832" name="l02832"></a><span class="lineno"> 2832</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02833" name="l02833"></a><span class="lineno"> 2833</span>    }</div>
<div class="line"><a id="l02834" name="l02834"></a><span class="lineno"> 2834</span> </div>
<div class="line"><a id="l02835" name="l02835"></a><span class="lineno"> 2835</span>    std::string msg = <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;There are friendly creatures in line of fire:\n&quot;</span> );</div>
<div class="line"><a id="l02836" name="l02836"></a><span class="lineno"> 2836</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classCreature.html">Creature</a> *cr : new_in_lof ) {</div>
<div class="line"><a id="l02837" name="l02837"></a><span class="lineno"> 2837</span>        msg += <span class="stringliteral">&quot;  &quot;</span> + cr-&gt;<a class="code hl_function" href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">disp_name</a>() + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l02838" name="l02838"></a><span class="lineno"> 2838</span>    }</div>
<div class="line"><a id="l02839" name="l02839"></a><span class="lineno"> 2839</span>    msg += <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Proceed with the attack?&quot;</span> );</div>
<div class="line"><a id="l02840" name="l02840"></a><span class="lineno"> 2840</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="output_8cpp.html#ab62599a77867b8f416669b92f60f4900">query_yn</a>( msg );</div>
<div class="line"><a id="l02841" name="l02841"></a><span class="lineno"> 2841</span>}</div>
<div class="ttc" id="aclassCreature_html_a26b7c431f85f0b99b888db69318ebdc5"><div class="ttname"><a href="classCreature.html#a26b7c431f85f0b99b888db69318ebdc5">Creature::disp_name</a></div><div class="ttdeci">virtual std::string disp_name(bool possessive=false, bool capitalize_first=false) const =0</div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a9835661ff059c7c690bf26075417b9b9"><div class="ttname"><a href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">aim_activity_actor::acceptable_losses</a></div><div class="ttdeci">std::vector&lt; weak_ptr_fast&lt; Creature &gt; &gt; acceptable_losses</div><div class="ttdoc">A friendly creature may enter line of fire during aim-and-shoot, and that generates a warning to proc...</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00051">activity_actor_definitions.h:51</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ac352f6aae1cb28945f8115b76fea2eb6"><div class="ttname"><a href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">target_ui::list_friendlies_in_lof</a></div><div class="ttdeci">std::vector&lt; weak_ptr_fast&lt; Creature &gt; &gt; list_friendlies_in_lof()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02843">ranged.cpp:2843</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af1dc50e9e2195f48ffdb87a1daacc178"><div class="ttname"><a href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">target_ui::activity</a></div><div class="ttdeci">aim_activity_actor * activity</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00206">ranged.cpp:206</a></div></div>
<div class="ttc" id="amemory__fast_8h_html_ab8afe5baa726add2054cce385cad8855"><div class="ttname"><a href="memory__fast_8h.html#ab8afe5baa726add2054cce385cad8855">weak_ptr_fast</a></div><div class="ttdeci">std::weak_ptr&lt; T &gt; weak_ptr_fast</div><div class="ttdef"><b>Definition:</b> <a href="memory__fast_8h_source.html#l00017">memory_fast.h:17</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00051">aim_activity_actor::acceptable_losses</a>, <a class="el" href="ranged_8cpp_source.html#l00206">activity</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, and <a class="el" href="output_8cpp_source.html#l00698">query_yn()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a1403890979533cd6ea29897e3ee81ab5" name="a1403890979533cd6ea29897e3ee81ab5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1403890979533cd6ea29897e3ee81ab5">&#9670;&nbsp;</a></span>recalc_aim_turning_penalty()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::recalc_aim_turning_penalty </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02931">2931</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02932" name="l02932"></a><span class="lineno"> 2932</span>{</div>
<div class="line"><a id="l02933" name="l02933"></a><span class="lineno"> 2933</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a id="l02934" name="l02934"></a><span class="lineno"> 2934</span>        <span class="comment">// We don&#39;t care about invalid situations</span></div>
<div class="line"><a id="l02935" name="l02935"></a><span class="lineno"> 2935</span>        <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a id="l02936" name="l02936"></a><span class="lineno"> 2936</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02937" name="l02937"></a><span class="lineno"> 2937</span>    }</div>
<div class="line"><a id="l02938" name="l02938"></a><span class="lineno"> 2938</span> </div>
<div class="line"><a id="l02939" name="l02939"></a><span class="lineno"> 2939</span>    <span class="keywordtype">double</span> curr_recoil = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a>;</div>
<div class="line"><a id="l02940" name="l02940"></a><span class="lineno"> 2940</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> curr_recoil_pos;</div>
<div class="line"><a id="l02941" name="l02941"></a><span class="lineno"> 2941</span>    <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> ptr_lock = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a>.lock();</div>
<div class="line"><a id="l02942" name="l02942"></a><span class="lineno"> 2942</span>    <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> *lt_ptr = ptr_lock.get();</div>
<div class="line"><a id="l02943" name="l02943"></a><span class="lineno"> 2943</span>    <span class="keywordflow">if</span>( lt_ptr ) {</div>
<div class="line"><a id="l02944" name="l02944"></a><span class="lineno"> 2944</span>        curr_recoil_pos = lt_ptr-&gt;<a class="code hl_function" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">pos</a>();</div>
<div class="line"><a id="l02945" name="l02945"></a><span class="lineno"> 2945</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">last_target_pos</a> ) {</div>
<div class="line"><a id="l02946" name="l02946"></a><span class="lineno"> 2946</span>        curr_recoil_pos = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">last_target_pos</a> );</div>
<div class="line"><a id="l02947" name="l02947"></a><span class="lineno"> 2947</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02948" name="l02948"></a><span class="lineno"> 2948</span>        curr_recoil_pos = <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a id="l02949" name="l02949"></a><span class="lineno"> 2949</span>    }</div>
<div class="line"><a id="l02950" name="l02950"></a><span class="lineno"> 2950</span> </div>
<div class="line"><a id="l02951" name="l02951"></a><span class="lineno"> 2951</span>    <span class="keywordflow">if</span>( curr_recoil_pos == <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a id="l02952" name="l02952"></a><span class="lineno"> 2952</span>        <span class="comment">// We&#39;re aiming at that point right now, no penalty</span></div>
<div class="line"><a id="l02953" name="l02953"></a><span class="lineno"> 2953</span>        <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = curr_recoil;</div>
<div class="line"><a id="l02954" name="l02954"></a><span class="lineno"> 2954</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( curr_recoil_pos == <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a id="l02955" name="l02955"></a><span class="lineno"> 2955</span>        <span class="comment">// The player wasn&#39;t aiming anywhere, max it out</span></div>
<div class="line"><a id="l02956" name="l02956"></a><span class="lineno"> 2956</span>        <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a id="l02957" name="l02957"></a><span class="lineno"> 2957</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02958" name="l02958"></a><span class="lineno"> 2958</span>        <span class="comment">// Raise it proportionally to how much</span></div>
<div class="line"><a id="l02959" name="l02959"></a><span class="lineno"> 2959</span>        <span class="comment">// the player has to turn from previous aiming point</span></div>
<div class="line"><a id="l02960" name="l02960"></a><span class="lineno"> 2960</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> recoil_per_degree = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a> / 180.0;</div>
<div class="line"><a id="l02961" name="l02961"></a><span class="lineno"> 2961</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> angle_curr = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, curr_recoil_pos );</div>
<div class="line"><a id="l02962" name="l02962"></a><span class="lineno"> 2962</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> angle_desired = <a class="code hl_function" href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l02963" name="l02963"></a><span class="lineno"> 2963</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> phi = <a class="code hl_function" href="namespacecharacter__funcs.html#a84ed0deeee8eeb3cd6d3339fefd86e30">normalize</a>( angle_curr - angle_desired );</div>
<div class="line"><a id="l02964" name="l02964"></a><span class="lineno"> 2964</span>        <span class="keyword">const</span> <a class="code hl_class" href="classunits_1_1quantity.html">units::angle</a> <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> = std::min( phi, 360.0_degrees - phi );</div>
<div class="line"><a id="l02965" name="l02965"></a><span class="lineno"> 2965</span>        <a class="code hl_variable" href="classtarget__ui.html#ac0a5aad7e60b30082e7ec2ff97f8f6d4">predicted_recoil</a> =</div>
<div class="line"><a id="l02966" name="l02966"></a><span class="lineno"> 2966</span>            std::min( <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>, curr_recoil + <a class="code hl_function" href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">to_degrees</a>( <a class="code hl_typedef" href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">angle</a> ) * recoil_per_degree );</div>
<div class="line"><a id="l02967" name="l02967"></a><span class="lineno"> 2967</span>    }</div>
<div class="line"><a id="l02968" name="l02968"></a><span class="lineno"> 2968</span>}</div>
<div class="ttc" id="aclassCreature_html_a45926a7ba63ccc9be744f87a4d540b7d"><div class="ttname"><a href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos</a></div><div class="ttdeci">virtual const tripoint &amp; pos() const =0</div></div>
<div class="ttc" id="aclassmap_html_a426c21f7244ff80a61685a89e9146fec"><div class="ttname"><a href="classmap.html#a426c21f7244ff80a61685a89e9146fec">map::getlocal</a></div><div class="ttdeci">tripoint getlocal(const tripoint &amp;p) const</div><div class="ttdoc">Inverse of getabs.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08281">map.cpp:8281</a></div></div>
<div class="ttc" id="aclassplayer_html_a9aac4afb832dc4762430b0b3545cbfea"><div class="ttname"><a href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">player::last_target_pos</a></div><div class="ttdeci">cata::optional&lt; tripoint &gt; last_target_pos</div><div class="ttdef"><b>Definition:</b> <a href="player_8h_source.html#l00374">player.h:374</a></div></div>
<div class="ttc" id="aclassunits_1_1quantity_html"><div class="ttname"><a href="classunits_1_1quantity.html">units::quantity</a></div><div class="ttdef"><b>Definition:</b> <a href="units__def_8h_source.html#l00014">units_def.h:15</a></div></div>
<div class="ttc" id="aline_8cpp_html_a22f984836636053038f43340f9c50149"><div class="ttname"><a href="line_8cpp.html#a22f984836636053038f43340f9c50149">coord_to_angle</a></div><div class="ttdeci">units::angle coord_to_angle(const tripoint &amp;a, const tripoint &amp;b)</div><div class="ttdoc">Calculates the horizontal angle between the lines from (0,0,0) to a and the line from (0,...</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00781">line.cpp:781</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a84ed0deeee8eeb3cd6d3339fefd86e30"><div class="ttname"><a href="namespacecharacter__funcs.html#a84ed0deeee8eeb3cd6d3339fefd86e30">character_funcs::normalize</a></div><div class="ttdeci">void normalize(Character &amp;who)</div><div class="ttdoc">Reset Character's weapon and body state (limb hp, stamina, active martial art)</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00473">character_functions.cpp:473</a></div></div>
<div class="ttc" id="anamespaceunits_html_a2c7fe916bf04655f9fb4f2abdc5d28ed"><div class="ttname"><a href="namespaceunits.html#a2c7fe916bf04655f9fb4f2abdc5d28ed">units::angle</a></div><div class="ttdeci">quantity&lt; double, angle_in_radians_tag &gt; angle</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00017">units_angle.h:17</a></div></div>
<div class="ttc" id="anamespaceunits_html_a9ce2bc1618fa4acf9f9e98effd9f1ae0"><div class="ttname"><a href="namespaceunits.html#a9ce2bc1618fa4acf9f9e98effd9f1ae0">units::to_degrees</a></div><div class="ttdeci">constexpr double to_degrees(const units::angle v)</div><div class="ttdef"><b>Definition:</b> <a href="units__angle_8h_source.html#l00036">units_angle.h:36</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="line_8cpp_source.html#l00781">coord_to_angle()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08281">map::getlocal()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="player_8h_source.html#l00373">player::last_target</a>, <a class="el" href="player_8h_source.html#l00374">player::last_target_pos</a>, <a class="el" href="game__constants_8h_source.html#l00127">MAX_RECOIL</a>, <a class="el" href="character__functions_8cpp_source.html#l00473">character_funcs::normalize()</a>, <a class="el" href="classCreature.html#a45926a7ba63ccc9be744f87a4d540b7d">Creature::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l00279">predicted_recoil</a>, <a class="el" href="character_8h_source.html#l00555">Character::recoil</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="units__angle_8h_source.html#l00036">units::to_degrees()</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="a11be420f4d6ffd6128dd23d01be6c310" name="a11be420f4d6ffd6128dd23d01be6c310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11be420f4d6ffd6128dd23d01be6c310">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacetarget__handler.html#aea843144f5e69546ddea88eeda177640">target_handler::trajectory</a> target_ui::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02156">2156</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>{</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; !<a class="code hl_variable" href="classtarget__ui.html#ac9b01fafb341eaec6c8f85582fd7f32f">no_mana</a> &amp;&amp; !<a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#ab2631d5fc9da8a5ec04f7c3757e6c9f5">can_cast</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> ) ) {</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>        <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You don&#39;t have enough %s to cast this spell&quot;</span> ),</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>                                <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#aeb55e6084337fb199e3cab09260ad916">energy_string</a>() );</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    }</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">TargetMode::Shape</a> ) {</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>        <a class="code hl_function" href="classtarget__ui.html#a92256c0cb72fe5b2520a5808a5fcb79a">ensure_ranged_gun_mode</a>();</div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>        <a class="code hl_function" href="classtarget__ui.html#a77429c16aec83b5c81d3a1c259259cd5">update_ammo_range_from_gun_mode</a>();</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>            <a class="code hl_variable" href="classtarget__ui.html#a2e6f4c9c827b91ce215a1a7b32a4affb">sight_dispersion</a> = <a class="code hl_function" href="namespaceranged.html#a77dfe116a20cfa50c55a3c2073408e63">ranged::effective_dispersion</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#af0b7e5875297be57d675270f57ff775a">sight_dispersion</a>() );</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>        }</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>    }</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span> </div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>    <span class="comment">// Load settings</span></div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>    <a class="code hl_variable" href="classtarget__ui.html#a45f98789c877903961a56a54b17d9e96">allow_zlevel_shift</a> = here.<a class="code hl_function" href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">has_zlevels</a>() &amp;&amp; get_option&lt;bool&gt;( <span class="stringliteral">&quot;FOV_3D&quot;</span> );</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>    <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = get_option&lt;bool&gt;( <span class="stringliteral">&quot;SNAP_TO_TARGET&quot;</span> );</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>        <span class="comment">// Due to how cluttered the display would become, disable it by default</span></div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>        <span class="comment">// unless aiming a single turret.</span></div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>        <a class="code hl_variable" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = <a class="code hl_variable" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a>-&gt;size() == 1;</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>    }</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span> </div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>    <a class="code hl_class" href="classavatar.html">avatar</a> &amp;player_character = *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>;</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>    <a class="code hl_class" href="classon__out__of__scope.html">on_out_of_scope</a> cleanup( [&amp;here, &amp;player_character]() {</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>        here.<a class="code hl_function" href="classmap.html#af839ef9ba53f51b09259e0af06881fe6">invalidate_map_cache</a>( player_character.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>().<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> + player_character.<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> );</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>    } );</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>    <a class="code hl_class" href="classrestore__on__out__of__scope.html">restore_on_out_of_scope&lt;tripoint&gt;</a> view_offset_prev( player_character.<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a> );</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span> </div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span>    <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;game::draw_callback_t&gt;</a> target_ui_cb = make_shared_fast&lt;game::draw_callback_t&gt;(</div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"> 2187</span>    [&amp;]() {</div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>        <a class="code hl_function" href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">draw_terrain_overlay</a>();</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>    } );</div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span>    <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;add_draw_callback( target_ui_cb );</div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span> </div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span>    <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> <a class="code hl_namespace" href="namespaceui.html">ui</a>;</div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.on_screen_resize( [&amp;]( <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; <a class="code hl_namespace" href="namespaceui.html">ui</a> ) {</div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>        <a class="code hl_function" href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">init_window_and_input</a>();</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>        <a class="code hl_namespace" href="namespaceui.html">ui</a>.position_from_window( <a class="code hl_variable" href="classtarget__ui.html#a246e6aa2bb08bb724c44571e8451ac30">w_target</a> );</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>    } );</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.mark_resize();</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span> </div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>    <a class="code hl_namespace" href="namespaceui.html">ui</a>.on_redraw( [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classui__adaptor.html">ui_adaptor</a> &amp; ) {</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>        <a class="code hl_function" href="classtarget__ui.html#a93a478e95d201324548329f39a087208">draw_ui_window</a>();</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    } );</div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span> </div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>    <span class="comment">// Handle multi-turn aiming</span></div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span>    std::string <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>    <span class="keywordtype">bool</span> attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>    <span class="keywordtype">bool</span> reentered = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>    <span class="keywordtype">bool</span> resume_critter = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp; !<a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">first_turn</a> ) {</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        <span class="comment">// We were in this UI during previous turn...</span></div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>        reentered = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>        std::string act_data = <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">action</a>;</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>        <span class="keywordflow">if</span>( act_data == <span class="stringliteral">&quot;AIM&quot;</span> ) {</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>            <span class="comment">// ...and ran out of moves while aiming.</span></div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>            <span class="comment">// ...and selected &#39;aim and shoot&#39;, but ran out of moves.</span></div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>            <span class="comment">// So, skip retrieving input and go straight to the action.</span></div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = act_data;</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>            attack_was_confirmed = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>        }</div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>        <span class="comment">// Load state to keep the ui consistent across turns</span></div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>        <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">snap_to_target</a>;</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>        <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">shifting_view</a>;</div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>        resume_critter = <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aiming_at_critter</a>;</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>    }</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span> </div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span>    <span class="comment">// Initialize cursor position</span></div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>();</div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    <a class="code hl_function" href="classtarget__ui.html#af17fecf6fc24afc0a1af11ee1447b39a">update_target_list</a>();</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span> </div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> initial_dst = <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span>    <span class="keywordflow">if</span>( reentered ) {</div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">try_reacquire_target</a>( resume_critter, initial_dst ) ) {</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span>            <span class="comment">// Target lost</span></div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>        }</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>        initial_dst = <a class="code hl_function" href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">choose_initial_target</a>();</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span>    }</div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>    <a class="code hl_function" href="classtarget__ui.html#a3ead422f4a78394c13bc3f4c6c953f42">set_cursor_pos</a>( initial_dst );</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> != initial_dst ) {</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>        <span class="comment">// Our target moved out of range</span></div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>        <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>        attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>    }</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> &gt; <a class="code hl_variable" href="ranged_8cpp.html#ae134db696195500e4ff1835e6f784aca">AIF_DURATION_LIMIT</a> ) {</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>            <span class="comment">// Break long (potentially infinite) aim-and-fire loop.</span></div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>            <span class="comment">// May happen if e.g. avatar tries to get &#39;precise&#39; shot while being</span></div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>            <span class="comment">// attacked by multiple zombies, which triggers dodges and corresponding aim loss.</span></div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span>            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>        }</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">first_turn</a> &amp;&amp; !<a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() &amp;&amp; !<a class="code hl_function" href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">prompt_friendlies_in_lof</a>() ) {</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>            <span class="comment">// A friendly creature moved into line of fire during aim-and-shoot,</span></div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>            <span class="comment">// and player decided to stop aiming</span></div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear();</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>            attack_was_confirmed = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>        }</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span>        <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a>.clear();</div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() ) {</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> = 0;</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aif_duration</a> += 1;</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>        }</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span>    }</div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span> </div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>    <span class="comment">// Event loop!</span></div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span>    <a class="code hl_enumeration" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">ExitCode</a> loop_exit_code;</div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span>    std::string timed_out_action;</div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"> 2271</span>    <span class="keywordtype">bool</span> skip_redraw = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>    <span class="keywordflow">for</span>( ;; <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.clear() ) {</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>        <span class="keywordflow">if</span>( !skip_redraw ) {</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;invalidate_main_ui_adaptor();</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>            <a class="code hl_function" href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a>();</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>        }</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>        skip_redraw = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span> </div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>        <span class="comment">// Wait for user input (or use value retrieved from activity)</span></div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span>        <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>.empty() ) {</div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span>            <span class="keywordtype">int</span> timeout = get_option&lt;int&gt;( <span class="stringliteral">&quot;EDGE_SCROLL&quot;</span> );</div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"> 2282</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code hl_variable" href="classtarget__ui.html#a4e5479e5dd0b2883bbf2927c489ddb6a">ctxt</a>.<a class="code hl_function" href="classinput__context.html#a43aa2fcd42cabfd04056def8986bc927">handle_input</a>( timeout );</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>        }</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span> </div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span>        <span class="comment">// If an aiming mode is selected, use &quot;*_SHOT&quot; instead of &quot;FIRE&quot;</span></div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp; <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;FIRE&quot;</span> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;has_threshold ) {</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>            <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> = <a class="code hl_variable" href="classtarget__ui.html#a06d24870763e37a97c0aed0829bddb25">aim_mode</a>-&gt;action;</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>        }</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span> </div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>        <span class="comment">// Handle received input</span></div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">handle_cursor_movement</a>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>, skip_redraw ) ) {</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_SNAP_TO_TARGET&quot;</span> ) {</div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>            <a class="code hl_function" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a>();</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_TURRET_LINES&quot;</span> ) {</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>            <a class="code hl_variable" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a> = !<a class="code hl_variable" href="classtarget__ui.html#a63ac73585a9794e93d181362f7473b50">draw_turret_lines</a>;</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;TOGGLE_MOVE_CURSOR_VIEW&quot;</span> ) {</div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>                <a class="code hl_function" href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">toggle_snap_to_target</a>();</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>            }</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>            <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = !<a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a>;</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;zoom_in&quot;</span> ) {</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zoom_in();</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mark_main_ui_adaptor_resize();</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;zoom_out&quot;</span> ) {</div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;zoom_out();</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>            <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;mark_main_ui_adaptor_resize();</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;QUIT&quot;</span> ) {</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>            loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">ExitCode::Abort</a>;</div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SWITCH_MODE&quot;</span> ) {</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>            <a class="code hl_function" href="classtarget__ui.html#a691e0bd6f4c5f82b309fd0e026f77825">action_switch_mode</a>();</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;SWITCH_AMMO&quot;</span> ) {</div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">action_switch_ammo</a>() ) {</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>                loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">ExitCode::Reload</a>;</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>            }</div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;FIRE&quot;</span> ) {</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"> 2320</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>            }</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>            <span class="keywordtype">bool</span> can_skip_confirm = ( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a62a42d1597639881eafc04506095695d">damage</a>() &lt;= 0 );</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>            <span class="keywordflow">if</span>( !can_skip_confirm &amp;&amp; !<a class="code hl_function" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a>() ) {</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>            }</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span>            <a class="code hl_function" href="classtarget__ui.html#aa53ba52da62f64baa29130908cf8637b">set_last_target</a>();</div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>            loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>;</div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;AIM&quot;</span> ) {</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>            }</div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span> </div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>            <span class="comment">// No confirm_non_enemy_target here because we have not initiated the firing.</span></div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span>            <span class="comment">// Aiming can be stopped / aborted at any time.</span></div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span> </div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">action_aim</a>() ) {</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>                timed_out_action = <span class="stringliteral">&quot;AIM&quot;</span>;</div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>                loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>;</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>            }</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;AIMED_SHOT&quot;</span> || <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;CAREFUL_SHOT&quot;</span> || <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> == <span class="stringliteral">&quot;PRECISE_SHOT&quot;</span> ) {</div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> != <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a> ) {</div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>            }</div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span> </div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>            <span class="comment">// This action basically means &quot;Fire&quot; as well; the actual firing may be delayed</span></div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span>            <span class="comment">// through aiming, but there is usually no means to abort it. Therefore we query now</span></div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>            <span class="keywordflow">if</span>( !attack_was_confirmed &amp;&amp; !<a class="code hl_function" href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">confirm_non_enemy_target</a>() ) {</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>            }</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span> </div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">action_aim_and_shoot</a>( <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a> ) ) {</div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>                loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>;</div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>                timed_out_action = <a class="code hl_enumvalue" href="dialogue_8h.html#abfef6960b077f40e23bc00055370cc71a0639a24a99be1d60fe688dd938b7eca8">action</a>;</div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>                loop_exit_code = <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>;</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>            }</div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>        }</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>    } <span class="comment">// for(;;)</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span> </div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>    <span class="keywordflow">switch</span>( loop_exit_code ) {</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">ExitCode::Abort</a>: {</div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>            <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">TargetMode::Shape</a> ) {</div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>                <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aborted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>            }</div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>        }</div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">ExitCode::Fire</a>: {</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>            <span class="keywordtype">bool</span> harmful = !( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a62a42d1597639881eafc04506095695d">damage</a>() &lt;= 0 );</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>            <a class="code hl_function" href="classtarget__ui.html#a9d84b28ee34fdefd76ae987c95a29600">on_target_accepted</a>( harmful );</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>        }</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">ExitCode::Timeout</a>: {</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>            <span class="comment">// We&#39;ve ran out of moves, save UI state</span></div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a9835661ff059c7c690bf26075417b9b9">acceptable_losses</a> = <a class="code hl_function" href="classtarget__ui.html#ac352f6aae1cb28945f8115b76fea2eb6">list_friendlies_in_lof</a>();</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>            <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">action</a> = timed_out_action;</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">snap_to_target</a> = <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a>;</div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">shifting_view</a> = <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a>;</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aiming_at_critter</a> = !!<a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a>;</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>        }</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">ExitCode::Reload</a>: {</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>            <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>.clear();</div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aborted</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span>            <a class="code hl_variable" href="classtarget__ui.html#af1dc50e9e2195f48ffdb87a1daacc178">activity</a>-&gt;<a class="code hl_variable" href="classaim__activity__actor.html#a5a65a1ad1452654bdf0ce924ba8dcf53">reload_requested</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>        }</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span>    }</div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span> </div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a>;</div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>}</div>
<div class="ttc" id="aclassaim__activity__actor_html_a064e415f122aefc25c29b9d3eee4fa4e"><div class="ttname"><a href="classaim__activity__actor.html#a064e415f122aefc25c29b9d3eee4fa4e">aim_activity_actor::aborted</a></div><div class="ttdeci">bool aborted</div><div class="ttdoc">Target UI requested to abort aiming.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00037">activity_actor_definitions.h:37</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a289353e8cf59d999c2e3db1db5d89f12"><div class="ttname"><a href="classaim__activity__actor.html#a289353e8cf59d999c2e3db1db5d89f12">aim_activity_actor::snap_to_target</a></div><div class="ttdeci">bool snap_to_target</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00033">activity_actor_definitions.h:33</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a59cdab2e147fa7c2d2d46b9440083e05"><div class="ttname"><a href="classaim__activity__actor.html#a59cdab2e147fa7c2d2d46b9440083e05">aim_activity_actor::first_turn</a></div><div class="ttdeci">bool first_turn</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00029">activity_actor_definitions.h:29</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a5a65a1ad1452654bdf0ce924ba8dcf53"><div class="ttname"><a href="classaim__activity__actor.html#a5a65a1ad1452654bdf0ce924ba8dcf53">aim_activity_actor::reload_requested</a></div><div class="ttdeci">bool reload_requested</div><div class="ttdoc">Target UI requested to abort aiming and reload weapon Implies aborted = true.</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00044">activity_actor_definitions.h:44</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a5e4630c6a7a1630c7d93714d221ed78e"><div class="ttname"><a href="classaim__activity__actor.html#a5e4630c6a7a1630c7d93714d221ed78e">aim_activity_actor::aif_duration</a></div><div class="ttdeci">int aif_duration</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00031">activity_actor_definitions.h:31</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_a8f9b4001d182a0fc1ab4fdd8bd5b1507"><div class="ttname"><a href="classaim__activity__actor.html#a8f9b4001d182a0fc1ab4fdd8bd5b1507">aim_activity_actor::aiming_at_critter</a></div><div class="ttdeci">bool aiming_at_critter</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00032">activity_actor_definitions.h:32</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_ab7b696d1eb458e907dbccf99a5dd54aa"><div class="ttname"><a href="classaim__activity__actor.html#ab7b696d1eb458e907dbccf99a5dd54aa">aim_activity_actor::shifting_view</a></div><div class="ttdeci">bool shifting_view</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00034">activity_actor_definitions.h:34</a></div></div>
<div class="ttc" id="aclassaim__activity__actor_html_ae287f1e168ac9ea8cfc16f0f55d323ef"><div class="ttname"><a href="classaim__activity__actor.html#ae287f1e168ac9ea8cfc16f0f55d323ef">aim_activity_actor::action</a></div><div class="ttdeci">std::string action</div><div class="ttdef"><b>Definition:</b> <a href="activity__actor__definitions_8h_source.html#l00030">activity_actor_definitions.h:30</a></div></div>
<div class="ttc" id="aclassavatar_html"><div class="ttname"><a href="classavatar.html">avatar</a></div><div class="ttdef"><b>Definition:</b> <a href="avatar_8h_source.html#l00054">avatar.h:55</a></div></div>
<div class="ttc" id="aclassinput__context_html_a43aa2fcd42cabfd04056def8986bc927"><div class="ttname"><a href="classinput__context.html#a43aa2fcd42cabfd04056def8986bc927">input_context::handle_input</a></div><div class="ttdeci">const std::string &amp; handle_input()</div><div class="ttdoc">Handles input and returns the next action in the queue.</div><div class="ttdef"><b>Definition:</b> <a href="input_8cpp_source.html#l00854">input.cpp:854</a></div></div>
<div class="ttc" id="aclassmap_html_abff2fded83a8e96e5e20084c3cb59579"><div class="ttname"><a href="classmap.html#abff2fded83a8e96e5e20084c3cb59579">map::has_zlevels</a></div><div class="ttdeci">bool has_zlevels() const</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l01684">map.h:1684</a></div></div>
<div class="ttc" id="aclassmap_html_af839ef9ba53f51b09259e0af06881fe6"><div class="ttname"><a href="classmap.html#af839ef9ba53f51b09259e0af06881fe6">map::invalidate_map_cache</a></div><div class="ttdeci">void invalidate_map_cache(const int zlev)</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00470">map.h:470</a></div></div>
<div class="ttc" id="aclasson__out__of__scope_html"><div class="ttname"><a href="classon__out__of__scope.html">on_out_of_scope</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00250">cata_utility.h:251</a></div></div>
<div class="ttc" id="aclassplayer_html_ae7009d849f19a4f5ebe877cbe463c459"><div class="ttname"><a href="classplayer.html#ae7009d849f19a4f5ebe877cbe463c459">player::add_msg_if_player</a></div><div class="ttdeci">void add_msg_if_player(const std::string &amp;msg) const override</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l02219">player.cpp:2219</a></div></div>
<div class="ttc" id="aclassrestore__on__out__of__scope_html"><div class="ttname"><a href="classrestore__on__out__of__scope.html">restore_on_out_of_scope</a></div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00270">cata_utility.h:271</a></div></div>
<div class="ttc" id="aclassspell_html_a62a42d1597639881eafc04506095695d"><div class="ttname"><a href="classspell.html#a62a42d1597639881eafc04506095695d">spell::damage</a></div><div class="ttdeci">int damage() const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00483">magic.cpp:483</a></div></div>
<div class="ttc" id="aclassspell_html_ab2631d5fc9da8a5ec04f7c3757e6c9f5"><div class="ttname"><a href="classspell.html#ab2631d5fc9da8a5ec04f7c3757e6c9f5">spell::can_cast</a></div><div class="ttdeci">bool can_cast(const Character &amp;guy) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00671">magic.cpp:671</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a1591b490e9f8d48547b108ae481f982e"><div class="ttname"><a href="classtarget__ui.html#a1591b490e9f8d48547b108ae481f982e">target_ui::choose_initial_target</a></div><div class="ttdeci">tripoint choose_initial_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02696">ranged.cpp:2696</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a15d523ae27fc66cbff7adac5e9fa91dd"><div class="ttname"><a href="classtarget__ui.html#a15d523ae27fc66cbff7adac5e9fa91dd">target_ui::draw_terrain_overlay</a></div><div class="ttdeci">void draw_terrain_overlay()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03136">ranged.cpp:3136</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a21275763803a2ce0d00e02dc0076a36c"><div class="ttname"><a href="classtarget__ui.html#a21275763803a2ce0d00e02dc0076a36c">target_ui::action_aim_and_shoot</a></div><div class="ttdeci">bool action_aim_and_shoot(const std::string &amp;action)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03106">ranged.cpp:3106</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a5c885fc69abc2190e1850b7f23601ac2"><div class="ttname"><a href="classtarget__ui.html#a5c885fc69abc2190e1850b7f23601ac2">target_ui::try_reacquire_target</a></div><div class="ttdeci">bool try_reacquire_target(bool critter, tripoint &amp;new_dst)</div><div class="ttdoc">Try to re-acquire target for aim-and-fire.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02724">ranged.cpp:2724</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a691e0bd6f4c5f82b309fd0e026f77825"><div class="ttname"><a href="classtarget__ui.html#a691e0bd6f4c5f82b309fd0e026f77825">target_ui::action_switch_mode</a></div><div class="ttdeci">void action_switch_mode()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02975">ranged.cpp:2975</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a6c0468c35f79fb501be1a3a50b4081d4"><div class="ttname"><a href="classtarget__ui.html#a6c0468c35f79fb501be1a3a50b4081d4">target_ui::action_aim</a></div><div class="ttdeci">bool action_aim()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03091">ranged.cpp:3091</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a779bc721417ab8ee4a6b103d8a1030f5"><div class="ttname"><a href="classtarget__ui.html#a779bc721417ab8ee4a6b103d8a1030f5">target_ui::toggle_snap_to_target</a></div><div class="ttdeci">void toggle_snap_to_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02867">ranged.cpp:2867</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a93a478e95d201324548329f39a087208"><div class="ttname"><a href="classtarget__ui.html#a93a478e95d201324548329f39a087208">target_ui::draw_ui_window</a></div><div class="ttdeci">void draw_ui_window()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03229">ranged.cpp:3229</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a97d244cde8cae12d0266daf6fc083014"><div class="ttname"><a href="classtarget__ui.html#a97d244cde8cae12d0266daf6fc083014">target_ui::confirm_non_enemy_target</a></div><div class="ttdeci">bool confirm_non_enemy_target()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02796">ranged.cpp:2796</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a9d84b28ee34fdefd76ae987c95a29600"><div class="ttname"><a href="classtarget__ui.html#a9d84b28ee34fdefd76ae987c95a29600">target_ui::on_target_accepted</a></div><div class="ttdeci">void on_target_accepted(bool harmful)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03647">ranged.cpp:3647</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6">target_ui::ExitCode</a></div><div class="ttdeci">ExitCode</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00214">ranged.cpp:214</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">target_ui::ExitCode::Reload</a></div><div class="ttdeci">@ Reload</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">target_ui::ExitCode::Abort</a></div><div class="ttdeci">@ Abort</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6abd2b7e5f85a6ea65065c4ebc6d7c95bb">target_ui::ExitCode::Fire</a></div><div class="ttdeci">@ Fire</div></div>
<div class="ttc" id="aclasstarget__ui_html_aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398"><div class="ttname"><a href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">target_ui::ExitCode::Timeout</a></div><div class="ttdeci">@ Timeout</div></div>
<div class="ttc" id="aclasstarget__ui_html_ab290e475e7cd308b447788ec369053b0"><div class="ttname"><a href="classtarget__ui.html#ab290e475e7cd308b447788ec369053b0">target_ui::handle_cursor_movement</a></div><div class="ttdeci">bool handle_cursor_movement(const std::string &amp;action, bool &amp;skip_redraw)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02480">ranged.cpp:2480</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_acbdcdc8f41dd8bcbf887b12d96c9948d"><div class="ttname"><a href="classtarget__ui.html#acbdcdc8f41dd8bcbf887b12d96c9948d">target_ui::action_switch_ammo</a></div><div class="ttdeci">bool action_switch_ammo()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03071">ranged.cpp:3071</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_ad2ca7887fd647df92c825e8ee153ff84"><div class="ttname"><a href="classtarget__ui.html#ad2ca7887fd647df92c825e8ee153ff84">target_ui::prompt_friendlies_in_lof</a></div><div class="ttdeci">bool prompt_friendlies_in_lof()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02805">ranged.cpp:2805</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_af3857720f2059a0a2f23896bc7e808c7"><div class="ttname"><a href="classtarget__ui.html#af3857720f2059a0a2f23896bc7e808c7">target_ui::init_window_and_input</a></div><div class="ttdeci">void init_window_and_input()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02397">ranged.cpp:2397</a></div></div>
<div class="ttc" id="aclassui__adaptor_html"><div class="ttname"><a href="classui__adaptor.html">ui_adaptor</a></div><div class="ttdoc">Adaptor between UI code and the UI management system.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8h_source.html#l00064">ui_manager.h:65</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="anamespaceui__manager_html_ae38f3a918052ef286ee60daac47f52d4"><div class="ttname"><a href="namespaceui__manager.html#ae38f3a918052ef286ee60daac47f52d4">ui_manager::redraw</a></div><div class="ttdeci">void redraw()</div><div class="ttdoc">Invalidate the top window and redraw all invalidated windows.</div><div class="ttdef"><b>Definition:</b> <a href="ui__manager_8cpp_source.html#l00389">ui_manager.cpp:389</a></div></div>
<div class="ttc" id="anamespaceui_html"><div class="ttname"><a href="namespaceui.html">ui</a></div><div class="ttdef"><b>Definition:</b> <a href="overmap__ui_8h_source.html#l00016">overmap_ui.h:17</a></div></div>
<div class="ttc" id="aranged_8cpp_html_ae134db696195500e4ff1835e6f784aca"><div class="ttname"><a href="ranged_8cpp.html#ae134db696195500e4ff1835e6f784aca">AIF_DURATION_LIMIT</a></div><div class="ttdeci">static constexpr int AIF_DURATION_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00160">ranged.cpp:160</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a727b63583e01fa2b3952dab580c84dc2">Abort</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00037">aim_activity_actor::aborted</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00051">aim_activity_actor::acceptable_losses</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00030">aim_activity_actor::action</a>, <a class="el" href="dialogue_8h_source.html#l00036">action</a>, <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l00206">activity</a>, <a class="el" href="player_8cpp_source.html#l02219">player::add_msg_if_player()</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00031">aim_activity_actor::aif_duration</a>, <a class="el" href="ranged_8cpp_source.html#l00160">AIF_DURATION_LIMIT</a>, <a class="el" href="ranged_8cpp_source.html#l00273">aim_mode</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00032">aim_activity_actor::aiming_at_critter</a>, <a class="el" href="ranged_8cpp_source.html#l00247">allow_zlevel_shift</a>, <a class="el" href="magic_8cpp_source.html#l00671">spell::can_cast()</a>, <a class="el" href="ranged_8cpp_source.html#l00200">casting</a>, <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02796">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00265">ctxt</a>, <a class="el" href="magic_8cpp_source.html#l00483">spell::damage()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l00299">draw_turret_lines</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="ranged_8cpp_source.html#l03775">ranged::effective_dispersion()</a>, <a class="el" href="magic_8cpp_source.html#l00820">spell::energy_string()</a>, <a class="el" href="ranged_8cpp_source.html#l03046">ensure_ranged_gun_mode()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00029">aim_activity_actor::first_turn</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="input_8cpp_source.html#l00854">input_context::handle_input()</a>, <a class="el" href="map_8h_source.html#l01684">map::has_zlevels()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="map_8h_source.html#l00470">map::invalidate_map_cache()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="enums_8h_source.html#l00261">m_bad</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00204">no_mana</a>, <a class="el" href="ranged_8cpp_source.html#l03647">on_target_accepted()</a>, <a class="el" href="character_8cpp_source.html#l00576">Character::pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02805">prompt_friendlies_in_lof()</a>, <a class="el" href="ui__manager_8cpp_source.html#l00389">ui_manager::redraw()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6a4d1c8263ba1036754f8db14a98f9f006">Reload</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00044">aim_activity_actor::reload_requested</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">Shape</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00034">aim_activity_actor::shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00253">shifting_view</a>, <a class="el" href="item_8cpp_source.html#l07155">item::sight_dispersion()</a>, <a class="el" href="ranged_8cpp_source.html#l00269">sight_dispersion</a>, <a class="el" href="activity__actor__definitions_8h_source.html#l00033">aim_activity_actor::snap_to_target</a>, <a class="el" href="ranged_8cpp_source.html#l00250">snap_to_target</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="classtarget__ui.html#aa98e28471bb023e99404674ad6331ad6ac85a251cc457840f1e032f1b733e9398">Timeout</a>, <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00234">traj</a>, <a class="el" href="ranged_8cpp_source.html#l02724">try_reacquire_target()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>, <a class="el" href="player_8h_source.html#l00365">player::view_offset</a>, <a class="el" href="ranged_8cpp_source.html#l00196">vturrets</a>, <a class="el" href="ranged_8cpp_source.html#l00263">w_target</a>, <a class="el" href="ranged_8cpp_source.html#l00186">you</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

</div>
</div>
<a id="a3ead422f4a78394c13bc3f4c6c953f42" name="a3ead422f4a78394c13bc3f4c6c953f42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ead422f4a78394c13bc3f4c6c953f42">&#9670;&nbsp;</a></span>set_cursor_pos()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::set_cursor_pos </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02538">2538</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02539" name="l02539"></a><span class="lineno"> 2539</span>{</div>
<div class="line"><a id="l02540" name="l02540"></a><span class="lineno"> 2540</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> == new_pos ) {</div>
<div class="line"><a id="l02541" name="l02541"></a><span class="lineno"> 2541</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02542" name="l02542"></a><span class="lineno"> 2542</span>    }</div>
<div class="line"><a id="l02543" name="l02543"></a><span class="lineno"> 2543</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a> &amp;&amp; new_pos != <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a id="l02544" name="l02544"></a><span class="lineno"> 2544</span>        <span class="comment">// range == 0, no sense in moving cursor</span></div>
<div class="line"><a id="l02545" name="l02545"></a><span class="lineno"> 2545</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02546" name="l02546"></a><span class="lineno"> 2546</span>    }</div>
<div class="line"><a id="l02547" name="l02547"></a><span class="lineno"> 2547</span> </div>
<div class="line"><a id="l02548" name="l02548"></a><span class="lineno"> 2548</span>    <span class="comment">// Make sure new position is valid or find a closest valid position</span></div>
<div class="line"><a id="l02549" name="l02549"></a><span class="lineno"> 2549</span>    std::vector&lt;tripoint&gt; new_traj;</div>
<div class="line"><a id="l02550" name="l02550"></a><span class="lineno"> 2550</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> valid_pos = new_pos;</div>
<div class="line"><a id="l02551" name="l02551"></a><span class="lineno"> 2551</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l02552" name="l02552"></a><span class="lineno"> 2552</span>    <span class="keywordflow">if</span>( new_pos != <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> ) {</div>
<div class="line"><a id="l02553" name="l02553"></a><span class="lineno"> 2553</span>        <span class="comment">// On Z axis, make sure we do not exceed map boundaries</span></div>
<div class="line"><a id="l02554" name="l02554"></a><span class="lineno"> 2554</span>        valid_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( valid_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>, <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> );</div>
<div class="line"><a id="l02555" name="l02555"></a><span class="lineno"> 2555</span>        <span class="comment">// Or current view range</span></div>
<div class="line"><a id="l02556" name="l02556"></a><span class="lineno"> 2556</span>        valid_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> = <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( valid_pos.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code hl_variable" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a>, <a class="code hl_variable" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> ) + <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l02557" name="l02557"></a><span class="lineno"> 2557</span> </div>
<div class="line"><a id="l02558" name="l02558"></a><span class="lineno"> 2558</span>        new_traj = here.<a class="code hl_function" href="classmap.html#a0f73359be972a030063b4e84f770275e">find_clear_path</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, valid_pos );</div>
<div class="line"><a id="l02559" name="l02559"></a><span class="lineno"> 2559</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> == 1 ) {</div>
<div class="line"><a id="l02560" name="l02560"></a><span class="lineno"> 2560</span>            <span class="comment">// We should always be able to hit adjacent squares</span></div>
<div class="line"><a id="l02561" name="l02561"></a><span class="lineno"> 2561</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="coordinates_8h.html#a5ca1722555a6d5ab9ab7ae8e35c35eaa">square_dist</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, valid_pos ) &gt; 1 ) {</div>
<div class="line"><a id="l02562" name="l02562"></a><span class="lineno"> 2562</span>                valid_pos = new_traj[0];</div>
<div class="line"><a id="l02563" name="l02563"></a><span class="lineno"> 2563</span>            }</div>
<div class="line"><a id="l02564" name="l02564"></a><span class="lineno"> 2564</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="cached__options_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a> ) {</div>
<div class="line"><a id="l02565" name="l02565"></a><span class="lineno"> 2565</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( valid_pos ) &gt; <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02566" name="l02566"></a><span class="lineno"> 2566</span>                <span class="comment">// Find the farthest point that is still in range</span></div>
<div class="line"><a id="l02567" name="l02567"></a><span class="lineno"> 2567</span>                <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> i = new_traj.size(); i &gt; 0; i-- ) {</div>
<div class="line"><a id="l02568" name="l02568"></a><span class="lineno"> 2568</span>                    <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( new_traj[i - 1] ) &lt;= <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02569" name="l02569"></a><span class="lineno"> 2569</span>                        valid_pos = new_traj[i - 1];</div>
<div class="line"><a id="l02570" name="l02570"></a><span class="lineno"> 2570</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02571" name="l02571"></a><span class="lineno"> 2571</span>                    }</div>
<div class="line"><a id="l02572" name="l02572"></a><span class="lineno"> 2572</span>                }</div>
<div class="line"><a id="l02573" name="l02573"></a><span class="lineno"> 2573</span>                <span class="comment">// Sanity check</span></div>
<div class="line"><a id="l02574" name="l02574"></a><span class="lineno"> 2574</span>                <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( valid_pos ) &gt; <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02575" name="l02575"></a><span class="lineno"> 2575</span>                    <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;Calculated trajectory exceeds allowed range!&quot;</span> );</div>
<div class="line"><a id="l02576" name="l02576"></a><span class="lineno"> 2576</span>                    valid_pos = <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a id="l02577" name="l02577"></a><span class="lineno"> 2577</span>                }</div>
<div class="line"><a id="l02578" name="l02578"></a><span class="lineno"> 2578</span>            }</div>
<div class="line"><a id="l02579" name="l02579"></a><span class="lineno"> 2579</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02580" name="l02580"></a><span class="lineno"> 2580</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> delta = valid_pos - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>;</div>
<div class="line"><a id="l02581" name="l02581"></a><span class="lineno"> 2581</span>            valid_pos = <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> + <a class="code hl_struct" href="structtripoint.html">tripoint</a>(</div>
<div class="line"><a id="l02582" name="l02582"></a><span class="lineno"> 2582</span>                            <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code hl_variable" href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">x</a>, -<a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ),</div>
<div class="line"><a id="l02583" name="l02583"></a><span class="lineno"> 2583</span>                            <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code hl_variable" href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">y</a>, -<a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ),</div>
<div class="line"><a id="l02584" name="l02584"></a><span class="lineno"> 2584</span>                            <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( delta.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> )</div>
<div class="line"><a id="l02585" name="l02585"></a><span class="lineno"> 2585</span>                        );</div>
<div class="line"><a id="l02586" name="l02586"></a><span class="lineno"> 2586</span>        }</div>
<div class="line"><a id="l02587" name="l02587"></a><span class="lineno"> 2587</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02588" name="l02588"></a><span class="lineno"> 2588</span>        new_traj.push_back( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a id="l02589" name="l02589"></a><span class="lineno"> 2589</span>    }</div>
<div class="line"><a id="l02590" name="l02590"></a><span class="lineno"> 2590</span> </div>
<div class="line"><a id="l02591" name="l02591"></a><span class="lineno"> 2591</span>    <span class="keywordflow">if</span>( valid_pos == <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a id="l02592" name="l02592"></a><span class="lineno"> 2592</span>        <span class="comment">// We don&#39;t need to move the cursor after all</span></div>
<div class="line"><a id="l02593" name="l02593"></a><span class="lineno"> 2593</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02594" name="l02594"></a><span class="lineno"> 2594</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( new_pos == valid_pos ) {</div>
<div class="line"><a id="l02595" name="l02595"></a><span class="lineno"> 2595</span>        <span class="comment">// We can reuse new_traj</span></div>
<div class="line"><a id="l02596" name="l02596"></a><span class="lineno"> 2596</span>        <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> = valid_pos;</div>
<div class="line"><a id="l02597" name="l02597"></a><span class="lineno"> 2597</span>        <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> = new_traj;</div>
<div class="line"><a id="l02598" name="l02598"></a><span class="lineno"> 2598</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02599" name="l02599"></a><span class="lineno"> 2599</span>        <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> = valid_pos;</div>
<div class="line"><a id="l02600" name="l02600"></a><span class="lineno"> 2600</span>        <a class="code hl_variable" href="classtarget__ui.html#a542ba80f542b41ea6a81f1ab8b14b521">traj</a> = here.<a class="code hl_function" href="classmap.html#a0f73359be972a030063b4e84f770275e">find_clear_path</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l02601" name="l02601"></a><span class="lineno"> 2601</span>    }</div>
<div class="line"><a id="l02602" name="l02602"></a><span class="lineno"> 2602</span> </div>
<div class="line"><a id="l02603" name="l02603"></a><span class="lineno"> 2603</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a id="l02604" name="l02604"></a><span class="lineno"> 2604</span>        <a class="code hl_function" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a id="l02605" name="l02605"></a><span class="lineno"> 2605</span>    }</div>
<div class="line"><a id="l02606" name="l02606"></a><span class="lineno"> 2606</span> </div>
<div class="line"><a id="l02607" name="l02607"></a><span class="lineno"> 2607</span>    <span class="comment">// Make player&#39;s sprite flip to face the current target</span></div>
<div class="line"><a id="l02608" name="l02608"></a><span class="lineno"> 2608</span>    <a class="code hl_struct" href="structpoint.html">point</a> d( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>() );</div>
<div class="line"><a id="l02609" name="l02609"></a><span class="lineno"> 2609</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="cached__options_8cpp.html#a406fb460d3cd96ac0e1cc3ccdef6340a">tile_iso</a> ) {</div>
<div class="line"><a id="l02610" name="l02610"></a><span class="lineno"> 2610</span> </div>
<div class="line"><a id="l02611" name="l02611"></a><span class="lineno"> 2611</span>        <span class="keywordflow">if</span>( d.x &gt; 0 ) {</div>
<div class="line"><a id="l02612" name="l02612"></a><span class="lineno"> 2612</span>            <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code hl_enumvalue" href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a86dc1254b0f072b9cb90b4cf14cb2917">FacingDirection::FD_RIGHT</a>;</div>
<div class="line"><a id="l02613" name="l02613"></a><span class="lineno"> 2613</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( d.x &lt; 0 ) {</div>
<div class="line"><a id="l02614" name="l02614"></a><span class="lineno"> 2614</span>            <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code hl_enumvalue" href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a68b715cd56911c8b0ce1b82f76547b6b">FacingDirection::FD_LEFT</a>;</div>
<div class="line"><a id="l02615" name="l02615"></a><span class="lineno"> 2615</span>        }</div>
<div class="line"><a id="l02616" name="l02616"></a><span class="lineno"> 2616</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02617" name="l02617"></a><span class="lineno"> 2617</span>        <span class="keywordflow">if</span>( d.x &gt;= 0 &amp;&amp; d.y &gt;= 0 ) {</div>
<div class="line"><a id="l02618" name="l02618"></a><span class="lineno"> 2618</span>            <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code hl_enumvalue" href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a86dc1254b0f072b9cb90b4cf14cb2917">FacingDirection::FD_RIGHT</a>;</div>
<div class="line"><a id="l02619" name="l02619"></a><span class="lineno"> 2619</span>        }</div>
<div class="line"><a id="l02620" name="l02620"></a><span class="lineno"> 2620</span>        <span class="keywordflow">if</span>( d.y &lt;= 0 &amp;&amp; d.x &lt;= 0 ) {</div>
<div class="line"><a id="l02621" name="l02621"></a><span class="lineno"> 2621</span>            <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">facing</a> = <a class="code hl_enumvalue" href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a68b715cd56911c8b0ce1b82f76547b6b">FacingDirection::FD_LEFT</a>;</div>
<div class="line"><a id="l02622" name="l02622"></a><span class="lineno"> 2622</span>        }</div>
<div class="line"><a id="l02623" name="l02623"></a><span class="lineno"> 2623</span>    }</div>
<div class="line"><a id="l02624" name="l02624"></a><span class="lineno"> 2624</span> </div>
<div class="line"><a id="l02625" name="l02625"></a><span class="lineno"> 2625</span>    <span class="comment">// Cache creature under cursor</span></div>
<div class="line"><a id="l02626" name="l02626"></a><span class="lineno"> 2626</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> != <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) {</div>
<div class="line"><a id="l02627" name="l02627"></a><span class="lineno"> 2627</span>        <a class="code hl_class" href="classCreature.html">Creature</a> *cr = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02628" name="l02628"></a><span class="lineno"> 2628</span>        <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code hl_function" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) ) {</div>
<div class="line"><a id="l02629" name="l02629"></a><span class="lineno"> 2629</span>            <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = cr;</div>
<div class="line"><a id="l02630" name="l02630"></a><span class="lineno"> 2630</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02631" name="l02631"></a><span class="lineno"> 2631</span>            <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02632" name="l02632"></a><span class="lineno"> 2632</span>        }</div>
<div class="line"><a id="l02633" name="l02633"></a><span class="lineno"> 2633</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02634" name="l02634"></a><span class="lineno"> 2634</span>        <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l02635" name="l02635"></a><span class="lineno"> 2635</span>    }</div>
<div class="line"><a id="l02636" name="l02636"></a><span class="lineno"> 2636</span> </div>
<div class="line"><a id="l02637" name="l02637"></a><span class="lineno"> 2637</span>    <span class="comment">// Update mode-specific stuff</span></div>
<div class="line"><a id="l02638" name="l02638"></a><span class="lineno"> 2638</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> ) {</div>
<div class="line"><a id="l02639" name="l02639"></a><span class="lineno"> 2639</span>        <a class="code hl_function" href="classtarget__ui.html#a1403890979533cd6ea29897e3ee81ab5">recalc_aim_turning_penalty</a>();</div>
<div class="line"><a id="l02640" name="l02640"></a><span class="lineno"> 2640</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a id="l02641" name="l02641"></a><span class="lineno"> 2641</span>        <span class="keyword">const</span> std::string fx = <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#aa34fc8ebf8b820ac055f4b4dd9d78c35">effect</a>();</div>
<div class="line"><a id="l02642" name="l02642"></a><span class="lineno"> 2642</span>        <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;target_attack&quot;</span> || fx == <span class="stringliteral">&quot;projectile_attack&quot;</span> || fx == <span class="stringliteral">&quot;ter_transform&quot;</span> ) {</div>
<div class="line"><a id="l02643" name="l02643"></a><span class="lineno"> 2643</span>            <a class="code hl_variable" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code hl_function" href="namespacespell__effect.html#aeba26a51ccbe0af305962188ede8c6cd">spell_effect::spell_effect_blast</a>( *<a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a004decbbde4de635b4e652acff65eb8e">aoe</a>(), <span class="keyword">true</span> );</div>
<div class="line"><a id="l02644" name="l02644"></a><span class="lineno"> 2644</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;cone_attack&quot;</span> ) {</div>
<div class="line"><a id="l02645" name="l02645"></a><span class="lineno"> 2645</span>            <a class="code hl_variable" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code hl_function" href="namespacespell__effect.html#a0e09e84c2b7a257a455b3e9fc3593b4b">spell_effect::spell_effect_cone</a>( *<a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a004decbbde4de635b4e652acff65eb8e">aoe</a>(), <span class="keyword">true</span> );</div>
<div class="line"><a id="l02646" name="l02646"></a><span class="lineno"> 2646</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( fx == <span class="stringliteral">&quot;line_attack&quot;</span> ) {</div>
<div class="line"><a id="l02647" name="l02647"></a><span class="lineno"> 2647</span>            <a class="code hl_variable" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a> = <a class="code hl_function" href="namespacespell__effect.html#aa36a2d7d3cb5678aa8b0eb00c0ba7c0d">spell_effect::spell_effect_line</a>( *<a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>, <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a>, <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#a004decbbde4de635b4e652acff65eb8e">aoe</a>(), <span class="keyword">true</span> );</div>
<div class="line"><a id="l02648" name="l02648"></a><span class="lineno"> 2648</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02649" name="l02649"></a><span class="lineno"> 2649</span>            <a class="code hl_variable" href="classtarget__ui.html#ab855722580bd112ef0590b5a9b4f3556">spell_aoe</a>.clear();</div>
<div class="line"><a id="l02650" name="l02650"></a><span class="lineno"> 2650</span>        }</div>
<div class="line"><a id="l02651" name="l02651"></a><span class="lineno"> 2651</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> ) {</div>
<div class="line"><a id="l02652" name="l02652"></a><span class="lineno"> 2652</span>        <a class="code hl_function" href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">update_turrets_in_range</a>();</div>
<div class="line"><a id="l02653" name="l02653"></a><span class="lineno"> 2653</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">TargetMode::Shape</a> ) {</div>
<div class="line"><a id="l02654" name="l02654"></a><span class="lineno"> 2654</span>        std::shared_ptr&lt;shape&gt; sh = <a class="code hl_variable" href="classtarget__ui.html#a2f93a66a18420fd252e275a9c6f536d4">shape_gen</a>-&gt;create( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l02655" name="l02655"></a><span class="lineno"> 2655</span>        <a class="code hl_struct" href="structprojectile.html">projectile</a> proj = <a class="code hl_function" href="ranged_8cpp.html#ab0db3d2d826960249b5a1d47fa7881ff">make_gun_projectile</a>( *<a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a> );</div>
<div class="line"><a id="l02656" name="l02656"></a><span class="lineno"> 2656</span>        <span class="comment">// Same as in map::shoot (should probably be a function!)</span></div>
<div class="line"><a id="l02657" name="l02657"></a><span class="lineno"> 2657</span>        <span class="keywordtype">int</span> expected_bash_force = std::accumulate( proj.<a class="code hl_variable" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a>.<a class="code hl_function" href="structdamage__instance.html#a9fecfb3aaaa2d93dc882893cf9a71e2e">begin</a>(), proj.<a class="code hl_variable" href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">impact</a>.<a class="code hl_function" href="structdamage__instance.html#a17fd21018ff56a2bd330302c1ec1bc77">end</a>(), 0.0,</div>
<div class="line"><a id="l02658" name="l02658"></a><span class="lineno"> 2658</span>        []( <span class="keywordtype">double</span> acc, <span class="keyword">const</span> <a class="code hl_struct" href="structdamage__unit.html">damage_unit</a> &amp; du ) {</div>
<div class="line"><a id="l02659" name="l02659"></a><span class="lineno"> 2659</span>            return acc + du.amount + du.res_pen;</div>
<div class="line"><a id="l02660" name="l02660"></a><span class="lineno"> 2660</span>        } );</div>
<div class="line"><a id="l02661" name="l02661"></a><span class="lineno"> 2661</span>        <a class="code hl_variable" href="classtarget__ui.html#a6f2c970f904d7b8c06e403dbc4560f4d">shape_coverage</a> = <a class="code hl_function" href="namespaceranged.html#a7b4da33d1d9391123845f299f1f156dc">ranged::expected_coverage</a>( *sh, here, expected_bash_force );</div>
<div class="line"><a id="l02662" name="l02662"></a><span class="lineno"> 2662</span>    }</div>
<div class="line"><a id="l02663" name="l02663"></a><span class="lineno"> 2663</span> </div>
<div class="line"><a id="l02664" name="l02664"></a><span class="lineno"> 2664</span>    <span class="comment">// Update UI controls &amp; colors</span></div>
<div class="line"><a id="l02665" name="l02665"></a><span class="lineno"> 2665</span>    <a class="code hl_function" href="classtarget__ui.html#ad1e40f0212d403109c8969d7308e493f">update_status</a>();</div>
<div class="line"><a id="l02666" name="l02666"></a><span class="lineno"> 2666</span> </div>
<div class="line"><a id="l02667" name="l02667"></a><span class="lineno"> 2667</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02668" name="l02668"></a><span class="lineno"> 2668</span>}</div>
<div class="ttc" id="acached__options_8cpp_html_a0cb65464a3fa34c1ed5474f5d2d853a7"><div class="ttname"><a href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a></div><div class="ttdeci">int fov_3d_z_range</div><div class="ttdoc">3D FoV range, in Z levels, in both directions.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00015">cached_options.cpp:15</a></div></div>
<div class="ttc" id="acached__options_8cpp_html_a406fb460d3cd96ac0e1cc3ccdef6340a"><div class="ttname"><a href="cached__options_8cpp.html#a406fb460d3cd96ac0e1cc3ccdef6340a">tile_iso</a></div><div class="ttdeci">bool tile_iso</div><div class="ttdoc">Using isometric tileset.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00016">cached_options.cpp:16</a></div></div>
<div class="ttc" id="acached__options_8cpp_html_a40b9d88f6d95e646490329d0071ec931"><div class="ttname"><a href="cached__options_8cpp.html#a40b9d88f6d95e646490329d0071ec931">trigdist</a></div><div class="ttdeci">bool trigdist</div><div class="ttdoc">Circular distances.</div><div class="ttdef"><b>Definition:</b> <a href="cached__options_8cpp_source.html#l00012">cached_options.cpp:12</a></div></div>
<div class="ttc" id="acata__utility_8h_html_ad22b4a043b6eb4c2c06f87f83b720b15"><div class="ttname"><a href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a></div><div class="ttdeci">constexpr T clamp(const T &amp;val, const T &amp;min, const T &amp;max)</div><div class="ttdoc">Clamp first argument so that it is no lower than second and no higher than third.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8h_source.html#l00145">cata_utility.h:145</a></div></div>
<div class="ttc" id="aclassCreature_html_a21b8fbeb525a28615eec6a6c22beff44"><div class="ttname"><a href="classCreature.html#a21b8fbeb525a28615eec6a6c22beff44">Creature::facing</a></div><div class="ttdeci">FacingDirection facing</div><div class="ttdoc">return the direction the creature is facing, for sdl horizontal flip</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00135">creature.h:135</a></div></div>
<div class="ttc" id="aclassmap_html_a0f73359be972a030063b4e84f770275e"><div class="ttname"><a href="classmap.html#a0f73359be972a030063b4e84f770275e">map::find_clear_path</a></div><div class="ttdeci">std::vector&lt; tripoint &gt; find_clear_path(const tripoint &amp;source, const tripoint &amp;destination) const</div><div class="ttdoc">Iteratively tries Bresenham lines with different biases until it finds a clear line or decides there ...</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l06276">map.cpp:6276</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a2f93a66a18420fd252e275a9c6f536d4"><div class="ttname"><a href="classtarget__ui.html#a2f93a66a18420fd252e275a9c6f536d4">target_ui::shape_gen</a></div><div class="ttdeci">cata::optional&lt; shape_factory &gt; shape_gen</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00208">ranged.cpp:208</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_aa955ab0c7cfbd2c8c5d439f5aed608ef"><div class="ttname"><a href="classtarget__ui.html#aa955ab0c7cfbd2c8c5d439f5aed608ef">target_ui::update_turrets_in_range</a></div><div class="ttdeci">void update_turrets_in_range()</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02919">ranged.cpp:2919</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a5ca1722555a6d5ab9ab7ae8e35c35eaa"><div class="ttname"><a href="coordinates_8h.html#a5ca1722555a6d5ab9ab7ae8e35c35eaa">square_dist</a></div><div class="ttdeci">int square_dist(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00505">coordinates.h:505</a></div></div>
<div class="ttc" id="acreature_8h_html_ad75f2d1f6565bcf922f3f2ddab4c6b11a68b715cd56911c8b0ce1b82f76547b6b"><div class="ttname"><a href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a68b715cd56911c8b0ce1b82f76547b6b">FD_LEFT</a></div><div class="ttdeci">@ FD_LEFT</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00073">creature.h:73</a></div></div>
<div class="ttc" id="acreature_8h_html_ad75f2d1f6565bcf922f3f2ddab4c6b11a86dc1254b0f072b9cb90b4cf14cb2917"><div class="ttname"><a href="creature_8h.html#ad75f2d1f6565bcf922f3f2ddab4c6b11a86dc1254b0f072b9cb90b4cf14cb2917">FD_RIGHT</a></div><div class="ttdeci">@ FD_RIGHT</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00075">creature.h:74</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a3984a9476d1edc78e4e7b886a08d4d4b"><div class="ttname"><a href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a></div><div class="ttdeci">static constexpr int OVERMAP_HEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00062">game_constants.h:62</a></div></div>
<div class="ttc" id="agame__constants_8h_html_aad0eacfa516a8f7e005674027d7640fe"><div class="ttname"><a href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a></div><div class="ttdeci">static constexpr int OVERMAP_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00060">game_constants.h:60</a></div></div>
<div class="ttc" id="anamespaceranged_html_a7b4da33d1d9391123845f299f1f156dc"><div class="ttname"><a href="namespaceranged.html#a7b4da33d1d9391123845f299f1f156dc">ranged::expected_coverage</a></div><div class="ttdeci">std::map&lt; tripoint, double &gt; expected_coverage(const shape &amp;sh, const map &amp;here, int bash_power)</div><div class="ttdef"><b>Definition:</b> <a href="ranged__aoe_8cpp_source.html#l00129">ranged_aoe.cpp:129</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_a0e09e84c2b7a257a455b3e9fc3593b4b"><div class="ttname"><a href="namespacespell__effect.html#a0e09e84c2b7a257a455b3e9fc3593b4b">spell_effect::spell_effect_cone</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_cone(const spell &amp;sp, const tripoint &amp;source, const tripoint &amp;target, int aoe_radius, bool ignore_walls)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00193">magic_spell_effect.cpp:193</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_aa36a2d7d3cb5678aa8b0eb00c0ba7c0d"><div class="ttname"><a href="namespacespell__effect.html#aa36a2d7d3cb5678aa8b0eb00c0ba7c0d">spell_effect::spell_effect_line</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_line(const spell &amp;, const tripoint &amp;source, const tripoint &amp;target, int aoe_radius, bool ignore_walls)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00239">magic_spell_effect.cpp:239</a></div></div>
<div class="ttc" id="anamespacespell__effect_html_aeba26a51ccbe0af305962188ede8c6cd"><div class="ttname"><a href="namespacespell__effect.html#aeba26a51ccbe0af305962188ede8c6cd">spell_effect::spell_effect_blast</a></div><div class="ttdeci">std::set&lt; tripoint &gt; spell_effect_blast(const spell &amp;, const tripoint &amp;, const tripoint &amp;target, int aoe_radius, bool ignore_walls)</div><div class="ttdef"><b>Definition:</b> <a href="magic__spell__effect_8cpp_source.html#l00180">magic_spell_effect.cpp:180</a></div></div>
<div class="ttc" id="aranged_8cpp_html_ab0db3d2d826960249b5a1d47fa7881ff"><div class="ttname"><a href="ranged_8cpp.html#ab0db3d2d826960249b5a1d47fa7881ff">make_gun_projectile</a></div><div class="ttdeci">static projectile make_gun_projectile(const item &amp;gun)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l01671">ranged.cpp:1671</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a17fd21018ff56a2bd330302c1ec1bc77"><div class="ttname"><a href="structdamage__instance.html#a17fd21018ff56a2bd330302c1ec1bc77">damage_instance::end</a></div><div class="ttdeci">std::vector&lt; damage_unit &gt;::iterator end()</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00130">damage.cpp:130</a></div></div>
<div class="ttc" id="astructdamage__instance_html_a9fecfb3aaaa2d93dc882893cf9a71e2e"><div class="ttname"><a href="structdamage__instance.html#a9fecfb3aaaa2d93dc882893cf9a71e2e">damage_instance::begin</a></div><div class="ttdeci">std::vector&lt; damage_unit &gt;::iterator begin()</div><div class="ttdef"><b>Definition:</b> <a href="damage_8cpp_source.html#l00120">damage.cpp:120</a></div></div>
<div class="ttc" id="astructdamage__unit_html"><div class="ttname"><a href="structdamage__unit.html">damage_unit</a></div><div class="ttdef"><b>Definition:</b> <a href="damage_8h_source.html#l00035">damage.h:35</a></div></div>
<div class="ttc" id="astructprojectile_html"><div class="ttname"><a href="structprojectile.html">projectile</a></div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00020">projectile.h:20</a></div></div>
<div class="ttc" id="astructprojectile_html_a82d8f657f8cfc4e180c15bfab8ca8a6e"><div class="ttname"><a href="structprojectile.html#a82d8f657f8cfc4e180c15bfab8ca8a6e">projectile::impact</a></div><div class="ttdeci">damage_instance impact</div><div class="ttdef"><b>Definition:</b> <a href="projectile_8h_source.html#l00021">projectile.h:21</a></div></div>
<div class="ttc" id="astructtripoint_html_a89f6c0a16e2bfd7ce4f1f1d20404c4d7"><div class="ttname"><a href="structtripoint.html#a89f6c0a16e2bfd7ce4f1f1d20404c4d7">tripoint::y</a></div><div class="ttdeci">int y</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00151">point.h:151</a></div></div>
<div class="ttc" id="astructtripoint_html_accc0725c936dbebb2486f969f39e2e5f"><div class="ttname"><a href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">tripoint::xy</a></div><div class="ttdeci">constexpr point xy() const</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00220">point.h:220</a></div></div>
<div class="ttc" id="astructtripoint_html_affdc0d5b75024cbfacd208a495def3dc"><div class="ttname"><a href="structtripoint.html#affdc0d5b75024cbfacd208a495def3dc">tripoint::x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00150">point.h:150</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="magic_8cpp_source.html#l00518">spell::aoe()</a>, <a class="el" href="damage_8cpp_source.html#l00120">damage_instance::begin()</a>, <a class="el" href="ranged_8cpp_source.html#l00200">casting</a>, <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>, <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="magic_8cpp_source.html#l00935">spell::effect()</a>, <a class="el" href="damage_8cpp_source.html#l00130">damage_instance::end()</a>, <a class="el" href="ranged__aoe_8cpp_source.html#l00129">ranged::expected_coverage()</a>, <a class="el" href="creature_8h_source.html#l00135">Creature::facing</a>, <a class="el" href="creature_8h_source.html#l00073">FD_LEFT</a>, <a class="el" href="creature_8h_source.html#l00074">FD_RIGHT</a>, <a class="el" href="map_8cpp_source.html#l06276">map::find_clear_path()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="cached__options_8cpp_source.html#l00015">fov_3d_z_range</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="projectile_8h_source.html#l00021">projectile::impact</a>, <a class="el" href="ranged_8cpp_source.html#l01671">make_gun_projectile()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="game__constants_8h_source.html#l00060">OVERMAP_DEPTH</a>, <a class="el" href="game__constants_8h_source.html#l00062">OVERMAP_HEIGHT</a>, <a class="el" href="ranged_8cpp_source.html#l01525">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="ranged_8cpp_source.html#l02905">set_view_offset()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a880c1273b27d27cfc82004c3a4b205c9">Shape</a>, <a class="el" href="ranged_8cpp_source.html#l00286">shape_coverage</a>, <a class="el" href="ranged_8cpp_source.html#l00208">shape_gen</a>, <a class="el" href="ranged_8cpp_source.html#l00250">snap_to_target</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00283">spell_aoe</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00180">spell_effect::spell_effect_blast()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00193">spell_effect::spell_effect_cone()</a>, <a class="el" href="magic__spell__effect_8cpp_source.html#l00239">spell_effect::spell_effect_line()</a>, <a class="el" href="coordinates_8h_source.html#l00505">square_dist()</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="cached__options_8cpp_source.html#l00016">tile_iso</a>, <a class="el" href="ranged_8cpp_source.html#l00234">traj</a>, <a class="el" href="cached__options_8cpp_source.html#l00012">trigdist</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>, <a class="el" href="point_8h_source.html#l00038">point::x</a>, <a class="el" href="point_8h_source.html#l00150">tripoint::x</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="point_8h_source.html#l00039">point::y</a>, <a class="el" href="point_8h_source.html#l00151">tripoint::y</a>, <a class="el" href="ranged_8cpp_source.html#l00186">you</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02878">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="aa53ba52da62f64baa29130908cf8637b" name="aa53ba52da62f64baa29130908cf8637b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa53ba52da62f64baa29130908cf8637b">&#9670;&nbsp;</a></span>set_last_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::set_last_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02786">2786</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02787" name="l02787"></a><span class="lineno"> 2787</span>{</div>
<div class="line"><a id="l02788" name="l02788"></a><span class="lineno"> 2788</span>    <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">last_target_pos</a> = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">getabs</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> );</div>
<div class="line"><a id="l02789" name="l02789"></a><span class="lineno"> 2789</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> ) {</div>
<div class="line"><a id="l02790" name="l02790"></a><span class="lineno"> 2790</span>        <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a> = <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;shared_from( *<a class="code hl_variable" href="classtarget__ui.html#a362df365f84b306e2ff14edf099a1000">dst_critter</a> );</div>
<div class="line"><a id="l02791" name="l02791"></a><span class="lineno"> 2791</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02792" name="l02792"></a><span class="lineno"> 2792</span>        <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a>.reset();</div>
<div class="line"><a id="l02793" name="l02793"></a><span class="lineno"> 2793</span>    }</div>
<div class="line"><a id="l02794" name="l02794"></a><span class="lineno"> 2794</span>}</div>
<div class="ttc" id="aclassmap_html_a501f3a1d449ac022f1b36b99da653e94"><div class="ttname"><a href="classmap.html#a501f3a1d449ac022f1b36b99da653e94">map::getabs</a></div><div class="ttdeci">tripoint getabs(const tripoint &amp;p) const</div><div class="ttdoc">Translates local (to this map) coordinates of a square to global absolute coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08276">map.cpp:8276</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ranged_8cpp_source.html#l00242">dst_critter</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08276">map::getabs()</a>, <a class="el" href="player_8h_source.html#l00373">player::last_target</a>, <a class="el" href="player_8h_source.html#l00374">player::last_target_pos</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="abcb5ba4fec5983a480a4f765da7abe23" name="abcb5ba4fec5983a480a4f765da7abe23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb5ba4fec5983a480a4f765da7abe23">&#9670;&nbsp;</a></span>set_view_offset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::set_view_offset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02905">2905</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02906" name="l02906"></a><span class="lineno"> 2906</span>{</div>
<div class="line"><a id="l02907" name="l02907"></a><span class="lineno"> 2907</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> new_( new_offset.<a class="code hl_function" href="structtripoint.html#accc0725c936dbebb2486f969f39e2e5f">xy</a>(), <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( new_offset.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code hl_variable" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a>, <a class="code hl_variable" href="cached__options_8cpp.html#a0cb65464a3fa34c1ed5474f5d2d853a7">fov_3d_z_range</a> ) );</div>
<div class="line"><a id="l02908" name="l02908"></a><span class="lineno"> 2908</span>    new_.z = <a class="code hl_function" href="cata__utility_8h.html#ad22b4a043b6eb4c2c06f87f83b720b15">clamp</a>( new_.z + <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>, -<a class="code hl_variable" href="game__constants_8h.html#aad0eacfa516a8f7e005674027d7640fe">OVERMAP_DEPTH</a>, <a class="code hl_variable" href="game__constants_8h.html#a3984a9476d1edc78e4e7b886a08d4d4b">OVERMAP_HEIGHT</a> ) - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a>;</div>
<div class="line"><a id="l02909" name="l02909"></a><span class="lineno"> 2909</span> </div>
<div class="line"><a id="l02910" name="l02910"></a><span class="lineno"> 2910</span>    <span class="keywordtype">bool</span> changed_z = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a>.<a class="code hl_variable" href="structtripoint.html#ac944c0e329b5eba2602f7a52f66bbbb9">z</a> != new_.z;</div>
<div class="line"><a id="l02911" name="l02911"></a><span class="lineno"> 2911</span>    <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a625b6dd5247589902251e845d07a2154">view_offset</a> = new_;</div>
<div class="line"><a id="l02912" name="l02912"></a><span class="lineno"> 2912</span>    <span class="keywordflow">if</span>( changed_z ) {</div>
<div class="line"><a id="l02913" name="l02913"></a><span class="lineno"> 2913</span>        <span class="comment">// We need to do a bunch of cache updates since we&#39;re</span></div>
<div class="line"><a id="l02914" name="l02914"></a><span class="lineno"> 2914</span>        <span class="comment">// looking at a different z-level.</span></div>
<div class="line"><a id="l02915" name="l02915"></a><span class="lineno"> 2915</span>        <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#af839ef9ba53f51b09259e0af06881fe6">invalidate_map_cache</a>( new_.z );</div>
<div class="line"><a id="l02916" name="l02916"></a><span class="lineno"> 2916</span>    }</div>
<div class="line"><a id="l02917" name="l02917"></a><span class="lineno"> 2917</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8h_source.html#l00145">clamp()</a>, <a class="el" href="cached__options_8cpp_source.html#l00015">fov_3d_z_range</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8h_source.html#l00470">map::invalidate_map_cache()</a>, <a class="el" href="game__constants_8h_source.html#l00060">OVERMAP_DEPTH</a>, <a class="el" href="game__constants_8h_source.html#l00062">OVERMAP_HEIGHT</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="player_8h_source.html#l00365">player::view_offset</a>, <a class="el" href="point_8h_source.html#l00220">tripoint::xy()</a>, <a class="el" href="ranged_8cpp_source.html#l00186">you</a>, and <a class="el" href="point_8h_source.html#l00152">tripoint::z</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="a779bc721417ab8ee4a6b103d8a1030f5" name="a779bc721417ab8ee4a6b103d8a1030f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a779bc721417ab8ee4a6b103d8a1030f5">&#9670;&nbsp;</a></span>toggle_snap_to_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::toggle_snap_to_target </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02867">2867</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02868" name="l02868"></a><span class="lineno"> 2868</span>{</div>
<div class="line"><a id="l02869" name="l02869"></a><span class="lineno"> 2869</span>    <a class="code hl_variable" href="classtarget__ui.html#a122323ec4c1e72c291e76643ccfd3fde">shifting_view</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l02870" name="l02870"></a><span class="lineno"> 2870</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> ) {</div>
<div class="line"><a id="l02871" name="l02871"></a><span class="lineno"> 2871</span>        <span class="comment">// Keep current view offset</span></div>
<div class="line"><a id="l02872" name="l02872"></a><span class="lineno"> 2872</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02873" name="l02873"></a><span class="lineno"> 2873</span>        <a class="code hl_function" href="classtarget__ui.html#abcb5ba4fec5983a480a4f765da7abe23">set_view_offset</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> - <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> );</div>
<div class="line"><a id="l02874" name="l02874"></a><span class="lineno"> 2874</span>    }</div>
<div class="line"><a id="l02875" name="l02875"></a><span class="lineno"> 2875</span>    <a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a> = !<a class="code hl_variable" href="classtarget__ui.html#a270f72c5bfef55a533d3cd9b3cf57ea0">snap_to_target</a>;</div>
<div class="line"><a id="l02876" name="l02876"></a><span class="lineno"> 2876</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="ranged_8cpp_source.html#l02905">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l00253">shifting_view</a>, <a class="el" href="ranged_8cpp_source.html#l00250">snap_to_target</a>, and <a class="el" href="ranged_8cpp_source.html#l00236">src</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a5c885fc69abc2190e1850b7f23601ac2" name="a5c885fc69abc2190e1850b7f23601ac2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c885fc69abc2190e1850b7f23601ac2">&#9670;&nbsp;</a></span>try_reacquire_target()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::try_reacquire_target </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>critter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structtripoint.html">tripoint</a> &amp;&#160;</td>
          <td class="paramname"><em>new_dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to re-acquire target for aim-and-fire. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">critter</td><td>whether were aiming at a critter, or a tile </td></tr>
    <tr><td class="paramname">new_dst</td><td>where to move aim cursor (if e.g. critter moved) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02724">2724</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02725" name="l02725"></a><span class="lineno"> 2725</span>{</div>
<div class="line"><a id="l02726" name="l02726"></a><span class="lineno"> 2726</span>    <span class="keywordflow">if</span>( critter ) {</div>
<div class="line"><a id="l02727" name="l02727"></a><span class="lineno"> 2727</span>        <span class="comment">// Try to re-acquire the creature</span></div>
<div class="line"><a id="l02728" name="l02728"></a><span class="lineno"> 2728</span>        <a class="code hl_typedef" href="memory__fast_8h.html#ada897699f31fc8b37c5af09d95d45840">shared_ptr_fast&lt;Creature&gt;</a> cr = <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#ab679d40f5584e38a6af33bcd7e3c102d">last_target</a>.lock();</div>
<div class="line"><a id="l02729" name="l02729"></a><span class="lineno"> 2729</span>        <span class="keywordflow">if</span>( cr &amp;&amp; <a class="code hl_function" href="ranged_8cpp.html#a7c4d782d03c3f30e5b3332260ded8951">pl_sees</a>( *cr ) &amp;&amp; <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( cr-&gt;pos() ) &lt;= <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02730" name="l02730"></a><span class="lineno"> 2730</span>            new_dst = cr-&gt;pos();</div>
<div class="line"><a id="l02731" name="l02731"></a><span class="lineno"> 2731</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l02732" name="l02732"></a><span class="lineno"> 2732</span>        }</div>
<div class="line"><a id="l02733" name="l02733"></a><span class="lineno"> 2733</span>    }</div>
<div class="line"><a id="l02734" name="l02734"></a><span class="lineno"> 2734</span> </div>
<div class="line"><a id="l02735" name="l02735"></a><span class="lineno"> 2735</span>    <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">last_target_pos</a>.has_value() ) {</div>
<div class="line"><a id="l02736" name="l02736"></a><span class="lineno"> 2736</span>        <span class="comment">// This shouldn&#39;t happen</span></div>
<div class="line"><a id="l02737" name="l02737"></a><span class="lineno"> 2737</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02738" name="l02738"></a><span class="lineno"> 2738</span>    }</div>
<div class="line"><a id="l02739" name="l02739"></a><span class="lineno"> 2739</span> </div>
<div class="line"><a id="l02740" name="l02740"></a><span class="lineno"> 2740</span>    <span class="comment">// Try to re-acquire target tile or tile where the target creature used to be</span></div>
<div class="line"><a id="l02741" name="l02741"></a><span class="lineno"> 2741</span>    <a class="code hl_struct" href="structtripoint.html">tripoint</a> local_lt = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>().<a class="code hl_function" href="classmap.html#a426c21f7244ff80a61685a89e9146fec">getlocal</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>-&gt;<a class="code hl_variable" href="classplayer.html#a9aac4afb832dc4762430b0b3545cbfea">last_target_pos</a> );</div>
<div class="line"><a id="l02742" name="l02742"></a><span class="lineno"> 2742</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( local_lt ) &lt;= <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02743" name="l02743"></a><span class="lineno"> 2743</span>        new_dst = local_lt;</div>
<div class="line"><a id="l02744" name="l02744"></a><span class="lineno"> 2744</span>        <span class="comment">// Abort aiming if a creature moved in</span></div>
<div class="line"><a id="l02745" name="l02745"></a><span class="lineno"> 2745</span>        <span class="keywordflow">return</span> !critter &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;critter_at( local_lt, <span class="keyword">true</span> );</div>
<div class="line"><a id="l02746" name="l02746"></a><span class="lineno"> 2746</span>    }</div>
<div class="line"><a id="l02747" name="l02747"></a><span class="lineno"> 2747</span> </div>
<div class="line"><a id="l02748" name="l02748"></a><span class="lineno"> 2748</span>    <span class="comment">// We moved out of range</span></div>
<div class="line"><a id="l02749" name="l02749"></a><span class="lineno"> 2749</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l02750" name="l02750"></a><span class="lineno"> 2750</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="game_8cpp_source.html#l00280">g</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="map_8cpp_source.html#l08281">map::getlocal()</a>, <a class="el" href="player_8h_source.html#l00373">player::last_target</a>, <a class="el" href="player_8h_source.html#l00374">player::last_target_pos</a>, <a class="el" href="ranged_8cpp_source.html#l01525">pl_sees()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a2c23b4913b52b2a5f80357f34d92700c" name="a2c23b4913b52b2a5f80357f34d92700c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c23b4913b52b2a5f80357f34d92700c">&#9670;&nbsp;</a></span>uitext_fire()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string target_ui::uitext_fire </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03296">3296</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03297" name="l03297"></a><span class="lineno"> 3297</span>{</div>
<div class="line"><a id="l03298" name="l03298"></a><span class="lineno"> 3298</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a> || <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a> ) {</div>
<div class="line"><a id="l03299" name="l03299"></a><span class="lineno"> 3299</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="translations_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to throw&quot;</span>, <span class="stringliteral">&quot;to throw&quot;</span> ).<a class="code hl_function" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a id="l03300" name="l03300"></a><span class="lineno"> 3300</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">TargetMode::Reach</a> ) {</div>
<div class="line"><a id="l03301" name="l03301"></a><span class="lineno"> 3301</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="translations_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to attack&quot;</span>, <span class="stringliteral">&quot;to attack&quot;</span> ).<a class="code hl_function" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a id="l03302" name="l03302"></a><span class="lineno"> 3302</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> ) {</div>
<div class="line"><a id="l03303" name="l03303"></a><span class="lineno"> 3303</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="translations_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to cast the spell&quot;</span>, <span class="stringliteral">&quot;to cast&quot;</span> ).<a class="code hl_function" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a id="l03304" name="l03304"></a><span class="lineno"> 3304</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03305" name="l03305"></a><span class="lineno"> 3305</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="translations_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a>( <span class="stringliteral">&quot;[Hotkey] to fire&quot;</span>, <span class="stringliteral">&quot;to fire&quot;</span> ).<a class="code hl_function" href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translated</a>();</div>
<div class="line"><a id="l03306" name="l03306"></a><span class="lineno"> 3306</span>    }</div>
<div class="line"><a id="l03307" name="l03307"></a><span class="lineno"> 3307</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae"><div class="ttname"><a href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">target_ui::TargetMode::Reach</a></div><div class="ttdeci">@ Reach</div></div>
<div class="ttc" id="aclasstranslation_html_a30b5b9d586c786942c2321701a53e572"><div class="ttname"><a href="classtranslation.html#a30b5b9d586c786942c2321701a53e572">translation::translated</a></div><div class="ttdeci">std::string translated(int num=1) const</div><div class="ttdoc">Returns raw string if no translation is needed, otherwise returns the translated string.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00309">translations.cpp:309</a></div></div>
<div class="ttc" id="atranslations_8cpp_html_a176e288c640c6506a86330cb10fbe13a"><div class="ttname"><a href="translations_8cpp.html#a176e288c640c6506a86330cb10fbe13a">to_translation</a></div><div class="ttdeci">translation to_translation(const std::string &amp;raw)</div><div class="ttdoc">Shorthands for translation::to_translation.</div><div class="ttdef"><b>Definition:</b> <a href="translations_8cpp_source.html#l00384">translations.cpp:384</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997ab350f6de1060afddbefbdf47552464ae">Reach</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="translations_8cpp_source.html#l00384">to_translation()</a>, and <a class="el" href="translations_8cpp_source.html#l00309">translation::translated()</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>.</p>

</div>
</div>
<a id="abae2f397600dc6b01bb03f22bcd18666" name="abae2f397600dc6b01bb03f22bcd18666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae2f397600dc6b01bb03f22bcd18666">&#9670;&nbsp;</a></span>uitext_title()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string target_ui::uitext_title </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03281">3281</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03282" name="l03282"></a><span class="lineno"> 3282</span>{</div>
<div class="line"><a id="l03283" name="l03283"></a><span class="lineno"> 3283</span>    <span class="keywordflow">switch</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> ) {</div>
<div class="line"><a id="l03284" name="l03284"></a><span class="lineno"> 3284</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a>:</div>
<div class="line"><a id="l03285" name="l03285"></a><span class="lineno"> 3285</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a>:</div>
<div class="line"><a id="l03286" name="l03286"></a><span class="lineno"> 3286</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Firing %s&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03287" name="l03287"></a><span class="lineno"> 3287</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">TargetMode::Throw</a>:</div>
<div class="line"><a id="l03288" name="l03288"></a><span class="lineno"> 3288</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Throwing %s&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03289" name="l03289"></a><span class="lineno"> 3289</span>        <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">TargetMode::ThrowBlind</a>:</div>
<div class="line"><a id="l03290" name="l03290"></a><span class="lineno"> 3290</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="string__formatter_8h.html#a8964099387da2f95396c67566bafce3d">string_format</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Blind throwing %s&quot;</span> ), <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a7e78e26dcf9b357cda769c3ca2938eda">tname</a>() );</div>
<div class="line"><a id="l03291" name="l03291"></a><span class="lineno"> 3291</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><a id="l03292" name="l03292"></a><span class="lineno"> 3292</span>            <span class="keywordflow">return</span> <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Set target&quot;</span> );</div>
<div class="line"><a id="l03293" name="l03293"></a><span class="lineno"> 3293</span>    }</div>
<div class="line"><a id="l03294" name="l03294"></a><span class="lineno"> 3294</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="translations_8h_source.html#l00116">_</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="string__formatter_8h_source.html#l00431">string_format()</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8ce61dd2505effd96f937fa743b6491f">Throw</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a8f61cfb2c3938627416432409d2f6e86">ThrowBlind</a>, <a class="el" href="item_8cpp_source.html#l04478">item::tname()</a>, and <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03309">draw_window_title()</a>.</p>

</div>
</div>
<a id="a77429c16aec83b5c81d3a1c259259cd5" name="a77429c16aec83b5c81d3a1c259259cd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77429c16aec83b5c81d3a1c259259cd5">&#9670;&nbsp;</a></span>update_ammo_range_from_gun_mode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_ammo_range_from_gun_mode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l03053">3053</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03054" name="l03054"></a><span class="lineno"> 3054</span>{</div>
<div class="line"><a id="l03055" name="l03055"></a><span class="lineno"> 3055</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l03056" name="l03056"></a><span class="lineno"> 3056</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> ammo_current = <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#aee56a3a0b07255f5b008cd16898b75e0">ammo_current</a>();</div>
<div class="line"><a id="l03057" name="l03057"></a><span class="lineno"> 3057</span>        <span class="comment">// Test no-ammo and not a UPS weapon</span></div>
<div class="line"><a id="l03058" name="l03058"></a><span class="lineno"> 3058</span>        <span class="keywordflow">if</span>( !ammo_current &amp;&amp; ( <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#af6bd135500675d45eb9b79b196d9558e">get_gun_ups_drain</a>() == 0 ) ) {</div>
<div class="line"><a id="l03059" name="l03059"></a><span class="lineno"> 3059</span>            <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l03060" name="l03060"></a><span class="lineno"> 3060</span>            <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = 0;</div>
<div class="line"><a id="l03061" name="l03061"></a><span class="lineno"> 3061</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03062" name="l03062"></a><span class="lineno"> 3062</span>            <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = &amp;*ammo_current;</div>
<div class="line"><a id="l03063" name="l03063"></a><span class="lineno"> 3063</span>            <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#a78df34a41feb7bf25a677dba1e8181d5">range</a>();</div>
<div class="line"><a id="l03064" name="l03064"></a><span class="lineno"> 3064</span>        }</div>
<div class="line"><a id="l03065" name="l03065"></a><span class="lineno"> 3065</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l03066" name="l03066"></a><span class="lineno"> 3066</span>        <a class="code hl_variable" href="classtarget__ui.html#ae5ae79a739fcab56301077b8802355ce">ammo</a> = <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code hl_variable" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a>-&gt;<a class="code hl_function" href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">ammo_data</a>();</div>
<div class="line"><a id="l03067" name="l03067"></a><span class="lineno"> 3067</span>        <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> = <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>().<a class="code hl_variable" href="classgun__mode.html#aadaa36507ace08fc621348ae1052647e">target</a>-&gt;<a class="code hl_function" href="classitem.html#af443024fa9e01c97953b3fcf81c9cfb1">gun_range</a>( <a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a> );</div>
<div class="line"><a id="l03068" name="l03068"></a><span class="lineno"> 3068</span>    }</div>
<div class="line"><a id="l03069" name="l03069"></a><span class="lineno"> 3069</span>}</div>
<div class="ttc" id="aclassitem_html_a4adcc4a3a5f5fb20a4d245d79109640a"><div class="ttname"><a href="classitem.html#a4adcc4a3a5f5fb20a4d245d79109640a">item::ammo_data</a></div><div class="ttdeci">const itype * ammo_data() const</div><div class="ttdoc">Specific ammo data, returns nullptr if item is neither ammo nor loaded with any.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07432">item.cpp:7432</a></div></div>
<div class="ttc" id="aclassitem_html_af443024fa9e01c97953b3fcf81c9cfb1"><div class="ttname"><a href="classitem.html#af443024fa9e01c97953b3fcf81c9cfb1">item::gun_range</a></div><div class="ttdeci">int gun_range(const player *p) const</div><div class="ttdoc">The weapons range in map squares.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07256">item.cpp:7256</a></div></div>
<div class="ttc" id="aclassitem_html_af6bd135500675d45eb9b79b196d9558e"><div class="ttname"><a href="classitem.html#af6bd135500675d45eb9b79b196d9558e">item::get_gun_ups_drain</a></div><div class="ttdeci">int get_gun_ups_drain() const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09839">item.cpp:9839</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; itype &gt;</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00232">ammo</a>, <a class="el" href="turret_8cpp_source.html#l00124">turret_data::ammo_current()</a>, <a class="el" href="item_8cpp_source.html#l07432">item::ammo_data()</a>, <a class="el" href="item_8cpp_source.html#l09839">item::get_gun_ups_drain()</a>, <a class="el" href="item_8cpp_source.html#l07792">item::gun_current_mode()</a>, <a class="el" href="item_8cpp_source.html#l07256">item::gun_range()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="turret_8cpp_source.html#l00188">turret_data::range()</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="gun__mode_8h_source.html#l00019">gun_mode::target</a>, <a class="el" href="ranged_8cpp_source.html#l00194">turret</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ad1e40f0212d403109c8969d7308e493f" name="ad1e40f0212d403109c8969d7308e493f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1e40f0212d403109c8969d7308e493f">&#9670;&nbsp;</a></span>update_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02752">2752</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02753" name="l02753"></a><span class="lineno"> 2753</span>{</div>
<div class="line"><a id="l02754" name="l02754"></a><span class="lineno"> 2754</span>    std::vector&lt;std::string&gt; msgbuf;</div>
<div class="line"><a id="l02755" name="l02755"></a><span class="lineno"> 2755</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">TargetMode::Turrets</a> &amp;&amp; <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.empty() ) {</div>
<div class="line"><a id="l02756" name="l02756"></a><span class="lineno"> 2756</span>        <span class="comment">// None of the turrets are in range</span></div>
<div class="line"><a id="l02757" name="l02757"></a><span class="lineno"> 2757</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a>;</div>
<div class="line"><a id="l02758" name="l02758"></a><span class="lineno"> 2758</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a> &amp;&amp;</div>
<div class="line"><a id="l02759" name="l02759"></a><span class="lineno"> 2759</span>               ( !<a class="code hl_function" href="namespaceranged.html#aed4420a1fd77e160a72de2a528e56da5">ranged::gunmode_checks_common</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>(), msgbuf, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) ||</div>
<div class="line"><a id="l02760" name="l02760"></a><span class="lineno"> 2760</span>                 !<a class="code hl_function" href="namespaceranged.html#a743f9e35b20c136e56ca9e9480fb27bc">ranged::gunmode_checks_weapon</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>(), msgbuf, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) ) ) {</div>
<div class="line"><a id="l02761" name="l02761"></a><span class="lineno"> 2761</span>        <span class="comment">// Selected gun mode is empty</span></div>
<div class="line"><a id="l02762" name="l02762"></a><span class="lineno"> 2762</span>        <span class="comment">// TODO: it might be some other error, but that&#39;s highly unlikely to happen, so a catch-all &#39;Out of ammo&#39; is fine</span></div>
<div class="line"><a id="l02763" name="l02763"></a><span class="lineno"> 2763</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a>;</div>
<div class="line"><a id="l02764" name="l02764"></a><span class="lineno"> 2764</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> &amp;&amp; ( <a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a>-&gt;<a class="code hl_function" href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">query</a>() != <a class="code hl_enumvalue" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a> ||</div>
<div class="line"><a id="l02765" name="l02765"></a><span class="lineno"> 2765</span>               !<a class="code hl_function" href="namespaceranged.html#aed4420a1fd77e160a72de2a528e56da5">ranged::gunmode_checks_common</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>(), msgbuf, <a class="code hl_variable" href="classtarget__ui.html#a190a8193e6454bb636bc8f5288b4a27b">relevant</a>-&gt;<a class="code hl_function" href="classitem.html#a1a94ea108d695febf7f2bcf090f097fa">gun_current_mode</a>() ) ) ) {</div>
<div class="line"><a id="l02766" name="l02766"></a><span class="lineno"> 2766</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">Status::OutOfAmmo</a>;</div>
<div class="line"><a id="l02767" name="l02767"></a><span class="lineno"> 2767</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( ( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> == <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &amp;&amp; !( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">TargetMode::Spell</a> &amp;&amp;</div>
<div class="line"><a id="l02768" name="l02768"></a><span class="lineno"> 2768</span>                                    <a class="code hl_variable" href="classtarget__ui.html#af184a9cc7c52521c129182e2cc643375">casting</a>-&gt;<a class="code hl_function" href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">is_valid_target</a>( <a class="code hl_enumvalue" href="magic_8h.html#ae9e507f7e02f759a1668864b8a46ae26aa5892df376122d8cc2f5f705351e4a44">valid_target::target_self</a> ) ) ) {</div>
<div class="line"><a id="l02769" name="l02769"></a><span class="lineno"> 2769</span>        <span class="comment">// TODO: consider allowing targeting yourself with turrets</span></div>
<div class="line"><a id="l02770" name="l02770"></a><span class="lineno"> 2770</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">Status::BadTarget</a>;</div>
<div class="line"><a id="l02771" name="l02771"></a><span class="lineno"> 2771</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classtarget__ui.html#ab236848678058afb7605e6d82a5c8fa9">dist_fn</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) &gt; <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> ) {</div>
<div class="line"><a id="l02772" name="l02772"></a><span class="lineno"> 2772</span>        <span class="comment">// We&#39;re out of range. This can happen if we switch from long-ranged</span></div>
<div class="line"><a id="l02773" name="l02773"></a><span class="lineno"> 2773</span>        <span class="comment">// gun mode to short-ranged. We can, of course, move the cursor into range automatically,</span></div>
<div class="line"><a id="l02774" name="l02774"></a><span class="lineno"> 2774</span>        <span class="comment">// but that would be rude. Instead, wait for directional keys/etc. and *then* move the cursor.</span></div>
<div class="line"><a id="l02775" name="l02775"></a><span class="lineno"> 2775</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">Status::OutOfRange</a>;</div>
<div class="line"><a id="l02776" name="l02776"></a><span class="lineno"> 2776</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02777" name="l02777"></a><span class="lineno"> 2777</span>        <a class="code hl_variable" href="classtarget__ui.html#abb6df512b8b794227dc5f1d9afe17bf1">status</a> = <a class="code hl_enumvalue" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a>;</div>
<div class="line"><a id="l02778" name="l02778"></a><span class="lineno"> 2778</span>    }</div>
<div class="line"><a id="l02779" name="l02779"></a><span class="lineno"> 2779</span>}</div>
<div class="ttc" id="aclassspell_html_adc1aee8fd855fce28ebb1dcc39e37a12"><div class="ttname"><a href="classspell.html#adc1aee8fd855fce28ebb1dcc39e37a12">spell::is_valid_target</a></div><div class="ttdeci">bool is_valid_target(const Creature &amp;caster, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="magic_8cpp_source.html#l00955">magic.cpp:955</a></div></div>
<div class="ttc" id="aclasstarget__ui_html_a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408"><div class="ttname"><a href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">target_ui::Status::BadTarget</a></div><div class="ttdeci">@ BadTarget</div></div>
<div class="ttc" id="aclassturret__data_html_a585d18f2c33116bc1e9028210fccadbc"><div class="ttname"><a href="classturret__data.html#a585d18f2c33116bc1e9028210fccadbc">turret_data::query</a></div><div class="ttdeci">status query() const</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00232">turret.cpp:232</a></div></div>
<div class="ttc" id="aclassturret__data_html_aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7"><div class="ttname"><a href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::status::ready</a></div><div class="ttdeci">@ ready</div></div>
<div class="ttc" id="amagic_8h_html_ae9e507f7e02f759a1668864b8a46ae26aa5892df376122d8cc2f5f705351e4a44"><div class="ttname"><a href="magic_8h.html#ae9e507f7e02f759a1668864b8a46ae26aa5892df376122d8cc2f5f705351e4a44">target_self</a></div><div class="ttdeci">@ target_self</div><div class="ttdef"><b>Definition:</b> <a href="magic_8h_source.html#l00075">magic.h:75</a></div></div>
<div class="ttc" id="anamespaceranged_html_a743f9e35b20c136e56ca9e9480fb27bc"><div class="ttname"><a href="namespaceranged.html#a743f9e35b20c136e56ca9e9480fb27bc">ranged::gunmode_checks_weapon</a></div><div class="ttdeci">bool gunmode_checks_weapon(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Various checks for gunmode when firing a weapon.</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03700">ranged.cpp:3700</a></div></div>
<div class="ttc" id="anamespaceranged_html_aed4420a1fd77e160a72de2a528e56da5"><div class="ttname"><a href="namespaceranged.html#aed4420a1fd77e160a72de2a528e56da5">ranged::gunmode_checks_common</a></div><div class="ttdeci">bool gunmode_checks_common(avatar &amp;you, const map &amp;m, std::vector&lt; std::string &gt; &amp;messages, const gun_mode &amp;gmode)</div><div class="ttdoc">Common checks for gunmode (when firing a weapon / manually firing turret)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l03664">ranged.cpp:3664</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a45c9ef8264639e178f18806be2b9a408">BadTarget</a>, <a class="el" href="ranged_8cpp_source.html#l00200">casting</a>, <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">Fire</a>, <a class="el" href="map_8cpp_source.html#l00146">get_map()</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Good</a>, <a class="el" href="item_8cpp_source.html#l07792">item::gun_current_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03664">ranged::gunmode_checks_common()</a>, <a class="el" href="ranged_8cpp_source.html#l03700">ranged::gunmode_checks_weapon()</a>, <a class="el" href="magic_8cpp_source.html#l00955">spell::is_valid_target()</a>, <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202aaa5b08f858f7353c5d012d6706525773">OutOfAmmo</a>, <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a365b2699d38b61ef4b4c8a1066c8468f">OutOfRange</a>, <a class="el" href="turret_8cpp_source.html#l00232">turret_data::query()</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="classturret__data.html#aa11f464b221b987d03a8859293e07ab6ab2fdab230a2c39f3595a947861863cb7">turret_data::ready</a>, <a class="el" href="ranged_8cpp_source.html#l00190">relevant</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a968ae4f03d7e0c30fe4eb26b83c855dd">Spell</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="ranged_8cpp_source.html#l00229">status</a>, <a class="el" href="magic_8h_source.html#l00075">target_self</a>, <a class="el" href="ranged_8cpp_source.html#l00194">turret</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997a90be8abd7ec18957825330f13ca888bb">Turrets</a>, <a class="el" href="ranged_8cpp_source.html#l00295">turrets_in_range</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02670">on_range_ammo_changed()</a>, and <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="af17fecf6fc24afc0a1af11ee1447b39a" name="af17fecf6fc24afc0a1af11ee1447b39a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af17fecf6fc24afc0a1af11ee1447b39a">&#9670;&nbsp;</a></span>update_target_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_target_list </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02676">2676</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02677" name="l02677"></a><span class="lineno"> 2677</span>{</div>
<div class="line"><a id="l02678" name="l02678"></a><span class="lineno"> 2678</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> == 0 ) {</div>
<div class="line"><a id="l02679" name="l02679"></a><span class="lineno"> 2679</span>        <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.clear();</div>
<div class="line"><a id="l02680" name="l02680"></a><span class="lineno"> 2680</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02681" name="l02681"></a><span class="lineno"> 2681</span>    }</div>
<div class="line"><a id="l02682" name="l02682"></a><span class="lineno"> 2682</span> </div>
<div class="line"><a id="l02683" name="l02683"></a><span class="lineno"> 2683</span>    <span class="comment">// Get targets in range and sort them by distance (targets[0] is the closest)</span></div>
<div class="line"><a id="l02684" name="l02684"></a><span class="lineno"> 2684</span> </div>
<div class="line"><a id="l02685" name="l02685"></a><span class="lineno"> 2685</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classtarget__ui.html#aeee1b122468e838a1f62691b2cd43396">mode</a> == <a class="code hl_enumvalue" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TargetMode::TurretManual</a> ) {</div>
<div class="line"><a id="l02686" name="l02686"></a><span class="lineno"> 2686</span>        <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a> = <a class="code hl_function" href="namespaceranged.html#a3fc846128cfc30100d71fbb6e2d482c5">ranged::targetable_creatures</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a>, *<a class="code hl_variable" href="classtarget__ui.html#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">turret</a> );</div>
<div class="line"><a id="l02687" name="l02687"></a><span class="lineno"> 2687</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l02688" name="l02688"></a><span class="lineno"> 2688</span>        <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a> = <a class="code hl_function" href="namespaceranged.html#a3fc846128cfc30100d71fbb6e2d482c5">ranged::targetable_creatures</a>( *<a class="code hl_variable" href="classtarget__ui.html#a83609daab209a1d8e462919182014d33">you</a>, <a class="code hl_variable" href="classtarget__ui.html#aa3c8602522a1638d3af42b10f1750e26">range</a> );</div>
<div class="line"><a id="l02689" name="l02689"></a><span class="lineno"> 2689</span>    }</div>
<div class="line"><a id="l02690" name="l02690"></a><span class="lineno"> 2690</span> </div>
<div class="line"><a id="l02691" name="l02691"></a><span class="lineno"> 2691</span>    std::sort( <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.begin(), <a class="code hl_variable" href="classtarget__ui.html#a281f9ea6ae900ff7991e457f1d34b8f6">targets</a>.end(), [&amp;]( <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> * lhs, <span class="keyword">const</span> <a class="code hl_class" href="classCreature.html">Creature</a> * rhs ) {</div>
<div class="line"><a id="l02692" name="l02692"></a><span class="lineno"> 2692</span>        return rl_dist_exact( lhs-&gt;pos(), you-&gt;pos() ) &lt; rl_dist_exact( rhs-&gt;pos(), you-&gt;pos() );</div>
<div class="line"><a id="l02693" name="l02693"></a><span class="lineno"> 2693</span>    } );</div>
<div class="line"><a id="l02694" name="l02694"></a><span class="lineno"> 2694</span>}</div>
<div class="ttc" id="anamespaceranged_html_a3fc846128cfc30100d71fbb6e2d482c5"><div class="ttname"><a href="namespaceranged.html#a3fc846128cfc30100d71fbb6e2d482c5">ranged::targetable_creatures</a></div><div class="ttdeci">std::vector&lt; Creature * &gt; targetable_creatures(const Character &amp;c, const int range)</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l02075">ranged.cpp:2075</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00188">mode</a>, <a class="el" href="ranged_8cpp_source.html#l00192">range</a>, <a class="el" href="ranged_8cpp_source.html#l02075">ranged::targetable_creatures()</a>, <a class="el" href="ranged_8cpp_source.html#l00244">targets</a>, <a class="el" href="ranged_8cpp_source.html#l00194">turret</a>, <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997af2e067641e81adda1d3883190c756e70">TurretManual</a>, and <a class="el" href="ranged_8cpp_source.html#l00186">you</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02670">on_range_ammo_changed()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="aa955ab0c7cfbd2c8c5d439f5aed608ef" name="aa955ab0c7cfbd2c8c5d439f5aed608ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa955ab0c7cfbd2c8c5d439f5aed608ef">&#9670;&nbsp;</a></span>update_turrets_in_range()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void target_ui::update_turrets_in_range </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l02919">2919</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l02920" name="l02920"></a><span class="lineno"> 2920</span>{</div>
<div class="line"><a id="l02921" name="l02921"></a><span class="lineno"> 2921</span>    <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.clear();</div>
<div class="line"><a id="l02922" name="l02922"></a><span class="lineno"> 2922</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structvehicle__part.html">vehicle_part</a> *t : *<a class="code hl_variable" href="classtarget__ui.html#ae7a7446b4088911709b2eb6a1d3973e5">vturrets</a> ) {</div>
<div class="line"><a id="l02923" name="l02923"></a><span class="lineno"> 2923</span>        <a class="code hl_class" href="classturret__data.html">turret_data</a> td = <a class="code hl_variable" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a>-&gt;<a class="code hl_function" href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">turret_query</a>( *t );</div>
<div class="line"><a id="l02924" name="l02924"></a><span class="lineno"> 2924</span>        <span class="keywordflow">if</span>( td.<a class="code hl_function" href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">in_range</a>( <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) ) {</div>
<div class="line"><a id="l02925" name="l02925"></a><span class="lineno"> 2925</span>            <a class="code hl_struct" href="structtripoint.html">tripoint</a> <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a> = <a class="code hl_variable" href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">veh</a>-&gt;<a class="code hl_function" href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">global_part_pos3</a>( *t );</div>
<div class="line"><a id="l02926" name="l02926"></a><span class="lineno"> 2926</span>            <a class="code hl_variable" href="classtarget__ui.html#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">turrets_in_range</a>.push_back( { t, <a class="code hl_function" href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a>( <a class="code hl_variable" href="classtarget__ui.html#afe4c97cc5abb0ce402bd9e89411e1778">src</a>, <a class="code hl_variable" href="classtarget__ui.html#a954878eb50877ad7fc1902a28beb2539">dst</a> ) } );</div>
<div class="line"><a id="l02927" name="l02927"></a><span class="lineno"> 2927</span>        }</div>
<div class="line"><a id="l02928" name="l02928"></a><span class="lineno"> 2928</span>    }</div>
<div class="line"><a id="l02929" name="l02929"></a><span class="lineno"> 2929</span>}</div>
<div class="ttc" id="aclasstarget__ui_html_ac2200f3f97047dbc1e1cf14bae201c34"><div class="ttname"><a href="classtarget__ui.html#ac2200f3f97047dbc1e1cf14bae201c34">target_ui::veh</a></div><div class="ttdeci">vehicle * veh</div><div class="ttdef"><b>Definition:</b> <a href="ranged_8cpp_source.html#l00198">ranged.cpp:198</a></div></div>
<div class="ttc" id="aclassturret__data_html"><div class="ttname"><a href="classturret__data.html">turret_data</a></div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00473">vehicle.h:474</a></div></div>
<div class="ttc" id="aclassturret__data_html_ad8b9e08531f26de34c61d5821ca69d7c"><div class="ttname"><a href="classturret__data.html#ad8b9e08531f26de34c61d5821ca69d7c">turret_data::in_range</a></div><div class="ttdeci">bool in_range(const tripoint &amp;target) const</div><div class="ttdoc">Check if target is in range of this turret (considers current ammo) Assumes this turret's status is '...</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00202">turret.cpp:202</a></div></div>
<div class="ttc" id="aclassvehicle_html_accfab81af66cd979bdfff4c39e5a3a8e"><div class="ttname"><a href="classvehicle.html#accfab81af66cd979bdfff4c39e5a3a8e">vehicle::turret_query</a></div><div class="ttdeci">turret_data turret_query(vehicle_part &amp;pt)</div><div class="ttdoc">Get firing data for a turret.</div><div class="ttdef"><b>Definition:</b> <a href="turret_8cpp_source.html#l00055">turret.cpp:55</a></div></div>
<div class="ttc" id="aclassvehicle_html_ae8132c34a1ea24866889e6e599796adc"><div class="ttname"><a href="classvehicle.html#ae8132c34a1ea24866889e6e599796adc">vehicle::global_part_pos3</a></div><div class="ttdeci">tripoint global_part_pos3(const int &amp;index) const</div><div class="ttdoc">Get the coordinates of the studied part of the vehicle.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03286">vehicle.cpp:3286</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a4a34f7ffa4c18effba7f8239c68c8738"><div class="ttname"><a href="coordinates_8h.html#a4a34f7ffa4c18effba7f8239c68c8738">line_to</a></div><div class="ttdeci">std::vector&lt; coords::coord_point&lt; Point, Origin, Scale &gt; &gt; line_to(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00548">coordinates.h:548</a></div></div>
<div class="ttc" id="astructvehicle__part_html"><div class="ttname"><a href="structvehicle__part.html">vehicle_part</a></div><div class="ttdoc">Structure, describing vehicle part (i.e., wheel, seat)</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00185">vehicle.h:185</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="ranged_8cpp_source.html#l00239">dst</a>, <a class="el" href="vehicle_8cpp_source.html#l03286">vehicle::global_part_pos3()</a>, <a class="el" href="turret_8cpp_source.html#l00202">turret_data::in_range()</a>, <a class="el" href="coordinates_8h_source.html#l00548">line_to()</a>, <a class="el" href="ranged_8cpp_source.html#l00236">src</a>, <a class="el" href="turret_8cpp_source.html#l00055">vehicle::turret_query()</a>, <a class="el" href="ranged_8cpp_source.html#l00295">turrets_in_range</a>, <a class="el" href="ranged_8cpp_source.html#l00198">veh</a>, and <a class="el" href="ranged_8cpp_source.html#l00196">vturrets</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="af1dc50e9e2195f48ffdb87a1daacc178" name="af1dc50e9e2195f48ffdb87a1daacc178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1dc50e9e2195f48ffdb87a1daacc178">&#9670;&nbsp;</a></span>activity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classaim__activity__actor.html">aim_activity_actor</a>* target_ui::activity = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00206">206</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02805">prompt_friendlies_in_lof()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a06d24870763e37a97c0aed0829bddb25" name="a06d24870763e37a97c0aed0829bddb25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06d24870763e37a97c0aed0829bddb25">&#9670;&nbsp;</a></span>aim_mode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structranged_1_1aim__type.html">ranged::aim_type</a>&gt;::iterator target_ui::aim_mode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00273">273</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a5c3b0302e89b82b60f16c8ccf50ac29a" name="a5c3b0302e89b82b60f16c8ccf50ac29a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c3b0302e89b82b60f16c8ccf50ac29a">&#9670;&nbsp;</a></span>aim_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structranged_1_1aim__type.html">ranged::aim_type</a>&gt; target_ui::aim_types</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00271">271</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, and <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a45f98789c877903961a56a54b17d9e96" name="a45f98789c877903961a56a54b17d9e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45f98789c877903961a56a54b17d9e96">&#9670;&nbsp;</a></span>allow_zlevel_shift</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::allow_zlevel_shift = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00247">247</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ae5ae79a739fcab56301077b8802355ce" name="ae5ae79a739fcab56301077b8802355ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ae79a739fcab56301077b8802355ce">&#9670;&nbsp;</a></span>ammo</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structitype.html">itype</a>* target_ui::ammo = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00232">232</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03464">panel_gun_info()</a>, and <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>.</p>

</div>
</div>
<a id="af184a9cc7c52521c129182e2cc643375" name="af184a9cc7c52521c129182e2cc643375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af184a9cc7c52521c129182e2cc643375">&#9670;&nbsp;</a></span>casting</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspell.html">spell</a>* target_ui::casting = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00200">200</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>.</p>

</div>
</div>
<a id="a34b69263e28fa4472b51104ec1d2e6f0" name="a34b69263e28fa4472b51104ec1d2e6f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34b69263e28fa4472b51104ec1d2e6f0">&#9670;&nbsp;</a></span>compact</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::compact = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00256">256</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a4e5479e5dd0b2883bbf2927c489ddb6a" name="a4e5479e5dd0b2883bbf2927c489ddb6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e5479e5dd0b2883bbf2927c489ddb6a">&#9670;&nbsp;</a></span>ctxt</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classinput__context.html">input_context</a> target_ui::ctxt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00265">265</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03316">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a63ac73585a9794e93d181362f7473b50" name="a63ac73585a9794e93d181362f7473b50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ac73585a9794e93d181362f7473b50">&#9670;&nbsp;</a></span>draw_turret_lines</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::draw_turret_lines = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00299">299</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a954878eb50877ad7fc1902a28beb2539" name="a954878eb50877ad7fc1902a28beb2539"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a954878eb50877ad7fc1902a28beb2539">&#9670;&nbsp;</a></span>dst</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::dst</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00239">239</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="a362df365f84b306e2ff14edf099a1000" name="a362df365f84b306e2ff14edf099a1000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a362df365f84b306e2ff14edf099a1000">&#9670;&nbsp;</a></span>dst_critter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classCreature.html">Creature</a>* target_ui::dst_critter = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00242">242</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02796">confirm_non_enemy_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02878">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03566">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>.</p>

</div>
</div>
<a id="aeee1b122468e838a1f62691b2cd43396" name="aeee1b122468e838a1f62691b2cd43396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee1b122468e838a1f62691b2cd43396">&#9670;&nbsp;</a></span>mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997">TargetMode</a> target_ui::mode = <a class="el" href="classtarget__ui.html#ae0dd055ba040ba97125cbf165a33c997abd2b7e5f85a6ea65065c4ebc6d7c95bb">TargetMode::Fire</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00188">188</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02805">prompt_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03296">uitext_fire()</a>, <a class="el" href="ranged_8cpp_source.html#l03281">uitext_title()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

</div>
</div>
<a id="a4b525b1e2a39f4748409b97e8984947b" name="a4b525b1e2a39f4748409b97e8984947b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b525b1e2a39f4748409b97e8984947b">&#9670;&nbsp;</a></span>narrow</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::narrow = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00261">261</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03316">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a146d794c8cb9c23e6ba71727c9a25852" name="a146d794c8cb9c23e6ba71727c9a25852"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146d794c8cb9c23e6ba71727c9a25852">&#9670;&nbsp;</a></span>no_fail</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::no_fail = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00202">202</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>.</p>

</div>
</div>
<a id="ac9b01fafb341eaec6c8f85582fd7f32f" name="ac9b01fafb341eaec6c8f85582fd7f32f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b01fafb341eaec6c8f85582fd7f32f">&#9670;&nbsp;</a></span>no_mana</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::no_mana = false</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00204">204</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="ac0a5aad7e60b30082e7ec2ff97f8f6d4" name="ac0a5aad7e60b30082e7ec2ff97f8f6d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0a5aad7e60b30082e7ec2ff97f8f6d4">&#9670;&nbsp;</a></span>predicted_recoil</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double target_ui::predicted_recoil = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00279">279</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02970">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>.</p>

</div>
</div>
<a id="aa3c8602522a1638d3af42b10f1750e26" name="aa3c8602522a1638d3af42b10f1750e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c8602522a1638d3af42b10f1750e26">&#9670;&nbsp;</a></span>range</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::range = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00192">192</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02724">try_reacquire_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

</div>
</div>
<a id="a190a8193e6454bb636bc8f5288b4a27b" name="a190a8193e6454bb636bc8f5288b4a27b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a190a8193e6454bb636bc8f5288b4a27b">&#9670;&nbsp;</a></span>relevant</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classitem.html">item</a>* target_ui::relevant = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00190">190</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l03046">ensure_ranged_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03464">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03492">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l03281">uitext_title()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, and <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>.</p>

</div>
</div>
<a id="a6f2c970f904d7b8c06e403dbc4560f4d" name="a6f2c970f904d7b8c06e403dbc4560f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2c970f904d7b8c06e403dbc4560f4d">&#9670;&nbsp;</a></span>shape_coverage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="structtripoint.html">tripoint</a>, double&gt; target_ui::shape_coverage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00286">286</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, and <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="a2f93a66a18420fd252e275a9c6f536d4" name="a2f93a66a18420fd252e275a9c6f536d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f93a66a18420fd252e275a9c6f536d4">&#9670;&nbsp;</a></span>shape_gen</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcata_1_1optional.html">cata::optional</a>&lt;<a class="el" href="classshape__factory.html">shape_factory</a>&gt; target_ui::shape_gen</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00208">208</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="a122323ec4c1e72c291e76643ccfd3fde" name="a122323ec4c1e72c291e76643ccfd3fde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a122323ec4c1e72c291e76643ccfd3fde">&#9670;&nbsp;</a></span>shifting_view</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::shifting_view = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00253">253</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="a2e6f4c9c827b91ce215a1a7b32a4affb" name="a2e6f4c9c827b91ce215a1a7b32a4affb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e6f4c9c827b91ce215a1a7b32a4affb">&#9670;&nbsp;</a></span>sight_dispersion</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int target_ui::sight_dispersion = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00269">269</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a270f72c5bfef55a533d3cd9b3cf57ea0" name="a270f72c5bfef55a533d3cd9b3cf57ea0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a270f72c5bfef55a533d3cd9b3cf57ea0">&#9670;&nbsp;</a></span>snap_to_target</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::snap_to_target = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00250">250</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>.</p>

</div>
</div>
<a id="ab855722580bd112ef0590b5a9b4f3556" name="ab855722580bd112ef0590b5a9b4f3556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab855722580bd112ef0590b5a9b4f3556">&#9670;&nbsp;</a></span>spell_aoe</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; target_ui::spell_aoe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00283">283</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, and <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="afe4c97cc5abb0ce402bd9e89411e1778" name="afe4c97cc5abb0ce402bd9e89411e1778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe4c97cc5abb0ce402bd9e89411e1778">&#9670;&nbsp;</a></span>src</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtripoint.html">tripoint</a> target_ui::src</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00236">236</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02781">dist_fn()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02905">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l02867">toggle_snap_to_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="abb6df512b8b794227dc5f1d9afe17bf1" name="abb6df512b8b794227dc5f1d9afe17bf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6df512b8b794227dc5f1d9afe17bf1">&#9670;&nbsp;</a></span>status</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202">Status</a> target_ui::status = <a class="el" href="classtarget__ui.html#a3594a3a61aa50c8a0ce8c7ea20796202a0c6ad70beb3a7e76c3fc7adab7c46acc">Status::Good</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00229">229</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03464">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, and <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>.</p>

</div>
</div>
<a id="a281f9ea6ae900ff7991e457f1d34b8f6" name="a281f9ea6ae900ff7991e457f1d34b8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a281f9ea6ae900ff7991e457f1d34b8f6">&#9670;&nbsp;</a></span>targets</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="classCreature.html">Creature</a> *&gt; target_ui::targets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00244">244</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02878">cycle_targets()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

</div>
</div>
<a id="a1e6534092ef1b213639575c914030eb1" name="a1e6534092ef1b213639575c914030eb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e6534092ef1b213639575c914030eb1">&#9670;&nbsp;</a></span>tiny</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool target_ui::tiny = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00258">258</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, and <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>.</p>

</div>
</div>
<a id="a542ba80f542b41ea6a81f1ab8b14b521" name="a542ba80f542b41ea6a81f1ab8b14b521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a542ba80f542b41ea6a81f1ab8b14b521">&#9670;&nbsp;</a></span>traj</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtripoint.html">tripoint</a>&gt; target_ui::traj</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00234">234</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>.</p>

</div>
</div>
<a id="ae9e40adc2b44c3cd4cdbcc62dd8a1e30" name="ae9e40adc2b44c3cd4cdbcc62dd8a1e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9e40adc2b44c3cd4cdbcc62dd8a1e30">&#9670;&nbsp;</a></span>turret</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classturret__data.html">turret_data</a>* target_ui::turret = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00194">194</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03071">action_switch_ammo()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

</div>
</div>
<a id="ae8d4216fdc3f48ee8f6dd5f22c33d9d9" name="ae8d4216fdc3f48ee8f6dd5f22c33d9d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8d4216fdc3f48ee8f6dd5f22c33d9d9">&#9670;&nbsp;</a></span>turrets_in_range</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="structtarget__ui_1_1turret__with__lof.html">turret_with_lof</a>&gt; target_ui::turrets_in_range</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00295">295</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03635">panel_turret_list()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="ac2200f3f97047dbc1e1cf14bae201c34" name="ac2200f3f97047dbc1e1cf14bae201c34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2200f3f97047dbc1e1cf14bae201c34">&#9670;&nbsp;</a></span>veh</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classvehicle.html">vehicle</a>* target_ui::veh = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00198">198</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="ae7a7446b4088911709b2eb6a1d3973e5" name="ae7a7446b4088911709b2eb6a1d3973e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7a7446b4088911709b2eb6a1d3973e5">&#9670;&nbsp;</a></span>vturrets</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="structvehicle__part.html">vehicle_part</a> *&gt;* target_ui::vturrets = nullptr</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00196">196</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03635">panel_turret_list()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, and <a class="el" href="ranged_8cpp_source.html#l02919">update_turrets_in_range()</a>.</p>

</div>
</div>
<a id="a246e6aa2bb08bb724c44571e8451ac30" name="a246e6aa2bb08bb724c44571e8451ac30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a246e6aa2bb08bb724c44571e8451ac30">&#9670;&nbsp;</a></span>w_target</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcatacurses_1_1window.html">catacurses::window</a> target_ui::w_target</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00263">263</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03330">draw_controls_list()</a>, <a class="el" href="ranged_8cpp_source.html#l03316">draw_help_notice()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l03309">draw_window_title()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l03427">panel_cursor_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03464">panel_gun_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03492">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03566">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03635">panel_turret_list()</a>, and <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>.</p>

</div>
</div>
<a id="a83609daab209a1d8e462919182014d33" name="a83609daab209a1d8e462919182014d33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83609daab209a1d8e462919182014d33">&#9670;&nbsp;</a></span>you</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classavatar.html">avatar</a>* target_ui::you</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="ranged_8cpp_source.html#l00186">186</a> of file <a class="el" href="ranged_8cpp_source.html">ranged.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="ranged_8cpp_source.html#l03091">action_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03106">action_aim_and_shoot()</a>, <a class="el" href="ranged_8cpp_source.html#l02975">action_switch_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02970">apply_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02696">choose_initial_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03136">draw_terrain_overlay()</a>, <a class="el" href="ranged_8cpp_source.html#l03229">draw_ui_window()</a>, <a class="el" href="ranged_8cpp_source.html#l02480">handle_cursor_movement()</a>, <a class="el" href="ranged_8cpp_source.html#l02397">init_window_and_input()</a>, <a class="el" href="ranged_8cpp_source.html#l02843">list_friendlies_in_lof()</a>, <a class="el" href="ranged_8cpp_source.html#l03647">on_target_accepted()</a>, <a class="el" href="ranged_8cpp_source.html#l03600">panel_fire_mode_aim()</a>, <a class="el" href="ranged_8cpp_source.html#l03492">panel_recoil()</a>, <a class="el" href="ranged_8cpp_source.html#l03512">panel_spell_info()</a>, <a class="el" href="ranged_8cpp_source.html#l03566">panel_target_info()</a>, <a class="el" href="ranged_8cpp_source.html#l02931">recalc_aim_turning_penalty()</a>, <a class="el" href="ranged_8cpp_source.html#l02156">run()</a>, <a class="el" href="ranged_8cpp_source.html#l02538">set_cursor_pos()</a>, <a class="el" href="ranged_8cpp_source.html#l02786">set_last_target()</a>, <a class="el" href="ranged_8cpp_source.html#l02905">set_view_offset()</a>, <a class="el" href="ranged_8cpp_source.html#l02724">try_reacquire_target()</a>, <a class="el" href="ranged_8cpp_source.html#l03053">update_ammo_range_from_gun_mode()</a>, <a class="el" href="ranged_8cpp_source.html#l02752">update_status()</a>, and <a class="el" href="ranged_8cpp_source.html#l02676">update_target_list()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="ranged_8cpp_source.html">ranged.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classtarget__ui.html">target_ui</a></li>
    <li class="footer">Generated on Sun Jan 22 2023 21:14:44 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
