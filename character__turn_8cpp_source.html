<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: src/character_turn.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('character__turn_8cpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">character_turn.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="character__turn_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="preprocessor">#include &quot;<a class="code" href="character__turn_8h.html">character_turn.h</a>&quot;</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;<a class="code" href="bionics_8h.html">bionics.h</a>&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#include &quot;<a class="code" href="calendar_8h.html">calendar.h</a>&quot;</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &quot;<a class="code" href="character__effects_8h.html">character_effects.h</a>&quot;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;<a class="code" href="character__functions_8h.html">character_functions.h</a>&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;<a class="code" href="character__stat_8h.html">character_stat.h</a>&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="character__martial__arts_8h.html">character_martial_arts.h</a>&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="character_8h.html">character.h</a>&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="creature_8h.html">creature.h</a>&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="game_8h.html">game.h</a>&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="handle__liquid_8h.html">handle_liquid.h</a>&quot;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="itype_8h.html">itype.h</a>&quot;</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="magic__enchantment_8h.html">magic_enchantment.h</a>&quot;</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="mutation_8h.html">mutation.h</a>&quot;</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="overmapbuffer_8h.html">overmapbuffer.h</a>&quot;</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="make__static_8h.html">make_static.h</a>&quot;</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="map__iterator_8h.html">map_iterator.h</a>&quot;</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="morale_8h.html">morale.h</a>&quot;</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="player_8h.html">player.h</a>&quot;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="rng_8h.html">rng.h</a>&quot;</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="submap_8h.html">submap.h</a>&quot;</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="trap_8h.html">trap.h</a>&quot;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="veh__type_8h.html">veh_type.h</a>&quot;</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="vehicle_8h.html">vehicle.h</a>&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="vpart__position_8h.html">vpart_position.h</a>&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="weather__gen_8h.html">weather_gen.h</a>&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="weather_8h.html">weather.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span> </div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">   30</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a>( <span class="stringliteral">&quot;ACIDBLOOD&quot;</span> );</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">   31</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a>( <span class="stringliteral">&quot;ARACHNID_ARMS_OK&quot;</span> );</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a1f13575e0c937c4721778a685093e25d">   32</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a>( <span class="stringliteral">&quot;ARACHNID_ARMS&quot;</span> );</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">   33</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a>( <span class="stringliteral">&quot;CHITIN_FUR&quot;</span> );</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">   34</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a>( <span class="stringliteral">&quot;CHITIN_FUR2&quot;</span> );</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">   35</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a>( <span class="stringliteral">&quot;CHITIN_FUR3&quot;</span> );</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">   36</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a>( <span class="stringliteral">&quot;CHITIN2&quot;</span> );</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">   37</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a>( <span class="stringliteral">&quot;CHITIN3&quot;</span> );</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a2d4878472a9c5543436349f994a98e48">   38</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a2d4878472a9c5543436349f994a98e48">trait_COLDBLOOD4</a>( <span class="stringliteral">&quot;COLDBLOOD4&quot;</span> );</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">   39</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a>( <span class="stringliteral">&quot;COMPOUND_EYES&quot;</span> );</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af151d09e7927fa1f3c8a519c00c423aa">   40</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af151d09e7927fa1f3c8a519c00c423aa">trait_DEBUG_BIONIC_POWER</a>( <span class="stringliteral">&quot;DEBUG_BIONIC_POWER&quot;</span> );</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#abb2203fc9372a7f9651ccca81239445a">   41</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a>( <span class="stringliteral">&quot;EATHEALTH&quot;</span> );</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a43ae85111a2b2e6825a41a5cd5e619ae">   42</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a43ae85111a2b2e6825a41a5cd5e619ae">trait_FAT</a>( <span class="stringliteral">&quot;FAT&quot;</span> );</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">   43</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a>( <span class="stringliteral">&quot;FELINE_FUR&quot;</span> );</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">   44</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a>( <span class="stringliteral">&quot;FUR&quot;</span> );</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ac41827abd252cabc27c7c385291f71e4">   45</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a>( <span class="stringliteral">&quot;INSECT_ARMS_OK&quot;</span> );</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">   46</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a>( <span class="stringliteral">&quot;INSECT_ARMS&quot;</span> );</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">   47</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a>( <span class="stringliteral">&quot;LIGHTFUR&quot;</span> );</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">   48</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a>( <span class="stringliteral">&quot;LUPINE_FUR&quot;</span> );</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">   49</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a>( <span class="stringliteral">&quot;M_IMMUNE&quot;</span> );</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#aa0461c515f4d2163af71c4800b1ca77f">   50</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#aa0461c515f4d2163af71c4800b1ca77f">trait_NOMAD</a>( <span class="stringliteral">&quot;NOMAD&quot;</span> );</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a87e9796604a1ccf527b8fff5b72a7c5a">   51</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a87e9796604a1ccf527b8fff5b72a7c5a">trait_NOMAD2</a>( <span class="stringliteral">&quot;NOMAD2&quot;</span> );</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a99ebb215551c7b0598da5c0ba8bbae5d">   52</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a99ebb215551c7b0598da5c0ba8bbae5d">trait_NOMAD3</a>( <span class="stringliteral">&quot;NOMAD3&quot;</span> );</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">   53</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a>( <span class="stringliteral">&quot;PARAIMMUNE&quot;</span> );</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">   54</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a>( <span class="stringliteral">&quot;SLIMY&quot;</span> );</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">   55</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a>( <span class="stringliteral">&quot;STIMBOOST&quot;</span> );</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a4c5ff82e9ea5987147d84a1a2863abbc">   56</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a4c5ff82e9ea5987147d84a1a2863abbc">trait_SUNLIGHT_DEPENDENT</a>( <span class="stringliteral">&quot;SUNLIGHT_DEPENDENT&quot;</span> );</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">   57</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a>( <span class="stringliteral">&quot;THICK_SCALES&quot;</span> );</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">   58</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a>( <span class="stringliteral">&quot;URSINE_FUR&quot;</span> );</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a365df112ebfa257fa507cef2fa5a1c2e">   59</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a365df112ebfa257fa507cef2fa5a1c2e">trait_WEBBED</a>( <span class="stringliteral">&quot;WEBBED&quot;</span> );</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">   60</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a>( <span class="stringliteral">&quot;WHISKERS_RAT&quot;</span> );</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">   61</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a>( <span class="stringliteral">&quot;WHISKERS&quot;</span> );</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">   63</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a>( <span class="stringliteral">&quot;bloodworms&quot;</span> );</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">   64</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a>( <span class="stringliteral">&quot;brainworms&quot;</span> );</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">   65</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a>( <span class="stringliteral">&quot;darkness&quot;</span> );</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">   66</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a>( <span class="stringliteral">&quot;depressants&quot;</span> );</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">   67</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a>( <span class="stringliteral">&quot;dermatik&quot;</span> );</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">   68</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>( <span class="stringliteral">&quot;downed&quot;</span> );</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a08ed8f8240259a6a457502b0db459e08">   69</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a>( <span class="stringliteral">&quot;fungus&quot;</span> );</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">   70</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a>( <span class="stringliteral">&quot;happy&quot;</span> );</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">   71</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a>( <span class="stringliteral">&quot;irradiated&quot;</span> );</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a70ada8ba76f56302dff4828699ac43b9">   72</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a70ada8ba76f56302dff4828699ac43b9">effect_masked_scent</a>( <span class="stringliteral">&quot;masked_scent&quot;</span> );</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">   73</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a>( <span class="stringliteral">&quot;narcosis&quot;</span> );</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">   74</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>( <span class="stringliteral">&quot;onfire&quot;</span> );</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a914db3df05fd548e81adc85699eaaf05">   75</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a>( <span class="stringliteral">&quot;paincysts&quot;</span> );</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">   76</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a>( <span class="stringliteral">&quot;pkill&quot;</span> );</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a09f3ea407cf63807e000861190ad1515">   77</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a>( <span class="stringliteral">&quot;sad&quot;</span> );</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">   78</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a>( <span class="stringliteral">&quot;sleep_deprived&quot;</span> );</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">   79</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a>( <span class="stringliteral">&quot;sleep&quot;</span> );</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">   80</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>( <span class="stringliteral">&quot;stim_overdose&quot;</span> );</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">   81</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a>( <span class="stringliteral">&quot;stim&quot;</span> );</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">   82</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a>( <span class="stringliteral">&quot;tapeworm&quot;</span> );</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a99d0319c6ba808305bd397fed049a224">   83</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a99d0319c6ba808305bd397fed049a224">effect_thirsty</a>( <span class="stringliteral">&quot;thirsty&quot;</span> );</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">   85</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">skill_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>( <span class="stringliteral">&quot;swimming&quot;</span> );</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span> </div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">   87</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a>( <span class="stringliteral">&quot;bio_ground_sonar&quot;</span> );</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a4424b509877ff458aa661c2b49a99dda">   88</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a4424b509877ff458aa661c2b49a99dda">bio_hydraulics</a>( <span class="stringliteral">&quot;bio_hydraulics&quot;</span> );</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ac51fe65666b5fd877b3a7a223b17a788">   89</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">bionic_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ac51fe65666b5fd877b3a7a223b17a788">bio_speed</a>( <span class="stringliteral">&quot;bio_speed&quot;</span> );</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span> </div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a1c359a305b979b2e5fc87d15db51e903">   91</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a1c359a305b979b2e5fc87d15db51e903">itype_adv_UPS_off</a>( <span class="stringliteral">&quot;adv_UPS_off&quot;</span> );</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#ae89306fd36cf36b57fe05dad0db3f71b">   92</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#ae89306fd36cf36b57fe05dad0db3f71b">itype_UPS_off</a>( <span class="stringliteral">&quot;UPS_off&quot;</span> );</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno"><a class="line" href="character__turn_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">   93</a></span><span class="keyword">static</span> <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> <a class="code hl_variable" href="character__turn_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a>( <span class="stringliteral">&quot;UPS&quot;</span> );</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">   95</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">Character::recalc_speed_bonus</a>()</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>{</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <span class="comment">// Minus some for weight...</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keywordtype">int</span> carry_penalty = 0;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() &gt; <a class="code hl_function" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() &amp;&amp; !<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad03d97c03c94cd08796f4787856af713">trait_id</a>( <span class="stringliteral">&quot;DEBUG_STORAGE&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        carry_penalty = 25 * ( <a class="code hl_function" href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">weight_carried</a>() - <a class="code hl_function" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() ) / ( <a class="code hl_function" href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">weight_capacity</a>() );</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    }</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( -carry_penalty );</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( -<a class="code hl_function" href="namespacecharacter__effects.html#a8f18c1c2508870515d5c36a3ea255498">character_effects::get_pain_penalty</a>( *this ).<a class="code hl_variable" href="structstat__mod.html#ac7f82a251530a123d3c0127885e92818">speed</a> );</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() &gt; <a class="code hl_enumvalue" href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">thirst_levels::very_thirsty</a> ) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( <a class="code hl_function" href="namespacecharacter__effects.html#a69e2f87b5391a5aec01672c98cdfb57c">character_effects::get_thirst_speed_penalty</a>( <a class="code hl_function" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() ) );</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>    }</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <span class="comment">// when underweight, you get slower. cumulative with hunger</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( <a class="code hl_function" href="namespacecharacter__effects.html#a6d9d51c28a272ae26ed493d1471cf072">character_effects::get_kcal_speed_penalty</a>( <a class="code hl_function" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() ) );</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span> </div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;maps : *<a class="code hl_variable" href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">effects</a> ) {</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;i : maps.second ) {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>            <span class="keywordflow">if</span>( i.second.is_removed() ) {</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            }</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>            <span class="keywordtype">bool</span> reduced = <a class="code hl_function" href="classCreature.html#a6b40041c12e2c414170aad5511878446">resists_effect</a>( i.second );</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( i.second.get_mod( <span class="stringliteral">&quot;SPEED&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">// add martial arts speed bonus</span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( <a class="code hl_function" href="classCharacter.html#a8e068564c87eb2d870e67eefb63ef144">mabuff_speed_bonus</a>() );</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">// Not sure why Sunlight Dependent is here, but OK</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="comment">// Ectothermic/COLDBLOOD4 is intended to buff folks in the Summer</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="comment">// Threshold-crossing has its charms ;-)</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a> != <span class="keyword">nullptr</span> ) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a4c5ff82e9ea5987147d84a1a2863abbc">trait_SUNLIGHT_DEPENDENT</a> ) &amp;&amp; !<a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_in_sunlight( <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>            <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( -( <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;light_level( <a class="code hl_function" href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">posz</a>() ) &gt;= 12 ? 5 : 10 ) );</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="keyword">const</span> <span class="keywordtype">float</span> temperature_speed_modifier = <a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;temperature_speed_modifier&quot;</span> );</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="keywordflow">if</span>( temperature_speed_modifier != 0 ) {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            <span class="keyword">const</span> <span class="keyword">auto</span> player_local_temp = <a class="code hl_function" href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a>().<a class="code hl_function" href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">get_temperature</a>( <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a2d4878472a9c5543436349f994a98e48">trait_COLDBLOOD4</a> ) || player_local_temp &lt; 65 ) {</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( ( player_local_temp - 65 ) * temperature_speed_modifier );</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>            }</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a24f9a7fe69a7d8c34809d16e62ac2cf4">has_artifact_with</a>( <a class="code hl_enumvalue" href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621a426bf709ed74da6db746b842da5a58d7">AEP_SPEED_UP</a> ) ) {</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( 20 );</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    }</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a24f9a7fe69a7d8c34809d16e62ac2cf4">has_artifact_with</a>( <a class="code hl_enumvalue" href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621af16c035c812c026d523bed660201249c">AEP_SPEED_DOWN</a> ) ) {</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <a class="code hl_function" href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">mod_speed_bonus</a>( -20 );</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="keywordtype">float</span> speed_modifier = <a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">Character::mutation_value</a>( <span class="stringliteral">&quot;speed_modifier&quot;</span> );</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_function" href="classCreature.html#a81fd71e521e09908425fc63a64458f59">set_speed_bonus</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * speed_modifier ) - <a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() );</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">has_bionic</a>( <a class="code hl_variable" href="character__turn_8cpp.html#ac51fe65666b5fd877b3a7a223b17a788">bio_speed</a> ) ) { <span class="comment">// multiply by 1.1</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <a class="code hl_function" href="classCreature.html#a81fd71e521e09908425fc63a64458f59">set_speed_bonus</a>( <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( <a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() * 1.1 ) - <a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() );</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordtype">double</span> ench_bonus = <a class="code hl_variable" href="classCharacter.html#a64fb53474cad02d7de9486d390124c3e">enchantment_cache</a>-&gt;calc_bonus( <a class="code hl_enumvalue" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a65a59338b99aee6a451e86b17b462b5a">enchant_vals::mod::SPEED</a>, <a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() );</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <a class="code hl_function" href="classCreature.html#a81fd71e521e09908425fc63a64458f59">set_speed_bonus</a>( <a class="code hl_function" href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">get_speed</a>() + ench_bonus - <a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() );</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="comment">// Speed cannot be less than 25% of base speed, so minimal speed bonus is -75% base speed.</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> min_speed_bonus = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( -0.75 * <a class="code hl_function" href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">get_speed_base</a>() );</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCreature.html#a35bbfb9c042ed3cf7e0ae9b7280384c4">get_speed_bonus</a>() &lt; min_speed_bonus ) {</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <a class="code hl_function" href="classCreature.html#a81fd71e521e09908425fc63a64458f59">set_speed_bonus</a>( min_speed_bonus );</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>    }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>}</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno"><a class="line" href="classCharacter.html#a3487bbfa5772ac7ec5f5cf116a078912">  165</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a3487bbfa5772ac7ec5f5cf116a078912">Character::process_turn</a>()</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>{</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    <span class="comment">// Has to happen before reset_stats</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    <a class="code hl_function" href="classCharacter.html#a995d6d84d90b9b14f66cacede5a5fa16">clear_miss_reasons</a>();</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="keywordflow">for</span>( <a class="code hl_struct" href="structbionic.html">bionic</a> &amp;i : *<a class="code hl_variable" href="classCharacter.html#a388bca3ef975bd265c67df45bb280bee">my_bionics</a> ) {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="keywordflow">if</span>( i.incapacitated_time &gt; 0_turns ) {</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>            i.incapacitated_time -= 1_turns;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>            <span class="keywordflow">if</span>( i.incapacitated_time == 0_turns ) {</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>                <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s bionic comes back online.&quot;</span> ), i.info().name );</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>            }</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>        }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    }</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span> </div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    <a class="code hl_function" href="classCreature.html#a28d410ab38e30292e266188c1b95cae5">Creature::process_turn</a>();</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <span class="comment">// If we&#39;re actively handling something we can&#39;t just drop it on the ground</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="comment">// in the middle of handling it</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a20839520f569c4f05876a55e89f67361">activity</a>.<a class="code hl_variable" href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">targets</a>.empty() ) {</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <a class="code hl_function" href="classCharacter.html#aa342bc315f7b61074f2ac81217a2a0f5">drop_invalid_inventory</a>();</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    }</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <a class="code hl_function" href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">process_items</a>();</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="comment">// Didn&#39;t just pick something up</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_variable" href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">last_item</a> = <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( <span class="stringliteral">&quot;null&quot;</span> );</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af151d09e7927fa1f3c8a519c00c423aa">trait_DEBUG_BIONIC_POWER</a> ) ) {</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>        <a class="code hl_function" href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">mod_power_level</a>( <a class="code hl_function" href="classCharacter.html#ac3e27cd8b8fe445e06e6d20d0eb82aff">get_max_power_level</a>() );</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <a class="code hl_function" href="classvisitable.html#a0a76a71d6a905414cc81236e86a7e649">visit_items</a>( [<span class="keyword">this</span>]( <a class="code hl_class" href="classitem.html">item</a> * e ) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        e-&gt;<a class="code hl_function" href="classitem.html#aaa4ffcaf91f734206a25494d44c01004">process_artifact</a>( <a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>(), <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() );</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        e-&gt;<a class="code hl_function" href="classitem.html#a8121291f73e815bf37295babcb48c90c">process_relic</a>( <a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>() );</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="visitable_8h.html#aa872f25fbac30cbf9e03c0153587613da47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a>;</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    } );</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <a class="code hl_function" href="classCharacter.html#ac3066aafc3a5ffe9ee8058e062e177a7">suffer</a>();</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    <span class="comment">// NPCs currently don&#39;t make any use of their scent, pointless to calculate it</span></div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <span class="comment">// TODO: make use of NPC scent.</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a70ada8ba76f56302dff4828699ac43b9">effect_masked_scent</a> ) ) {</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            <a class="code hl_function" href="classCharacter.html#ab7818b073576ebe8b8f1331af79e1f41">restore_scent</a>();</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        }</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> mask_intensity = <a class="code hl_function" href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">get_effect_int</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a70ada8ba76f56302dff4828699ac43b9">effect_masked_scent</a> );</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span> </div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>        <span class="comment">// Set our scent towards the norm</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>        <span class="keywordtype">int</span> norm_scent = 500;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>        <span class="keywordtype">int</span> temp_norm_scent = INT_MIN;</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>        <span class="keywordtype">bool</span> found_intensity = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code hl_function" href="classCharacter.html#a97c5948a2648dc5fd3e2defd5885cdb0">get_mutations</a>() ) {</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;int&gt;</a> &amp;scent_intensity = mut-&gt;scent_intensity;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>            <span class="keywordflow">if</span>( scent_intensity ) {</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                found_intensity = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                temp_norm_scent = std::max( temp_norm_scent, *scent_intensity );</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>            }</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="keywordflow">if</span>( found_intensity ) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>            norm_scent = temp_norm_scent;</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>        }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span> </div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code hl_function" href="classCharacter.html#a97c5948a2648dc5fd3e2defd5885cdb0">get_mutations</a>() ) {</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcata_1_1optional.html">cata::optional&lt;int&gt;</a> &amp;scent_mask = mut-&gt;scent_mask;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            <span class="keywordflow">if</span>( scent_mask ) {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                norm_scent += *scent_mask;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>            }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        }</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span> </div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>        <span class="comment">//mask from scent altering items;</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>        norm_scent += mask_intensity;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>        <span class="comment">// Scent increases fast at first, and slows down as it approaches normal levels.</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        <span class="comment">// Estimate it will take about norm_scent * 2 turns to go from 0 - norm_scent / 2</span></div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>        <span class="comment">// Without smelly trait this is about 1.5 hrs. Slows down significantly after that.</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">scent</a> &lt; <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 0, norm_scent ) ) {</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <a class="code hl_variable" href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">scent</a>++;</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        }</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span> </div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>        <span class="comment">// Unusually high scent decreases steadily until it reaches normal levels.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">scent</a> &gt; norm_scent ) {</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <a class="code hl_variable" href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">scent</a>--;</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        }</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">trait_id</a> &amp;mut : <a class="code hl_function" href="classCharacter.html#a97c5948a2648dc5fd3e2defd5885cdb0">get_mutations</a>() ) {</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <a class="code hl_variable" href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">scent</a> *= mut.obj().scent_modifier;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>        }</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>    }</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span> </div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>    <span class="comment">// We can dodge again! Assuming we can actually move...</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() ) {</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        <a class="code hl_variable" href="classCharacter.html#a29692fe7943db102dcf564a8966782c6">blocks_left</a> = 0;</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <a class="code hl_variable" href="classCharacter.html#a5d450cd31d2779dd654ba6589f09c98b">dodges_left</a> = 0;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> &gt; 0 ) {</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        <a class="code hl_variable" href="classCharacter.html#a29692fe7943db102dcf564a8966782c6">blocks_left</a> = <a class="code hl_function" href="classCreature.html#a805a8d90db2178529997b355e8898d70">get_num_blocks</a>();</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <a class="code hl_variable" href="classCharacter.html#a5d450cd31d2779dd654ba6589f09c98b">dodges_left</a> = <a class="code hl_function" href="classCreature.html#a655af12aa145ee7fe2340c24a3b4b856">get_num_dodges</a>();</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    }</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span> </div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    <span class="comment">// auto-learning. This is here because skill-increases happens all over the place:</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>    <span class="comment">// SkillLevel::readBook (has no connection to the skill or the player),</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>    <span class="comment">// player::read, player::practice, ...</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>    <span class="comment">// Check for spontaneous discovery of martial art styles</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;style : <a class="code hl_function" href="martialarts_8cpp.html#a63233aaf936955f4df6542d8f786116f">autolearn_martialart_types</a>() ) {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">matype_id</a> &amp;ma( style );</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span> </div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        <span class="keywordflow">if</span>( !<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;has_martialart( ma ) &amp;&amp; <a class="code hl_function" href="martialarts_8cpp.html#ab0bd6bdef185fe017fcb2b8bfada66c0">can_autolearn_martial_art</a>( *<span class="keyword">this</span>, ma ) ) {</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>            <a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;add_martialart( ma );</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>            <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You have learned a new style: %s!&quot;</span> ), ma.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_variable" href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">name</a> );</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        }</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>    }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="comment">// Update time spent conscious in this overmap tile for the Nomad traits.</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; ( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aa0461c515f4d2163af71c4800b1ca77f">trait_NOMAD</a> ) || <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a87e9796604a1ccf527b8fff5b72a7c5a">trait_NOMAD2</a> ) ||</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                       <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a99ebb215551c7b0598da5c0ba8bbae5d">trait_NOMAD3</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>        !<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a> ) &amp;&amp; !<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a> ) ) {</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> ompos = <a class="code hl_function" href="classCharacter.html#af254fa44c7792574ff19973b0fa06b36">global_omt_location</a>();</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>        <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">point_abs_omt</a> <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a> = ompos.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>();</div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>.find( <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a> ) == <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>.end() ) {</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>[<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>] = 1_turns;</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>[<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>] += 1_turns;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        }</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    }</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>    <span class="comment">// Decay time spent in other overmap tiles.</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() &amp;&amp; <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_hours ) ) {</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> ompos = <a class="code hl_function" href="classCharacter.html#af254fa44c7792574ff19973b0fa06b36">global_omt_location</a>();</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>        <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> now = <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> decay_time = 0_days;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>        <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aa0461c515f4d2163af71c4800b1ca77f">trait_NOMAD</a> ) ) {</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>            decay_time = 7_days;</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a87e9796604a1ccf527b8fff5b72a7c5a">trait_NOMAD2</a> ) ) {</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>            decay_time = 14_days;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a99ebb215551c7b0598da5c0ba8bbae5d">trait_NOMAD3</a> ) ) {</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>            decay_time = 28_days;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>        }</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>        <span class="keyword">auto</span> it = <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>.begin();</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>        <span class="keywordflow">while</span>( it != <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>.end() ) {</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>            <span class="keywordflow">if</span>( it-&gt;first == ompos.<a class="code hl_function" href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">xy</a>() ) {</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                it++;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            }</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>            <span class="comment">// Find the amount of time passed since the player touched any of the overmap tile&#39;s submaps.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>            <span class="keyword">const</span> <a class="code hl_class" href="classcoords_1_1coord__point.html">tripoint_abs_omt</a> tpt( it-&gt;first, 0 );</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtime__point.html">time_point</a> last_touched = <a class="code hl_variable" href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a>.<a class="code hl_function" href="classovermapbuffer.html#aac8249284c8cd4887867cbc47d84ff57">scent_at</a>( tpt ).<a class="code hl_variable" href="classscent__trace.html#afaae5b5e3a84f4a1d71182c000303018">creation_time</a>;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> since_visit = now - last_touched;</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            <span class="comment">// If the player has spent little time in this overmap tile, let it decay after just an hour instead of the usual extended decay time.</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> modified_decay_time = it-&gt;second &gt; 5_minutes ? decay_time : 1_hours;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="keywordflow">if</span>( since_visit &gt; modified_decay_time ) {</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>                <span class="comment">// Reduce the tracked time spent in this overmap tile.</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>                <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> decay_amount = std::min( since_visit - modified_decay_time, 1_hours );</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>                <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> updated_value = it-&gt;second - decay_amount;</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>                <span class="keywordflow">if</span>( updated_value &lt;= 0_turns ) {</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>                    <span class="comment">// We can stop tracking this tile if there&#39;s no longer any time recorded there.</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>                    it = <a class="code hl_variable" href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">overmap_time</a>.erase( it );</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                    it-&gt;second = updated_value;</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>                }</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            }</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            it++;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>        }</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    }</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>}</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="classCharacter.html#a2d8eb4e7dc7f720a9a566fb60d532e03">  326</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a2d8eb4e7dc7f720a9a566fb60d532e03">Character::process_one_effect</a>( <a class="code hl_class" href="classeffect.html">effect</a> &amp;it, <span class="keywordtype">bool</span> is_new )</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>{</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>    <span class="keywordtype">bool</span> reduced = <a class="code hl_function" href="classCreature.html#a6b40041c12e2c414170aad5511878446">resists_effect</a>( it );</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>    <span class="keywordtype">double</span> <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>    <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp = it.<a class="code hl_function" href="classeffect.html#ab4bef16d15bbb8c8cd36d8a0432fbbb8">get_bp</a>()-&gt;<a class="code hl_variable" href="structbody__part__type.html#a90beb41f3dca18cdbe06f8483336c899">token</a>;</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="keywordtype">int</span> val = 0;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>    <span class="comment">// Still hardcoded stuff, do this first since some modify their other traits</span></div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>    <a class="code hl_function" href="classCharacter.html#a9f89d86c23ad0eefd40c922efbcd1d8b">hardcoded_effects</a>( it );</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span> </div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>    <span class="keyword">const</span> <span class="keyword">auto</span> <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a> = [&amp;it, is_new]( <span class="keyword">const</span> std::string &amp; <a class="code hl_function" href="fmtlib__core_8h.html#a654171af6def7abe5a92dec0ed1e1179">arg</a>, <span class="keywordtype">bool</span> reduced ) {</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>        <span class="keywordflow">if</span>( is_new ) {</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="keywordflow">return</span> it.<a class="code hl_function" href="classeffect.html#aae8437df1fdd1915880964e91346df63">get_amount</a>( <a class="code hl_function" href="fmtlib__core_8h.html#a654171af6def7abe5a92dec0ed1e1179">arg</a>, reduced );</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        }</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="keywordflow">return</span> it.<a class="code hl_function" href="classeffect.html#a7dfb7bc5b13d6720a94d3f76fbc63fda">get_mod</a>( <a class="code hl_function" href="fmtlib__core_8h.html#a654171af6def7abe5a92dec0ed1e1179">arg</a>, reduced );</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>    };</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span> </div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    <span class="comment">// Handle miss messages</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span>    <span class="keyword">auto</span> msgs = it.<a class="code hl_function" href="classeffect.html#ab1dad45bd256eb67742ea534365b966d">get_miss_msgs</a>();</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="keywordflow">if</span>( !msgs.empty() ) {</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;i : msgs ) {</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( i.first ), <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( i.second ) );</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        }</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>    }</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>    <span class="comment">// Handle health mod</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;H_MOD&quot;</span>, reduced );</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;H_MOD&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="keywordtype">int</span> bounded = <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>(</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>                              <a class="code hl_function" href="classCharacter.html#a21e465cff376e96f87dd4e9202bff601">get_healthy_mod</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;H_MOD&quot;</span>, reduced ),</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>                              it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;H_MOD&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            <span class="comment">// This already applies bounds, so we pass them through.</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <a class="code hl_function" href="classCharacter.html#a8c4e364e25b0ea4d5a27c3120a9f973f">mod_healthy_mod</a>( bounded, <a class="code hl_function" href="classCharacter.html#a21e465cff376e96f87dd4e9202bff601">get_healthy_mod</a>() + bounded );</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        }</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>    }</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span> </div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>    <span class="comment">// Handle health</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;HEALTH&quot;</span>, reduced );</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;HEALTH&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <a class="code hl_function" href="classCharacter.html#a0dccbd6c8830ec355bd793c74291fa8d">mod_healthy</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a4c9fb43c7fb93a18f5d1a785790faca4">get_healthy</a>(), val,</div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>                                            it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;HEALTH&quot;</span>, reduced ), it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;HEALTH&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>        }</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>    }</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>    <span class="comment">// Handle stim</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;STIM&quot;</span>, reduced );</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;STIM&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <a class="code hl_function" href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">mod_stim</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;STIM&quot;</span>, reduced ),</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                                         it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;STIM&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>        }</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>    }</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <span class="comment">// Handle hunger</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;HUNGER&quot;</span>, reduced );</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;HUNGER&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            <a class="code hl_function" href="classCharacter.html#a431180ff2af878a9956bf474783017c0">mod_stored_kcal</a>( -10 * <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( ( <a class="code hl_function" href="classCharacter.html#a4905fef46d52e8b8334cc22666addcf0">max_stored_kcal</a>() - <a class="code hl_function" href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">get_stored_kcal</a>() ) / 10,</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>                             val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;HUNGER&quot;</span>, reduced ), it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;HUNGER&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>        }</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>    }</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span> </div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>    <span class="comment">// Handle thirst</span></div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;THIRST&quot;</span>, reduced );</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;THIRST&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>            <a class="code hl_function" href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">mod_thirst</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;THIRST&quot;</span>, reduced ),</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>                                           it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;THIRST&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>        }</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    }</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span> </div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    <span class="comment">// Handle fatigue</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;FATIGUE&quot;</span>, reduced );</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    <span class="comment">// Prevent ongoing fatigue effects while asleep.</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    <span class="comment">// These are meant to change how fast you get tired, not how long you sleep.</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>    <span class="keywordflow">if</span>( val != 0 &amp;&amp; !<a class="code hl_function" href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">in_sleep_state</a>() ) {</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;FATIGUE&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>            <a class="code hl_function" href="classCharacter.html#a67a7e1b4bc1b191c747a27a1575ee1a6">mod_fatigue</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">get_fatigue</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;FATIGUE&quot;</span>, reduced ),</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>                                            it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;FATIGUE&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>        }</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>    }</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span> </div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>    <span class="comment">// Handle Radiation</span></div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;RAD&quot;</span>, reduced );</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;RAD&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>            <a class="code hl_function" href="classCharacter.html#a27c339d757f9f189e7a9280daa0d2630">mod_rad</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;RAD&quot;</span>, reduced ), 0 ) );</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>            <span class="comment">// Radiation can&#39;t go negative</span></div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>() &lt; 0 ) {</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>                <a class="code hl_function" href="classCharacter.html#ad06f0f9440098eb66fa9a6c46d033324">set_rad</a>( 0 );</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            }</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        }</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>    }</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <span class="comment">// Handle Pain</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;PAIN&quot;</span>, reduced );</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>        <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classeffect.html#a56ecf13462b41c25cfb4113e411fba03">get_sizing</a>( <span class="stringliteral">&quot;PAIN&quot;</span> ) ) {</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a43ae85111a2b2e6825a41a5cd5e619ae">trait_FAT</a> ) ) {</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 1.5;</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>            }</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#aa5ca0f6c4fb1c08bb93ece1c9746c368">get_size</a>() == <a class="code hl_enumvalue" href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a50d9f673ed0348953b2715fa33683791">MS_LARGE</a> ) {</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 2;</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            }</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#aa5ca0f6c4fb1c08bb93ece1c9746c368">get_size</a>() == <a class="code hl_enumvalue" href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a75a0e62060c8f624b2c71038a5a77ae9">MS_HUGE</a> ) {</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 3;</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            }</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>        }</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;PAIN&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>            <span class="keywordtype">int</span> pain_inc = <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCreature.html#a71e8440dfb96a7a870c29e0472b7b85d">get_pain</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;PAIN&quot;</span>, reduced ), 0 );</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            <a class="code hl_function" href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">mod_pain</a>( pain_inc );</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>            <span class="keywordflow">if</span>( pain_inc &gt; 0 ) {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>                <a class="code hl_function" href="namespacecharacter__funcs.html#a95d2e2c3c197301f7e9c3e4608e912eb">character_funcs::add_pain_msg</a>( *<span class="keyword">this</span>, val, bp );</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>            }</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        }</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>    }</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span> </div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="comment">// Handle Damage</span></div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;HURT&quot;</span>, reduced );</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classeffect.html#a56ecf13462b41c25cfb4113e411fba03">get_sizing</a>( <span class="stringliteral">&quot;HURT&quot;</span> ) ) {</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a43ae85111a2b2e6825a41a5cd5e619ae">trait_FAT</a> ) ) {</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 1.5;</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            }</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#aa5ca0f6c4fb1c08bb93ece1c9746c368">get_size</a>() == <a class="code hl_enumvalue" href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a50d9f673ed0348953b2715fa33683791">MS_LARGE</a> ) {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 2;</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>            }</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#aa5ca0f6c4fb1c08bb93ece1c9746c368">get_size</a>() == <a class="code hl_enumvalue" href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a75a0e62060c8f624b2c71038a5a77ae9">MS_HUGE</a> ) {</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>                <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> *= 3;</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            }</div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>        }</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;HURT&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            <span class="keywordflow">if</span>( bp == <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> ) {</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>                <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>                    <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s HURTS!&quot;</span> ), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> ) );</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>                    <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s hurts!&quot;</span> ), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> ) );</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>                }</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                <a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ), val, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>                <span class="keywordflow">if</span>( val &gt; 5 ) {</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>                    <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s HURTS!&quot;</span> ), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                    <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your %s hurts!&quot;</span> ), <a class="code hl_function" href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a>( bp ) );</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>                }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                <a class="code hl_function" href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">apply_damage</a>( <span class="keyword">nullptr</span>, <a class="code hl_function" href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a>( bp ).<span class="keywordtype">id</span>(), val, <span class="keyword">true</span> );</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            }</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>        }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    }</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span> </div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="comment">// Handle Sleep</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;SLEEP&quot;</span>, reduced );</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>        <span class="keywordflow">if</span>( ( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;SLEEP&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) &amp;&amp;</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            !<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5ba36ff0c0cae9ccd113903466f4e47c">efftype_id</a>( <span class="stringliteral">&quot;sleep&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You pass out!&quot;</span> ) );</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <a class="code hl_function" href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">fall_asleep</a>( <a class="code hl_function" href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a>( val ) );</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>        }</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    }</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span> </div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="comment">// Handle painkillers</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;PKILL&quot;</span>, reduced );</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = it.<a class="code hl_function" href="classeffect.html#a8ac5789a9251428bfcb46409c293e7b6">get_addict_mod</a>( <span class="stringliteral">&quot;PKILL&quot;</span>, <a class="code hl_function" href="classCharacter.html#af2f6b4a5ad4b128bda53fe610362b5b0">addiction_level</a>( <a class="code hl_enumvalue" href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b">add_type::PKILLER</a> ) );</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;PKILL&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            <a class="code hl_function" href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">mod_painkiller</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>(), val, it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;PKILL&quot;</span>, reduced ), 0 ) );</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        }</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>    }</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span> </div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <span class="comment">// Handle coughing</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>    <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>    val = 0;</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;COUGH&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <a class="code hl_function" href="classCharacter.html#a5372963458e39e2755de3489b2624ac2">cough</a>( it.<a class="code hl_function" href="classeffect.html#a5a6272c8dc31c122bd1cda9f0356b40f">get_harmful_cough</a>() );</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>    }</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span> </div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="comment">// Handle vomiting</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = <a class="code hl_function" href="namespacecharacter__effects.html#ad01a6f352e0abd8cbedbc36d90b766b7">character_effects::vomit_mod</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    val = 0;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;VOMIT&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <a class="code hl_function" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>();</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    }</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span> </div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>    <span class="comment">// Handle stamina</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>    val = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <span class="stringliteral">&quot;STAMINA&quot;</span>, reduced );</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="keywordflow">if</span>( val != 0 ) {</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> = 1;</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        <span class="keywordflow">if</span>( is_new || it.<a class="code hl_function" href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">activated</a>( <a class="code hl_variable" href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a>, <span class="stringliteral">&quot;STAMINA&quot;</span>, val, reduced, <a class="code hl_enumeration" href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">mod</a> ) ) {</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>            <a class="code hl_function" href="classCharacter.html#ac29de3d2bc90dd1c8d921b539fb05cfb">mod_stamina</a>( <a class="code hl_function" href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a>( <a class="code hl_function" href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">get_stamina</a>(), val,</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>                                            it.<a class="code hl_function" href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">get_max_val</a>( <span class="stringliteral">&quot;STAMINA&quot;</span>, reduced ),</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>                                            it.<a class="code hl_function" href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">get_min_val</a>( <span class="stringliteral">&quot;STAMINA&quot;</span>, reduced ) ) );</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        }</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    }</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span> </div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    <span class="comment">// Speed and stats are handled in recalc_speed_bonus and reset_stats respectively</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>}</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span> </div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno"><a class="line" href="classCharacter.html#a7d4989b9ba8eed283bbf0993eda2ee27">  535</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a7d4989b9ba8eed283bbf0993eda2ee27">Character::process_effects_internal</a>()</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>{</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>    <span class="comment">//Special Removals</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a> ) &amp;&amp; <a class="code hl_variable" href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a>-&gt;is_in_sunlight( <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a> );</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    }</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a> ) &amp;&amp; <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> ) ) {</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>        <a class="code hl_function" href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">vomit</a>();</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a> );</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>        <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;We have mistakenly colonized a local guide!  Purging now.&quot;</span> ) );</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    }</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a> ) &amp;&amp; ( <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> ) ||</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                                           <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> ) ||</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                                           <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> ) ||</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                                           <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> ) ||</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>                                           <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a> ) ) ) {</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> );</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> );</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> );</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> );</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a> );</div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>        <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Something writhes and inside of you as it dies.&quot;</span> ) );</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    }</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a> ) &amp;&amp; ( <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> ) ||</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>                                          <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> ) ||</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>                                          <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> ) ) ) {</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a> );</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a> );</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a> );</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>    }</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a> ) &amp;&amp; <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> ) ) {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a> );</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        <a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your bowels gurgle as something inside them dies.&quot;</span> ) );</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>    }</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span> </div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>    <span class="comment">//Human only effects</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;elem : *<a class="code hl_variable" href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">effects</a> ) {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;_effect_it : elem.second ) {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            <span class="keywordflow">if</span>( !_effect_it.second.is_removed() ) {</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>                <a class="code hl_function" href="classCharacter.html#a2d8eb4e7dc7f720a9a566fb60d532e03">process_one_effect</a>( _effect_it.second, <span class="keyword">false</span> );</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>            }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        }</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    }</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>}</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno"><a class="line" href="classCharacter.html#a997ede96b346ac8b05305c7b1c9b2e4d">  580</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a997ede96b346ac8b05305c7b1c9b2e4d">Character::reset_stats</a>()</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>{</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> current_stim = <a class="code hl_function" href="classCharacter.html#a7335f053c5874081211552623fa625c5">get_stim</a>();</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>    <span class="comment">// Trait / mutation buffs</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a> ) ) {</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your thick scales get in the way.&quot;</span> ), 2 );</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    }</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a> ) || <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a> ) || <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your chitin gets in the way.&quot;</span> ), 1 );</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    }</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a> ) &amp;&amp; !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;eyes&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>        <a class="code hl_function" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( 2 );</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    }</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a> ) ) {</div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your insect limbs get in the way.&quot;</span> ), 2 );</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a> ) ) {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>            <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( 1 );</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>            <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -1 );</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>            <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your clothing restricts your insect arms.&quot;</span> ), 1 );</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>        }</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a365df112ebfa257fa507cef2fa5a1c2e">trait_WEBBED</a> ) ) {</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your webbed hands get in the way.&quot;</span> ), 1 );</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    }</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a> ) ) {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your arachnid limbs get in the way.&quot;</span> ), 4 );</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>    }</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a> ) ) {</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( 2 );</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCharacter.html#a1febd48cd6251eb3dabd51ccfd608148">exclusive_flag_coverage</a>( <span class="stringliteral">&quot;OVERSIZE&quot;</span> ).test( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> ) ) {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>            <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -2 );</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>            <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your clothing constricts your arachnid limbs.&quot;</span> ), 2 );</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>        }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>    }</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>    <span class="keyword">const</span> <span class="keyword">auto</span> set_fake_effect_dur = [<span class="keyword">this</span>]( <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">efftype_id</a> &amp; <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> &amp; dur ) {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>        <a class="code hl_class" href="classeffect.html">effect</a> &amp;eff = <a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a> );</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>        <span class="keywordflow">if</span>( eff.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() == dur ) {</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>        }</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span> </div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>        <span class="keywordflow">if</span>( eff.<a class="code hl_function" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() &amp;&amp; dur &gt; 0_turns ) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>            <a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, dur, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( dur &gt; 0_turns ) {</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>            eff.<a class="code hl_function" href="classeffect.html#a40265c904a684396b45a347239e38782">set_duration</a>( dur );</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>            <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_enumvalue" href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a> );</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>        }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>    };</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="comment">// Painkiller</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a>, 1_turns * <a class="code hl_function" href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">get_painkiller</a>() );</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span> </div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>    <span class="comment">// Pain</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">get_perceived_pain</a>() &gt; 0 ) {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structstat__mod.html">stat_mod</a> ppen = <a class="code hl_function" href="namespacecharacter__effects.html#a8f18c1c2508870515d5c36a3ea255498">character_effects::get_pain_penalty</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>        <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( -ppen.<a class="code hl_variable" href="structstat__mod.html#a362a69480e76954ddece8a94f8fb41d9">strength</a> );</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -ppen.<a class="code hl_variable" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> );</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>        <a class="code hl_function" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( -ppen.<a class="code hl_variable" href="structstat__mod.html#a02fc9b713716dc8d9c8643db09cd853a">intelligence</a> );</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>        <a class="code hl_function" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( -ppen.<a class="code hl_variable" href="structstat__mod.html#aedeca4241e12b9b4171454522d162baa">perception</a> );</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>        <span class="keywordflow">if</span>( ppen.<a class="code hl_variable" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> &gt; 0 ) {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>            <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your pain distracts you!&quot;</span> ), <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( ppen.<a class="code hl_variable" href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">dexterity</a> ) );</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>        }</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>    }</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    <span class="comment">// Radiation</span></div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a>, 1_turns * <a class="code hl_function" href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">get_rad</a>() );</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>    <span class="comment">// Morale</span></div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> = <a class="code hl_function" href="classCharacter.html#a81a81cee431c657465e6ab54af345eaf">get_morale_level</a>();</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a>, 1_turns * <a class="code hl_variable" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> );</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a>, 1_turns * -<a class="code hl_variable" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a> );</div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span> </div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>    <span class="comment">// Stimulants</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a>, 1_turns * current_stim );</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a>, 1_turns * -current_stim );</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a> ) ) {</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>        set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>, 1_turns * ( current_stim - 60 ) );</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>        set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a>, 1_turns * ( current_stim - 30 ) );</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    }</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <span class="comment">// Starvation</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() &lt; 0.95f ) {</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>        <span class="comment">// kcal-&gt;percentage of base str</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>        <span class="keyword">static</span> <span class="keyword">const</span> std::vector&lt;std::pair&lt;float, float&gt;&gt; starv_thresholds = { {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                std::make_pair( 0.0f, 0.5f ),</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                std::make_pair( 0.8f, 0.1f ),</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>                std::make_pair( 0.95f, 0.0f )</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>            }</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>        };</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> str_penalty = std::floor( <a class="code hl_function" href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a>( starv_thresholds, <a class="code hl_function" href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">get_kcal_percent</a>() ) );</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>        <a class="code hl_function" href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">add_miss_reason</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;re weak from hunger.&quot;</span> ),</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span><span class="keyword">&gt;</span>( str_penalty / 2 ) );</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>        <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( -str_penalty );</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>        <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( -( str_penalty / 2 ) );</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>        <a class="code hl_function" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( -( str_penalty / 2 ) );</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    }</div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="comment">// Thirst</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#a99d0319c6ba808305bd397fed049a224">effect_thirsty</a>, 1_turns * ( <a class="code hl_function" href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">get_thirst</a>() - <a class="code hl_enumvalue" href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">thirst_levels::very_thirsty</a> ) );</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">get_sleep_deprivation</a>() &gt;= <a class="code hl_enumvalue" href="character_8h.html#aa7bb0ad73714bdf6b22d11b5b4e2633fad8eced3b06972df4d1dd7d835fc3edd3">sleep_deprivation_levels::harmless</a> ) {</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        set_fake_effect_dur( <a class="code hl_variable" href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a>, 1_turns * <a class="code hl_function" href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">get_sleep_deprivation</a>() );</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( <a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a> ) ) {</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <a class="code hl_function" href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">remove_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a> );</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>    }</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span> </div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>    <span class="comment">// Dodge-related effects</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>    <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( <a class="code hl_function" href="classCharacter.html#aba0dd3cd625129fd3792d9cf10bf5f77">mabuff_dodge_bonus</a>() -</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>                     ( <a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a> ) + <a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a> ) ) / 20.0f - <a class="code hl_function" href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">encumb</a>( <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a> ) / 10.0f );</div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>    <span class="comment">// Whiskers don&#39;t work so well if they&#39;re covered</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a> ) &amp;&amp; !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>        <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 1.5 );</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>    }</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a> ) &amp;&amp; !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;mouth&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 3 );</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>    }</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>    <span class="comment">// depending on mounts size, attacks will hit the mount and use their dodge rating.</span></div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    <span class="comment">// if they hit the player, the player cannot dodge as effectively.</span></div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">is_mounted</a>() ) {</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( -4 );</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>    }</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>    <span class="comment">// Spider hair is basically a full-body set of whiskers, once you get the brain for it</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;bodypart_id, 5&gt; parts{ { <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;head&quot;</span> ), <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_r&quot;</span> ), <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;arm_l&quot;</span> ), <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_r&quot;</span> ), <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;leg_l&quot;</span> ) } };</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_class" href="classint__id.html">bodypart_id</a> &amp;bp : parts ) {</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>            <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( bp ) ) {</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>                <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( +1 );</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>            }</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        }</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>        <span class="comment">// Torso handled separately, bigger bonus</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        <span class="keywordflow">if</span>( !<a class="code hl_function" href="classCharacter.html#a6d3588802fde645fd5387038b259377c">wearing_something_on</a>( <a class="code hl_typedef" href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a>( <span class="stringliteral">&quot;torso&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>            <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( 4 );</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>        }</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    }</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span> </div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <span class="comment">// Apply static martial arts buffs</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    <a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;ma_static_effects( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a>( 1_minutes ) ) {</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        <a class="code hl_function" href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a">character_funcs::update_mental_focus</a>( *<span class="keyword">this</span> );</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>    }</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span> </div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>    <span class="comment">// Effects</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <span class="keyword">auto</span> &amp;maps : *<a class="code hl_variable" href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">effects</a> ) {</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> i : maps.second ) {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>            <span class="keyword">const</span> <span class="keyword">auto</span> &amp;it = i.second;</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>            <span class="keywordflow">if</span>( it.is_removed() ) {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>            }</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>            <span class="keywordtype">bool</span> reduced = <a class="code hl_function" href="classCreature.html#a6b40041c12e2c414170aad5511878446">resists_effect</a>( it );</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>            <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( it.get_mod( <span class="stringliteral">&quot;STR&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>            <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( it.get_mod( <span class="stringliteral">&quot;DEX&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>            <a class="code hl_function" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( it.get_mod( <span class="stringliteral">&quot;PER&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>            <a class="code hl_function" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( it.get_mod( <span class="stringliteral">&quot;INT&quot;</span>, reduced ) );</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        }</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>    }</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span> </div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>    <span class="comment">// Bionic buffs</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a4424b509877ff458aa661c2b49a99dda">bio_hydraulics</a> ) ) {</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( 20 );</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>    }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span> </div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>    <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( <a class="code hl_function" href="classCharacter.html#aafae2e55b991d000ca053ced6a089a15">get_mod_stat_from_bionic</a>( <a class="code hl_enumvalue" href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc">character_stat::STRENGTH</a> ) );</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>    <a class="code hl_function" href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">mod_dex_bonus</a>( <a class="code hl_function" href="classCharacter.html#aafae2e55b991d000ca053ced6a089a15">get_mod_stat_from_bionic</a>( <a class="code hl_enumvalue" href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203">character_stat::DEXTERITY</a> ) );</div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>    <a class="code hl_function" href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">mod_per_bonus</a>( <a class="code hl_function" href="classCharacter.html#aafae2e55b991d000ca053ced6a089a15">get_mod_stat_from_bionic</a>( <a class="code hl_enumvalue" href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319">character_stat::PERCEPTION</a> ) );</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>    <a class="code hl_function" href="classCharacter.html#af6603125d7342944862004a14de55a8a">mod_int_bonus</a>( <a class="code hl_function" href="classCharacter.html#aafae2e55b991d000ca053ced6a089a15">get_mod_stat_from_bionic</a>( <a class="code hl_enumvalue" href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e">character_stat::INTELLIGENCE</a> ) );</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span> </div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>    <span class="comment">// Trait / mutation buffs</span></div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>    <a class="code hl_function" href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">mod_str_bonus</a>( std::floor( <a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;str_modifier&quot;</span> ) ) );</div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>    <a class="code hl_function" href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">mod_dodge_bonus</a>( std::floor( <a class="code hl_function" href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">mutation_value</a>( <span class="stringliteral">&quot;dodge_modifier&quot;</span> ) ) );</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span> </div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>    <a class="code hl_function" href="classCharacter.html#ae0ff036234bb7eb3fccb8bb8de5781ec">apply_skill_boost</a>();</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>    <a class="code hl_variable" href="classCharacter.html#af7ec444ce33b8a774dad1a23857078c1">nv_cached</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span> </div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>    <span class="comment">// Reset our stats to normal levels</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>    <span class="comment">// Any persistent buffs/debuffs will take place in effects,</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>    <span class="comment">// player::suffer(), etc.</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span> </div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>    <span class="comment">// repopulate the stat fields</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>    <a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> = <a class="code hl_variable" href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">str_max</a> + <a class="code hl_function" href="classCharacter.html#a035582952cd5e19963a5609585c314a9">get_str_bonus</a>();</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>    <a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> = <a class="code hl_variable" href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">dex_max</a> + <a class="code hl_function" href="classCharacter.html#afeeecb20f5d89598619b8948c2e8a0e0">get_dex_bonus</a>();</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>    <a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> = <a class="code hl_variable" href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">per_max</a> + <a class="code hl_function" href="classCharacter.html#acf5583cbfc563f3a6a1ba708fc72bea9">get_per_bonus</a>();</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>    <a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> = <a class="code hl_variable" href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">int_max</a> + <a class="code hl_function" href="classCharacter.html#aa792d074ba8c8dc291e410cbbb27f292">get_int_bonus</a>();</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>    <span class="comment">// Floor for our stats.  No stat changes should occur after this!</span></div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> &lt; 0 ) {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        <a class="code hl_variable" href="classCharacter.html#a4065ac02745befad248425d307b71849">dex_cur</a> = 0;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    }</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> &lt; 0 ) {</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>        <a class="code hl_variable" href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">str_cur</a> = 0;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>    }</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> &lt; 0 ) {</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        <a class="code hl_variable" href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">per_cur</a> = 0;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> &lt; 0 ) {</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>        <a class="code hl_variable" href="classCharacter.html#a994c83d61054215e81a6e87478d81203">int_cur</a> = 0;</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>    }</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span> </div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>    <a class="code hl_function" href="classCharacter.html#aa0d1b26c15ad4a52973774bf6a7610c1">recalc_sight_limits</a>();</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>    <a class="code hl_function" href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">recalc_speed_bonus</a>();</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>}</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span> </div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno"><a class="line" href="classCharacter.html#a2d0693f6056f737b0308d79857247f4b">  785</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a2d0693f6056f737b0308d79857247f4b">Character::environmental_revert_effect</a>()</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>{</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>    <a class="code hl_variable" href="classCharacter.html#a86ad83bf21de1c90b69ad5188d03e59c">addictions</a>.clear();</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>    <a class="code hl_variable" href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">morale</a>-&gt;clear();</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span> </div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>    <a class="code hl_function" href="classCreature.html#a6af61264a3d5ac62a64df4899e87d2c1">set_all_parts_hp_to_max</a>();</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>    <a class="code hl_function" href="classCharacter.html#a74e6a7c7b747298dd3d1e853fab2c1ff">set_stored_kcal</a>( <a class="code hl_function" href="classCharacter.html#a4905fef46d52e8b8334cc22666addcf0">max_stored_kcal</a>() );</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>    <a class="code hl_function" href="classCharacter.html#ae6bcae1e1d30b35e0152b5e1bd615f5e">set_thirst</a>( 0 );</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>    <a class="code hl_function" href="classCharacter.html#a487913b9c97a3172f66517e87803d4a6">set_fatigue</a>( 0 );</div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>    <a class="code hl_function" href="classCharacter.html#a9acf20ad52ac234831c4ec5472da8426">set_healthy</a>( 0 );</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>    <a class="code hl_function" href="classCharacter.html#a32e0c83c8160696f441f82d4230c0e7a">set_healthy_mod</a>( 0 );</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>    <a class="code hl_function" href="classCharacter.html#a5106996739b703dd5915cf166236653a">set_stim</a>( 0 );</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>    <a class="code hl_function" href="classCharacter.html#a949089fac926ba54f6848f03ab76cdff">set_pain</a>( 0 );</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    <a class="code hl_function" href="classCharacter.html#a5f1a21ad76d22926f2688c1e49105311">set_painkiller</a>( 0 );</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    <a class="code hl_function" href="classCharacter.html#ad06f0f9440098eb66fa9a6c46d033324">set_rad</a>( 0 );</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>    <a class="code hl_function" href="classCharacter.html#a2e658d88946cc7abba5333ad4cd3f153">set_sleep_deprivation</a>( 0 );</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span> </div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    <a class="code hl_function" href="classCharacter.html#aa0d1b26c15ad4a52973774bf6a7610c1">recalc_sight_limits</a>();</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>    <a class="code hl_function" href="classCharacter.html#ad67a790400ac88405241f279b566b89e">reset_encumbrance</a>();</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>}</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span> </div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno"><a class="line" href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">  806</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">Character::process_items</a>()</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>{</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">needs_processing</a>() &amp;&amp; <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#a36618e7473c8e261835fbe80c32a07bd">process</a>( <a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>(), <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a> = <a class="code hl_class" href="classitem.html">item</a>();</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>    }</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span> </div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>    std::vector&lt;item *&gt; inv_active = <a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a1ea0a054f11675831cef03a936bd5813">active_items</a>();</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> *tmp_it : inv_active ) {</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="keywordflow">if</span>( tmp_it-&gt;process( <a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>(), <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <span class="keyword">false</span> ) ) {</div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>            <a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a36e4b99300e1fe64920ce52911c04127">remove_item</a>( tmp_it );</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        }</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    }</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span> </div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>    <span class="comment">// worn items</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>    <a class="code hl_function" href="classCharacter.html#ac407c565e22ac2a0d52a17c1c9986c90">remove_worn_items_with</a>( [<span class="keyword">this</span>]( <a class="code hl_class" href="classitem.html">item</a> &amp; itm ) {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="keywordflow">return</span> itm.<a class="code hl_function" href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">needs_processing</a>() &amp;&amp; itm.<a class="code hl_function" href="classitem.html#a36618e7473c8e261835fbe80c32a07bd">process</a>( <a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>(), <a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), <span class="keyword">false</span> );</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>    } );</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="comment">// Active item processing done, now we&#39;re recharging.</span></div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>    std::vector&lt;item *&gt; active_worn_items;</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>    <span class="keywordtype">bool</span> weapon_active = <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;USE_UPS&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>                         <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt; <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>();</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>    std::vector&lt;size_t&gt; active_held_items;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>    <span class="keywordtype">int</span> ch_UPS = 0;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> index = 0; index &lt; <a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a51a62ddae83430e06da3c08d5b3fd5e4">size</a>(); index++ ) {</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;it = <a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a3327fb977cf0d264d61e708527f0d2c0">find_item</a>( index );</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <a class="code hl_class" href="classstring__id.html">itype_id</a> identifier = it.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">get_id</a>();</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        <span class="keywordflow">if</span>( identifier == <a class="code hl_variable" href="character__turn_8cpp.html#ae89306fd36cf36b57fe05dad0db3f71b">itype_UPS_off</a> ) {</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            ch_UPS += it.<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>();</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( identifier == <a class="code hl_variable" href="character__turn_8cpp.html#a1c359a305b979b2e5fc87d15db51e903">itype_adv_UPS_off</a> ) {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>            ch_UPS += it.<a class="code hl_function" href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">ammo_remaining</a>() / 0.6;</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        }</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        <span class="keywordflow">if</span>( it.<a class="code hl_function" href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">has_flag</a>( <span class="stringliteral">&quot;USE_UPS&quot;</span> ) &amp;&amp; it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a> &lt; it.<a class="code hl_variable" href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">type</a>-&gt;<a class="code hl_function" href="structitype.html#af238865694d157c403d1c7d0b74106dc">maximum_charges</a>() ) {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            active_held_items.push_back( index );</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        }</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    }</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <span class="keywordtype">bool</span> update_required = <a class="code hl_function" href="classCharacter.html#a165e76d3db9a1a8c6810b25c9b0ed42f">get_check_encumbrance</a>();</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> &amp;w : <a class="code hl_variable" href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">worn</a> ) {</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <span class="keywordflow">if</span>( w.has_flag( <span class="stringliteral">&quot;USE_UPS&quot;</span> ) &amp;&amp;</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>            w.charges &lt; w.type-&gt;maximum_charges() ) {</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            active_worn_items.push_back( &amp;w );</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>        }</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="comment">// Necessary for UPS in Aftershock - check worn items for charge</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="keyword">const</span> <a class="code hl_class" href="classstring__id.html">itype_id</a> &amp;identifier = w.typeId();</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        <span class="keywordflow">if</span>( identifier == <a class="code hl_variable" href="character__turn_8cpp.html#ae89306fd36cf36b57fe05dad0db3f71b">itype_UPS_off</a> ) {</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>            ch_UPS += w.ammo_remaining();</div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( identifier == <a class="code hl_variable" href="character__turn_8cpp.html#a1c359a305b979b2e5fc87d15db51e903">itype_adv_UPS_off</a> ) {</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>            ch_UPS += w.ammo_remaining() / 0.6;</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        }</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="keywordflow">if</span>( !update_required &amp;&amp; w.encumbrance_update_ ) {</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>            update_required = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        }</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        w.encumbrance_update_ = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>    }</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keywordflow">if</span>( update_required ) {</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        <a class="code hl_function" href="classCharacter.html#ad67a790400ac88405241f279b566b89e">reset_encumbrance</a>();</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>    }</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a965ba98fb0eca1e875b86fcf2bc91ab8">bionic_id</a>( <span class="stringliteral">&quot;bio_ups&quot;</span> ) ) ) {</div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        ch_UPS += <a class="code hl_function" href="namespaceunits.html#a54442f1523294bc7b9946662beed96e6">units::to_kilojoule</a>( <a class="code hl_function" href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">get_power_level</a>() );</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>    }</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>    <span class="keywordtype">int</span> ch_UPS_used = 0;</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span> </div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>    <span class="comment">// Load all items that use the UPS to their minimal functional charge,</span></div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>    <span class="comment">// The tool is not really useful if its charges are below charges_to_use</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>    <span class="keywordflow">for</span>( <span class="keywordtype">size_t</span> index : active_held_items ) {</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>        <span class="keywordflow">if</span>( ch_UPS_used &gt;= ch_UPS ) {</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        }</div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        <a class="code hl_class" href="classitem.html">item</a> &amp;it = <a class="code hl_variable" href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">inv</a>.<a class="code hl_function" href="classinventory.html#a3327fb977cf0d264d61e708527f0d2c0">find_item</a>( index );</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        ch_UPS_used++;</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        it.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>    }</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>    <span class="keywordflow">if</span>( weapon_active &amp;&amp; ch_UPS_used &lt; ch_UPS ) {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        ch_UPS_used++;</div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        <a class="code hl_variable" href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">weapon</a>.<a class="code hl_variable" href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">charges</a>++;</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>    }</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>    <span class="keywordflow">for</span>( <a class="code hl_class" href="classitem.html">item</a> *worn_item : active_worn_items ) {</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="keywordflow">if</span>( ch_UPS_used &gt;= ch_UPS ) {</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        }</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        ch_UPS_used++;</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        worn_item-&gt;charges++;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>    }</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>    <span class="keywordflow">if</span>( ch_UPS_used &gt; 0 ) {</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <a class="code hl_function" href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">use_charges</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a>, ch_UPS_used );</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>    }</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>}</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span> </div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacecharacter__funcs.html">character_funcs</a></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>{</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span> </div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno"><a class="line" href="namespacecharacter__funcs.html#afa9463f9c384d1e193bdbc8dc337f8d3">  897</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecharacter__funcs.html#afa9463f9c384d1e193bdbc8dc337f8d3">update_body_wetness</a>( <a class="code hl_class" href="classCharacter.html">Character</a> &amp;who, <span class="keyword">const</span> <a class="code hl_struct" href="structw__point.html">w_point</a> &amp;<a class="code hl_namespace" href="namespaceweather.html">weather</a> )</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>{</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>    <span class="comment">// Average number of turns to go from completely soaked to fully dry</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>    <span class="comment">// assuming average temperature and humidity</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>    <span class="keyword">constexpr</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> average_drying = 2_hours;</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span> </div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>    <span class="comment">// A modifier on drying time</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>    <span class="keywordtype">double</span> delay = 1.0;</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>    <span class="comment">// Weather slows down drying</span></div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>    delay += ( ( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.humidity - 66 ) - ( <a class="code hl_function" href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a>( <a class="code hl_namespace" href="namespaceweather.html">weather</a>.temperature ) - 65 ) ) / 100;</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>    delay = std::max( 0.1, delay );</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>    <span class="comment">// Fur/slime retains moisture</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a> ) ||</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a> ) ||</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a> ) ||</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a> ) ||</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a> ) ||</div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a> ) ||</div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a> ) ) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        delay = delay * 6 / 5;</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>    }</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a> ) || who.<a class="code hl_function" href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">has_trait</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a> ) ) {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        delay *= 1.5;</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    }</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>    <span class="keywordflow">if</span>( !<a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( 1, to_turns&lt;int&gt;( average_drying * delay / 100.0 ) ) ) {</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="comment">// No drying this turn</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>    }</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span> </div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>    <span class="comment">// Now per-body-part stuff</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>    <span class="comment">// To make drying uniform, make just one roll and reuse it</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> drying_roll = <a class="code hl_function" href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a>( 1, 80 );</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp : <a class="code hl_variable" href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a> ) {</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] == 0 ) {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        }</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        <span class="comment">// This is to normalize drying times</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        <span class="keywordtype">int</span> drying_chance = who.<a class="code hl_variable" href="classCharacter.html#ab7700517fb07e9155e559b3c2e427a65">drench_capacity</a>[bp];</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="comment">// Body temperature affects duration of wetness</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="comment">// Note: Using temp_conv rather than temp_cur, to better approximate environment</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#a353f46362b1fd4a5eb685d5f7b271079">BODYTEMP_SCORCHING</a> ) {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>            drying_chance *= 2;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#a8220ffde7e07de66ab06bdeba262a2c3">BODYTEMP_VERY_HOT</a> ) {</div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>            drying_chance = drying_chance * 3 / 2;</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt;= <a class="code hl_variable" href="weather_8h.html#aa69b18b562ac33b8688ca8e3e95a9205">BODYTEMP_HOT</a> ) {</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>            drying_chance = drying_chance * 4 / 3;</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">temp_conv</a>[bp] &gt; <a class="code hl_variable" href="weather_8h.html#a08fc0049be5212458556d07723095141">BODYTEMP_COLD</a> ) {</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>            <span class="comment">// Comfortable, doesn&#39;t need any changes</span></div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>            <span class="comment">// Evaporation doesn&#39;t change that much at lower temp</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>            drying_chance = drying_chance * 3 / 4;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>        }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>        <span class="keywordflow">if</span>( drying_chance &lt; 1 ) {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>            drying_chance = 1;</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>        }</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>        <span class="comment">// TODO: Make evaporation reduce body heat</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>        <span class="keywordflow">if</span>( drying_chance &gt;= drying_roll ) {</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>            who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] -= 1;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] &lt; 0 ) {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>                who.<a class="code hl_variable" href="classCharacter.html#a66520fe7648d455282596ead87701655">body_wetness</a>[bp] = 0;</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>        }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>    }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>    <span class="comment">// TODO: Make clothing slow down drying</span></div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno"><a class="line" href="namespacecharacter__funcs.html#a8b6391933c53c0461e4e64fa9930d472">  967</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a8b6391933c53c0461e4e64fa9930d472">do_pause</a>( <a class="code hl_class" href="classCharacter.html">Character</a> &amp;who )</div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>{</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    who.<a class="code hl_variable" href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">moves</a> = 0;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    who.<a class="code hl_variable" href="classCharacter.html#a057d68671b298012a18f4e289b39935d">recoil</a> = <a class="code hl_variable" href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a>;</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span> </div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <span class="comment">// Train swimming if underwater</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">if</span>( !who.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> ) {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">is_underwater</a>() ) {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>            who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, 1 );</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 100, { {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>,</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a>,</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                }</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            }, true );</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <a class="code hl_enumvalue" href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a>, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a>, 1 );</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="comment">// Same as above, except no head/eyes/mouth</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 100, { {</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a>,</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a>,</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>                    <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>                }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>            }, true );</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( here.<a class="code hl_function" href="classmap.html#a27e22f0999ea03eff18babc48643c568">has_flag</a>( <span class="stringliteral">&quot;SWIMMABLE&quot;</span>, who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            who.<a class="code hl_function" href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">drench</a>( 40, { { <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a>, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a> } }, false );</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        }</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>    }</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span> </div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>    <span class="comment">// Try to put out clothing/hair fire</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a> ) ) {</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> total_removed = 0_turns;</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>        <a class="code hl_class" href="classtime__duration.html">time_duration</a> total_left = 0_turns;</div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>        <span class="keywordtype">bool</span> on_ground = who.<a class="code hl_function" href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">has_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a> );</div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>        <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_enumeration" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a> bp : <a class="code hl_variable" href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a> ) {</div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            <a class="code hl_class" href="classeffect.html">effect</a> &amp;eff = who.<a class="code hl_function" href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">get_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a>, bp );</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            <span class="keywordflow">if</span>( eff.<a class="code hl_function" href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">is_null</a>() ) {</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>            }</div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span> </div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            <span class="comment">// TODO: Tools and skills</span></div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            total_left += eff.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>();</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>            <span class="comment">// Being on the ground will smother the fire much faster because you can roll</span></div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> dur_removed = on_ground ? eff.<a class="code hl_function" href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">get_duration</a>() / 2 + 2_turns : 1_turns;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            eff.<a class="code hl_function" href="classeffect.html#a118dd88810785bfbb8243af97a37d2ab">mod_duration</a>( -dur_removed );</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            total_removed += dur_removed;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>        }</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span> </div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>        <span class="comment">// Don&#39;t drop on the ground when the ground is on fire</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>        <span class="keywordflow">if</span>( total_left &gt; 1_minutes &amp;&amp; !who.<a class="code hl_function" href="classCreature.html#a6a4c43d66f5a8b50a879d78682b00976">is_dangerous_fields</a>( here.<a class="code hl_function" href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">field_at</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) ) ) {</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            who.<a class="code hl_function" href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">add_effect</a>( <a class="code hl_variable" href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a>, 2_turns, <a class="code hl_enumvalue" href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a>, 0, <span class="keyword">true</span> );</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            who.<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You roll on the ground, trying to smother the fire!&quot;</span> ),</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; rolls on the ground!&quot;</span> ) );</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span>( total_removed &gt; 0_turns ) {</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>            who.<a class="code hl_function" href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">add_msg_player_or_npc</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>,</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You attempt to put out the fire on you!&quot;</span> ),</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>                                       <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;&lt;npcname&gt; attempts to put out the fire on them!&quot;</span> ) );</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        }</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>    }</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span> </div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>    <span class="comment">// on-pause effects for martial arts</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>    who.<a class="code hl_variable" href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">martial_arts_data</a>-&gt;ma_onpause_effects( who );</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span> </div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>    <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">is_npc</a>() ) {</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>        <span class="comment">// The stuff below doesn&#39;t apply to NPCs</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>        <span class="comment">// search_surroundings should eventually do, though</span></div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    }</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span> </div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>    <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">in_vehicle</a> &amp;&amp; <a class="code hl_function" href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a>( 8 ) ) {</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>        <a class="code hl_typedef" href="map_8h.html#ae705edb5469cf2668ca5bc3297d75ebb">VehicleList</a> vehs = here.<a class="code hl_function" href="classmap.html#ac1c02ce0648fe07137b86c84fc72f5de">get_vehicles</a>();</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>        <a class="code hl_class" href="classvehicle.html">vehicle</a> *veh = <span class="keyword">nullptr</span>;</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>        <span class="keywordflow">for</span>( <span class="keyword">auto</span> &amp;v : vehs ) {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            veh = v.v;</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>            <span class="keywordflow">if</span>( veh &amp;&amp; veh-&gt;<a class="code hl_function" href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">is_moving</a>() &amp;&amp; veh-&gt;<a class="code hl_function" href="classvehicle.html#a341515426011486c265d016c35f84de6">player_in_control</a>( who ) ) {</div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>                <span class="keywordtype">double</span> exp_temp = 1 + veh-&gt;<a class="code hl_function" href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">total_mass</a>() / 400.0_kilogram +</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>                                  std::abs( veh-&gt;<a class="code hl_variable" href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">velocity</a> / 3200.0 );</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>                <span class="keywordtype">int</span> experience = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>( exp_temp );</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>                <span class="keywordflow">if</span>( exp_temp - experience &gt; 0 &amp;&amp; <a class="code hl_function" href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a>( exp_temp - experience, 1.0 ) ) {</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>                    experience++;</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>                }</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>                who.<a class="code hl_function" href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">as_player</a>()-&gt;<a class="code hl_function" href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">practice</a>( <a class="code hl_class" href="classstring__id.html">skill_id</a>( <span class="stringliteral">&quot;driving&quot;</span> ), experience );</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            }</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>        }</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>    }</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span> </div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>    <a class="code hl_function" href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">search_surroundings</a>( who );</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>    who.<a class="code hl_function" href="classCharacter.html#aab94093235048027d0afad3f6af4e21c">wait_effects</a>();</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>}</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span> </div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"><a class="line" href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4"> 1061</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">search_surroundings</a>( <a class="code hl_class" href="classCharacter.html">Character</a> &amp;who )</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>{</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordflow">if</span>( who.<a class="code hl_variable" href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">controlling_vehicle</a> ) {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>    <span class="keyword">const</span> <a class="code hl_class" href="classmap.html">map</a> &amp;here = <a class="code hl_function" href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a>();</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <span class="comment">// Search for traps in a larger area than before because this is the only</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <span class="comment">// way we can &quot;find&quot; traps that aren&#39;t marked as visible.</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <span class="comment">// Detection formula takes care of likelihood of seeing within this range.</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keywordflow">for</span>( <span class="keyword">const</span> <a class="code hl_struct" href="structtripoint.html">tripoint</a> &amp;tp : here.<a class="code hl_function" href="classmap.html#a4f5f812d7e89a998429958573a4c340f">points_in_radius</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), 5 ) ) {</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structtrap.html">trap</a> &amp;tr = here.<a class="code hl_function" href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">tr_at</a>( tp );</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">is_null</a>() || tp == who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>() ) {</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>        }</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>        <span class="keywordflow">if</span>( who.<a class="code hl_function" href="classCharacter.html#af9c7419575e23d52745c94009929fafb">has_active_bionic</a>( <a class="code hl_variable" href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a> ) &amp;&amp; !who.<a class="code hl_function" href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">knows_trap</a>( tp ) &amp;&amp;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            ( tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="trap_8cpp.html#abecb554db3424388894ab98bde179238">tr_beartrap_buried</a> ||</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>              tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="trap_8cpp.html#ac666204330f19cb23e099f6870b8a1a4">tr_landmine_buried</a> || tr.<a class="code hl_variable" href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">loadid</a> == <a class="code hl_variable" href="memorial__logger_8cpp.html#ab4f7bfd1861799c55e2d7fbf2717c962">tr_sinkhole</a> ) ) {</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            <span class="keyword">const</span> std::string <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code hl_function" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>( <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), tp ) );</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>            who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_enumvalue" href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a>, <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;Your ground sonar detected a %1$s to the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                                   tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> );</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            who.<a class="code hl_function" href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">add_known_trap</a>( tp, tr );</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>        }</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        <span class="keywordflow">if</span>( !who.<a class="code hl_function" href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">sees</a>( tp ) ) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">is_always_invisible</a>() || tr.<a class="code hl_function" href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">can_see</a>( tp, who ) ) {</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>            <span class="comment">// Already seen, or can never be seen</span></div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        <span class="comment">// Chance to detect traps we haven&#39;t yet seen.</span></div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">detect_trap</a>( tp, who ) ) {</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            <span class="keywordflow">if</span>( tr.<a class="code hl_function" href="structtrap.html#a1bd5955eae82045548ff8fc99a63edfc">get_visibility</a>() &gt; 0 ) {</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>                <span class="comment">// Only bug player about traps that aren&#39;t trivial to spot.</span></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>                <span class="keyword">const</span> std::string <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> = <a class="code hl_function" href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a>(</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>                                                  <a class="code hl_function" href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a>( who.<a class="code hl_function" href="classCharacter.html#ad24859164517ed6e392e21df69527199">pos</a>(), tp ) );</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>                who.<a class="code hl_function" href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">add_msg_if_player</a>( <a class="code hl_define" href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a>( <span class="stringliteral">&quot;You&#39;ve spotted a %1$s to the %2$s!&quot;</span> ),</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>                                       tr.<a class="code hl_function" href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">name</a>(), <a class="code hl_enumeration" href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a> );</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>            }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            who.<a class="code hl_function" href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">add_known_trap</a>( tp, tr );</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        }</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>}</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span> </div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"><a class="line" href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a"> 1104</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a">update_mental_focus</a>( <a class="code hl_class" href="classCharacter.html">Character</a> &amp;who )</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>{</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    who.<a class="code hl_variable" href="classCharacter.html#a1a22be593582c9aef166a12777bb79a8">focus_pool</a> += <a class="code hl_function" href="namespacecharacter__effects.html#a8cb6340e4be4183a0afdaaed94697f48">character_effects::calc_focus_change</a>( who );</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>}</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span> </div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>} <span class="comment">// namespace character_funcs</span></div>
<div class="ttc" id="aartifact_8cpp_html_a70800e95389f34dd34186fafaea2a840"><div class="ttname"><a href="artifact_8cpp.html#a70800e95389f34dd34186fafaea2a840">rng</a></div><div class="ttdeci">units::quantity&lt; V, B &gt; rng(const units::quantity&lt; V, B &gt; &amp;min, const units::quantity&lt; V, B &gt; &amp;max)</div><div class="ttdef"><b>Definition:</b> <a href="artifact_8cpp_source.html#l00032">artifact.cpp:32</a></div></div>
<div class="ttc" id="abionics_8h_html"><div class="ttname"><a href="bionics_8h.html">bionics.h</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ab29c0bad9828b787ace4d04a5e951c6b"><div class="ttname"><a href="bodypart_8cpp.html#ab29c0bad9828b787ace4d04a5e951c6b">body_part_name_accusative</a></div><div class="ttdeci">std::string body_part_name_accusative(body_part bp, int number)</div><div class="ttdoc">Returns the matching accusative name of the body_part token, i.e.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00329">bodypart.cpp:329</a></div></div>
<div class="ttc" id="abodypart_8cpp_html_ae34a481a7c686b233f2d8c48e43b723a"><div class="ttname"><a href="bodypart_8cpp.html#ae34a481a7c686b233f2d8c48e43b723a">convert_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; convert_bp(body_part bp)</div><div class="ttdoc">Returns the new id for old token.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8cpp_source.html#l00185">bodypart.cpp:185</a></div></div>
<div class="ttc" id="abodypart_8h_html_a089a199d69623f528a3883672f0a084e"><div class="ttname"><a href="bodypart_8h.html#a089a199d69623f528a3883672f0a084e">all_body_parts</a></div><div class="ttdeci">constexpr std::array&lt; body_part, 12 &gt; all_body_parts</div><div class="ttdoc">Contains all valid body_part values in the order they are defined in.</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00082">bodypart.h:82</a></div></div>
<div class="ttc" id="abodypart_8h_html_a426444e2d486ce1ee315d8b8acc86b40"><div class="ttname"><a href="bodypart_8h.html#a426444e2d486ce1ee315d8b8acc86b40">bodypart_id</a></div><div class="ttdeci">int_id&lt; body_part_type &gt; bodypart_id</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00023">bodypart.h:23</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980">body_part</a></div><div class="ttdeci">body_part</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00039">bodypart.h:39</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a184f1b627fd11fb607e76b2d30dadfbb">bp_foot_l</a></div><div class="ttdeci">@ bp_foot_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00050">bodypart.h:50</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a202ad82497ebf8867cdcd6ee15085d16">bp_leg_r</a></div><div class="ttdeci">@ bp_leg_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00049">bodypart.h:49</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2055386ee220ee2ca3e61d13df65e868">bp_eyes</a></div><div class="ttdeci">@ bp_eyes</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00042">bodypart.h:42</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a2806629e65a2c2eb5d8049e29e77910e">bp_hand_l</a></div><div class="ttdeci">@ bp_hand_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00046">bodypart.h:46</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a441080ba1d3930d38f635658d9b28e01">bp_arm_l</a></div><div class="ttdeci">@ bp_arm_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00044">bodypart.h:44</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a44506e97ae9648354f97d530a3be61b8">bp_leg_l</a></div><div class="ttdeci">@ bp_leg_l</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00048">bodypart.h:48</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980a54721306a0e05318b6d0440349c1a0fb">bp_hand_r</a></div><div class="ttdeci">@ bp_hand_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00047">bodypart.h:47</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab1635a97e6cc33a051cd378b60e48698">bp_head</a></div><div class="ttdeci">@ bp_head</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00041">bodypart.h:41</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ab4b216482dcc0e468819f023c3aeddd1">bp_torso</a></div><div class="ttdeci">@ bp_torso</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00040">bodypart.h:40</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980abb7b120eb8dc7c137110446fe541baed">bp_mouth</a></div><div class="ttdeci">@ bp_mouth</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00043">bodypart.h:43</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac094b1c6f96ebbd604928cfd2fad0ab7">bp_foot_r</a></div><div class="ttdeci">@ bp_foot_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00051">bodypart.h:51</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ac09d37dac773806a42c13041ba254700">num_bp</a></div><div class="ttdeci">@ num_bp</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00053">bodypart.h:52</a></div></div>
<div class="ttc" id="abodypart_8h_html_af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3"><div class="ttname"><a href="bodypart_8h.html#af618290c4c2de42aab87977ac7311980ae5f21c7494ad730a0c6abf6957976cb3">bp_arm_r</a></div><div class="ttdeci">@ bp_arm_r</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00045">bodypart.h:45</a></div></div>
<div class="ttc" id="acalendar_8cpp_html_a359120c15f92d54a49fec9de7bcb571f"><div class="ttname"><a href="calendar_8cpp.html#a359120c15f92d54a49fec9de7bcb571f">x_in_y</a></div><div class="ttdeci">bool x_in_y(const time_duration &amp;a, const time_duration &amp;b)</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00521">calendar.cpp:521</a></div></div>
<div class="ttc" id="acalendar_8h_html"><div class="ttname"><a href="calendar_8h.html">calendar.h</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_a83338e5cfd99aac60a46f68a518b1bc2"><div class="ttname"><a href="cata__utility_8cpp.html#a83338e5cfd99aac60a46f68a518b1bc2">bound_mod_to_vals</a></div><div class="ttdeci">int bound_mod_to_vals(int val, int mod, int max, int min)</div><div class="ttdoc">Clamp the value of a modifier in order to bound the resulting value.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00111">cata_utility.cpp:111</a></div></div>
<div class="ttc" id="acata__utility_8cpp_html_ac49c7bae3c3ac926a5501ffb127c1e97"><div class="ttname"><a href="cata__utility_8cpp.html#ac49c7bae3c3ac926a5501ffb127c1e97">multi_lerp</a></div><div class="ttdeci">float multi_lerp(const std::vector&lt; std::pair&lt; float, float &gt; &gt; &amp;points, float x)</div><div class="ttdoc">From points, finds p1 and p2 such that p1.first &lt; x &lt; p2.first Then linearly interpolates between p1....</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00156">cata_utility.cpp:156</a></div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5ba36ff0c0cae9ccd113903466f4e47c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5ba36ff0c0cae9ccd113903466f4e47c">cata_variant_type::efftype_id</a></div><div class="ttdeci">@ efftype_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a965ba98fb0eca1e875b86fcf2bc91ab8"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a965ba98fb0eca1e875b86fcf2bc91ab8">cata_variant_type::bionic_id</a></div><div class="ttdeci">@ bionic_id</div></div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4ad03d97c03c94cd08796f4787856af713"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4ad03d97c03c94cd08796f4787856af713">cata_variant_type::trait_id</a></div><div class="ttdeci">@ trait_id</div></div>
<div class="ttc" id="acharacter_8h_html"><div class="ttname"><a href="character_8h.html">character.h</a></div></div>
<div class="ttc" id="acharacter_8h_html_a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02"><div class="ttname"><a href="character_8h.html#a2e6af65e94e820564fb484840378cf4aa780f1db7fbc188c7154e8bbd5c14fb02">thirst_levels::very_thirsty</a></div><div class="ttdeci">@ very_thirsty</div></div>
<div class="ttc" id="acharacter_8h_html_aa7bb0ad73714bdf6b22d11b5b4e2633fad8eced3b06972df4d1dd7d835fc3edd3"><div class="ttname"><a href="character_8h.html#aa7bb0ad73714bdf6b22d11b5b4e2633fad8eced3b06972df4d1dd7d835fc3edd3">sleep_deprivation_levels::harmless</a></div><div class="ttdeci">@ harmless</div></div>
<div class="ttc" id="acharacter__effects_8h_html"><div class="ttname"><a href="character__effects_8h.html">character_effects.h</a></div></div>
<div class="ttc" id="acharacter__functions_8h_html"><div class="ttname"><a href="character__functions_8h.html">character_functions.h</a></div></div>
<div class="ttc" id="acharacter__martial__arts_8h_html"><div class="ttname"><a href="character__martial__arts_8h.html">character_martial_arts.h</a></div></div>
<div class="ttc" id="acharacter__stat_8h_html"><div class="ttname"><a href="character__stat_8h.html">character_stat.h</a></div></div>
<div class="ttc" id="acharacter__stat_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc"><div class="ttname"><a href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a3963049b60ddd6534b219d3767af0dfc">character_stat::STRENGTH</a></div><div class="ttdeci">@ STRENGTH</div></div>
<div class="ttc" id="acharacter__stat_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203"><div class="ttname"><a href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a66212c9f367544fe9bffff62900c6203">character_stat::DEXTERITY</a></div><div class="ttdeci">@ DEXTERITY</div></div>
<div class="ttc" id="acharacter__stat_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319"><div class="ttname"><a href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755a7301a4f338e31867e8ef6d3f0a148319">character_stat::PERCEPTION</a></div><div class="ttdeci">@ PERCEPTION</div></div>
<div class="ttc" id="acharacter__stat_8h_html_a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e"><div class="ttname"><a href="character__stat_8h.html#a27f8e52e2e5afc1c4a709dd65ab84755acbc4a7ccc74fbcbda6a01632c5e4656e">character_stat::INTELLIGENCE</a></div><div class="ttdeci">@ INTELLIGENCE</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a0651a103f4530a625fc7defcd7372b37"><div class="ttname"><a href="character__turn_8cpp.html#a0651a103f4530a625fc7defcd7372b37">trait_SLIMY</a></div><div class="ttdeci">static const trait_id trait_SLIMY(&quot;SLIMY&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a074b87b8d18347675f51ed9e6d7e8787"><div class="ttname"><a href="character__turn_8cpp.html#a074b87b8d18347675f51ed9e6d7e8787">effect_bloodworms</a></div><div class="ttdeci">static const efftype_id effect_bloodworms(&quot;bloodworms&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a08481f62adb6937636ea44b855311037"><div class="ttname"><a href="character__turn_8cpp.html#a08481f62adb6937636ea44b855311037">effect_downed</a></div><div class="ttdeci">static const efftype_id effect_downed(&quot;downed&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a08ed8f8240259a6a457502b0db459e08"><div class="ttname"><a href="character__turn_8cpp.html#a08ed8f8240259a6a457502b0db459e08">effect_fungus</a></div><div class="ttdeci">static const efftype_id effect_fungus(&quot;fungus&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a09f3ea407cf63807e000861190ad1515"><div class="ttname"><a href="character__turn_8cpp.html#a09f3ea407cf63807e000861190ad1515">effect_sad</a></div><div class="ttdeci">static const efftype_id effect_sad(&quot;sad&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a13af1ce0f1c5467c2718b3d683c13c28"><div class="ttname"><a href="character__turn_8cpp.html#a13af1ce0f1c5467c2718b3d683c13c28">effect_dermatik</a></div><div class="ttdeci">static const efftype_id effect_dermatik(&quot;dermatik&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1a6476e8888f0929f469fd9af2d629bc"><div class="ttname"><a href="character__turn_8cpp.html#a1a6476e8888f0929f469fd9af2d629bc">effect_narcosis</a></div><div class="ttdeci">static const efftype_id effect_narcosis(&quot;narcosis&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1c359a305b979b2e5fc87d15db51e903"><div class="ttname"><a href="character__turn_8cpp.html#a1c359a305b979b2e5fc87d15db51e903">itype_adv_UPS_off</a></div><div class="ttdeci">static const itype_id itype_adv_UPS_off(&quot;adv_UPS_off&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1cb839b00dab2fe99f9dacfc8492e1b2"><div class="ttname"><a href="character__turn_8cpp.html#a1cb839b00dab2fe99f9dacfc8492e1b2">effect_pkill</a></div><div class="ttdeci">static const efftype_id effect_pkill(&quot;pkill&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1d815a8053cfecc8a05374bf92924ba2"><div class="ttname"><a href="character__turn_8cpp.html#a1d815a8053cfecc8a05374bf92924ba2">skill_swimming</a></div><div class="ttdeci">static const skill_id skill_swimming(&quot;swimming&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a1f13575e0c937c4721778a685093e25d"><div class="ttname"><a href="character__turn_8cpp.html#a1f13575e0c937c4721778a685093e25d">trait_ARACHNID_ARMS</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS(&quot;ARACHNID_ARMS&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a29f4215e8aa45718fd0c33d7a6c7300e"><div class="ttname"><a href="character__turn_8cpp.html#a29f4215e8aa45718fd0c33d7a6c7300e">trait_THICK_SCALES</a></div><div class="ttdeci">static const trait_id trait_THICK_SCALES(&quot;THICK_SCALES&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a2d4878472a9c5543436349f994a98e48"><div class="ttname"><a href="character__turn_8cpp.html#a2d4878472a9c5543436349f994a98e48">trait_COLDBLOOD4</a></div><div class="ttdeci">static const trait_id trait_COLDBLOOD4(&quot;COLDBLOOD4&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a2f88100c922915703a21ea4c48e8c6bd"><div class="ttname"><a href="character__turn_8cpp.html#a2f88100c922915703a21ea4c48e8c6bd">trait_COMPOUND_EYES</a></div><div class="ttdeci">static const trait_id trait_COMPOUND_EYES(&quot;COMPOUND_EYES&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a308d750c2cc01d70d7622fdee14be3a5"><div class="ttname"><a href="character__turn_8cpp.html#a308d750c2cc01d70d7622fdee14be3a5">trait_M_IMMUNE</a></div><div class="ttdeci">static const trait_id trait_M_IMMUNE(&quot;M_IMMUNE&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a328aaa21f9e64c2d22a68b9764a6a550"><div class="ttname"><a href="character__turn_8cpp.html#a328aaa21f9e64c2d22a68b9764a6a550">trait_CHITIN_FUR</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR(&quot;CHITIN_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a365df112ebfa257fa507cef2fa5a1c2e"><div class="ttname"><a href="character__turn_8cpp.html#a365df112ebfa257fa507cef2fa5a1c2e">trait_WEBBED</a></div><div class="ttdeci">static const trait_id trait_WEBBED(&quot;WEBBED&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a41e08c32ee980d1dd390b1d031c16696"><div class="ttname"><a href="character__turn_8cpp.html#a41e08c32ee980d1dd390b1d031c16696">effect_tapeworm</a></div><div class="ttdeci">static const efftype_id effect_tapeworm(&quot;tapeworm&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a43ae85111a2b2e6825a41a5cd5e619ae"><div class="ttname"><a href="character__turn_8cpp.html#a43ae85111a2b2e6825a41a5cd5e619ae">trait_FAT</a></div><div class="ttdeci">static const trait_id trait_FAT(&quot;FAT&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a4424b509877ff458aa661c2b49a99dda"><div class="ttname"><a href="character__turn_8cpp.html#a4424b509877ff458aa661c2b49a99dda">bio_hydraulics</a></div><div class="ttdeci">static const bionic_id bio_hydraulics(&quot;bio_hydraulics&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a4860b2a9de9f5aafed467e6b1bfd7c8b"><div class="ttname"><a href="character__turn_8cpp.html#a4860b2a9de9f5aafed467e6b1bfd7c8b">effect_irradiated</a></div><div class="ttdeci">static const efftype_id effect_irradiated(&quot;irradiated&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a4c5ff82e9ea5987147d84a1a2863abbc"><div class="ttname"><a href="character__turn_8cpp.html#a4c5ff82e9ea5987147d84a1a2863abbc">trait_SUNLIGHT_DEPENDENT</a></div><div class="ttdeci">static const trait_id trait_SUNLIGHT_DEPENDENT(&quot;SUNLIGHT_DEPENDENT&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a55a80a9bbab1925d5462d46d355c2b6e"><div class="ttname"><a href="character__turn_8cpp.html#a55a80a9bbab1925d5462d46d355c2b6e">itype_UPS</a></div><div class="ttdeci">static const itype_id itype_UPS(&quot;UPS&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a6c2652eceffb663021aeae9d4b7d0429"><div class="ttname"><a href="character__turn_8cpp.html#a6c2652eceffb663021aeae9d4b7d0429">trait_PARAIMMUNE</a></div><div class="ttdeci">static const trait_id trait_PARAIMMUNE(&quot;PARAIMMUNE&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a6e269b6cff6957ea12e9319dd5c806fb"><div class="ttname"><a href="character__turn_8cpp.html#a6e269b6cff6957ea12e9319dd5c806fb">trait_CHITIN3</a></div><div class="ttdeci">static const trait_id trait_CHITIN3(&quot;CHITIN3&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a70ada8ba76f56302dff4828699ac43b9"><div class="ttname"><a href="character__turn_8cpp.html#a70ada8ba76f56302dff4828699ac43b9">effect_masked_scent</a></div><div class="ttdeci">static const efftype_id effect_masked_scent(&quot;masked_scent&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a7aaef64e8c7bda4e721b9abfc0f29876"><div class="ttname"><a href="character__turn_8cpp.html#a7aaef64e8c7bda4e721b9abfc0f29876">trait_CHITIN2</a></div><div class="ttdeci">static const trait_id trait_CHITIN2(&quot;CHITIN2&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a7b80d711466946f3fb75c76a9d47de41"><div class="ttname"><a href="character__turn_8cpp.html#a7b80d711466946f3fb75c76a9d47de41">trait_STIMBOOST</a></div><div class="ttdeci">static const trait_id trait_STIMBOOST(&quot;STIMBOOST&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a7b9b5dc5aace58de30f3602e0413cfb8"><div class="ttname"><a href="character__turn_8cpp.html#a7b9b5dc5aace58de30f3602e0413cfb8">trait_CHITIN_FUR3</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR3(&quot;CHITIN_FUR3&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a80c61d54a8759044f6c7c841469ee11d"><div class="ttname"><a href="character__turn_8cpp.html#a80c61d54a8759044f6c7c841469ee11d">trait_LIGHTFUR</a></div><div class="ttdeci">static const trait_id trait_LIGHTFUR(&quot;LIGHTFUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a83afbd8e4dbefc1f99df9624fd9d7824"><div class="ttname"><a href="character__turn_8cpp.html#a83afbd8e4dbefc1f99df9624fd9d7824">trait_FELINE_FUR</a></div><div class="ttdeci">static const trait_id trait_FELINE_FUR(&quot;FELINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a84bed2f340b7b3bf9a0ae0c95eabc6dc"><div class="ttname"><a href="character__turn_8cpp.html#a84bed2f340b7b3bf9a0ae0c95eabc6dc">effect_darkness</a></div><div class="ttdeci">static const efftype_id effect_darkness(&quot;darkness&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a87e9796604a1ccf527b8fff5b72a7c5a"><div class="ttname"><a href="character__turn_8cpp.html#a87e9796604a1ccf527b8fff5b72a7c5a">trait_NOMAD2</a></div><div class="ttdeci">static const trait_id trait_NOMAD2(&quot;NOMAD2&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a914db3df05fd548e81adc85699eaaf05"><div class="ttname"><a href="character__turn_8cpp.html#a914db3df05fd548e81adc85699eaaf05">effect_paincysts</a></div><div class="ttdeci">static const efftype_id effect_paincysts(&quot;paincysts&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a93a8aea38d781d7a0b51285a6d33c8e5"><div class="ttname"><a href="character__turn_8cpp.html#a93a8aea38d781d7a0b51285a6d33c8e5">trait_WHISKERS</a></div><div class="ttdeci">static const trait_id trait_WHISKERS(&quot;WHISKERS&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a99d0319c6ba808305bd397fed049a224"><div class="ttname"><a href="character__turn_8cpp.html#a99d0319c6ba808305bd397fed049a224">effect_thirsty</a></div><div class="ttdeci">static const efftype_id effect_thirsty(&quot;thirsty&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_a99ebb215551c7b0598da5c0ba8bbae5d"><div class="ttname"><a href="character__turn_8cpp.html#a99ebb215551c7b0598da5c0ba8bbae5d">trait_NOMAD3</a></div><div class="ttdeci">static const trait_id trait_NOMAD3(&quot;NOMAD3&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aa0461c515f4d2163af71c4800b1ca77f"><div class="ttname"><a href="character__turn_8cpp.html#aa0461c515f4d2163af71c4800b1ca77f">trait_NOMAD</a></div><div class="ttdeci">static const trait_id trait_NOMAD(&quot;NOMAD&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aa9c71c27aec3d6c98d982792f15e613c"><div class="ttname"><a href="character__turn_8cpp.html#aa9c71c27aec3d6c98d982792f15e613c">trait_FUR</a></div><div class="ttdeci">static const trait_id trait_FUR(&quot;FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aad2f825b2368c52145a0829bcc37eadf"><div class="ttname"><a href="character__turn_8cpp.html#aad2f825b2368c52145a0829bcc37eadf">trait_WHISKERS_RAT</a></div><div class="ttdeci">static const trait_id trait_WHISKERS_RAT(&quot;WHISKERS_RAT&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ab16f8be4be2050986e76d2cb0cff7609"><div class="ttname"><a href="character__turn_8cpp.html#ab16f8be4be2050986e76d2cb0cff7609">effect_sleep</a></div><div class="ttdeci">static const efftype_id effect_sleep(&quot;sleep&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_abb2203fc9372a7f9651ccca81239445a"><div class="ttname"><a href="character__turn_8cpp.html#abb2203fc9372a7f9651ccca81239445a">trait_EATHEALTH</a></div><div class="ttdeci">static const trait_id trait_EATHEALTH(&quot;EATHEALTH&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ac41827abd252cabc27c7c385291f71e4"><div class="ttname"><a href="character__turn_8cpp.html#ac41827abd252cabc27c7c385291f71e4">trait_INSECT_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS_OK(&quot;INSECT_ARMS_OK&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ac51fe65666b5fd877b3a7a223b17a788"><div class="ttname"><a href="character__turn_8cpp.html#ac51fe65666b5fd877b3a7a223b17a788">bio_speed</a></div><div class="ttdeci">static const bionic_id bio_speed(&quot;bio_speed&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_accbe02d1b542c1aeb1081f0e11e3afd5"><div class="ttname"><a href="character__turn_8cpp.html#accbe02d1b542c1aeb1081f0e11e3afd5">trait_ARACHNID_ARMS_OK</a></div><div class="ttdeci">static const trait_id trait_ARACHNID_ARMS_OK(&quot;ARACHNID_ARMS_OK&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ace41dee69a6d53ab6af1332a89b87b92"><div class="ttname"><a href="character__turn_8cpp.html#ace41dee69a6d53ab6af1332a89b87b92">effect_stim_overdose</a></div><div class="ttdeci">static const efftype_id effect_stim_overdose(&quot;stim_overdose&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ad8239c9fba8c9d73da4db8671d7430d0"><div class="ttname"><a href="character__turn_8cpp.html#ad8239c9fba8c9d73da4db8671d7430d0">bio_ground_sonar</a></div><div class="ttdeci">static const bionic_id bio_ground_sonar(&quot;bio_ground_sonar&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ae331a8118e681234ecce8aaf10d4ddc9"><div class="ttname"><a href="character__turn_8cpp.html#ae331a8118e681234ecce8aaf10d4ddc9">effect_stim</a></div><div class="ttdeci">static const efftype_id effect_stim(&quot;stim&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ae89306fd36cf36b57fe05dad0db3f71b"><div class="ttname"><a href="character__turn_8cpp.html#ae89306fd36cf36b57fe05dad0db3f71b">itype_UPS_off</a></div><div class="ttdeci">static const itype_id itype_UPS_off(&quot;UPS_off&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_ae9288df70e6cd6c1ff0bdd5404a18138"><div class="ttname"><a href="character__turn_8cpp.html#ae9288df70e6cd6c1ff0bdd5404a18138">effect_happy</a></div><div class="ttdeci">static const efftype_id effect_happy(&quot;happy&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_aeced506658f24495d18152830064a45f"><div class="ttname"><a href="character__turn_8cpp.html#aeced506658f24495d18152830064a45f">trait_LUPINE_FUR</a></div><div class="ttdeci">static const trait_id trait_LUPINE_FUR(&quot;LUPINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af08049a13ec857cf18fe65c4ac30788d"><div class="ttname"><a href="character__turn_8cpp.html#af08049a13ec857cf18fe65c4ac30788d">effect_depressants</a></div><div class="ttdeci">static const efftype_id effect_depressants(&quot;depressants&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af151d09e7927fa1f3c8a519c00c423aa"><div class="ttname"><a href="character__turn_8cpp.html#af151d09e7927fa1f3c8a519c00c423aa">trait_DEBUG_BIONIC_POWER</a></div><div class="ttdeci">static const trait_id trait_DEBUG_BIONIC_POWER(&quot;DEBUG_BIONIC_POWER&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af18c51d2a8f81b4d06912d40760e9691"><div class="ttname"><a href="character__turn_8cpp.html#af18c51d2a8f81b4d06912d40760e9691">trait_ACIDBLOOD</a></div><div class="ttdeci">static const trait_id trait_ACIDBLOOD(&quot;ACIDBLOOD&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af2c1415b677a83667f038144ea42eb43"><div class="ttname"><a href="character__turn_8cpp.html#af2c1415b677a83667f038144ea42eb43">effect_sleep_deprived</a></div><div class="ttdeci">static const efftype_id effect_sleep_deprived(&quot;sleep_deprived&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af39c36bbd4b4d5ea9cc11bbaba43570f"><div class="ttname"><a href="character__turn_8cpp.html#af39c36bbd4b4d5ea9cc11bbaba43570f">effect_brainworms</a></div><div class="ttdeci">static const efftype_id effect_brainworms(&quot;brainworms&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_af83add4ee97cce1fc50812e5c46f73cc"><div class="ttname"><a href="character__turn_8cpp.html#af83add4ee97cce1fc50812e5c46f73cc">trait_URSINE_FUR</a></div><div class="ttdeci">static const trait_id trait_URSINE_FUR(&quot;URSINE_FUR&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_afcfa82c36c0dc2d76cd19d622c2b6ab4"><div class="ttname"><a href="character__turn_8cpp.html#afcfa82c36c0dc2d76cd19d622c2b6ab4">effect_onfire</a></div><div class="ttdeci">static const efftype_id effect_onfire(&quot;onfire&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_afeabd53c61defabb9ba3721de6b91280"><div class="ttname"><a href="character__turn_8cpp.html#afeabd53c61defabb9ba3721de6b91280">trait_CHITIN_FUR2</a></div><div class="ttdeci">static const trait_id trait_CHITIN_FUR2(&quot;CHITIN_FUR2&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8cpp_html_afecd12cfe9b9e60cb64816a1e6d8d043"><div class="ttname"><a href="character__turn_8cpp.html#afecd12cfe9b9e60cb64816a1e6d8d043">trait_INSECT_ARMS</a></div><div class="ttdeci">static const trait_id trait_INSECT_ARMS(&quot;INSECT_ARMS&quot;)</div></div>
<div class="ttc" id="acharacter__turn_8h_html"><div class="ttname"><a href="character__turn_8h.html">character_turn.h</a></div></div>
<div class="ttc" id="aclassCharacter_html"><div class="ttname"><a href="classCharacter.html">Character</a></div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00217">character.h:218</a></div></div>
<div class="ttc" id="aclassCharacter_html_a01a3b9dd92576401225db8f71192f9f0"><div class="ttname"><a href="classCharacter.html#a01a3b9dd92576401225db8f71192f9f0">Character::mod_pain</a></div><div class="ttdeci">void mod_pain(int npain) override</div><div class="ttdoc">Modifies a pain value by player traits before passing it to Creature::mod_pain()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00739">character.cpp:739</a></div></div>
<div class="ttc" id="aclassCharacter_html_a035582952cd5e19963a5609585c314a9"><div class="ttname"><a href="classCharacter.html#a035582952cd5e19963a5609585c314a9">Character::get_str_bonus</a></div><div class="ttdeci">virtual int get_str_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03954">character.cpp:3954</a></div></div>
<div class="ttc" id="aclassCharacter_html_a057d68671b298012a18f4e289b39935d"><div class="ttname"><a href="classCharacter.html#a057d68671b298012a18f4e289b39935d">Character::recoil</a></div><div class="ttdeci">double recoil</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00555">character.h:555</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0701e6a3f1987d9fa3f76b450dd5624a"><div class="ttname"><a href="classCharacter.html#a0701e6a3f1987d9fa3f76b450dd5624a">Character::controlling_vehicle</a></div><div class="ttdeci">bool controlling_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00246">character.h:246</a></div></div>
<div class="ttc" id="aclassCharacter_html_a07a1287f3b7098fec575b96ca32ffee9"><div class="ttname"><a href="classCharacter.html#a07a1287f3b7098fec575b96ca32ffee9">Character::scent</a></div><div class="ttdeci">int scent</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01517">character.h:1517</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bbd9aa7982f98e08f67db130e4eb9f8"><div class="ttname"><a href="classCharacter.html#a0bbd9aa7982f98e08f67db130e4eb9f8">Character::str_max</a></div><div class="ttdeci">int str_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00251">character.h:251</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0bdec852c8280a1cb4bb5e45e14057b5"><div class="ttname"><a href="classCharacter.html#a0bdec852c8280a1cb4bb5e45e14057b5">Character::weight_capacity</a></div><div class="ttdeci">units::mass weight_capacity() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02719">character.cpp:2719</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0d0cb32a95161137e0c61303f84b3753"><div class="ttname"><a href="classCharacter.html#a0d0cb32a95161137e0c61303f84b3753">Character::posz</a></div><div class="ttdeci">int posz() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00786">character.h:786</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0dccbd6c8830ec355bd793c74291fa8d"><div class="ttname"><a href="classCharacter.html#a0dccbd6c8830ec355bd793c74291fa8d">Character::mod_healthy</a></div><div class="ttdeci">virtual void mod_healthy(int nhealthy)</div><div class="ttdoc">Modifiers for health values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04102">character.cpp:4102</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0fb6896d21fc20b5f30f2a0b8afd9b1d"><div class="ttname"><a href="classCharacter.html#a0fb6896d21fc20b5f30f2a0b8afd9b1d">Character::mod_per_bonus</a></div><div class="ttdeci">virtual void mod_per_bonus(int nper)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04040">character.cpp:4040</a></div></div>
<div class="ttc" id="aclassCharacter_html_a0ffe14df559cee6e9b5d02f5b214d009"><div class="ttname"><a href="classCharacter.html#a0ffe14df559cee6e9b5d02f5b214d009">Character::get_stamina</a></div><div class="ttdeci">int get_stamina() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06957">character.cpp:6957</a></div></div>
<div class="ttc" id="aclassCharacter_html_a165e76d3db9a1a8c6810b25c9b0ed42f"><div class="ttname"><a href="classCharacter.html#a165e76d3db9a1a8c6810b25c9b0ed42f">Character::get_check_encumbrance</a></div><div class="ttdeci">bool get_check_encumbrance()</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01955">character.h:1955</a></div></div>
<div class="ttc" id="aclassCharacter_html_a17446e14fd6046648a505c4aaec3d976"><div class="ttname"><a href="classCharacter.html#a17446e14fd6046648a505c4aaec3d976">Character::mod_power_level</a></div><div class="ttdeci">void mod_power_level(const units::energy &amp;npower)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01894">character.cpp:1894</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1819679d2d4e9f8ba5d62ae26737f34c"><div class="ttname"><a href="classCharacter.html#a1819679d2d4e9f8ba5d62ae26737f34c">Character::last_item</a></div><div class="ttdeci">itype_id last_item</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01514">character.h:1514</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1961ab0f9c702252e550bf42cb8dd974"><div class="ttname"><a href="classCharacter.html#a1961ab0f9c702252e550bf42cb8dd974">Character::get_painkiller</a></div><div class="ttdeci">int get_painkiller() const</div><div class="ttdoc">Returns intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09539">character.cpp:9539</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1a22be593582c9aef166a12777bb79a8"><div class="ttname"><a href="classCharacter.html#a1a22be593582c9aef166a12777bb79a8">Character::focus_pool</a></div><div class="ttdeci">int focus_pool</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01529">character.h:1529</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1f1ce1b5bdc4116046f13af5ef5236fc"><div class="ttname"><a href="classCharacter.html#a1f1ce1b5bdc4116046f13af5ef5236fc">Character::mod_dex_bonus</a></div><div class="ttdeci">virtual void mod_dex_bonus(int ndex)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04035">character.cpp:4035</a></div></div>
<div class="ttc" id="aclassCharacter_html_a1febd48cd6251eb3dabd51ccfd608148"><div class="ttname"><a href="classCharacter.html#a1febd48cd6251eb3dabd51ccfd608148">Character::exclusive_flag_coverage</a></div><div class="ttdeci">body_part_set exclusive_flag_coverage(const std::string &amp;flag) const</div><div class="ttdoc">Bitset of all the body parts covered only with items with flag (or nothing)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03900">character.cpp:3900</a></div></div>
<div class="ttc" id="aclassCharacter_html_a20839520f569c4f05876a55e89f67361"><div class="ttname"><a href="classCharacter.html#a20839520f569c4f05876a55e89f67361">Character::activity</a></div><div class="ttdeci">player_activity activity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01510">character.h:1510</a></div></div>
<div class="ttc" id="aclassCharacter_html_a21e465cff376e96f87dd4e9202bff601"><div class="ttname"><a href="classCharacter.html#a21e465cff376e96f87dd4e9202bff601">Character::get_healthy_mod</a></div><div class="ttdeci">virtual int get_healthy_mod() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04001">character.cpp:4001</a></div></div>
<div class="ttc" id="aclassCharacter_html_a24f9a7fe69a7d8c34809d16e62ac2cf4"><div class="ttname"><a href="classCharacter.html#a24f9a7fe69a7d8c34809d16e62ac2cf4">Character::has_artifact_with</a></div><div class="ttdeci">virtual bool has_artifact_with(art_effect_passive effect) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03132">character.cpp:3132</a></div></div>
<div class="ttc" id="aclassCharacter_html_a26369a0a81eef76cfe75214d22ed32b4"><div class="ttname"><a href="classCharacter.html#a26369a0a81eef76cfe75214d22ed32b4">Character::str_cur</a></div><div class="ttdeci">int str_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00256">character.h:256</a></div></div>
<div class="ttc" id="aclassCharacter_html_a27c339d757f9f189e7a9280daa0d2630"><div class="ttname"><a href="classCharacter.html#a27c339d757f9f189e7a9280daa0d2630">Character::mod_rad</a></div><div class="ttdeci">void mod_rad(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06949">character.cpp:6949</a></div></div>
<div class="ttc" id="aclassCharacter_html_a29692fe7943db102dcf564a8966782c6"><div class="ttname"><a href="classCharacter.html#a29692fe7943db102dcf564a8966782c6">Character::blocks_left</a></div><div class="ttdeci">int blocks_left</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00552">character.h:552</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2d0693f6056f737b0308d79857247f4b"><div class="ttname"><a href="classCharacter.html#a2d0693f6056f737b0308d79857247f4b">Character::environmental_revert_effect</a></div><div class="ttdeci">void environmental_revert_effect()</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00785">character_turn.cpp:785</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2d8eb4e7dc7f720a9a566fb60d532e03"><div class="ttname"><a href="classCharacter.html#a2d8eb4e7dc7f720a9a566fb60d532e03">Character::process_one_effect</a></div><div class="ttdeci">void process_one_effect(effect &amp;it, bool is_new) override</div><div class="ttdoc">Processes human-specific effects of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00326">character_turn.cpp:326</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e269341e793c986871fd9ad2d5c7604"><div class="ttname"><a href="classCharacter.html#a2e269341e793c986871fd9ad2d5c7604">Character::process_items</a></div><div class="ttdeci">void process_items()</div><div class="ttdoc">Process active items.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00806">character_turn.cpp:806</a></div></div>
<div class="ttc" id="aclassCharacter_html_a2e658d88946cc7abba5333ad4cd3f153"><div class="ttname"><a href="classCharacter.html#a2e658d88946cc7abba5333ad4cd3f153">Character::set_sleep_deprivation</a></div><div class="ttdeci">virtual void set_sleep_deprivation(int nsleep_deprivation)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04305">character.cpp:4305</a></div></div>
<div class="ttc" id="aclassCharacter_html_a313797e99525bfd2a5ead68b7672f168"><div class="ttname"><a href="classCharacter.html#a313797e99525bfd2a5ead68b7672f168">Character::martial_arts_data</a></div><div class="ttdeci">pimpl&lt; character_martial_arts &gt; martial_arts_data</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01519">character.h:1519</a></div></div>
<div class="ttc" id="aclassCharacter_html_a31c20b0d370fef88fefe520ff046daf5"><div class="ttname"><a href="classCharacter.html#a31c20b0d370fef88fefe520ff046daf5">Character::get_fatigue</a></div><div class="ttdeci">int get_fatigue() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04311">character.cpp:4311</a></div></div>
<div class="ttc" id="aclassCharacter_html_a32e0c83c8160696f441f82d4230c0e7a"><div class="ttname"><a href="classCharacter.html#a32e0c83c8160696f441f82d4230c0e7a">Character::set_healthy_mod</a></div><div class="ttdeci">virtual void set_healthy_mod(int nhealthy_mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04110">character.cpp:4110</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3487bbfa5772ac7ec5f5cf116a078912"><div class="ttname"><a href="classCharacter.html#a3487bbfa5772ac7ec5f5cf116a078912">Character::process_turn</a></div><div class="ttdeci">void process_turn() override</div><div class="ttdoc">Handles end-of-turn processing.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00165">character_turn.cpp:165</a></div></div>
<div class="ttc" id="aclassCharacter_html_a388bca3ef975bd265c67df45bb280bee"><div class="ttname"><a href="classCharacter.html#a388bca3ef975bd265c67df45bb280bee">Character::my_bionics</a></div><div class="ttdeci">pimpl&lt; bionic_collection &gt; my_bionics</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01518">character.h:1518</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d0ec2b4e80527bd2daad576c2bbb187"><div class="ttname"><a href="classCharacter.html#a3d0ec2b4e80527bd2daad576c2bbb187">Character::use_charges</a></div><div class="ttdeci">std::list&lt; item &gt; use_charges(const itype_id &amp;what, int qty, const std::function&lt; bool(const item &amp;)&gt; &amp;filter=return_true&lt; item &gt;)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09393">character.cpp:9393</a></div></div>
<div class="ttc" id="aclassCharacter_html_a3d69eddc0a03b21378fc68cc08d32c7f"><div class="ttname"><a href="classCharacter.html#a3d69eddc0a03b21378fc68cc08d32c7f">Character::inv</a></div><div class="ttdeci">inventory inv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01513">character.h:1513</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4065ac02745befad248425d307b71849"><div class="ttname"><a href="classCharacter.html#a4065ac02745befad248425d307b71849">Character::dex_cur</a></div><div class="ttdeci">int dex_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00257">character.h:257</a></div></div>
<div class="ttc" id="aclassCharacter_html_a42c4ba47635e0659553c233c399da84a"><div class="ttname"><a href="classCharacter.html#a42c4ba47635e0659553c233c399da84a">Character::get_kcal_percent</a></div><div class="ttdeci">float get_kcal_percent() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04178">character.cpp:4178</a></div></div>
<div class="ttc" id="aclassCharacter_html_a431180ff2af878a9956bf474783017c0"><div class="ttname"><a href="classCharacter.html#a431180ff2af878a9956bf474783017c0">Character::mod_stored_kcal</a></div><div class="ttdeci">virtual void mod_stored_kcal(int nkcal)</div><div class="ttdoc">Modifiers for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04155">character.cpp:4155</a></div></div>
<div class="ttc" id="aclassCharacter_html_a44dbe53874421147bfc4491d8753cccc"><div class="ttname"><a href="classCharacter.html#a44dbe53874421147bfc4491d8753cccc">Character::drench</a></div><div class="ttdeci">void drench(int saturation, const body_part_set &amp;flags, bool ignore_waterproof)</div><div class="ttdoc">Drenches the player with water, saturation is the percent gotten wet.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01757">suffer.cpp:1757</a></div></div>
<div class="ttc" id="aclassCharacter_html_a450ed42503c02c36c04faa550a5b8f70"><div class="ttname"><a href="classCharacter.html#a450ed42503c02c36c04faa550a5b8f70">Character::temp_conv</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; temp_conv</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02227">character.h:2227</a></div></div>
<div class="ttc" id="aclassCharacter_html_a487913b9c97a3172f66517e87803d4a6"><div class="ttname"><a href="classCharacter.html#a487913b9c97a3172f66517e87803d4a6">Character::set_fatigue</a></div><div class="ttdeci">virtual void set_fatigue(int nfatigue)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04296">character.cpp:4296</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4886c07d74c7e8ad7ce2ced7d8238015"><div class="ttname"><a href="classCharacter.html#a4886c07d74c7e8ad7ce2ced7d8238015">Character::fall_asleep</a></div><div class="ttdeci">void fall_asleep()</div><div class="ttdoc">Adds &quot;sleep&quot; to the player.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09007">character.cpp:9007</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4905fef46d52e8b8334cc22666addcf0"><div class="ttname"><a href="classCharacter.html#a4905fef46d52e8b8334cc22666addcf0">Character::max_stored_kcal</a></div><div class="ttdeci">int max_stored_kcal() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04173">character.cpp:4173</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4b20f9ae261b906ead741771a8a48311"><div class="ttname"><a href="classCharacter.html#a4b20f9ae261b906ead741771a8a48311">Character::per_max</a></div><div class="ttdeci">int per_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00254">character.h:254</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c3defc0d53472077cb7577b30b1605f"><div class="ttname"><a href="classCharacter.html#a4c3defc0d53472077cb7577b30b1605f">Character::worn</a></div><div class="ttdeci">std::list&lt; item &gt; worn</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01501">character.h:1501</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4c9fb43c7fb93a18f5d1a785790faca4"><div class="ttname"><a href="classCharacter.html#a4c9fb43c7fb93a18f5d1a785790faca4">Character::get_healthy</a></div><div class="ttdeci">virtual int get_healthy() const</div><div class="ttdoc">Getters for health values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03997">character.cpp:3997</a></div></div>
<div class="ttc" id="aclassCharacter_html_a4f0bdbd929787a486a0dd5748ef10c65"><div class="ttname"><a href="classCharacter.html#a4f0bdbd929787a486a0dd5748ef10c65">Character::in_sleep_state</a></div><div class="ttdeci">bool in_sleep_state() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09055">character.cpp:9055</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5106996739b703dd5915cf166236653a"><div class="ttname"><a href="classCharacter.html#a5106996739b703dd5915cf166236653a">Character::set_stim</a></div><div class="ttdeci">void set_stim(int new_stim)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06929">character.cpp:6929</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5372963458e39e2755de3489b2624ac2"><div class="ttname"><a href="classCharacter.html#a5372963458e39e2755de3489b2624ac2">Character::cough</a></div><div class="ttdeci">void cough(bool harmful=false, int loudness=4)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07416">character.cpp:7416</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5751b689e5a4ecd43b6de5c3e2d31541"><div class="ttname"><a href="classCharacter.html#a5751b689e5a4ecd43b6de5c3e2d31541">Character::has_bionic</a></div><div class="ttdeci">bool has_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01784">character.cpp:1784</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5929e955c11ee6c749447472df7c774d"><div class="ttname"><a href="classCharacter.html#a5929e955c11ee6c749447472df7c774d">Character::weight_carried</a></div><div class="ttdeci">units::mass weight_carried() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02631">character.cpp:2631</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5be95d17f1714899fa0161eddc749f7d"><div class="ttname"><a href="classCharacter.html#a5be95d17f1714899fa0161eddc749f7d">Character::overmap_time</a></div><div class="ttdeci">std::unordered_map&lt; point_abs_omt, time_duration &gt; overmap_time</div><div class="ttdoc">Amount of time the player has spent in each overmap tile.</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02223">character.h:2223</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5d450cd31d2779dd654ba6589f09c98b"><div class="ttname"><a href="classCharacter.html#a5d450cd31d2779dd654ba6589f09c98b">Character::dodges_left</a></div><div class="ttdeci">int dodges_left</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00553">character.h:553</a></div></div>
<div class="ttc" id="aclassCharacter_html_a5f1a21ad76d22926f2688c1e49105311"><div class="ttname"><a href="classCharacter.html#a5f1a21ad76d22926f2688c1e49105311">Character::set_painkiller</a></div><div class="ttdeci">void set_painkiller(int npkill)</div><div class="ttdoc">Sets intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09523">character.cpp:9523</a></div></div>
<div class="ttc" id="aclassCharacter_html_a61bc9422c35b63128532af268e52cb71"><div class="ttname"><a href="classCharacter.html#a61bc9422c35b63128532af268e52cb71">Character::in_vehicle</a></div><div class="ttdeci">bool in_vehicle</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01505">character.h:1505</a></div></div>
<div class="ttc" id="aclassCharacter_html_a64fb53474cad02d7de9486d390124c3e"><div class="ttname"><a href="classCharacter.html#a64fb53474cad02d7de9486d390124c3e">Character::enchantment_cache</a></div><div class="ttdeci">pimpl&lt; enchantment &gt; enchantment_cache</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02220">character.h:2220</a></div></div>
<div class="ttc" id="aclassCharacter_html_a66520fe7648d455282596ead87701655"><div class="ttname"><a href="classCharacter.html#a66520fe7648d455282596ead87701655">Character::body_wetness</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; body_wetness</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02228">character.h:2228</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67a7e1b4bc1b191c747a27a1575ee1a6"><div class="ttname"><a href="classCharacter.html#a67a7e1b4bc1b191c747a27a1575ee1a6">Character::mod_fatigue</a></div><div class="ttdeci">virtual void mod_fatigue(int nfatigue)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04286">character.cpp:4286</a></div></div>
<div class="ttc" id="aclassCharacter_html_a67b51491c2529df09755e07bc633cc55"><div class="ttname"><a href="classCharacter.html#a67b51491c2529df09755e07bc633cc55">Character::is_mounted</a></div><div class="ttdeci">bool is_mounted() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01053">character.cpp:1053</a></div></div>
<div class="ttc" id="aclassCharacter_html_a68de7da109abd90b4f2210057c982fe0"><div class="ttname"><a href="classCharacter.html#a68de7da109abd90b4f2210057c982fe0">Character::get_perceived_pain</a></div><div class="ttdeci">int get_perceived_pain() const override</div><div class="ttdoc">Returns perceived pain (reduced with painkillers)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00778">character.cpp:778</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6924ca4d6836c2a8c64bd6fda0436c70"><div class="ttname"><a href="classCharacter.html#a6924ca4d6836c2a8c64bd6fda0436c70">Character::add_miss_reason</a></div><div class="ttdeci">void add_miss_reason(const std::string &amp;reason, unsigned int weight)</div><div class="ttdoc">Adds a reason for why the player would miss a melee attack.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00319">melee.cpp:319</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6cb8078ce8af28f6a779c039e3c1e1ca"><div class="ttname"><a href="classCharacter.html#a6cb8078ce8af28f6a779c039e3c1e1ca">Character::mod_str_bonus</a></div><div class="ttdeci">virtual void mod_str_bonus(int nstr)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04030">character.cpp:4030</a></div></div>
<div class="ttc" id="aclassCharacter_html_a6d3588802fde645fd5387038b259377c"><div class="ttname"><a href="classCharacter.html#a6d3588802fde645fd5387038b259377c">Character::wearing_something_on</a></div><div class="ttdeci">bool wearing_something_on(const bodypart_id &amp;bp) const</div><div class="ttdoc">Returns true if the character is wearing something on the entered body part.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08594">character.cpp:8594</a></div></div>
<div class="ttc" id="aclassCharacter_html_a72b82d2498ae823e0cd6cad311215327"><div class="ttname"><a href="classCharacter.html#a72b82d2498ae823e0cd6cad311215327">Character::vomit</a></div><div class="ttdeci">void vomit()</div><div class="ttdoc">Handles Character vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l07563">character.cpp:7563</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7335f053c5874081211552623fa625c5"><div class="ttname"><a href="classCharacter.html#a7335f053c5874081211552623fa625c5">Character::get_stim</a></div><div class="ttdeci">int get_stim() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06924">character.cpp:6924</a></div></div>
<div class="ttc" id="aclassCharacter_html_a74e6a7c7b747298dd3d1e853fab2c1ff"><div class="ttname"><a href="classCharacter.html#a74e6a7c7b747298dd3d1e853fab2c1ff">Character::set_stored_kcal</a></div><div class="ttdeci">virtual void set_stored_kcal(int kcal)</div><div class="ttdoc">Setters for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04166">character.cpp:4166</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7c11a4f12bee9f80279bff21faa54153"><div class="ttname"><a href="classCharacter.html#a7c11a4f12bee9f80279bff21faa54153">Character::apply_damage</a></div><div class="ttdeci">void apply_damage(Creature *source, bodypart_id hurt, int dam, bool bypass_med=false) override</div><div class="ttdoc">Actually hurt the player, hurts a body_part directly, no armor reduction.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08137">character.cpp:8137</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7ca6c670844c9fd8c419c474788a7bf7"><div class="ttname"><a href="classCharacter.html#a7ca6c670844c9fd8c419c474788a7bf7">Character::get_thirst</a></div><div class="ttdeci">int get_thirst() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04183">character.cpp:4183</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7cf3a039fed01ee44525ea41940cb00d"><div class="ttname"><a href="classCharacter.html#a7cf3a039fed01ee44525ea41940cb00d">Character::knows_trap</a></div><div class="ttdeci">bool knows_trap(const tripoint &amp;pos) const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09981">character.cpp:9981</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7d4989b9ba8eed283bbf0993eda2ee27"><div class="ttname"><a href="classCharacter.html#a7d4989b9ba8eed283bbf0993eda2ee27">Character::process_effects_internal</a></div><div class="ttdeci">void process_effects_internal() override</div><div class="ttdoc">Processes human-specific effects of effects before calling Creature::process_effects().</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00535">character_turn.cpp:535</a></div></div>
<div class="ttc" id="aclassCharacter_html_a7fbae705aa03db588d52519dfa1e285c"><div class="ttname"><a href="classCharacter.html#a7fbae705aa03db588d52519dfa1e285c">Character::mutation_value</a></div><div class="ttdeci">float mutation_value(const std::string &amp;val) const</div><div class="ttdoc">Goes over all mutations, gets min and max of a value with given name.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06514">character.cpp:6514</a></div></div>
<div class="ttc" id="aclassCharacter_html_a81a81cee431c657465e6ab54af345eaf"><div class="ttname"><a href="classCharacter.html#a81a81cee431c657465e6ab54af345eaf">Character::get_morale_level</a></div><div class="ttdeci">int get_morale_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08821">character.cpp:8821</a></div></div>
<div class="ttc" id="aclassCharacter_html_a824a60fef8920f38a6f1e1b35bea4879"><div class="ttname"><a href="classCharacter.html#a824a60fef8920f38a6f1e1b35bea4879">Character::get_stored_kcal</a></div><div class="ttdeci">int get_stored_kcal() const</div><div class="ttdoc">Getter for need values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04150">character.cpp:4150</a></div></div>
<div class="ttc" id="aclassCharacter_html_a86ad83bf21de1c90b69ad5188d03e59c"><div class="ttname"><a href="classCharacter.html#a86ad83bf21de1c90b69ad5188d03e59c">Character::addictions</a></div><div class="ttdeci">std::vector&lt; addiction &gt; addictions</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01540">character.h:1540</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8c4e364e25b0ea4d5a27c3120a9f973f"><div class="ttname"><a href="classCharacter.html#a8c4e364e25b0ea4d5a27c3120a9f973f">Character::mod_healthy_mod</a></div><div class="ttdeci">virtual void mod_healthy_mod(int nhealthy_mod, int cap)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04114">character.cpp:4114</a></div></div>
<div class="ttc" id="aclassCharacter_html_a8e068564c87eb2d870e67eefb63ef144"><div class="ttname"><a href="classCharacter.html#a8e068564c87eb2d870e67eefb63ef144">Character::mabuff_speed_bonus</a></div><div class="ttdeci">int mabuff_speed_bonus() const</div><div class="ttdoc">Returns the speed bonus from martial arts buffs.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01109">martialarts.cpp:1109</a></div></div>
<div class="ttc" id="aclassCharacter_html_a949089fac926ba54f6848f03ab76cdff"><div class="ttname"><a href="classCharacter.html#a949089fac926ba54f6848f03ab76cdff">Character::set_pain</a></div><div class="ttdeci">void set_pain(int npain) override</div><div class="ttdoc">Sets new intensity of pain an reacts to it.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00766">character.cpp:766</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9790ad52dd6dfc8fd6c615ed994f8105"><div class="ttname"><a href="classCharacter.html#a9790ad52dd6dfc8fd6c615ed994f8105">Character::mod_painkiller</a></div><div class="ttdeci">void mod_painkiller(int npkill)</div><div class="ttdoc">Modifies intensity of painkillers</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09518">character.cpp:9518</a></div></div>
<div class="ttc" id="aclassCharacter_html_a97c5948a2648dc5fd3e2defd5885cdb0"><div class="ttname"><a href="classCharacter.html#a97c5948a2648dc5fd3e2defd5885cdb0">Character::get_mutations</a></div><div class="ttdeci">std::vector&lt; trait_id &gt; get_mutations(bool include_hidden=true) const</div><div class="ttdoc">Get the idents of all traits/mutations.</div><div class="ttdef"><b>Definition:</b> <a href="newcharacter_8cpp_source.html#l02857">newcharacter.cpp:2857</a></div></div>
<div class="ttc" id="aclassCharacter_html_a994c83d61054215e81a6e87478d81203"><div class="ttname"><a href="classCharacter.html#a994c83d61054215e81a6e87478d81203">Character::int_cur</a></div><div class="ttdeci">int int_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00258">character.h:258</a></div></div>
<div class="ttc" id="aclassCharacter_html_a995d6d84d90b9b14f66cacede5a5fa16"><div class="ttname"><a href="classCharacter.html#a995d6d84d90b9b14f66cacede5a5fa16">Character::clear_miss_reasons</a></div><div class="ttdeci">void clear_miss_reasons()</div><div class="ttdoc">Clears the list of reasons for why the player would miss a melee attack.</div><div class="ttdef"><b>Definition:</b> <a href="melee_8cpp_source.html#l00325">melee.cpp:325</a></div></div>
<div class="ttc" id="aclassCharacter_html_a997ede96b346ac8b05305c7b1c9b2e4d"><div class="ttname"><a href="classCharacter.html#a997ede96b346ac8b05305c7b1c9b2e4d">Character::reset_stats</a></div><div class="ttdeci">void reset_stats() override</div><div class="ttdoc">Resets stats, and applies effects in an idempotent manner.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00580">character_turn.cpp:580</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9acf20ad52ac234831c4ec5472da8426"><div class="ttname"><a href="classCharacter.html#a9acf20ad52ac234831c4ec5472da8426">Character::set_healthy</a></div><div class="ttdeci">virtual void set_healthy(int nhealthy)</div><div class="ttdoc">Setters for health values exclusive to characters.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04098">character.cpp:4098</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9c3a6b61668d4d7d771441e50095c544"><div class="ttname"><a href="classCharacter.html#a9c3a6b61668d4d7d771441e50095c544">Character::int_max</a></div><div class="ttdeci">int int_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00253">character.h:253</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9ce2644a98b526b5e453b043f5fa49bc"><div class="ttname"><a href="classCharacter.html#a9ce2644a98b526b5e453b043f5fa49bc">Character::mod_thirst</a></div><div class="ttdeci">virtual void mod_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04270">character.cpp:4270</a></div></div>
<div class="ttc" id="aclassCharacter_html_a9f89d86c23ad0eefd40c922efbcd1d8b"><div class="ttname"><a href="classCharacter.html#a9f89d86c23ad0eefd40c922efbcd1d8b">Character::hardcoded_effects</a></div><div class="ttdeci">void hardcoded_effects(effect &amp;it)</div><div class="ttdoc">Handles the still hard-coded effects.</div><div class="ttdef"><b>Definition:</b> <a href="player__hardcoded__effects_8cpp_source.html#l00472">player_hardcoded_effects.cpp:472</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa0d1b26c15ad4a52973774bf6a7610c1"><div class="ttname"><a href="classCharacter.html#aa0d1b26c15ad4a52973774bf6a7610c1">Character::recalc_sight_limits</a></div><div class="ttdeci">void recalc_sight_limits()</div><div class="ttdoc">Modifies the player's sight values Must be called when any of the following change: This must be call...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01599">character.cpp:1599</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa342bc315f7b61074f2ac81217a2a0f5"><div class="ttname"><a href="classCharacter.html#aa342bc315f7b61074f2ac81217a2a0f5">Character::drop_invalid_inventory</a></div><div class="ttdeci">void drop_invalid_inventory()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03110">character.cpp:3110</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa5ca0f6c4fb1c08bb93ece1c9746c368"><div class="ttname"><a href="classCharacter.html#aa5ca0f6c4fb1c08bb93ece1c9746c368">Character::get_size</a></div><div class="ttdeci">m_size get_size() const override</div><div class="ttdoc">Get size class of character.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00550">character.cpp:550</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa792d074ba8c8dc291e410cbbb27f292"><div class="ttname"><a href="classCharacter.html#aa792d074ba8c8dc291e410cbbb27f292">Character::get_int_bonus</a></div><div class="ttdeci">virtual int get_int_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03966">character.cpp:3966</a></div></div>
<div class="ttc" id="aclassCharacter_html_aa81a4b0db6f2387bfc02706a6b7a678e"><div class="ttname"><a href="classCharacter.html#aa81a4b0db6f2387bfc02706a6b7a678e">Character::get_rad</a></div><div class="ttdeci">int get_rad() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06939">character.cpp:6939</a></div></div>
<div class="ttc" id="aclassCharacter_html_aab94093235048027d0afad3f6af4e21c"><div class="ttname"><a href="classCharacter.html#aab94093235048027d0afad3f6af4e21c">Character::wait_effects</a></div><div class="ttdeci">void wait_effects()</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01496">character.cpp:1496</a></div></div>
<div class="ttc" id="aclassCharacter_html_aafae2e55b991d000ca053ced6a089a15"><div class="ttname"><a href="classCharacter.html#aafae2e55b991d000ca053ced6a089a15">Character::get_mod_stat_from_bionic</a></div><div class="ttdeci">int get_mod_stat_from_bionic(const character_stat &amp;Stat) const</div><div class="ttdoc">Get stat bonus from bionic.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02076">character.cpp:2076</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab2db9a91b7251e1ca4c1735c9cc2bf52"><div class="ttname"><a href="classCharacter.html#ab2db9a91b7251e1ca4c1735c9cc2bf52">Character::get_sleep_deprivation</a></div><div class="ttdeci">int get_sleep_deprivation() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04316">character.cpp:4316</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab7700517fb07e9155e559b3c2e427a65"><div class="ttname"><a href="classCharacter.html#ab7700517fb07e9155e559b3c2e427a65">Character::drench_capacity</a></div><div class="ttdeci">std::array&lt; int, num_bp &gt; drench_capacity</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02229">character.h:2229</a></div></div>
<div class="ttc" id="aclassCharacter_html_ab7818b073576ebe8b8f1331af79e1f41"><div class="ttname"><a href="classCharacter.html#ab7818b073576ebe8b8f1331af79e1f41">Character::restore_scent</a></div><div class="ttdeci">void restore_scent()</div><div class="ttdoc">restore scent after masked_scent effect run out or is removed by water</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l08499">character.cpp:8499</a></div></div>
<div class="ttc" id="aclassCharacter_html_aba0dd3cd625129fd3792d9cf10bf5f77"><div class="ttname"><a href="classCharacter.html#aba0dd3cd625129fd3792d9cf10bf5f77">Character::mabuff_dodge_bonus</a></div><div class="ttdeci">float mabuff_dodge_bonus() const</div><div class="ttdoc">Returns the dodge bonus from martial arts buffs.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01093">martialarts.cpp:1093</a></div></div>
<div class="ttc" id="aclassCharacter_html_aba9bd7517b334e6ed4149889ed32377a"><div class="ttname"><a href="classCharacter.html#aba9bd7517b334e6ed4149889ed32377a">Character::sees</a></div><div class="ttdeci">bool sees(const tripoint &amp;t, bool is_player=false, int range_mod=0) const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l10167">character.cpp:10167</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac29de3d2bc90dd1c8d921b539fb05cfb"><div class="ttname"><a href="classCharacter.html#ac29de3d2bc90dd1c8d921b539fb05cfb">Character::mod_stamina</a></div><div class="ttdeci">void mod_stamina(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06978">character.cpp:6978</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac3066aafc3a5ffe9ee8058e062e177a7"><div class="ttname"><a href="classCharacter.html#ac3066aafc3a5ffe9ee8058e062e177a7">Character::suffer</a></div><div class="ttdeci">void suffer()</div><div class="ttdoc">Handles a large number of timers decrementing and other randomized effects.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01470">suffer.cpp:1470</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac3e27cd8b8fe445e06e6d20d0eb82aff"><div class="ttname"><a href="classCharacter.html#ac3e27cd8b8fe445e06e6d20d0eb82aff">Character::get_max_power_level</a></div><div class="ttdeci">units::energy get_max_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01879">character.cpp:1879</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac407c565e22ac2a0d52a17c1c9986c90"><div class="ttname"><a href="classCharacter.html#ac407c565e22ac2a0d52a17c1c9986c90">Character::remove_worn_items_with</a></div><div class="ttdeci">std::list&lt; item &gt; remove_worn_items_with(std::function&lt; bool(item &amp;)&gt; filter)</div><div class="ttdoc">Similar to remove_items_with, but considers only worn items and not their content (item::contents is ...</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l02254">character.cpp:2254</a></div></div>
<div class="ttc" id="aclassCharacter_html_ac840406f65172cadd93d4274ddd78e15"><div class="ttname"><a href="classCharacter.html#ac840406f65172cadd93d4274ddd78e15">Character::mod_stim</a></div><div class="ttdeci">void mod_stim(int mod)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06934">character.cpp:6934</a></div></div>
<div class="ttc" id="aclassCharacter_html_aca511c2b9cca76347a32edd2c2ac0fd2"><div class="ttname"><a href="classCharacter.html#aca511c2b9cca76347a32edd2c2ac0fd2">Character::morale</a></div><div class="ttdeci">pimpl&lt; player_morale &gt; morale</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l02147">character.h:2147</a></div></div>
<div class="ttc" id="aclassCharacter_html_acf5583cbfc563f3a6a1ba708fc72bea9"><div class="ttname"><a href="classCharacter.html#acf5583cbfc563f3a6a1ba708fc72bea9">Character::get_per_bonus</a></div><div class="ttdeci">virtual int get_per_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03962">character.cpp:3962</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad06f0f9440098eb66fa9a6c46d033324"><div class="ttname"><a href="classCharacter.html#ad06f0f9440098eb66fa9a6c46d033324">Character::set_rad</a></div><div class="ttdeci">void set_rad(int new_rad)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06944">character.cpp:6944</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad24859164517ed6e392e21df69527199"><div class="ttname"><a href="classCharacter.html#ad24859164517ed6e392e21df69527199">Character::pos</a></div><div class="ttdeci">const tripoint &amp; pos() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l00576">character.cpp:576</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad67a790400ac88405241f279b566b89e"><div class="ttname"><a href="classCharacter.html#ad67a790400ac88405241f279b566b89e">Character::reset_encumbrance</a></div><div class="ttdeci">void reset_encumbrance()</div><div class="ttdoc">Recalculates encumbrance cache.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03499">character.cpp:3499</a></div></div>
<div class="ttc" id="aclassCharacter_html_ad8a2bb942a756787aced3b83319176ff"><div class="ttname"><a href="classCharacter.html#ad8a2bb942a756787aced3b83319176ff">Character::per_cur</a></div><div class="ttdeci">int per_cur</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00259">character.h:259</a></div></div>
<div class="ttc" id="aclassCharacter_html_ada34ca3fb472a8b1816e297ead2b31df"><div class="ttname"><a href="classCharacter.html#ada34ca3fb472a8b1816e297ead2b31df">Character::add_known_trap</a></div><div class="ttdeci">void add_known_trap(const tripoint &amp;pos, const trap &amp;t)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l09987">character.cpp:9987</a></div></div>
<div class="ttc" id="aclassCharacter_html_adc1fd84a88722a905e57fea8bfd5b6b0"><div class="ttname"><a href="classCharacter.html#adc1fd84a88722a905e57fea8bfd5b6b0">Character::encumb</a></div><div class="ttdeci">int encumb(body_part bp) const</div><div class="ttdoc">Returns ENC provided by armor, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03857">character.cpp:3857</a></div></div>
<div class="ttc" id="aclassCharacter_html_add22510ff2fa20a662868b4dd86e030e"><div class="ttname"><a href="classCharacter.html#add22510ff2fa20a662868b4dd86e030e">Character::get_power_level</a></div><div class="ttdeci">units::energy get_power_level() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01874">character.cpp:1874</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae0ff036234bb7eb3fccb8bb8de5781ec"><div class="ttname"><a href="classCharacter.html#ae0ff036234bb7eb3fccb8bb8de5781ec">Character::apply_skill_boost</a></div><div class="ttdeci">void apply_skill_boost()</div><div class="ttdoc">Applies skill-based boosts to stats.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03402">character.cpp:3402</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae4ce8cb45c93fcafc3f4ba489e63a4c2"><div class="ttname"><a href="classCharacter.html#ae4ce8cb45c93fcafc3f4ba489e63a4c2">Character::dex_max</a></div><div class="ttdeci">int dex_max</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l00252">character.h:252</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae68b7a6565646ba662e448bded8b6599"><div class="ttname"><a href="classCharacter.html#ae68b7a6565646ba662e448bded8b6599">Character::weapon</a></div><div class="ttdeci">item weapon</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01515">character.h:1515</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae6bcae1e1d30b35e0152b5e1bd615f5e"><div class="ttname"><a href="classCharacter.html#ae6bcae1e1d30b35e0152b5e1bd615f5e">Character::set_thirst</a></div><div class="ttdeci">virtual void set_thirst(int nthirst)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04278">character.cpp:4278</a></div></div>
<div class="ttc" id="aclassCharacter_html_ae71c3fe41d9c5dba9d9ccc0cb8c50f02"><div class="ttname"><a href="classCharacter.html#ae71c3fe41d9c5dba9d9ccc0cb8c50f02">Character::recalc_speed_bonus</a></div><div class="ttdeci">void recalc_speed_bonus()</div><div class="ttdoc">Calculates the various speed bonuses we will get from mutations, etc.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00095">character_turn.cpp:95</a></div></div>
<div class="ttc" id="aclassCharacter_html_aedc66fc50d352420cae7791b4a0f57f7"><div class="ttname"><a href="classCharacter.html#aedc66fc50d352420cae7791b4a0f57f7">Character::get_speed</a></div><div class="ttdeci">int get_speed() const override</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03980">character.cpp:3980</a></div></div>
<div class="ttc" id="aclassCharacter_html_af06dd97724f4f05df782e7a4b4f9cfe1"><div class="ttname"><a href="classCharacter.html#af06dd97724f4f05df782e7a4b4f9cfe1">Character::has_trait</a></div><div class="ttdeci">bool has_trait(const trait_id &amp;b) const override</div><div class="ttdoc">Returns true if the player has the entered trait.</div><div class="ttdef"><b>Definition:</b> <a href="mutation_8cpp_source.html#l00103">mutation.cpp:103</a></div></div>
<div class="ttc" id="aclassCharacter_html_af254fa44c7792574ff19973b0fa06b36"><div class="ttname"><a href="classCharacter.html#af254fa44c7792574ff19973b0fa06b36">Character::global_omt_location</a></div><div class="ttdeci">tripoint_abs_omt global_omt_location() const</div><div class="ttdoc">Returns the location of the player in global overmap terrain coordinates.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l06099">character.cpp:6099</a></div></div>
<div class="ttc" id="aclassCharacter_html_af2f6b4a5ad4b128bda53fe610362b5b0"><div class="ttname"><a href="classCharacter.html#af2f6b4a5ad4b128bda53fe610362b5b0">Character::addiction_level</a></div><div class="ttdeci">int addiction_level(add_type type) const</div><div class="ttdoc">Returns the intensity of the specified addiction.</div><div class="ttdef"><b>Definition:</b> <a href="suffer_8cpp_source.html#l01961">suffer.cpp:1961</a></div></div>
<div class="ttc" id="aclassCharacter_html_af6603125d7342944862004a14de55a8a"><div class="ttname"><a href="classCharacter.html#af6603125d7342944862004a14de55a8a">Character::mod_int_bonus</a></div><div class="ttdeci">virtual void mod_int_bonus(int nint)</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l04045">character.cpp:4045</a></div></div>
<div class="ttc" id="aclassCharacter_html_af7ec444ce33b8a774dad1a23857078c1"><div class="ttname"><a href="classCharacter.html#af7ec444ce33b8a774dad1a23857078c1">Character::nv_cached</a></div><div class="ttdeci">bool nv_cached</div><div class="ttdef"><b>Definition:</b> <a href="character_8h_source.html#l01503">character.h:1503</a></div></div>
<div class="ttc" id="aclassCharacter_html_af9c7419575e23d52745c94009929fafb"><div class="ttname"><a href="classCharacter.html#af9c7419575e23d52745c94009929fafb">Character::has_active_bionic</a></div><div class="ttdeci">bool has_active_bionic(const bionic_id &amp;b) const</div><div class="ttdoc">Returns true if the player has the entered bionic id and it is powered on.</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l01794">character.cpp:1794</a></div></div>
<div class="ttc" id="aclassCharacter_html_afeeecb20f5d89598619b8948c2e8a0e0"><div class="ttname"><a href="classCharacter.html#afeeecb20f5d89598619b8948c2e8a0e0">Character::get_dex_bonus</a></div><div class="ttdeci">virtual int get_dex_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="character_8cpp_source.html#l03958">character.cpp:3958</a></div></div>
<div class="ttc" id="aclassCreature_html_a28d410ab38e30292e266188c1b95cae5"><div class="ttname"><a href="classCreature.html#a28d410ab38e30292e266188c1b95cae5">Creature::process_turn</a></div><div class="ttdeci">virtual void process_turn()</div><div class="ttdoc">Processes effects and bonuses and allocates move points based on speed.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00152">creature.cpp:152</a></div></div>
<div class="ttc" id="aclassCreature_html_a35bbfb9c042ed3cf7e0ae9b7280384c4"><div class="ttname"><a href="classCreature.html#a35bbfb9c042ed3cf7e0ae9b7280384c4">Creature::get_speed_bonus</a></div><div class="ttdeci">virtual int get_speed_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01679">creature.cpp:1679</a></div></div>
<div class="ttc" id="aclassCreature_html_a5a2346f549de9c87e8f2afeec1e71366"><div class="ttname"><a href="classCreature.html#a5a2346f549de9c87e8f2afeec1e71366">Creature::is_underwater</a></div><div class="ttdeci">virtual bool is_underwater() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00170">creature.cpp:170</a></div></div>
<div class="ttc" id="aclassCreature_html_a60ca228583adf18b2e56e1c96ff8b048"><div class="ttname"><a href="classCreature.html#a60ca228583adf18b2e56e1c96ff8b048">Creature::mod_dodge_bonus</a></div><div class="ttdeci">virtual void mod_dodge_bonus(float ndodge)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01762">creature.cpp:1762</a></div></div>
<div class="ttc" id="aclassCreature_html_a655af12aa145ee7fe2340c24a3b4b856"><div class="ttname"><a href="classCreature.html#a655af12aa145ee7fe2340c24a3b4b856">Creature::get_num_dodges</a></div><div class="ttdeci">virtual int get_num_dodges() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01445">creature.cpp:1445</a></div></div>
<div class="ttc" id="aclassCreature_html_a666022fd3ed772fa109d273c20e8de55"><div class="ttname"><a href="classCreature.html#a666022fd3ed772fa109d273c20e8de55">Creature::add_effect</a></div><div class="ttdeci">void add_effect(const effect &amp;eff, bool force=false, bool deferred=false)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00981">creature.cpp:981</a></div></div>
<div class="ttc" id="aclassCreature_html_a6a4c43d66f5a8b50a879d78682b00976"><div class="ttname"><a href="classCreature.html#a6a4c43d66f5a8b50a879d78682b00976">Creature::is_dangerous_fields</a></div><div class="ttdeci">bool is_dangerous_fields(const field &amp;fld) const</div><div class="ttdoc">Returns true if there is a field in the field set that is dangerous to us.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l00185">creature.cpp:185</a></div></div>
<div class="ttc" id="aclassCreature_html_a6af61264a3d5ac62a64df4899e87d2c1"><div class="ttname"><a href="classCreature.html#a6af61264a3d5ac62a64df4899e87d2c1">Creature::set_all_parts_hp_to_max</a></div><div class="ttdeci">void set_all_parts_hp_to_max()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01613">creature.cpp:1613</a></div></div>
<div class="ttc" id="aclassCreature_html_a6b40041c12e2c414170aad5511878446"><div class="ttname"><a href="classCreature.html#a6b40041c12e2c414170aad5511878446">Creature::resists_effect</a></div><div class="ttdeci">bool resists_effect(const effect &amp;e) const</div><div class="ttdoc">Returns true if the creature resists an effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01311">creature.cpp:1311</a></div></div>
<div class="ttc" id="aclassCreature_html_a6fb79df9315dc2bed6f34d9a2e37da90"><div class="ttname"><a href="classCreature.html#a6fb79df9315dc2bed6f34d9a2e37da90">Creature::has_effect</a></div><div class="ttdeci">bool has_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Check if creature has the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01180">creature.cpp:1180</a></div></div>
<div class="ttc" id="aclassCreature_html_a70ba05a0184ff83095f639eac18f24fe"><div class="ttname"><a href="classCreature.html#a70ba05a0184ff83095f639eac18f24fe">Creature::get_effect_int</a></div><div class="ttdeci">int get_effect_int(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Returns the intensity of the matching effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01251">creature.cpp:1251</a></div></div>
<div class="ttc" id="aclassCreature_html_a71e8440dfb96a7a870c29e0472b7b85d"><div class="ttname"><a href="classCreature.html#a71e8440dfb96a7a870c29e0472b7b85d">Creature::get_pain</a></div><div class="ttdeci">virtual int get_pain() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01367">creature.cpp:1367</a></div></div>
<div class="ttc" id="aclassCreature_html_a730fb8be5a540edd31ed9d8126ea20de"><div class="ttname"><a href="classCreature.html#a730fb8be5a540edd31ed9d8126ea20de">Creature::remove_effect</a></div><div class="ttdeci">bool remove_effect(const efftype_id &amp;eff_id, body_part bp=num_bp)</div><div class="ttdoc">Removes a listed effect.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01137">creature.cpp:1137</a></div></div>
<div class="ttc" id="aclassCreature_html_a7cf71d2bd6c350f2ceda3f1d64046e63"><div class="ttname"><a href="classCreature.html#a7cf71d2bd6c350f2ceda3f1d64046e63">Creature::add_msg_player_or_npc</a></div><div class="ttdeci">virtual void add_msg_player_or_npc(const std::string &amp;, const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00677">creature.h:677</a></div></div>
<div class="ttc" id="aclassCreature_html_a805a8d90db2178529997b355e8898d70"><div class="ttname"><a href="classCreature.html#a805a8d90db2178529997b355e8898d70">Creature::get_num_blocks</a></div><div class="ttdeci">virtual int get_num_blocks() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01441">creature.cpp:1441</a></div></div>
<div class="ttc" id="aclassCreature_html_a81fd71e521e09908425fc63a64458f59"><div class="ttname"><a href="classCreature.html#a81fd71e521e09908425fc63a64458f59">Creature::set_speed_bonus</a></div><div class="ttdeci">virtual void set_speed_bonus(int nspeed)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01741">creature.cpp:1741</a></div></div>
<div class="ttc" id="aclassCreature_html_a89f56544cdbf34297b4c0e62f3350817"><div class="ttname"><a href="classCreature.html#a89f56544cdbf34297b4c0e62f3350817">Creature::get_effect</a></div><div class="ttdeci">const effect &amp; get_effect(const efftype_id &amp;eff_id, body_part bp=num_bp) const</div><div class="ttdoc">Return the effect that matches the given arguments exactly.</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01220">creature.cpp:1220</a></div></div>
<div class="ttc" id="aclassCreature_html_a8c5a392caa213bee9581b47e9f0e2052"><div class="ttname"><a href="classCreature.html#a8c5a392caa213bee9581b47e9f0e2052">Creature::moves</a></div><div class="ttdeci">int moves</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00570">creature.h:570</a></div></div>
<div class="ttc" id="aclassCreature_html_a91dc4715c36eef7d116f944be9a4d435"><div class="ttname"><a href="classCreature.html#a91dc4715c36eef7d116f944be9a4d435">Creature::add_msg_if_player</a></div><div class="ttdeci">virtual void add_msg_if_player(const std::string &amp;) const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00593">creature.h:593</a></div></div>
<div class="ttc" id="aclassCreature_html_aa4f09ff71f1aa8562798d47cb4ef0682"><div class="ttname"><a href="classCreature.html#aa4f09ff71f1aa8562798d47cb4ef0682">Creature::mod_speed_bonus</a></div><div class="ttdeci">virtual void mod_speed_bonus(int nspeed)</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01758">creature.cpp:1758</a></div></div>
<div class="ttc" id="aclassCreature_html_acb1d0a1210d3dd4c86350f3ad4c58649"><div class="ttname"><a href="classCreature.html#acb1d0a1210d3dd4c86350f3ad4c58649">Creature::as_player</a></div><div class="ttdeci">virtual player * as_player()</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00122">creature.h:122</a></div></div>
<div class="ttc" id="aclassCreature_html_acfac03f5782f8ea53e1efcb5321ead1b"><div class="ttname"><a href="classCreature.html#acfac03f5782f8ea53e1efcb5321ead1b">Creature::get_speed_base</a></div><div class="ttdeci">virtual int get_speed_base() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8cpp_source.html#l01675">creature.cpp:1675</a></div></div>
<div class="ttc" id="aclassCreature_html_ae14e3b3ab4a876a17538cfe38818356c"><div class="ttname"><a href="classCreature.html#ae14e3b3ab4a876a17538cfe38818356c">Creature::effects</a></div><div class="ttdeci">pimpl&lt; effects_map &gt; effects</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00808">creature.h:808</a></div></div>
<div class="ttc" id="aclassCreature_html_aed84fe52e1335d48d53f482f8a278c87"><div class="ttname"><a href="classCreature.html#aed84fe52e1335d48d53f482f8a278c87">Creature::is_npc</a></div><div class="ttdeci">virtual bool is_npc() const</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00098">creature.h:98</a></div></div>
<div class="ttc" id="aclasscata_1_1optional_html"><div class="ttname"><a href="classcata_1_1optional.html">cata::optional</a></div><div class="ttdef"><b>Definition:</b> <a href="optional_8h_source.html#l00030">optional.h:31</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html"><div class="ttname"><a href="classcoords_1_1coord__point.html">coords::coord_point&lt; tripoint, coords::origin::abs, coords::omt &gt;</a></div></div>
<div class="ttc" id="aclasscoords_1_1coord__point_html_acb7438b5f344b6841e64b56100761783"><div class="ttname"><a href="classcoords_1_1coord__point.html#acb7438b5f344b6841e64b56100761783">coords::coord_point::xy</a></div><div class="ttdeci">constexpr auto xy() const</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00130">coordinates.h:130</a></div></div>
<div class="ttc" id="aclasseffect_html"><div class="ttname"><a href="classeffect.html">effect</a></div><div class="ttdef"><b>Definition:</b> <a href="effect_8h_source.html#l00160">effect.h:161</a></div></div>
<div class="ttc" id="aclasseffect_html_a118dd88810785bfbb8243af97a37d2ab"><div class="ttname"><a href="classeffect.html#a118dd88810785bfbb8243af97a37d2ab">effect::mod_duration</a></div><div class="ttdeci">void mod_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Mods the duration, capping at max_duration if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00821">effect.cpp:821</a></div></div>
<div class="ttc" id="aclasseffect_html_a34c766f51dc0f89ebdab09c344bb506b"><div class="ttname"><a href="classeffect.html#a34c766f51dc0f89ebdab09c344bb506b">effect::get_duration</a></div><div class="ttdeci">time_duration get_duration() const</div><div class="ttdoc">Returns the remaining duration of an effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00797">effect.cpp:797</a></div></div>
<div class="ttc" id="aclasseffect_html_a39ebd2ec5b2faacde7483e0c07240baa"><div class="ttname"><a href="classeffect.html#a39ebd2ec5b2faacde7483e0c07240baa">effect::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Returns true if the effect is the result of effect(), ie.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00553">effect.cpp:553</a></div></div>
<div class="ttc" id="aclasseffect_html_a40265c904a684396b45a347239e38782"><div class="ttname"><a href="classeffect.html#a40265c904a684396b45a347239e38782">effect::set_duration</a></div><div class="ttdeci">void set_duration(const time_duration &amp;dur, bool alert=false)</div><div class="ttdoc">Sets the duration, capping at max_duration if it exists.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00805">effect.cpp:805</a></div></div>
<div class="ttc" id="aclasseffect_html_a56ecf13462b41c25cfb4113e411fba03"><div class="ttname"><a href="classeffect.html#a56ecf13462b41c25cfb4113e411fba03">effect::get_sizing</a></div><div class="ttdeci">bool get_sizing(const std::string &amp;arg) const</div><div class="ttdoc">Returns true if the given modifier type's trigger chance is affected by size mutations.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01021">effect.cpp:1021</a></div></div>
<div class="ttc" id="aclasseffect_html_a5a6272c8dc31c122bd1cda9f0356b40f"><div class="ttname"><a href="classeffect.html#a5a6272c8dc31c122bd1cda9f0356b40f">effect::get_harmful_cough</a></div><div class="ttdeci">bool get_harmful_cough() const</div><div class="ttdoc">Returns true if the coughs caused by an effect can harm the player directly.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01199">effect.cpp:1199</a></div></div>
<div class="ttc" id="aclasseffect_html_a7dfb7bc5b13d6720a94d3f76fbc63fda"><div class="ttname"><a href="classeffect.html#a7dfb7bc5b13d6720a94d3f76fbc63fda">effect::get_mod</a></div><div class="ttdeci">int get_mod(std::string arg, bool reduced=false) const</div><div class="ttdoc">Returns the matching modifier type from an effect, used for getting actual effect effects.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00910">effect.cpp:910</a></div></div>
<div class="ttc" id="aclasseffect_html_a82743f90762e7ad1d091f7c6b27e0ab8"><div class="ttname"><a href="classeffect.html#a82743f90762e7ad1d091f7c6b27e0ab8">effect::get_max_val</a></div><div class="ttdeci">int get_max_val(std::string arg, bool reduced=false) const</div><div class="ttdoc">Returns the maximum value of a modifier type that get_mod() and get_amount() will push the player to.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01006">effect.cpp:1006</a></div></div>
<div class="ttc" id="aclasseffect_html_a8ac5789a9251428bfcb46409c293e7b6"><div class="ttname"><a href="classeffect.html#a8ac5789a9251428bfcb46409c293e7b6">effect::get_addict_mod</a></div><div class="ttdeci">double get_addict_mod(const std::string &amp;arg, int addict_level) const</div><div class="ttdoc">Returns the modifier caused by addictions.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01185">effect.cpp:1185</a></div></div>
<div class="ttc" id="aclasseffect_html_aae8437df1fdd1915880964e91346df63"><div class="ttname"><a href="classeffect.html#aae8437df1fdd1915880964e91346df63">effect::get_amount</a></div><div class="ttdeci">int get_amount(std::string arg, bool reduced=false) const</div><div class="ttdoc">Returns the amount of a modifier type applied when a new effect is first added.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00974">effect.cpp:974</a></div></div>
<div class="ttc" id="aclasseffect_html_ab1dad45bd256eb67742ea534365b966d"><div class="ttname"><a href="classeffect.html#ab1dad45bd256eb67742ea534365b966d">effect::get_miss_msgs</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; std::string, int &gt; &gt; get_miss_msgs() const</div><div class="ttdoc">Returns a vector of the miss message messages and chances for use in add_miss_reason() while the effe...</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01216">effect.cpp:1216</a></div></div>
<div class="ttc" id="aclasseffect_html_ab4bef16d15bbb8c8cd36d8a0432fbbb8"><div class="ttname"><a href="classeffect.html#ab4bef16d15bbb8c8cd36d8a0432fbbb8">effect::get_bp</a></div><div class="ttdeci">const bodypart_str_id &amp; get_bp() const</div><div class="ttdoc">Returns the targeted body_part of the effect.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00835">effect.cpp:835</a></div></div>
<div class="ttc" id="aclasseffect_html_ad1bab370fdf9054a532199c3a0dc0cae"><div class="ttname"><a href="classeffect.html#ad1bab370fdf9054a532199c3a0dc0cae">effect::activated</a></div><div class="ttdeci">bool activated(const time_point &amp;when, std::string arg, int val, bool reduced=false, double mod=1) const</div><div class="ttdoc">Checks to see if a given modifier type can activate, and performs any rolls required to do so.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l01108">effect.cpp:1108</a></div></div>
<div class="ttc" id="aclasseffect_html_ad7c6b77f6a030f65634121d539161c63"><div class="ttname"><a href="classeffect.html#ad7c6b77f6a030f65634121d539161c63">effect::get_min_val</a></div><div class="ttdeci">int get_min_val(std::string arg, bool reduced=false) const</div><div class="ttdoc">Returns the minimum value of a modifier type that get_mod() and get_amount() will push the player to.</div><div class="ttdef"><b>Definition:</b> <a href="effect_8cpp_source.html#l00991">effect.cpp:991</a></div></div>
<div class="ttc" id="aclassint__id_html"><div class="ttname"><a href="classint__id.html">int_id</a></div><div class="ttdoc">Just like the string_id, this is a wrapper for int based identifiers.</div><div class="ttdef"><b>Definition:</b> <a href="int__id_8h_source.html#l00019">int_id.h:20</a></div></div>
<div class="ttc" id="aclassinventory_html_a1ea0a054f11675831cef03a936bd5813"><div class="ttname"><a href="classinventory.html#a1ea0a054f11675831cef03a936bd5813">inventory::active_items</a></div><div class="ttdeci">std::vector&lt; item * &gt; active_items()</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l01089">inventory.cpp:1089</a></div></div>
<div class="ttc" id="aclassinventory_html_a3327fb977cf0d264d61e708527f0d2c0"><div class="ttname"><a href="classinventory.html#a3327fb977cf0d264d61e708527f0d2c0">inventory::find_item</a></div><div class="ttdeci">const item &amp; find_item(int position) const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00800">inventory.cpp:800</a></div></div>
<div class="ttc" id="aclassinventory_html_a36e4b99300e1fe64920ce52911c04127"><div class="ttname"><a href="classinventory.html#a36e4b99300e1fe64920ce52911c04127">inventory::remove_item</a></div><div class="ttdeci">item remove_item(const item *it)</div><div class="ttdoc">Remove a specific item from the inventory.</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00718">inventory.cpp:718</a></div></div>
<div class="ttc" id="aclassinventory_html_a51a62ddae83430e06da3c08d5b3fd5e4"><div class="ttname"><a href="classinventory.html#a51a62ddae83430e06da3c08d5b3fd5e4">inventory::size</a></div><div class="ttdeci">size_t size() const</div><div class="ttdef"><b>Definition:</b> <a href="inventory_8cpp_source.html#l00167">inventory.cpp:167</a></div></div>
<div class="ttc" id="aclassitem_html"><div class="ttname"><a href="classitem.html">item</a></div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l00176">item.h:177</a></div></div>
<div class="ttc" id="aclassitem_html_a22d1f85c07bab6621bbd16d301b22bbf"><div class="ttname"><a href="classitem.html#a22d1f85c07bab6621bbd16d301b22bbf">item::needs_processing</a></div><div class="ttdeci">bool needs_processing() const</div><div class="ttdoc">Whether the item should be processed (by calling process).</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08822">item.cpp:8822</a></div></div>
<div class="ttc" id="aclassitem_html_a26c025fd4909bd31c8e91ed87905507b"><div class="ttname"><a href="classitem.html#a26c025fd4909bd31c8e91ed87905507b">item::ammo_remaining</a></div><div class="ttdeci">int ammo_remaining() const</div><div class="ttdoc">Quantity of ammunition currently loaded in tool, gun or auxiliary gunmod.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l07275">item.cpp:7275</a></div></div>
<div class="ttc" id="aclassitem_html_a36618e7473c8e261835fbe80c32a07bd"><div class="ttname"><a href="classitem.html#a36618e7473c8e261835fbe80c32a07bd">item::process</a></div><div class="ttdeci">bool process(player *carrier, const tripoint &amp;pos, bool activate, float insulation=1, temperature_flag flag=temperature_flag::TEMP_NORMAL)</div><div class="ttdoc">This is called once each turn.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l09483">item.cpp:9483</a></div></div>
<div class="ttc" id="aclassitem_html_a6bfb92ab5d41e0eb3a1da160fac71b0e"><div class="ttname"><a href="classitem.html#a6bfb92ab5d41e0eb3a1da160fac71b0e">item::charges</a></div><div class="ttdeci">int charges</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02196">item.h:2196</a></div></div>
<div class="ttc" id="aclassitem_html_a8121291f73e815bf37295babcb48c90c"><div class="ttname"><a href="classitem.html#a8121291f73e815bf37295babcb48c90c">item::process_relic</a></div><div class="ttdeci">void process_relic(Character *carrier)</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08997">item.cpp:8997</a></div></div>
<div class="ttc" id="aclassitem_html_aaa4ffcaf91f734206a25494d44c01004"><div class="ttname"><a href="classitem.html#aaa4ffcaf91f734206a25494d44c01004">item::process_artifact</a></div><div class="ttdeci">void process_artifact(player *carrier, const tripoint &amp;pos)</div><div class="ttdoc">Process and apply artifact effects.</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l08955">item.cpp:8955</a></div></div>
<div class="ttc" id="aclassitem_html_aaa5aeb6f838927babb10ede535cf2a73"><div class="ttname"><a href="classitem.html#aaa5aeb6f838927babb10ede535cf2a73">item::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag) const</div><div class="ttdef"><b>Definition:</b> <a href="item_8cpp_source.html#l05241">item.cpp:5241</a></div></div>
<div class="ttc" id="aclassitem_html_ac1d2c4c33b8a499812f3437cb2fad742"><div class="ttname"><a href="classitem.html#ac1d2c4c33b8a499812f3437cb2fad742">item::type</a></div><div class="ttdeci">const itype * type</div><div class="ttdef"><b>Definition:</b> <a href="item_8h_source.html#l02157">item.h:2157</a></div></div>
<div class="ttc" id="aclassmap_html"><div class="ttname"><a href="classmap.html">map</a></div><div class="ttdoc">Manage and cache data about a part of the map.</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00383">map.h:384</a></div></div>
<div class="ttc" id="aclassmap_html_a27e22f0999ea03eff18babc48643c568"><div class="ttname"><a href="classmap.html#a27e22f0999ea03eff18babc48643c568">map::has_flag</a></div><div class="ttdeci">bool has_flag(const std::string &amp;flag, const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l02293">map.cpp:2293</a></div></div>
<div class="ttc" id="aclassmap_html_a30ccb67ed3651d350f2caf214e0b5176"><div class="ttname"><a href="classmap.html#a30ccb67ed3651d350f2caf214e0b5176">map::tr_at</a></div><div class="ttdeci">const trap &amp; tr_at(const tripoint &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05139">map.cpp:5139</a></div></div>
<div class="ttc" id="aclassmap_html_a395a729a4b954692cf08d13e1d32f73e"><div class="ttname"><a href="classmap.html#a395a729a4b954692cf08d13e1d32f73e">map::field_at</a></div><div class="ttdeci">const field &amp; field_at(const tripoint &amp;p) const</div><div class="ttdoc">Get the fields that are here.</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l05301">map.cpp:5301</a></div></div>
<div class="ttc" id="aclassmap_html_a4f5f812d7e89a998429958573a4c340f"><div class="ttname"><a href="classmap.html#a4f5f812d7e89a998429958573a4c340f">map::points_in_radius</a></div><div class="ttdeci">tripoint_range&lt; tripoint &gt; points_in_radius(const tripoint &amp;center, size_t radius, size_t radiusz=0) const</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l08619">map.cpp:8619</a></div></div>
<div class="ttc" id="aclassmap_html_ac1c02ce0648fe07137b86c84fc72f5de"><div class="ttname"><a href="classmap.html#ac1c02ce0648fe07137b86c84fc72f5de">map::get_vehicles</a></div><div class="ttdeci">VehicleList get_vehicles()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00237">map.cpp:237</a></div></div>
<div class="ttc" id="aclassmartialart_html_a755de10d91b0292258efb0ab55b80cbc"><div class="ttname"><a href="classmartialart.html#a755de10d91b0292258efb0ab55b80cbc">martialart::name</a></div><div class="ttdeci">translation name</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8h_source.html#l00243">martialarts.h:243</a></div></div>
<div class="ttc" id="aclassovermapbuffer_html_aac8249284c8cd4887867cbc47d84ff57"><div class="ttname"><a href="classovermapbuffer.html#aac8249284c8cd4887867cbc47d84ff57">overmapbuffer::scent_at</a></div><div class="ttdeci">scent_trace scent_at(const tripoint_abs_omt &amp;pos)</div><div class="ttdoc">Method to retrieve the scent at a given location.</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00556">overmapbuffer.cpp:556</a></div></div>
<div class="ttc" id="aclassplayer__activity_html_a979cd5aca677ff30dcbb767d4a3980d2"><div class="ttname"><a href="classplayer__activity.html#a979cd5aca677ff30dcbb767d4a3980d2">player_activity::targets</a></div><div class="ttdeci">std::vector&lt; item_location &gt; targets</div><div class="ttdef"><b>Definition:</b> <a href="player__activity_8h_source.html#l00056">player_activity.h:56</a></div></div>
<div class="ttc" id="aclassplayer_html_aa57c61de29a5e410c100aee07798b9b1"><div class="ttname"><a href="classplayer.html#aa57c61de29a5e410c100aee07798b9b1">player::practice</a></div><div class="ttdeci">void practice(const skill_id &amp;id, int amount, int cap=99, bool suppress_warning=false)</div><div class="ttdoc">This handles giving xp for a skill.</div><div class="ttdef"><b>Definition:</b> <a href="player_8cpp_source.html#l02082">player.cpp:2082</a></div></div>
<div class="ttc" id="aclassscent__trace_html_afaae5b5e3a84f4a1d71182c000303018"><div class="ttname"><a href="classscent__trace.html#afaae5b5e3a84f4a1d71182c000303018">scent_trace::creation_time</a></div><div class="ttdeci">time_point creation_time</div><div class="ttdef"><b>Definition:</b> <a href="overmap__types_8h_source.html#l00015">overmap_types.h:15</a></div></div>
<div class="ttc" id="aclassstring__id_html"><div class="ttname"><a href="classstring__id.html">string_id&lt; mutation_branch &gt;</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00058">achievement.cpp:58</a></div></div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
<div class="ttc" id="aclasstime__duration_html_a0f7145f4fc4c09defbaf25f468e4e54a"><div class="ttname"><a href="classtime__duration.html#a0f7145f4fc4c09defbaf25f468e4e54a">time_duration::from_turns</a></div><div class="ttdeci">static constexpr time_duration from_turns(const T t)</div><div class="ttdoc">Named constructors to get a duration representing a multiple of the named time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00204">calendar.h:204</a></div></div>
<div class="ttc" id="aclasstime__point_html"><div class="ttname"><a href="classtime__point.html">time_point</a></div><div class="ttdoc">A point in the game time.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00430">calendar.h:431</a></div></div>
<div class="ttc" id="aclassvehicle_html"><div class="ttname"><a href="classvehicle.html">vehicle</a></div><div class="ttdoc">A vehicle as a whole with all its components.</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l00674">vehicle.h:675</a></div></div>
<div class="ttc" id="aclassvehicle_html_a341515426011486c265d016c35f84de6"><div class="ttname"><a href="classvehicle.html#a341515426011486c265d016c35f84de6">vehicle::player_in_control</a></div><div class="ttdeci">bool player_in_control(const Character &amp;p) const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l00277">vehicle.cpp:277</a></div></div>
<div class="ttc" id="aclassvehicle_html_a4d83e86fe57ec6126893a68f68c3c304"><div class="ttname"><a href="classvehicle.html#a4d83e86fe57ec6126893a68f68c3c304">vehicle::velocity</a></div><div class="ttdeci">int velocity</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8h_source.html#l01918">vehicle.h:1918</a></div></div>
<div class="ttc" id="aclassvehicle_html_a5a7d83716bf73d4b58d265b626872d01"><div class="ttname"><a href="classvehicle.html#a5a7d83716bf73d4b58d265b626872d01">vehicle::total_mass</a></div><div class="ttdeci">units::mass total_mass() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03306">vehicle.cpp:3306</a></div></div>
<div class="ttc" id="aclassvehicle_html_aec9a1faa6740b681867d48878e37d7bb"><div class="ttname"><a href="classvehicle.html#aec9a1faa6740b681867d48878e37d7bb">vehicle::is_moving</a></div><div class="ttdeci">bool is_moving() const</div><div class="ttdef"><b>Definition:</b> <a href="vehicle_8cpp_source.html#l03544">vehicle.cpp:3544</a></div></div>
<div class="ttc" id="aclassvisitable_html_a0a76a71d6a905414cc81236e86a7e649"><div class="ttname"><a href="classvisitable.html#a0a76a71d6a905414cc81236e86a7e649">visitable&lt; Character &gt;::visit_items</a></div><div class="ttdeci">VisitResponse visit_items(const std::function&lt; VisitResponse(item *, item *)&gt; &amp;func)</div><div class="ttdoc">Traverses this object and any child items contained using a visitor pattern.</div><div class="ttdef"><b>Definition:</b> <a href="visitable_8cpp_source.html#l00037">visitable.cpp:422</a></div></div>
<div class="ttc" id="acoordinates_8h_html_a00be0762df7b46da965e55caffac53db"><div class="ttname"><a href="coordinates_8h.html#a00be0762df7b46da965e55caffac53db">direction_from</a></div><div class="ttdeci">direction direction_from(const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc1, const coords::coord_point&lt; Point, Origin, Scale &gt; &amp;loc2)</div><div class="ttdef"><b>Definition:</b> <a href="coordinates_8h_source.html#l00540">coordinates.h:540</a></div></div>
<div class="ttc" id="acreature_8h_html"><div class="ttname"><a href="creature_8h.html">creature.h</a></div></div>
<div class="ttc" id="acreature_8h_html_a94151e401c177b20ea9b8bcadf74f592a50d9f673ed0348953b2715fa33683791"><div class="ttname"><a href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a50d9f673ed0348953b2715fa33683791">MS_LARGE</a></div><div class="ttdeci">@ MS_LARGE</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00061">creature.h:61</a></div></div>
<div class="ttc" id="acreature_8h_html_a94151e401c177b20ea9b8bcadf74f592a75a0e62060c8f624b2c71038a5a77ae9"><div class="ttname"><a href="creature_8h.html#a94151e401c177b20ea9b8bcadf74f592a75a0e62060c8f624b2c71038a5a77ae9">MS_HUGE</a></div><div class="ttdeci">@ MS_HUGE</div><div class="ttdef"><b>Definition:</b> <a href="creature_8h_source.html#l00062">creature.h:62</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea2f644bab8f796b847285eab073040f10">m_good</a></div><div class="ttdeci">@ m_good</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00260">enums.h:260</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea5d3734a51686ceb1848704dd277dfc7f">m_info</a></div><div class="ttdeci">@ m_info</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00265">enums.h:265</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096ea72e7b82d57a6df0d4263c2043139b1b1">m_bad</a></div><div class="ttdeci">@ m_bad</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00261">enums.h:261</a></div></div>
<div class="ttc" id="aenums_8h_html_a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687"><div class="ttname"><a href="enums_8h.html#a3baf36d700701401b6baf94db93d096eaed9222dd268c0a08567f6c9081b3e687">m_warning</a></div><div class="ttdeci">@ m_warning</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00264">enums.h:264</a></div></div>
<div class="ttc" id="aenums_8h_html_abbe6432d5446acdbb3c80999ba5a4621a426bf709ed74da6db746b842da5a58d7"><div class="ttname"><a href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621a426bf709ed74da6db746b842da5a58d7">AEP_SPEED_UP</a></div><div class="ttdeci">@ AEP_SPEED_UP</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00107">enums.h:107</a></div></div>
<div class="ttc" id="aenums_8h_html_abbe6432d5446acdbb3c80999ba5a4621af16c035c812c026d523bed660201249c"><div class="ttname"><a href="enums_8h.html#abbe6432d5446acdbb3c80999ba5a4621af16c035c812c026d523bed660201249c">AEP_SPEED_DOWN</a></div><div class="ttdeci">@ AEP_SPEED_DOWN</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00137">enums.h:137</a></div></div>
<div class="ttc" id="aenums_8h_html_ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab"><div class="ttname"><a href="enums_8h.html#ac7c2392f800a8be2feb093ef5fe48d40af3725cafa78eb43cc647b405bb6ecfab">type</a></div><div class="ttdeci">@ type</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00075">enums.h:75</a></div></div>
<div class="ttc" id="afmtlib__core_8h_html_a654171af6def7abe5a92dec0ed1e1179"><div class="ttname"><a href="fmtlib__core_8h.html#a654171af6def7abe5a92dec0ed1e1179">arg</a></div><div class="ttdeci">detail::named_arg&lt; Char, T &gt; arg(const Char *name, const T &amp;arg)</div><div class="ttdoc">\rst Returns a named argument to be used in a formatting function.</div><div class="ttdef"><b>Definition:</b> <a href="fmtlib__core_8h_source.html#l01860">fmtlib_core.h:1860</a></div></div>
<div class="ttc" id="agame_8cpp_html_abeb98e93502d73818b4a73fabe191bc1"><div class="ttname"><a href="game_8cpp.html#abeb98e93502d73818b4a73fabe191bc1">g</a></div><div class="ttdeci">std::unique_ptr&lt; game &gt; g</div><div class="ttdef"><b>Definition:</b> <a href="game_8cpp_source.html#l00279">game.cpp:279</a></div></div>
<div class="ttc" id="agame_8h_html"><div class="ttname"><a href="game_8h.html">game.h</a></div></div>
<div class="ttc" id="agame__constants_8h_html_a8226e8a134603e5bc06df05efd13d8d1"><div class="ttname"><a href="game__constants_8h.html#a8226e8a134603e5bc06df05efd13d8d1">MAX_RECOIL</a></div><div class="ttdeci">constexpr double MAX_RECOIL</div><div class="ttdef"><b>Definition:</b> <a href="game__constants_8h_source.html#l00127">game_constants.h:127</a></div></div>
<div class="ttc" id="agroup__Weather_html_ga956008349f0006ba8d76360e8b2d5283"><div class="ttname"><a href="group__Weather.html#ga956008349f0006ba8d76360e8b2d5283">weather_manager::get_temperature</a></div><div class="ttdeci">int get_temperature(const tripoint &amp;location) const</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01107">weather.cpp:1107</a></div></div>
<div class="ttc" id="agroup__Weather_html_gaa7b33196bf530c8b26654a0adf355165"><div class="ttname"><a href="group__Weather.html#gaa7b33196bf530c8b26654a0adf355165">get_weather</a></div><div class="ttdeci">weather_manager &amp; get_weather()</div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l00064">weather.cpp:64</a></div></div>
<div class="ttc" id="ahandle__liquid_8h_html"><div class="ttname"><a href="handle__liquid_8h.html">handle_liquid.h</a></div></div>
<div class="ttc" id="aitype_8h_html"><div class="ttname"><a href="itype_8h.html">itype.h</a></div></div>
<div class="ttc" id="aline_8cpp_html_a19634ed59e09da9312d6fa110a38539c"><div class="ttname"><a href="line_8cpp.html#a19634ed59e09da9312d6fa110a38539c">direction_name</a></div><div class="ttdeci">std::string direction_name(const direction dir)</div><div class="ttdef"><b>Definition:</b> <a href="line_8cpp_source.html#l00528">line.cpp:528</a></div></div>
<div class="ttc" id="aline_8h_html_a3621d2006812bd84f3ed6999b38f90a3"><div class="ttname"><a href="line_8h.html#a3621d2006812bd84f3ed6999b38f90a3">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="line_8h_source.html#l00039">line.h:39</a></div></div>
<div class="ttc" id="amagic__enchantment_8h_html"><div class="ttname"><a href="magic__enchantment_8h.html">magic_enchantment.h</a></div></div>
<div class="ttc" id="amake__static_8h_html"><div class="ttname"><a href="make__static_8h.html">make_static.h</a></div></div>
<div class="ttc" id="amap_8cpp_html_acb0b34be6e497bdd2f9f40ae6929d562"><div class="ttname"><a href="map_8cpp.html#acb0b34be6e497bdd2f9f40ae6929d562">get_map</a></div><div class="ttdeci">map &amp; get_map()</div><div class="ttdef"><b>Definition:</b> <a href="map_8cpp_source.html#l00146">map.cpp:146</a></div></div>
<div class="ttc" id="amap_8h_html_ae705edb5469cf2668ca5bc3297d75ebb"><div class="ttname"><a href="map_8h.html#ae705edb5469cf2668ca5bc3297d75ebb">VehicleList</a></div><div class="ttdeci">std::vector&lt; wrapped_vehicle &gt; VehicleList</div><div class="ttdef"><b>Definition:</b> <a href="map_8h_source.html#l00085">map.h:85</a></div></div>
<div class="ttc" id="amap__iterator_8h_html"><div class="ttname"><a href="map__iterator_8h.html">map_iterator.h</a></div></div>
<div class="ttc" id="amapdata_8h_html_aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69"><div class="ttname"><a href="mapdata_8h.html#aa04d037303ea30193f7cf0cd82304258aeb9fcbd752ad2c632ccc4383c5641b69">TFLAG_DEEP_WATER</a></div><div class="ttdeci">@ TFLAG_DEEP_WATER</div><div class="ttdef"><b>Definition:</b> <a href="mapdata_8h_source.html#l00301">mapdata.h:301</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_a63233aaf936955f4df6542d8f786116f"><div class="ttname"><a href="martialarts_8cpp.html#a63233aaf936955f4df6542d8f786116f">autolearn_martialart_types</a></div><div class="ttdeci">std::vector&lt; matype_id &gt; autolearn_martialart_types()</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l00329">martialarts.cpp:329</a></div></div>
<div class="ttc" id="amartialarts_8cpp_html_ab0bd6bdef185fe017fcb2b8bfada66c0"><div class="ttname"><a href="martialarts_8cpp.html#ab0bd6bdef185fe017fcb2b8bfada66c0">can_autolearn_martial_art</a></div><div class="ttdeci">bool can_autolearn_martial_art(const Character &amp;who, const matype_id &amp;ma_id)</div><div class="ttdoc">Returns true if the character can learn the entered martial art.</div><div class="ttdef"><b>Definition:</b> <a href="martialarts_8cpp_source.html#l01215">martialarts.cpp:1215</a></div></div>
<div class="ttc" id="amemorial__logger_8cpp_html_ab4f7bfd1861799c55e2d7fbf2717c962"><div class="ttname"><a href="memorial__logger_8cpp.html#ab4f7bfd1861799c55e2d7fbf2717c962">tr_sinkhole</a></div><div class="ttdeci">static const trap_str_id tr_sinkhole(&quot;tr_sinkhole&quot;)</div></div>
<div class="ttc" id="amorale_8h_html"><div class="ttname"><a href="morale_8h.html">morale.h</a></div></div>
<div class="ttc" id="amutation_8h_html"><div class="ttname"><a href="mutation_8h.html">mutation.h</a></div></div>
<div class="ttc" id="anamespacecalendar_html_a356df28513f4d655ae35c312ab6e7d55"><div class="ttname"><a href="namespacecalendar.html#a356df28513f4d655ae35c312ab6e7d55">calendar::once_every</a></div><div class="ttdeci">bool once_every(const time_duration &amp;event_frequency)</div><div class="ttdoc">Predicate to handle rate-limiting.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00490">calendar.cpp:490</a></div></div>
<div class="ttc" id="anamespacecalendar_html_ae15fcbf1c971589eb49c1a657fb6a580"><div class="ttname"><a href="namespacecalendar.html#ae15fcbf1c971589eb49c1a657fb6a580">calendar::turn</a></div><div class="ttdeci">time_point turn</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8cpp_source.html#l00036">calendar.cpp:36</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_a69e2f87b5391a5aec01672c98cdfb57c"><div class="ttname"><a href="namespacecharacter__effects.html#a69e2f87b5391a5aec01672c98cdfb57c">character_effects::get_thirst_speed_penalty</a></div><div class="ttdeci">int get_thirst_speed_penalty(int thirst)</div><div class="ttdoc">Returns the penalty to speed from thirst.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00089">character_effects.cpp:89</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_a6d9d51c28a272ae26ed493d1471cf072"><div class="ttname"><a href="namespacecharacter__effects.html#a6d9d51c28a272ae26ed493d1471cf072">character_effects::get_kcal_speed_penalty</a></div><div class="ttdeci">int get_kcal_speed_penalty(float kcal_percent)</div><div class="ttdoc">Returns the penalty to speed from starvation.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00073">character_effects.cpp:73</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_a8cb6340e4be4183a0afdaaed94697f48"><div class="ttname"><a href="namespacecharacter__effects.html#a8cb6340e4be4183a0afdaaed94697f48">character_effects::calc_focus_change</a></div><div class="ttdeci">int calc_focus_change(const Character &amp;who)</div><div class="ttdoc">Calculates actual focus gain/loss value from focus equilibrium.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00248">character_effects.cpp:248</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_a8f18c1c2508870515d5c36a3ea255498"><div class="ttname"><a href="namespacecharacter__effects.html#a8f18c1c2508870515d5c36a3ea255498">character_effects::get_pain_penalty</a></div><div class="ttdeci">stat_mod get_pain_penalty(const Character &amp;ch)</div><div class="ttdoc">Returns the effect of pain on stats.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00040">character_effects.cpp:40</a></div></div>
<div class="ttc" id="anamespacecharacter__effects_html_ad01a6f352e0abd8cbedbc36d90b766b7"><div class="ttname"><a href="namespacecharacter__effects.html#ad01a6f352e0abd8cbedbc36d90b766b7">character_effects::vomit_mod</a></div><div class="ttdeci">double vomit_mod(const Character &amp;ch)</div><div class="ttdoc">Returns the modifier value used for vomiting effects.</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8cpp_source.html#l00117">character_effects.cpp:117</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html"><div class="ttname"><a href="namespacecharacter__funcs.html">character_funcs</a></div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00056">character_functions.cpp:57</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a53b7fa49a536bb361b3a6b2ef669bea4"><div class="ttname"><a href="namespacecharacter__funcs.html#a53b7fa49a536bb361b3a6b2ef669bea4">character_funcs::search_surroundings</a></div><div class="ttdeci">void search_surroundings(Character &amp;who)</div><div class="ttdoc">Search surrounding squares for traps (and maybe other things in the future).</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l01061">character_turn.cpp:1061</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a641323aa837163a8a245868a5043035a"><div class="ttname"><a href="namespacecharacter__funcs.html#a641323aa837163a8a245868a5043035a">character_funcs::update_mental_focus</a></div><div class="ttdeci">void update_mental_focus(Character &amp;who)</div><div class="ttdoc">Uses calc_focus_change to update the player's current focus.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l01104">character_turn.cpp:1104</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a8b6391933c53c0461e4e64fa9930d472"><div class="ttname"><a href="namespacecharacter__funcs.html#a8b6391933c53c0461e4e64fa9930d472">character_funcs::do_pause</a></div><div class="ttdeci">void do_pause(Character &amp;who)</div><div class="ttdoc">Do pause action ('.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00967">character_turn.cpp:967</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_a95d2e2c3c197301f7e9c3e4608e912eb"><div class="ttname"><a href="namespacecharacter__funcs.html#a95d2e2c3c197301f7e9c3e4608e912eb">character_funcs::add_pain_msg</a></div><div class="ttdeci">void add_pain_msg(const Character &amp;who, int val, body_part bp)</div><div class="ttdoc">Add message describing how character feels pain.</div><div class="ttdef"><b>Definition:</b> <a href="character__functions_8cpp_source.html#l00436">character_functions.cpp:436</a></div></div>
<div class="ttc" id="anamespacecharacter__funcs_html_afa9463f9c384d1e193bdbc8dc337f8d3"><div class="ttname"><a href="namespacecharacter__funcs.html#afa9463f9c384d1e193bdbc8dc337f8d3">character_funcs::update_body_wetness</a></div><div class="ttdeci">void update_body_wetness(Character &amp;who, const w_point &amp;weather)</div><div class="ttdoc">Maintains body wetness and handles the rate at which the player dries.</div><div class="ttdef"><b>Definition:</b> <a href="character__turn_8cpp_source.html#l00897">character_turn.cpp:897</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998">enchant_vals::mod</a></div><div class="ttdeci">mod</div><div class="ttdef"><b>Definition:</b> <a href="magic__enchantment_8h_source.html#l00026">magic_enchantment.h:26</a></div></div>
<div class="ttc" id="anamespaceenchant__vals_html_acd6a6ebb27f9ecb82b3bce1d3aef2998a65a59338b99aee6a451e86b17b462b5a"><div class="ttname"><a href="namespaceenchant__vals.html#acd6a6ebb27f9ecb82b3bce1d3aef2998a65a59338b99aee6a451e86b17b462b5a">enchant_vals::mod::SPEED</a></div><div class="ttdeci">@ SPEED</div></div>
<div class="ttc" id="anamespaceunits_html_a375816854bc926ebda4d9240e7d6cf64"><div class="ttname"><a href="namespaceunits.html#a375816854bc926ebda4d9240e7d6cf64">units::to_fahrenheit</a></div><div class="ttdeci">constexpr value_type to_fahrenheit(const quantity&lt; value_type, temperature_in_millidegree_celsius_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__temperature_8h_source.html#l00124">units_temperature.h:124</a></div></div>
<div class="ttc" id="anamespaceunits_html_a54442f1523294bc7b9946662beed96e6"><div class="ttname"><a href="namespaceunits.html#a54442f1523294bc7b9946662beed96e6">units::to_kilojoule</a></div><div class="ttdeci">constexpr value_type to_kilojoule(const quantity&lt; value_type, energy_in_joule_tag &gt; &amp;v)</div><div class="ttdef"><b>Definition:</b> <a href="units__energy_8h_source.html#l00046">units_energy.h:46</a></div></div>
<div class="ttc" id="anamespaceweather_html"><div class="ttname"><a href="namespaceweather.html">weather</a></div><div class="ttdef"><b>Definition:</b> <a href="weather_8cpp_source.html#l01150">weather.cpp:1151</a></div></div>
<div class="ttc" id="aovermapbuffer_8cpp_html_ab3cf8344ec3e473f9ce96a33dc3425af"><div class="ttname"><a href="overmapbuffer_8cpp.html#ab3cf8344ec3e473f9ce96a33dc3425af">overmap_buffer</a></div><div class="ttdeci">overmapbuffer overmap_buffer</div><div class="ttdef"><b>Definition:</b> <a href="overmapbuffer_8cpp_source.html#l00047">overmapbuffer.cpp:45</a></div></div>
<div class="ttc" id="aovermapbuffer_8h_html"><div class="ttname"><a href="overmapbuffer_8h.html">overmapbuffer.h</a></div></div>
<div class="ttc" id="aplayer_8h_html"><div class="ttname"><a href="player_8h.html">player.h</a></div></div>
<div class="ttc" id="apldata_8h_html_abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b"><div class="ttname"><a href="pldata_8h.html#abffc2f52fa6cfeac2e388c6de0ac295bae84226181e271c2b3c7afb435e77dd3b">add_type::PKILLER</a></div><div class="ttdeci">@ PKILLER</div></div>
<div class="ttc" id="arng_8cpp_html_aad28bdad07401a34ecf9912708f8b750"><div class="ttname"><a href="rng_8cpp.html#aad28bdad07401a34ecf9912708f8b750">one_in</a></div><div class="ttdeci">bool one_in(int chance)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cpp_source.html#l00065">rng.cpp:65</a></div></div>
<div class="ttc" id="arng_8h_html"><div class="ttname"><a href="rng_8h.html">rng.h</a></div></div>
<div class="ttc" id="astructbionic_html"><div class="ttname"><a href="structbionic.html">bionic</a></div><div class="ttdef"><b>Definition:</b> <a href="bionics_8h_source.html#l00149">bionics.h:149</a></div></div>
<div class="ttc" id="astructbody__part__type_html_a90beb41f3dca18cdbe06f8483336c899"><div class="ttname"><a href="structbody__part__type.html#a90beb41f3dca18cdbe06f8483336c899">body_part_type::token</a></div><div class="ttdeci">body_part token</div><div class="ttdef"><b>Definition:</b> <a href="bodypart_8h_source.html#l00106">bodypart.h:106</a></div></div>
<div class="ttc" id="astructitype_html_abc2596bacfc718fba56ab8076bab5d6b"><div class="ttname"><a href="structitype.html#abc2596bacfc718fba56ab8076bab5d6b">itype::get_id</a></div><div class="ttdeci">const itype_id &amp; get_id() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01072">itype.h:1072</a></div></div>
<div class="ttc" id="astructitype_html_af238865694d157c403d1c7d0b74106dc"><div class="ttname"><a href="structitype.html#af238865694d157c403d1c7d0b74106dc">itype::maximum_charges</a></div><div class="ttdeci">int maximum_charges() const</div><div class="ttdef"><b>Definition:</b> <a href="itype_8h_source.html#l01103">itype.h:1103</a></div></div>
<div class="ttc" id="astructstat__mod_html"><div class="ttname"><a href="structstat__mod.html">stat_mod</a></div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00007">character_effects.h:7</a></div></div>
<div class="ttc" id="astructstat__mod_html_a02fc9b713716dc8d9c8643db09cd853a"><div class="ttname"><a href="structstat__mod.html#a02fc9b713716dc8d9c8643db09cd853a">stat_mod::intelligence</a></div><div class="ttdeci">int intelligence</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00010">character_effects.h:10</a></div></div>
<div class="ttc" id="astructstat__mod_html_a362a69480e76954ddece8a94f8fb41d9"><div class="ttname"><a href="structstat__mod.html#a362a69480e76954ddece8a94f8fb41d9">stat_mod::strength</a></div><div class="ttdeci">int strength</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00008">character_effects.h:8</a></div></div>
<div class="ttc" id="astructstat__mod_html_a68d43eb8265c5a2b6af57db10fd25ce8"><div class="ttname"><a href="structstat__mod.html#a68d43eb8265c5a2b6af57db10fd25ce8">stat_mod::dexterity</a></div><div class="ttdeci">int dexterity</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00009">character_effects.h:9</a></div></div>
<div class="ttc" id="astructstat__mod_html_ac7f82a251530a123d3c0127885e92818"><div class="ttname"><a href="structstat__mod.html#ac7f82a251530a123d3c0127885e92818">stat_mod::speed</a></div><div class="ttdeci">int speed</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00013">character_effects.h:13</a></div></div>
<div class="ttc" id="astructstat__mod_html_aedeca4241e12b9b4171454522d162baa"><div class="ttname"><a href="structstat__mod.html#aedeca4241e12b9b4171454522d162baa">stat_mod::perception</a></div><div class="ttdeci">int perception</div><div class="ttdef"><b>Definition:</b> <a href="character__effects_8h_source.html#l00011">character_effects.h:11</a></div></div>
<div class="ttc" id="astructtrap_html"><div class="ttname"><a href="structtrap.html">trap</a></div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00086">trap.h:86</a></div></div>
<div class="ttc" id="astructtrap_html_a01b0ef8443ac5ba4e7455880ca2dc44b"><div class="ttname"><a href="structtrap.html#a01b0ef8443ac5ba4e7455880ca2dc44b">trap::name</a></div><div class="ttdeci">std::string name() const</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00177">trap.cpp:177</a></div></div>
<div class="ttc" id="astructtrap_html_a1bd5955eae82045548ff8fc99a63edfc"><div class="ttname"><a href="structtrap.html#a1bd5955eae82045548ff8fc99a63edfc">trap::get_visibility</a></div><div class="ttdeci">int get_visibility() const</div><div class="ttdoc">How easy it is to spot the trap.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00133">trap.h:133</a></div></div>
<div class="ttc" id="astructtrap_html_a6a9ac96c5c81eb31093e049ffeac8b4f"><div class="ttname"><a href="structtrap.html#a6a9ac96c5c81eb31093e049ffeac8b4f">trap::is_null</a></div><div class="ttdeci">bool is_null() const</div><div class="ttdoc">Whether this is the null-traps, aka no trap at all.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00245">trap.cpp:245</a></div></div>
<div class="ttc" id="astructtrap_html_aafab5c450397fa7ea6430a9334c2859c"><div class="ttname"><a href="structtrap.html#aafab5c450397fa7ea6430a9334c2859c">trap::is_always_invisible</a></div><div class="ttdeci">bool is_always_invisible() const</div><div class="ttdoc">There are special always invisible traps.</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00127">trap.h:127</a></div></div>
<div class="ttc" id="astructtrap_html_ab2767aee5179ad23b3ad0b6b4b2415af"><div class="ttname"><a href="structtrap.html#ab2767aee5179ad23b3ad0b6b4b2415af">trap::loadid</a></div><div class="ttdeci">trap_id loadid</div><div class="ttdef"><b>Definition:</b> <a href="trap_8h_source.html#l00088">trap.h:88</a></div></div>
<div class="ttc" id="astructtrap_html_abeb5ff27f9f78475035f22aabdcfe834"><div class="ttname"><a href="structtrap.html#abeb5ff27f9f78475035f22aabdcfe834">trap::can_see</a></div><div class="ttdeci">bool can_see(const tripoint &amp;pos, const Character &amp;p) const</div><div class="ttdoc">Can player/npc p see this kind of trap, either by their memory (they known there is the trap) or by t...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00223">trap.cpp:223</a></div></div>
<div class="ttc" id="astructtrap_html_afefc8440f9684bc6694c3c14dc59a727"><div class="ttname"><a href="structtrap.html#afefc8440f9684bc6694c3c14dc59a727">trap::detect_trap</a></div><div class="ttdeci">bool detect_trap(const tripoint &amp;pos, const Character &amp;p) const</div><div class="ttdoc">Player has not yet seen the trap and returns the variable chance, at this moment, of whether the trap...</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00193">trap.cpp:193</a></div></div>
<div class="ttc" id="astructtripoint_html"><div class="ttname"><a href="structtripoint.html">tripoint</a></div><div class="ttdef"><b>Definition:</b> <a href="point_8h_source.html#l00147">point.h:147</a></div></div>
<div class="ttc" id="astructw__point_html"><div class="ttname"><a href="structw__point.html">w_point</a></div><div class="ttdef"><b>Definition:</b> <a href="weather__gen_8h_source.html#l00015">weather_gen.h:15</a></div></div>
<div class="ttc" id="asubmap_8h_html"><div class="ttname"><a href="submap_8h.html">submap.h</a></div></div>
<div class="ttc" id="atranslations_8h_html_aa829053017e23ef22d44dccecba63a34"><div class="ttname"><a href="translations_8h.html#aa829053017e23ef22d44dccecba63a34">_</a></div><div class="ttdeci">#define _(msg)</div><div class="ttdef"><b>Definition:</b> <a href="translations_8h_source.html#l00116">translations.h:116</a></div></div>
<div class="ttc" id="atrap_8cpp_html_abecb554db3424388894ab98bde179238"><div class="ttname"><a href="trap_8cpp.html#abecb554db3424388894ab98bde179238">tr_beartrap_buried</a></div><div class="ttdeci">trap_id tr_beartrap_buried</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00287">trap.cpp:287</a></div></div>
<div class="ttc" id="atrap_8cpp_html_ac666204330f19cb23e099f6870b8a1a4"><div class="ttname"><a href="trap_8cpp.html#ac666204330f19cb23e099f6870b8a1a4">tr_landmine_buried</a></div><div class="ttdeci">trap_id tr_landmine_buried</div><div class="ttdef"><b>Definition:</b> <a href="trap_8cpp_source.html#l00299">trap.cpp:299</a></div></div>
<div class="ttc" id="atrap_8h_html"><div class="ttname"><a href="trap_8h.html">trap.h</a></div></div>
<div class="ttc" id="aveh__type_8h_html"><div class="ttname"><a href="veh__type_8h.html">veh_type.h</a></div></div>
<div class="ttc" id="avehicle_8h_html"><div class="ttname"><a href="vehicle_8h.html">vehicle.h</a></div></div>
<div class="ttc" id="avisitable_8h_html_aa872f25fbac30cbf9e03c0153587613da47559fb833ff58321570e5e877b467f6"><div class="ttname"><a href="visitable_8h.html#aa872f25fbac30cbf9e03c0153587613da47559fb833ff58321570e5e877b467f6">VisitResponse::NEXT</a></div><div class="ttdeci">@ NEXT</div></div>
<div class="ttc" id="avpart__position_8h_html"><div class="ttname"><a href="vpart__position_8h.html">vpart_position.h</a></div></div>
<div class="ttc" id="aweather_8h_html"><div class="ttname"><a href="weather_8h.html">weather.h</a></div></div>
<div class="ttc" id="aweather_8h_html_a08fc0049be5212458556d07723095141"><div class="ttname"><a href="weather_8h.html#a08fc0049be5212458556d07723095141">BODYTEMP_COLD</a></div><div class="ttdeci">static constexpr int BODYTEMP_COLD</div><div class="ttdoc">Do not change this value, it is an arbitrary anchor on which other calculations are made.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00034">weather.h:34</a></div></div>
<div class="ttc" id="aweather_8h_html_a353f46362b1fd4a5eb685d5f7b271079"><div class="ttname"><a href="weather_8h.html#a353f46362b1fd4a5eb685d5f7b271079">BODYTEMP_SCORCHING</a></div><div class="ttdeci">static constexpr int BODYTEMP_SCORCHING</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00042">weather.h:42</a></div></div>
<div class="ttc" id="aweather_8h_html_a8220ffde7e07de66ab06bdeba262a2c3"><div class="ttname"><a href="weather_8h.html#a8220ffde7e07de66ab06bdeba262a2c3">BODYTEMP_VERY_HOT</a></div><div class="ttdeci">static constexpr int BODYTEMP_VERY_HOT</div><div class="ttdoc">Level 3 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00040">weather.h:40</a></div></div>
<div class="ttc" id="aweather_8h_html_aa69b18b562ac33b8688ca8e3e95a9205"><div class="ttname"><a href="weather_8h.html#aa69b18b562ac33b8688ca8e3e95a9205">BODYTEMP_HOT</a></div><div class="ttdeci">static constexpr int BODYTEMP_HOT</div><div class="ttdoc">Level 2 hotness.</div><div class="ttdef"><b>Definition:</b> <a href="weather_8h_source.html#l00038">weather.h:38</a></div></div>
<div class="ttc" id="aweather__gen_8h_html"><div class="ttname"><a href="weather__gen_8h.html">weather_gen.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="character__turn_8cpp.html">character_turn.cpp</a></li>
    <li class="footer">Generated on Sun Jan 8 2023 22:30:45 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
