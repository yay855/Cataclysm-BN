<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cataclysm BN: player_morale::morale_point Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Cataclysm BN
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classplayer__morale_1_1morale__point.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classplayer__morale_1_1morale__point-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">player_morale::morale_point Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae6259995290e53f34e329dd0f2ff77c1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ae6259995290e53f34e329dd0f2ff77c1">morale_point</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;<a class="el" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>=<a class="el" href="morale__types_8h.html#a410bc3642aea9b68979f71136829df3b">MORALE_NULL</a>, <a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a> <a class="el" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>=<a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a>(), int <a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>=0, int max_bonus=0, <a class="el" href="classtime__duration.html">time_duration</a> <a class="el" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>=6_minutes, <a class="el" href="classtime__duration.html">time_duration</a> <a class="el" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>=3_minutes, bool capped=false)</td></tr>
<tr class="separator:ae6259995290e53f34e329dd0f2ff77c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b232a7203867729e593dfa03b3b6168"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a7b232a7203867729e593dfa03b3b6168">deserialize</a> (<a class="el" href="classJsonIn.html">JsonIn</a> &amp;jsin)</td></tr>
<tr class="separator:a7b232a7203867729e593dfa03b3b6168"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63c7a703db4c64e104cf511df07e746"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ae63c7a703db4c64e104cf511df07e746">serialize</a> (<a class="el" href="classJsonOut.html">JsonOut</a> &amp;json) const</td></tr>
<tr class="separator:ae63c7a703db4c64e104cf511df07e746"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67df996b30c476463cab5e8480637e7c"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a67df996b30c476463cab5e8480637e7c">get_name</a> () const</td></tr>
<tr class="separator:a67df996b30c476463cab5e8480637e7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a> () const</td></tr>
<tr class="separator:a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67d0648bd3dbc7ab850f0b8056442bcd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a67d0648bd3dbc7ab850f0b8056442bcd">get_net_bonus</a> (const <a class="el" href="structmorale__mult.html">morale_mult</a> &amp;mult) const</td></tr>
<tr class="separator:a67d0648bd3dbc7ab850f0b8056442bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab777c9c77b12098e64d09625e1f1f082"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ab777c9c77b12098e64d09625e1f1f082">is_expired</a> () const</td></tr>
<tr class="separator:ab777c9c77b12098e64d09625e1f1f082"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74e16ced4b22de1de4359528ac24fa06"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a> () const</td></tr>
<tr class="separator:a74e16ced4b22de1de4359528ac24fa06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab636bc6bcb57db62f22d95b8c171a38b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ab636bc6bcb57db62f22d95b8c171a38b">type_matches</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;_type) const</td></tr>
<tr class="separator:ab636bc6bcb57db62f22d95b8c171a38b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bfdd368cbead26d40ffc1fca5573c0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a22bfdd368cbead26d40ffc1fca5573c0">matches</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;_type) const</td></tr>
<tr class="separator:a22bfdd368cbead26d40ffc1fca5573c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fea74c03c65593c8c94bb64bbb70611"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a9fea74c03c65593c8c94bb64bbb70611">matches</a> (const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;_type, const <a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a> &amp;_subtype) const</td></tr>
<tr class="separator:a9fea74c03c65593c8c94bb64bbb70611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf6d229f81bc75e89c7b53c90a9a6b5c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#abf6d229f81bc75e89c7b53c90a9a6b5c">matches</a> (const <a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a> &amp;mp) const</td></tr>
<tr class="separator:abf6d229f81bc75e89c7b53c90a9a6b5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9122249feb7739f785fa7b4ab35dbb8e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a9122249feb7739f785fa7b4ab35dbb8e">add</a> (int new_bonus, int new_max_bonus, <a class="el" href="classtime__duration.html">time_duration</a> new_duration, <a class="el" href="classtime__duration.html">time_duration</a> new_decay_start, bool new_cap)</td></tr>
<tr class="separator:a9122249feb7739f785fa7b4ab35dbb8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c641179a67888920e146a46dda5778"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a14c641179a67888920e146a46dda5778">decay</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;ticks=1_turns)</td></tr>
<tr class="separator:a14c641179a67888920e146a46dda5778"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34e615da345ee07df4d42a22e88a39c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a34e615da345ee07df4d42a22e88a39c8">set_percent_contribution</a> (double contribution)</td></tr>
<tr class="separator:a34e615da345ee07df4d42a22e88a39c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade62c18d4c3c5fca64a0fa4a5f2434d3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ade62c18d4c3c5fca64a0fa4a5f2434d3">get_percent_contribution</a> () const</td></tr>
<tr class="separator:ade62c18d4c3c5fca64a0fa4a5f2434d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6ef866718bc7fe64a156cb6da468a38e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a> (const <a class="el" href="classtime__duration.html">time_duration</a> &amp;current_time, const <a class="el" href="classtime__duration.html">time_duration</a> &amp;new_time, bool same_sign) const</td></tr>
<tr class="memdesc:a6ef866718bc7fe64a156cb6da468a38e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns either new_time or remaining time (which one is greater).  <a href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">More...</a><br /></td></tr>
<tr class="separator:a6ef866718bc7fe64a156cb6da468a38e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a> (int <a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>, int max_bonus, bool capped) const</td></tr>
<tr class="memdesc:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns normalized bonus if either max_bonus != 0 or capped == true.  <a href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">More...</a><br /></td></tr>
<tr class="separator:a20f5a91bffc2df46c97f0a370a0e4bd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac24a31282a48c2b42be125e3027728f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a></td></tr>
<tr class="separator:ac24a31282a48c2b42be125e3027728f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1016918cd3ae62a83197db7b8d209b4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a></td></tr>
<tr class="separator:af1016918cd3ae62a83197db7b8d209b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5d20f5a114b00574c674f8df34869c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> = 0</td></tr>
<tr class="separator:ac5d20f5a114b00574c674f8df34869c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d34b7300cb045d9d48c21d844ddda0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = 0_turns</td></tr>
<tr class="separator:a46d34b7300cb045d9d48c21d844ddda0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23775252200fae27e8e9b50c058009b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = 0_turns</td></tr>
<tr class="separator:a23775252200fae27e8e9b50c058009b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e68a4b48ad3c60b49c93e0e72edc77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> = 0_turns</td></tr>
<tr class="separator:a99e68a4b48ad3c60b49c93e0e72edc77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab454dabbae99a91652b1e0962ac4eeab"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a> = 0</td></tr>
<tr class="memdesc:ab454dabbae99a91652b1e0962ac4eeab"><td class="mdescLeft">&#160;</td><td class="mdescRight">this point's percent contribution to the total positive or total negative morale effect  <a href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">More...</a><br /></td></tr>
<tr class="separator:ab454dabbae99a91652b1e0962ac4eeab"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00144">144</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ae6259995290e53f34e329dd0f2ff77c1" name="ae6259995290e53f34e329dd0f2ff77c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6259995290e53f34e329dd0f2ff77c1">&#9670;&nbsp;</a></span>morale_point()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">player_morale::morale_point::morale_point </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>type</em> = <code><a class="el" href="morale__types_8h.html#a410bc3642aea9b68979f71136829df3b">MORALE_NULL</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a>&#160;</td>
          <td class="paramname"><em>subtype</em> = <code><a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bonus</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_bonus</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>duration</em> = <code>6_minutes</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>decay_start</em> = <code>3_minutes</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>capped</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00147">147</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>
<div class="fragment"><div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>                                          :</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> ),</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a> ),</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>( <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a>, max_bonus, capped ) ),</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>( std::max( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>, 0_turns ) ),</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>( std::max( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>, 0_turns ) ),</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a>( 0_turns ) {}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a20f5a91bffc2df46c97f0a370a0e4bd5"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">player_morale::morale_point::normalize_bonus</a></div><div class="ttdeci">int normalize_bonus(int bonus, int max_bonus, bool capped) const</div><div class="ttdoc">Returns normalized bonus if either max_bonus != 0 or capped == true.</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00236">morale.cpp:236</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a23775252200fae27e8e9b50c058009b0"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">player_morale::morale_point::decay_start</a></div><div class="ttdeci">time_duration decay_start</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00190">morale.h:190</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a46d34b7300cb045d9d48c21d844ddda0"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">player_morale::morale_point::duration</a></div><div class="ttdeci">time_duration duration</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00189">morale.h:189</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a99e68a4b48ad3c60b49c93e0e72edc77"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">player_morale::morale_point::age</a></div><div class="ttdeci">time_duration age</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00191">morale.h:191</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ac24a31282a48c2b42be125e3027728f4"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">player_morale::morale_point::type</a></div><div class="ttdeci">morale_type type</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00185">morale.h:185</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ac5d20f5a114b00574c674f8df34869c1"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">player_morale::morale_point::bonus</a></div><div class="ttdeci">int bonus</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00188">morale.h:188</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_af1016918cd3ae62a83197db7b8d209b4"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">player_morale::morale_point::subtype</a></div><div class="ttdeci">morale_subtype subtype</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00186">morale.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9122249feb7739f785fa7b4ab35dbb8e" name="a9122249feb7739f785fa7b4ab35dbb8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9122249feb7739f785fa7b4ab35dbb8e">&#9670;&nbsp;</a></span>add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>new_max_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>new_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtime__duration.html">time_duration</a>&#160;</td>
          <td class="paramname"><em>new_decay_start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>new_cap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00177">177</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>{</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    new_duration = std::max( 0_turns, new_duration );</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    new_decay_start = std::max( 0_turns, new_decay_start );</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span> </div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> same_sign = ( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> &gt; 0 ) == ( new_max_bonus &gt; 0 );</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordflow">if</span>( new_cap || new_duration == 0_turns ) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = new_duration;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = new_decay_start;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> = <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a>, new_duration, same_sign );</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> = <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">pick_time</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a>, new_decay_start, same_sign );</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    }</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordtype">int</span> sqrt_of_sum_of_squares;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    <span class="keywordflow">if</span>( new_cap || !same_sign ) {</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        <span class="comment">// If the morale bonus is capped apply the full bonus</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        <span class="comment">// This is because some morale types build up slowly to a cap over time (e.g. MORALE_WET)</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>        <span class="comment">// If the new bonus is opposing apply the full bonus</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>        sqrt_of_sum_of_squares = <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>() + new_bonus;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>        <span class="comment">// Otherwise use the sqrt of sum of squares to nerf stacking</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        sqrt_of_sum_of_squares = std::pow( <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>(), 2 ) + std::pow( new_bonus, 2 );</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>        sqrt_of_sum_of_squares = std::sqrt( sqrt_of_sum_of_squares );</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        sqrt_of_sum_of_squares *= <a class="code hl_function" href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    }</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span> </div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> = <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a20f5a91bffc2df46c97f0a370a0e4bd5">normalize_bonus</a>( sqrt_of_sum_of_squares, new_max_bonus, new_cap );</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> = 0_turns; <span class="comment">// Brand new. The assignment should stay below get_net_bonus() and pick_time().</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">player_morale::morale_point::get_net_bonus</a></div><div class="ttdeci">int get_net_bonus() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00138">morale.cpp:138</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a6ef866718bc7fe64a156cb6da468a38e"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a6ef866718bc7fe64a156cb6da468a38e">player_morale::morale_point::pick_time</a></div><div class="ttdeci">time_duration pick_time(const time_duration &amp;current_time, const time_duration &amp;new_time, bool same_sign) const</div><div class="ttdoc">Returns either new_time or remaining time (which one is greater).</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00210">morale.cpp:210</a></div></div>
<div class="ttc" id="aenums_8h_html_a89bed42d8e3efcd44570febc837f088e"><div class="ttname"><a href="enums_8h.html#a89bed42d8e3efcd44570febc837f088e">sgn</a></div><div class="ttdeci">constexpr int sgn(const T x)</div><div class="ttdef"><b>Definition:</b> <a href="enums_8h_source.html#l00008">enums.h:8</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00008">sgn()</a>.</p>

</div>
</div>
<a id="a14c641179a67888920e146a46dda5778" name="a14c641179a67888920e146a46dda5778"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c641179a67888920e146a46dda5778">&#9670;&nbsp;</a></span>decay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::decay </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>ticks</em> = <code>1_turns</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00226">226</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>{</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>    <span class="keywordflow">if</span>( ticks &lt; 0_turns ) {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>        <a class="code hl_define" href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a>( <span class="stringliteral">&quot;The function called with negative ticks %d.&quot;</span>, to_turns&lt;int&gt;( ticks ) );</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    }</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span> </div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> += ticks;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>}</div>
<div class="ttc" id="adebug_8h_html_a87e509562277a7ada3a75330d00cb445"><div class="ttname"><a href="debug_8h.html#a87e509562277a7ada3a75330d00cb445">debugmsg</a></div><div class="ttdeci">#define debugmsg(...)</div><div class="ttdoc">Debug message of level DL::Error and class DC::DebugMsg, also includes the source file name and line,...</div><div class="ttdef"><b>Definition:</b> <a href="debug_8h_source.html#l00074">debug.h:74</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="debug_8h_source.html#l00074">debugmsg</a>.</p>

</div>
</div>
<a id="a7b232a7203867729e593dfa03b3b6168" name="a7b232a7203867729e593dfa03b3b6168"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b232a7203867729e593dfa03b3b6168">&#9670;&nbsp;</a></span>deserialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::deserialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonIn.html">JsonIn</a> &amp;&#160;</td>
          <td class="paramname"><em>jsin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l03151">3151</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03152" name="l03152"></a><span class="lineno"> 3152</span>{</div>
<div class="line"><a id="l03153" name="l03153"></a><span class="lineno"> 3153</span>    <a class="code hl_class" href="classJsonObject.html">JsonObject</a> jo = jsin.<a class="code hl_function" href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">get_object</a>();</div>
<div class="line"><a id="l03154" name="l03154"></a><span class="lineno"> 3154</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">allow_omitted_members</a>();</div>
<div class="line"><a id="l03155" name="l03155"></a><span class="lineno"> 3155</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> );</div>
<div class="line"><a id="l03156" name="l03156"></a><span class="lineno"> 3156</span>    <span class="keywordflow">if</span>( !jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;subtype&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a> ) &amp;&amp; jo.<a class="code hl_function" href="classJsonObject.html#a19d83d03e3d5cc6905bcb850d80a1f05">has_string</a>( <span class="stringliteral">&quot;item_type&quot;</span> ) ) {</div>
<div class="line"><a id="l03157" name="l03157"></a><span class="lineno"> 3157</span>        <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a> = morale_subtype( *<a class="code hl_enumvalue" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>( jo.<a class="code hl_function" href="classJsonObject.html#a96b6d1b9cf7bda4fc9cd177a99e0631c">get_string</a>( <span class="stringliteral">&quot;item_type&quot;</span> ) ) );</div>
<div class="line"><a id="l03158" name="l03158"></a><span class="lineno"> 3158</span>    }</div>
<div class="line"><a id="l03159" name="l03159"></a><span class="lineno"> 3159</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;bonus&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a id="l03160" name="l03160"></a><span class="lineno"> 3160</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;duration&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> );</div>
<div class="line"><a id="l03161" name="l03161"></a><span class="lineno"> 3161</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;decay_start&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> );</div>
<div class="line"><a id="l03162" name="l03162"></a><span class="lineno"> 3162</span>    jo.<a class="code hl_function" href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">read</a>( <span class="stringliteral">&quot;age&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> );</div>
<div class="line"><a id="l03163" name="l03163"></a><span class="lineno"> 3163</span>}</div>
<div class="ttc" id="acata__variant_8h_html_adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c"><div class="ttname"><a href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">cata_variant_type::itype_id</a></div><div class="ttdeci">@ itype_id</div></div>
<div class="ttc" id="aclassJsonIn_html_af988f122efed0696d9d05f649e57c9b2"><div class="ttname"><a href="classJsonIn.html#af988f122efed0696d9d05f649e57c9b2">JsonIn::get_object</a></div><div class="ttdeci">JsonObject get_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01431">json.cpp:1431</a></div></div>
<div class="ttc" id="aclassJsonObject_html"><div class="ttname"><a href="classJsonObject.html">JsonObject</a></div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00827">json.h:828</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a19d83d03e3d5cc6905bcb850d80a1f05"><div class="ttname"><a href="classJsonObject.html#a19d83d03e3d5cc6905bcb850d80a1f05">JsonObject::has_string</a></div><div class="ttdeci">bool has_string(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00472">json.cpp:472</a></div></div>
<div class="ttc" id="aclassJsonObject_html_a96b6d1b9cf7bda4fc9cd177a99e0631c"><div class="ttname"><a href="classJsonObject.html#a96b6d1b9cf7bda4fc9cd177a99e0631c">JsonObject::get_string</a></div><div class="ttdeci">std::string get_string(const std::string &amp;name) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00381">json.cpp:381</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae00f195360e3783cf50527cf07344202"><div class="ttname"><a href="classJsonObject.html#ae00f195360e3783cf50527cf07344202">JsonObject::allow_omitted_members</a></div><div class="ttdeci">void allow_omitted_members() const</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l00150">json.cpp:150</a></div></div>
<div class="ttc" id="aclassJsonObject_html_ae66d47f9cb4993dfaf79819ec2aff2f8"><div class="ttname"><a href="classJsonObject.html#ae66d47f9cb4993dfaf79819ec2aff2f8">JsonObject::read</a></div><div class="ttdeci">bool read(const std::string &amp;name, T &amp;t, bool throw_on_error=true) const</div><div class="ttdef"><b>Definition:</b> <a href="json_8h_source.html#l00942">json.h:942</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l09991">item::age()</a>, <a class="el" href="json_8cpp_source.html#l00150">JsonObject::allow_omitted_members()</a>, <a class="el" href="json_8cpp_source.html#l01431">JsonIn::get_object()</a>, <a class="el" href="json_8cpp_source.html#l00381">JsonObject::get_string()</a>, <a class="el" href="json_8cpp_source.html#l00472">JsonObject::has_string()</a>, <a class="el" href="cata__variant_8h.html#adfe42687fffdd05d233096b4e7dac2f4a5b71ce78dc7a00ad2177c6655231928c">itype_id</a>, <a class="el" href="json_8h_source.html#l00942">JsonObject::read()</a>, and <a class="el" href="item_8h_source.html#l02157">item::type</a>.</p>

</div>
</div>
<a id="a67df996b30c476463cab5e8480637e7c" name="a67df996b30c476463cab5e8480637e7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67df996b30c476463cab5e8480637e7c">&#9670;&nbsp;</a></span>get_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string player_morale::morale_point::get_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00129">129</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>{</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>.<a class="code hl_function" href="classplayer__morale_1_1morale__subtype.html#ae36c9639249baed9e106c105d65ab664">has_description</a>() ) {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="classmorale__type__data.html#ae640222b62ada615951fc445433ed1d9">describe</a>( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>.<a class="code hl_function" href="classplayer__morale_1_1morale__subtype.html#a5959b3643e1f444959c11c0b8dc6b709">describe</a>() );</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>.<a class="code hl_function" href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">obj</a>().<a class="code hl_function" href="classmorale__type__data.html#ae640222b62ada615951fc445433ed1d9">describe</a>();</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>}</div>
<div class="ttc" id="aclassmorale__type__data_html_ae640222b62ada615951fc445433ed1d9"><div class="ttname"><a href="classmorale__type__data.html#ae640222b62ada615951fc445433ed1d9">morale_type_data::describe</a></div><div class="ttdeci">std::string describe() const</div><div class="ttdoc">Describes this morale type without replacing anything.</div><div class="ttdef"><b>Definition:</b> <a href="morale__types_8cpp_source.html#l00137">morale_types.cpp:137</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__subtype_html_a5959b3643e1f444959c11c0b8dc6b709"><div class="ttname"><a href="classplayer__morale_1_1morale__subtype.html#a5959b3643e1f444959c11c0b8dc6b709">player_morale::morale_subtype::describe</a></div><div class="ttdeci">std::string describe() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l01185">morale.cpp:1185</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__subtype_html_ae36c9639249baed9e106c105d65ab664"><div class="ttname"><a href="classplayer__morale_1_1morale__subtype.html#ae36c9639249baed9e106c105d65ab664">player_morale::morale_subtype::has_description</a></div><div class="ttdeci">bool has_description() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l01178">morale.cpp:1178</a></div></div>
<div class="ttc" id="aclassstring__id_html_a4796245d3cd6e0283670698a98d46ae9"><div class="ttname"><a href="classstring__id.html#a4796245d3cd6e0283670698a98d46ae9">string_id::obj</a></div><div class="ttdeci">const T &amp; obj() const</div><div class="ttdoc">Returns the actual object this id refers to.</div><div class="ttdef"><b>Definition:</b> <a href="achievement_8cpp_source.html#l00058">achievement.cpp:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="morale_8cpp_source.html#l01185">player_morale::morale_subtype::describe()</a>, <a class="el" href="morale__types_8cpp_source.html#l00137">morale_type_data::describe()</a>, <a class="el" href="morale_8cpp_source.html#l01178">player_morale::morale_subtype::has_description()</a>, <a class="el" href="achievement_8cpp_source.html#l00058">string_id&lt; T &gt;::obj()</a>, <a class="el" href="morale_8h_source.html#l00186">subtype</a>, and <a class="el" href="morale_8h_source.html#l00185">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00533">player_morale::display()</a>.</p>

</div>
</div>
<a id="a330ab9c93eaa4e54fe4a4d5c9d4ad8f7" name="a330ab9c93eaa4e54fe4a4d5c9d4ad8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">&#9670;&nbsp;</a></span>get_net_bonus() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::get_net_bonus </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00138">138</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>{</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> * ( ( !<a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a>() &amp;&amp; <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> &gt; <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> ) ?</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                     <a class="code hl_function" href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a>( to_turns&lt;int&gt;( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> ), to_turns&lt;int&gt;( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> ),</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                                        to_turns&lt;int&gt;( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> ) ) : 1 );</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>}</div>
<div class="ttc" id="acata__utility_8cpp_html_a6a85dc6d2ab7bcb093e77d20fcf171d6"><div class="ttname"><a href="cata__utility_8cpp.html#a6a85dc6d2ab7bcb093e77d20fcf171d6">logarithmic_range</a></div><div class="ttdeci">double logarithmic_range(int min, int max, int pos)</div><div class="ttdoc">Normalized logistic function.</div><div class="ttdef"><b>Definition:</b> <a href="cata__utility_8cpp_source.html#l00073">cata_utility.cpp:73</a></div></div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_a74e16ced4b22de1de4359528ac24fa06"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">player_morale::morale_point::is_permanent</a></div><div class="ttdeci">bool is_permanent() const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8cpp_source.html#l00156">morale.cpp:156</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cata__utility_8cpp_source.html#l00073">logarithmic_range()</a>.</p>

</div>
</div>
<a id="a67d0648bd3dbc7ab850f0b8056442bcd" name="a67d0648bd3dbc7ab850f0b8056442bcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67d0648bd3dbc7ab850f0b8056442bcd">&#9670;&nbsp;</a></span>get_net_bonus() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::get_net_bonus </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structmorale__mult.html">morale_mult</a> &amp;&#160;</td>
          <td class="paramname"><em>mult</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00145">145</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>{</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a330ab9c93eaa4e54fe4a4d5c9d4ad8f7">get_net_bonus</a>() * mult;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ade62c18d4c3c5fca64a0fa4a5f2434d3" name="ade62c18d4c3c5fca64a0fa4a5f2434d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade62c18d4c3c5fca64a0fa4a5f2434d3">&#9670;&nbsp;</a></span>get_percent_contribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double player_morale::morale_point::get_percent_contribution </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00222">222</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>{</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a>;</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__point_html_ab454dabbae99a91652b1e0962ac4eeab"><div class="ttname"><a href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">player_morale::morale_point::percent_contribution</a></div><div class="ttdeci">double percent_contribution</div><div class="ttdoc">this point's percent contribution to the total positive or total negative morale effect</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00195">morale.h:195</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00533">player_morale::display()</a>.</p>

</div>
</div>
<a id="ab777c9c77b12098e64d09625e1f1f082" name="ab777c9c77b12098e64d09625e1f1f082"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab777c9c77b12098e64d09625e1f1f082">&#9670;&nbsp;</a></span>is_expired()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::is_expired </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00150">150</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>{</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    <span class="comment">// Zero morale bonuses will be shown occasionally anyway</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    <span class="keywordflow">return</span> ( !<a class="code hl_function" href="classplayer__morale_1_1morale__point.html#a74e16ced4b22de1de4359528ac24fa06">is_permanent</a>() &amp;&amp; <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> &gt;= <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> ) || <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> == 0;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00302">player_morale::add()</a>, and <a class="el" href="morale_8cpp_source.html#l00415">player_morale::remove_expired()</a>.</p>

</div>
</div>
<a id="a74e16ced4b22de1de4359528ac24fa06" name="a74e16ced4b22de1de4359528ac24fa06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74e16ced4b22de1de4359528ac24fa06">&#9670;&nbsp;</a></span>is_permanent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::is_permanent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00156">156</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>{</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="keywordflow">return</span> ( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> == 0_turns );</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="abf6d229f81bc75e89c7b53c90a9a6b5c" name="abf6d229f81bc75e89c7b53c90a9a6b5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf6d229f81bc75e89c7b53c90a9a6b5c">&#9670;&nbsp;</a></span>matches() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a> &amp;&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00172">172</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>{</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> == mp.type &amp;&amp; <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>.<a class="code hl_function" href="classplayer__morale_1_1morale__subtype.html#a82873dd774051b9913aa82e4c1627988">matches</a>( mp.subtype );</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>}</div>
<div class="ttc" id="aclassplayer__morale_1_1morale__subtype_html_a82873dd774051b9913aa82e4c1627988"><div class="ttname"><a href="classplayer__morale_1_1morale__subtype.html#a82873dd774051b9913aa82e4c1627988">player_morale::morale_subtype::matches</a></div><div class="ttdeci">bool matches(const morale_subtype &amp;other) const</div><div class="ttdef"><b>Definition:</b> <a href="morale_8h_source.html#l00115">morale.h:115</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="morale_8h_source.html#l00186">subtype</a>, <a class="el" href="enums_8h_source.html#l00075">type</a>, and <a class="el" href="morale_8h_source.html#l00185">type</a>.</p>

</div>
</div>
<a id="a22bfdd368cbead26d40ffc1fca5573c0" name="a22bfdd368cbead26d40ffc1fca5573c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bfdd368cbead26d40ffc1fca5573c0">&#9670;&nbsp;</a></span>matches() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>_type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00408">player_morale::remove()</a>.</p>

</div>
</div>
<a id="a9fea74c03c65593c8c94bb64bbb70611" name="a9fea74c03c65593c8c94bb64bbb70611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fea74c03c65593c8c94bb64bbb70611">&#9670;&nbsp;</a></span>matches() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a> &amp;&#160;</td>
          <td class="paramname"><em>_subtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00166">166</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>{</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    <span class="keywordflow">return</span> _type == <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> &amp;&amp; <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a>.<a class="code hl_function" href="classplayer__morale_1_1morale__subtype.html#a82873dd774051b9913aa82e4c1627988">matches</a>( _subtype );</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00075">type</a>.</p>

</div>
</div>
<a id="a20f5a91bffc2df46c97f0a370a0e4bd5" name="a20f5a91bffc2df46c97f0a370a0e4bd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20f5a91bffc2df46c97f0a370a0e4bd5">&#9670;&nbsp;</a></span>normalize_bonus()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::normalize_bonus </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_bonus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>capped</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns normalized bonus if either max_bonus != 0 or capped == true. </p>

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00236">236</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>{</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    <span class="keywordflow">return</span> ( ( std::abs( <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> ) &gt; std::abs( max_bonus ) &amp;&amp; ( max_bonus != 0 ||</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>               capped ) ) ? max_bonus : <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ef866718bc7fe64a156cb6da468a38e" name="a6ef866718bc7fe64a156cb6da468a38e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ef866718bc7fe64a156cb6da468a38e">&#9670;&nbsp;</a></span>pick_time()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::pick_time </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>current_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classtime__duration.html">time_duration</a> &amp;&#160;</td>
          <td class="paramname"><em>new_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>same_sign</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns either new_time or remaining time (which one is greater). </p>
<p >Only returns new time if same_sign is true </p>

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00210">210</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>{</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>    <span class="keyword">const</span> <a class="code hl_class" href="classtime__duration.html">time_duration</a> remaining_time = current_time - <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a>;</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>    <span class="keywordflow">return</span> ( remaining_time &lt;= new_time &amp;&amp; same_sign ) ? new_time : remaining_time;</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>}</div>
<div class="ttc" id="aclasstime__duration_html"><div class="ttname"><a href="classtime__duration.html">time_duration</a></div><div class="ttdoc">A duration defined as a number of specific time units.</div><div class="ttdef"><b>Definition:</b> <a href="calendar_8h_source.html#l00179">calendar.h:180</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae63c7a703db4c64e104cf511df07e746" name="ae63c7a703db4c64e104cf511df07e746"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63c7a703db4c64e104cf511df07e746">&#9670;&nbsp;</a></span>serialize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::serialize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classJsonOut.html">JsonOut</a> &amp;&#160;</td>
          <td class="paramname"><em>json</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="savegame__json_8cpp_source.html#l03165">3165</a> of file <a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l03166" name="l03166"></a><span class="lineno"> 3166</span>{</div>
<div class="line"><a id="l03167" name="l03167"></a><span class="lineno"> 3167</span>    json.<a class="code hl_function" href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">start_object</a>();</div>
<div class="line"><a id="l03168" name="l03168"></a><span class="lineno"> 3168</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;type&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a> );</div>
<div class="line"><a id="l03169" name="l03169"></a><span class="lineno"> 3169</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;subtype&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#af1016918cd3ae62a83197db7b8d209b4">subtype</a> );</div>
<div class="line"><a id="l03170" name="l03170"></a><span class="lineno"> 3170</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;bonus&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac5d20f5a114b00574c674f8df34869c1">bonus</a> );</div>
<div class="line"><a id="l03171" name="l03171"></a><span class="lineno"> 3171</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;duration&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a46d34b7300cb045d9d48c21d844ddda0">duration</a> );</div>
<div class="line"><a id="l03172" name="l03172"></a><span class="lineno"> 3172</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;decay_start&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a23775252200fae27e8e9b50c058009b0">decay_start</a> );</div>
<div class="line"><a id="l03173" name="l03173"></a><span class="lineno"> 3173</span>    json.<a class="code hl_function" href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">member</a>( <span class="stringliteral">&quot;age&quot;</span>, <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#a99e68a4b48ad3c60b49c93e0e72edc77">age</a> );</div>
<div class="line"><a id="l03174" name="l03174"></a><span class="lineno"> 3174</span>    json.<a class="code hl_function" href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">end_object</a>();</div>
<div class="line"><a id="l03175" name="l03175"></a><span class="lineno"> 3175</span>}</div>
<div class="ttc" id="aclassJsonOut_html_a4756f9a569adbfc60de127f7c335d82f"><div class="ttname"><a href="classJsonOut.html#a4756f9a569adbfc60de127f7c335d82f">JsonOut::start_object</a></div><div class="ttdeci">void start_object(bool wrap=false)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l01998">json.cpp:1998</a></div></div>
<div class="ttc" id="aclassJsonOut_html_aa38d37840ed6ba168b78a43570e98681"><div class="ttname"><a href="classJsonOut.html#aa38d37840ed6ba168b78a43570e98681">JsonOut::end_object</a></div><div class="ttdeci">void end_object()</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02009">json.cpp:2009</a></div></div>
<div class="ttc" id="aclassJsonOut_html_adb3c899f0ad7fc4f25cd3357c51a2c42"><div class="ttname"><a href="classJsonOut.html#adb3c899f0ad7fc4f25cd3357c51a2c42">JsonOut::member</a></div><div class="ttdeci">void member(const std::string &amp;name)</div><div class="ttdef"><b>Definition:</b> <a href="json_8cpp_source.html#l02113">json.cpp:2113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="item_8cpp_source.html#l09991">item::age()</a>, <a class="el" href="json_8cpp_source.html#l02009">JsonOut::end_object()</a>, <a class="el" href="json_8cpp_source.html#l02113">JsonOut::member()</a>, <a class="el" href="json_8cpp_source.html#l01998">JsonOut::start_object()</a>, and <a class="el" href="item_8h_source.html#l02157">item::type</a>.</p>

</div>
</div>
<a id="a34e615da345ee07df4d42a22e88a39c8" name="a34e615da345ee07df4d42a22e88a39c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34e615da345ee07df4d42a22e88a39c8">&#9670;&nbsp;</a></span>set_percent_contribution()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void player_morale::morale_point::set_percent_contribution </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>contribution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00217">217</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>{</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ab454dabbae99a91652b1e0962ac4eeab">percent_contribution</a> = contribution;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ab636bc6bcb57db62f22d95b8c171a38b" name="ab636bc6bcb57db62f22d95b8c171a38b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab636bc6bcb57db62f22d95b8c171a38b">&#9670;&nbsp;</a></span>type_matches()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool player_morale::morale_point::type_matches </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> &amp;&#160;</td>
          <td class="paramname"><em>_type</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8cpp_source.html#l00161">161</a> of file <a class="el" href="morale_8cpp_source.html">morale.cpp</a>.</p>
<div class="fragment"><div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>{</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    <span class="keywordflow">return</span> _type == <a class="code hl_variable" href="classplayer__morale_1_1morale__point.html#ac24a31282a48c2b42be125e3027728f4">type</a>;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="enums_8h_source.html#l00075">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00401">player_morale::remove()</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a99e68a4b48ad3c60b49c93e0e72edc77" name="a99e68a4b48ad3c60b49c93e0e72edc77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99e68a4b48ad3c60b49c93e0e72edc77">&#9670;&nbsp;</a></span>age</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::age = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00191">191</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="ac5d20f5a114b00574c674f8df34869c1" name="ac5d20f5a114b00574c674f8df34869c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5d20f5a114b00574c674f8df34869c1">&#9670;&nbsp;</a></span>bonus</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int player_morale::morale_point::bonus = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00188">188</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="a23775252200fae27e8e9b50c058009b0" name="a23775252200fae27e8e9b50c058009b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23775252200fae27e8e9b50c058009b0">&#9670;&nbsp;</a></span>decay_start</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::decay_start = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00190">190</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="a46d34b7300cb045d9d48c21d844ddda0" name="a46d34b7300cb045d9d48c21d844ddda0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46d34b7300cb045d9d48c21d844ddda0">&#9670;&nbsp;</a></span>duration</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classtime__duration.html">time_duration</a> player_morale::morale_point::duration = 0_turns</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00189">189</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="ab454dabbae99a91652b1e0962ac4eeab" name="ab454dabbae99a91652b1e0962ac4eeab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab454dabbae99a91652b1e0962ac4eeab">&#9670;&nbsp;</a></span>percent_contribution</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double player_morale::morale_point::percent_contribution = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this point's percent contribution to the total positive or total negative morale effect </p>

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00195">195</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

</div>
</div>
<a id="af1016918cd3ae62a83197db7b8d209b4" name="af1016918cd3ae62a83197db7b8d209b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1016918cd3ae62a83197db7b8d209b4">&#9670;&nbsp;</a></span>subtype</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classplayer__morale_1_1morale__subtype.html">morale_subtype</a> player_morale::morale_point::subtype</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00186">186</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00129">get_name()</a>, and <a class="el" href="morale_8cpp_source.html#l00172">matches()</a>.</p>

</div>
</div>
<a id="ac24a31282a48c2b42be125e3027728f4" name="ac24a31282a48c2b42be125e3027728f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac24a31282a48c2b42be125e3027728f4">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="type__id_8h.html#a2ed0f2b9269cbadc0e6d015c4fb4a1b0">morale_type</a> player_morale::morale_point::type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="morale_8h_source.html#l00185">185</a> of file <a class="el" href="morale_8h_source.html">morale.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="morale_8cpp_source.html#l00129">get_name()</a>, and <a class="el" href="morale_8cpp_source.html#l00172">matches()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="morale_8h_source.html">morale.h</a></li>
<li>src/<a class="el" href="morale_8cpp_source.html">morale.cpp</a></li>
<li>src/<a class="el" href="savegame__json_8cpp_source.html">savegame_json.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classplayer__morale.html">player_morale</a></li><li class="navelem"><a class="el" href="classplayer__morale_1_1morale__point.html">morale_point</a></li>
    <li class="footer">Generated on Mon Mar 13 2023 16:24:00 for Cataclysm BN by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
